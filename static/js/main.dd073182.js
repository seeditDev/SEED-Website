/*! For license information please see main.dd073182.js.LICENSE.txt */
(()=>{var e={557:function(e,t,n){var r;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof this||("undefined"!==typeof window?window:"undefined"!==typeof self?self:n.g),r=function(e){return function(){"use strict";var t={172:function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CellHookData=t.HookData=void 0;var r=function(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.pageCount=this.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()};t.HookData=r;var i=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,n,o)||this;return s.cell=r,s.row=i,s.column=a,s.section=i.section,s}return n(t,e),t}(r);t.CellHookData=i},340:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(136),a=n(744),o=n(776),s=n(664),l=n(972);t.default=function(e){e.API.autoTable=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];1===t.length?e=t[0]:(console.error("Use of deprecated autoTable initiation"),(e=t[2]||{}).columns=t[0],e.body=t[1]);var r=(0,o.parseInput)(this,e),i=(0,l.createTable)(this,r);return(0,s.drawTable)(this,i),this},e.API.lastAutoTable=!1,e.API.previousAutoTable=!1,e.API.autoTable.previous=!1,e.API.autoTableText=function(e,t,n,r){(0,i.default)(e,t,n,r,this)},e.API.autoTableSetDefaults=function(e){return a.DocHandler.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){a.DocHandler.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var n;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new a.DocHandler(this),o=(0,r.parseHtml)(i,e,window,t,!1),s=o.head,l=o.body;return{columns:(null===(n=s[0])||void 0===n?void 0:n.map(function(e){return e.content}))||[],rows:l,data:l}},e.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var e=this.lastAutoTable;return e&&e.finalY?e.finalY:0},e.API.autoTableAddPageContent=function(t){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),e.API.autoTable.globalDefaults||(e.API.autoTable.globalDefaults={}),e.API.autoTable.globalDefaults.addPageContent=t,this},e.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}},136:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){r=r||{};var a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,s=o*(i.getLineHeightFactor?i.getLineHeightFactor():1.15),l="",c=1;if("middle"!==r.valign&&"bottom"!==r.valign&&"center"!==r.halign&&"right"!==r.halign||(c=(l="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),n+=o*(2-1.15),"middle"===r.valign?n-=c/2*s:"bottom"===r.valign&&(n-=c*s),"center"===r.halign||"right"===r.halign){var u=o;if("center"===r.halign&&(u*=.5),l&&c>=1){for(var h=0;h<l.length;h++)i.text(l[h],t-i.getStringUnitWidth(l[h])*u,n),n+=s;return i}t-=i.getStringUnitWidth(e)*u}return"justify"===r.halign?i.text(e,t,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(e,t,n),i}},420:function(e,t){function n(e,t){var n=e>0,r=t||0===t;return n&&r?"DF":n?"S":r?"F":null}function r(e,t){var n,r,i,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(n=e.left)&&void 0!==n?n:t,top:null!==(r=e.top)&&void 0!==r?r:t,right:null!==(i=e.right)&&void 0!==i?i:t,bottom:null!==(a=e.bottom)&&void 0!==a?a:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPageAvailableWidth=t.parseSpacing=t.getFillStyle=t.addTableBorder=t.getStringWidth=void 0,t.getStringWidth=function(e,t,n){return n.applyStyles(t,!0),(Array.isArray(e)?e:[e]).map(function(e){return n.getTextWidth(e)}).reduce(function(e,t){return Math.max(e,t)},0)},t.addTableBorder=function(e,t,r,i){var a=t.settings.tableLineWidth,o=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:o});var s=n(a,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),i.y-r.y,s)},t.getFillStyle=n,t.parseSpacing=r,t.getPageAvailableWidth=function(e,t){var n=r(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}},796:function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.getTheme=t.defaultStyles=t.HtmlRowInput=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._element=t,n}return n(t,e),t}(Array);t.HtmlRowInput=r,t.defaultStyles=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}},t.getTheme=function(e){return{striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[e]}},903:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCss=void 0;var r=n(420);function i(e,t){var n=a(e,t);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return 0===parseInt(r[4])||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function a(e,t){var n=t(e);return"rgba(0, 0, 0, 0)"===n||"transparent"===n||"initial"===n||"inherit"===n?null==e.parentElement?null:a(e.parentElement,t):n}t.parseCss=function(e,t,n,a,o){var s={},l=96/72,c=i(t,function(e){return o.getComputedStyle(e).backgroundColor});null!=c&&(s.fillColor=c);var u=i(t,function(e){return o.getComputedStyle(e).color});null!=u&&(s.textColor=u);var h=function(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],i=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,o=n.map(function(e){return parseInt(e||"0")/i}),s=(0,r.parseSpacing)(o,0);return a>s.top&&(s.top=a),a>s.bottom&&(s.bottom=a),s}(a,n);h&&(s.cellPadding=h);var d="borderTopColor",f=l*n,p=a.borderTopWidth;if(a.borderBottomWidth===p&&a.borderRightWidth===p&&a.borderLeftWidth===p){var m=(parseFloat(p)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/f,right:(parseFloat(a.borderRightWidth)||0)/f,bottom:(parseFloat(a.borderBottomWidth)||0)/f,left:(parseFloat(a.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=i(t,function(e){return o.getComputedStyle(e)[d]});null!=g&&(s.lineColor=g);var v=["left","right","center","justify"];-1!==v.indexOf(a.textAlign)&&(s.halign=a.textAlign),-1!==(v=["middle","bottom","top"]).indexOf(a.verticalAlign)&&(s.valign=a.verticalAlign);var y=parseInt(a.fontSize||"");isNaN(y)||(s.fontSize=y/l);var b=function(e){var t="";return("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold"),"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic"),t}(a);b&&(s.fontStyle=b);var x=(a.fontFamily||"").toLowerCase();return-1!==e.indexOf(x)&&(s.font=x),s}},744:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DocHandler=void 0;var n={},r=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:n=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,n){var r,i,a;void 0===n&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,l=o.fontName;if(t.font&&(l=t.font),t.fontStyle){s=t.fontStyle;var c=this.getFontList()[l];c&&-1===c.indexOf(s)&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(c[0]),s=c[0])}if(this.jsPDFDocument.setFont(l,s),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var u=e.unifyColor(t.fillColor);u&&(r=this.jsPDFDocument).setFillColor.apply(r,u),(u=e.unifyColor(t.textColor))&&(i=this.jsPDFDocument).setTextColor.apply(i,u),(u=e.unifyColor(t.lineColor))&&(a=this.jsPDFDocument).setDrawColor.apply(a,u),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},e.prototype.rect=function(e,t,n,r,i){return this.jsPDFDocument.rect(e,t,n,r,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return n||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}();t.DocHandler=r},4:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseHtml=void 0;var r=n(903),i=n(796);function a(e,t,n,a,s,l){for(var c=new i.HtmlRowInput(a),u=0;u<a.cells.length;u++){var h=a.cells[u],d=n.getComputedStyle(h);if(s||"none"!==d.display){var f=void 0;l&&(f=(0,r.parseCss)(e,h,t,d,n)),c.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:f,_element:h,content:o(h)})}}var p=n.getComputedStyle(a);if(c.length>0&&(s||"none"!==p.display))return c}function o(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join("\n"),t.innerText||t.textContent||""}t.parseHtml=function(e,t,n,r,i){var o,s,l;void 0===r&&(r=!1),void 0===i&&(i=!1),l="string"===typeof t?n.document.querySelector(t):t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),h=[],d=[],f=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:h,body:d,foot:f};for(var p=0;p<l.rows.length;p++){var m=l.rows[p],g=null===(s=null===(o=null===m||void 0===m?void 0:m.parentElement)||void 0===o?void 0:o.tagName)||void 0===s?void 0:s.toLowerCase(),v=a(c,u,n,m,r,i);v&&("thead"===g?h.push(v):"tfoot"===g?f.push(v):d.push(v))}return{head:h,body:d,foot:f}}},776:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseInput=void 0;var r=n(4),i=n(356),a=n(420),o=n(744),s=n(792);t.parseInput=function(e,t){var n=new o.DocHandler(e),l=n.getDocumentOptions(),c=n.getGlobalOptions();(0,s.default)(n,c,l,t);var u,h=(0,i.assign)({},c,l,t);"undefined"!==typeof window&&(u=window);var d=function(e,t,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(a){if("columnStyles"===a){var o=e[a],s=t[a],l=n[a];r.columnStyles=(0,i.assign)({},o,s,l)}else{var c=[e,t,n].map(function(e){return e[a]||{}});r[a]=(0,i.assign)({},c[0],c[1],c[2])}},o=0,s=Object.keys(r);o<s.length;o++)a(s[o]);return r}(c,l,t),f=function(e,t,n){for(var r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,a=[e,t,n];i<a.length;i++){var o=a[i];o.didParseCell&&r.didParseCell.push(o.didParseCell),o.willDrawCell&&r.willDrawCell.push(o.willDrawCell),o.didDrawCell&&r.didDrawCell.push(o.didDrawCell),o.willDrawPage&&r.willDrawPage.push(o.willDrawPage),o.didDrawPage&&r.didDrawPage.push(o.didDrawPage)}return r}(c,l,t),p=function(e,t){var n,r,i,o,s,l,c,u,h,d,f,p,m,g,v=(0,a.parseSpacing)(t.margin,40/e.scaleFactor()),y=null!==(n=function(e,t){var n=e.getLastAutoTable(),r=e.scaleFactor(),i=e.pageNumber(),a=!1;return n&&n.startPageNumber&&(a=n.startPageNumber+n.pageNumber-1===i),"number"===typeof t?t:null!=t&&!1!==t||!a||null==(null===n||void 0===n?void 0:n.finalY)?null:n.finalY+20/r}(e,t.startY))&&void 0!==n?n:v.top;m=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(r=t.showFoot)&&void 0!==r?r:"everyPage",g=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(i=t.showHead)&&void 0!==i?i:"everyPage";var b=null!==(o=t.useCss)&&void 0!==o&&o,x=t.theme||(b?"plain":"striped"),w=!!t.horizontalPageBreak,S=null!==(s=t.horizontalPageBreakRepeat)&&void 0!==s?s:null;return{includeHiddenHtml:null!==(l=t.includeHiddenHtml)&&void 0!==l&&l,useCss:b,theme:x,startY:y,margin:v,pageBreak:null!==(c=t.pageBreak)&&void 0!==c?c:"auto",rowPageBreak:null!==(u=t.rowPageBreak)&&void 0!==u?u:"auto",tableWidth:null!==(h=t.tableWidth)&&void 0!==h?h:"auto",showHead:g,showFoot:m,tableLineWidth:null!==(d=t.tableLineWidth)&&void 0!==d?d:0,tableLineColor:null!==(f=t.tableLineColor)&&void 0!==f?f:200,horizontalPageBreak:w,horizontalPageBreakRepeat:S,horizontalPageBreakBehaviour:null!==(p=t.horizontalPageBreakBehaviour)&&void 0!==p?p:"afterAllRows"}}(n,h),m=function(e,t,n){var i=t.head||[],a=t.body||[],o=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(n){var l=(0,r.parseHtml)(e,t.html,n,s,t.useCss)||{};i=l.head||i,a=l.body||i,o=l.foot||i}else console.error("Cannot parse html in non browser environment")}var c=t.columns||function(e,t,n){var r=e[0]||t[0]||n[0]||[],i=[];return Object.keys(r).filter(function(e){return"_element"!==e}).forEach(function(e){var t,n=1;"object"!==typeof(t=Array.isArray(r)?r[parseInt(e)]:r[e])||Array.isArray(t)||(n=(null===t||void 0===t?void 0:t.colSpan)||1);for(var a=0;a<n;a++){var o={dataKey:Array.isArray(r)?i.length:e+(a>0?"_".concat(a):"")};i.push(o)}}),i}(i,a,o);return{columns:c,head:i,body:a,foot:o}}(n,h,u);return{id:t.tableId,content:m,hooks:f,styles:d,settings:p}}},792:function(e,t){function n(e){e.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),e.minCellHeight||(e.minCellHeight=e.rowHeight)):e.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),e.cellWidth||(e.cellWidth=e.columnWidth))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i){for(var a=function(t){t&&"object"!==typeof t&&console.error("The options parameter should be of type object, is: "+typeof t),"undefined"!==typeof t.extendWidth&&(t.tableWidth=t.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),"undefined"!==typeof t.margins&&("undefined"===typeof t.margin&&(t.margin=t.margins),console.error("Use of deprecated option: margins, use margin instead.")),t.startY&&"number"!==typeof t.startY&&(console.error("Invalid value for startY option",t.startY),delete t.startY),!t.didDrawPage&&(t.afterPageContent||t.beforePageContent||t.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),t.didDrawPage=function(n){e.applyStyles(e.userStyles),t.beforePageContent&&t.beforePageContent(n),e.applyStyles(e.userStyles),t.afterPageContent&&t.afterPageContent(n),e.applyStyles(e.userStyles),t.afterPageAdd&&n.pageNumber>1&&n.afterPageAdd(n),e.applyStyles(e.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(e){t[e]&&console.error('The "'.concat(e,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(e){var n=e[0],r=e[1];t[r]&&(console.error("Use of deprecated option ".concat(r,". Use ").concat(n," instead")),t[n]=t[r])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(e){var n="string"===typeof e?e:e[0],r="string"===typeof e?e:e[1];"undefined"!==typeof t[n]&&("undefined"===typeof t.styles[r]&&(t.styles[r]=t[n]),console.error("Use of deprecated option: "+n+", use the style "+r+" instead."))});for(var r=0,i=["styles","bodyStyles","headStyles","footStyles"];r<i.length;r++)n(t[i[r]]||{});for(var a=t.columnStyles||{},o=0,s=Object.keys(a);o<s.length;o++)n(a[s[o]]||{})},o=0,s=[t,r,i];o<s.length;o++)a(s[o])}},260:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Column=t.Cell=t.Row=t.Table=void 0;var r=n(796),i=n(172),a=n(420),o=function(){function e(e,t){this.pageNumber=1,this.pageCount=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,n,r,a,o){for(var s=0,l=t;s<l.length;s++){var c=!1===(0,l[s])(new i.CellHookData(e,this,n,r,a,o));if(n.text=Array.isArray(n.text)?n.text:[n.text],c)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,r=this.hooks.didDrawPage;n<r.length;n++)(0,r[n])(new i.HookData(e,this,t))},e.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,r=this.hooks.willDrawPage;n<r.length;n++)(0,r[n])(new i.HookData(e,this,t))},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(e,t){return e+t.wrappedWidth},0);var t=this.settings.margin;return e-t.left-t.right},e}();t.Table=o;var s=function(){function e(e,t,n,i,a){void 0===a&&(a=!1),this.height=0,this.raw=e,e instanceof r.HtmlRowInput&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=i,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(e,n){var r;return Math.max(e,(null===(r=t.cells[n.index])||void 0===r?void 0:r.height)||0)},0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(e){var n=t.cells[e.index];return!!n&&n.rowSpan>1}).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(e,r){var i=n.cells[r.index];if(!i)return 0;var a=t.getLineHeight(i.styles.fontSize),o=i.padding("vertical")+a;return o>e?o:e},0)},e}();t.Row=s;var l=function(){function e(e,t,n){var r,i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var a=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=null!==(i=null!==(r=e.content)&&void 0!==r?r:e.title)&&void 0!==i?i:e,e._element&&(this.raw=e._element));var o=null!=a?""+a:"";this.text=o.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var r=this.width-this.padding("horizontal");t=this.x+r/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var n=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(n,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=(0,a.parseSpacing)(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}();t.Cell=l;var c=function(){function e(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,r=e.allRows();n<r.length;n++){var i=r[n].cells[this.index];i&&"number"===typeof i.styles.cellWidth&&(t=Math.max(t,i.styles.cellWidth))}return t},e}();t.Column=c},356:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.assign=void 0,t.assign=function(e,t,n,r,i){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),o=1;o<arguments.length;o++){var s=arguments[o];if(null!=s)for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])}return a}},972:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createTable=void 0;var r=n(744),i=n(260),a=n(324),o=n(796),s=n(356);function l(e,t,n,r,a,o){var s={};return t.map(function(t,l){for(var c=0,h={},d=0,f=0,p=0,m=n;p<m.length;p++){var g=m[p];if(null==s[g.index]||0===s[g.index].left)if(0===f){var v=void 0,y={};"object"!==typeof(v=Array.isArray(t)?t[g.index-d-c]:t[g.dataKey])||Array.isArray(v)||(y=(null===v||void 0===v?void 0:v.styles)||{});var b=u(e,g,l,a,r,o,y),x=new i.Cell(v,b,e);h[g.dataKey]=x,h[g.index]=x,f=x.colSpan-1,s[g.index]={left:x.rowSpan-1,times:f}}else f--,d++;else s[g.index].left--,f=s[g.index].times,c++}return new i.Row(t,l,e,h)})}function c(e,t){var n={};return e.forEach(function(e){if(null!=e.raw){var r=function(e,t){if("head"===e){if("object"===typeof t)return t.header||t.title||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=r&&(n[e.dataKey]=r)}}),Object.keys(n).length>0?n:null}function u(e,t,n,r,i,a,l){var c,u=(0,o.getTheme)(r);"head"===e?c=i.headStyles:"body"===e?c=i.bodyStyles:"foot"===e&&(c=i.footStyles);var h=(0,s.assign)({},u.table,u[e],i.styles,c),d=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},f="body"===e?d:{},p="body"===e&&n%2===0?(0,s.assign)({},u.alternateRow,i.alternateRowStyles):{},m=(0,o.defaultStyles)(a),g=(0,s.assign)({},m,h,p,f);return(0,s.assign)(g,l)}t.createTable=function(e,t){var n=new r.DocHandler(e),o=function(e,t){var n,r=e.content,a=function(e){return e.map(function(e,t){var n,r,a;return a="object"===typeof e&&null!==(r=null!==(n=e.dataKey)&&void 0!==n?n:e.key)&&void 0!==r?r:t,new i.Column(a,e,t)})}(r.columns);(0===r.head.length&&(n=c(a,"head"))&&r.head.push(n),0===r.foot.length)&&((n=c(a,"foot"))&&r.foot.push(n));var o=e.settings.theme,s=e.styles;return{columns:a,head:l("head",r.head,a,s,o,t),body:l("body",r.body,a,s,o,t),foot:l("foot",r.foot,a,s,o,t)}}(t,n.scaleFactor()),s=new i.Table(t,o);return(0,a.calculateWidths)(n,s),n.applyStyles(n.userStyles),s}},664:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.addPage=t.drawTable=void 0;var r=n(420),i=n(260),a=n(744),o=n(356),s=n(136),l=n(224);function c(e,t,n,r){var i=t.settings;e.applyStyles(e.userStyles),"firstPage"!==i.showHead&&"everyPage"!==i.showHead||t.head.forEach(function(i){return p(e,t,i,n,r)})}function u(e,t,n,r,i,a){e.applyStyles(e.userStyles),a=null!==a&&void 0!==a?a:t.body.length;var o=Math.min(n+a,t.body.length),s=-1;return t.body.slice(n,o).forEach(function(a,o){var l=n+o===t.body.length-1,c=g(e,t,l,r);a.canEntireRowFit(c,i)&&(p(e,t,a,r,i),s=n+o)}),s}function h(e,t,n,r){var i=t.settings;e.applyStyles(e.userStyles),"lastPage"!==i.showFoot&&"everyPage"!==i.showFoot||t.foot.forEach(function(i){return p(e,t,i,n,r)})}function d(e,t,n){var r=n.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),a=Math.floor((t-i)/r);return Math.max(0,a)}function f(e,t,n,r,a,s,l){var c=g(e,t,r,s);if(n.canEntireRowFit(c,l))p(e,t,n,s,l);else if(function(e,t,n,r){var i=e.pageSize().height,a=r.settings.margin,o=i-(a.top+a.bottom);"body"===t.section&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var s=t.getMinimumRowHeight(r.columns,e),l=s<n;if(s>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(r.columns);return t.getMaxCellHeight(r.columns)>o?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==r.settings.rowPageBreak}(e,n,c,t)){var u=function(e,t,n,r){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,l=0,c=n.columns;l<c.length;l++){var u=c[l];if(b=e.cells[u.index]){Array.isArray(b.text)||(b.text=[b.text]);var h=new i.Cell(b.raw,b.styles,b.section);(h=(0,o.assign)(h,b)).text=[];var f=d(b,t,r);b.text.length>f&&(h.text=b.text.splice(f,b.text.length));var p=r.scaleFactor(),m=r.getLineHeightFactor();b.contentHeight=b.getContentHeight(p,m),b.contentHeight>=t&&(b.contentHeight=t,h.styles.minCellHeight-=t),b.contentHeight>e.height&&(e.height=b.contentHeight),h.contentHeight=h.getContentHeight(p,m),h.contentHeight>s&&(s=h.contentHeight),a[u.index]=h}}var g=new i.Row(e.raw,-1,e.section,a,!0);g.height=s;for(var v=0,y=n.columns;v<y.length;v++){var b;u=y[v],(h=g.cells[u.index])&&(h.height=g.height),(b=e.cells[u.index])&&(b.height=e.height)}return g}(n,c,t,e);p(e,t,n,s,l),v(e,t,a,s,l),f(e,t,u,r,a,s,l)}else v(e,t,a,s,l),f(e,t,n,r,a,s,l)}function p(e,t,n,r,i){r.x=t.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var l=o[a],c=n.cells[l.index];if(c)if(e.applyStyles(c.styles),c.x=r.x,c.y=r.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,c,n,l,r)){m(e,c,r);var u=c.getTextPos();(0,s.default)(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,n,l,r),r.x+=l.width}else r.x+=l.width;else r.x+=l.width}r.y+=n.height}function m(e,t,n){var i=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof i.lineWidth){var a=(0,r.getFillStyle)(i.lineWidth,i.fillColor);a&&e.rect(t.x,n.y,t.width,t.height,a)}else"object"===typeof i.lineWidth&&(i.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),function(e,t,n,r){var i,a,o,s;function l(t,n,r,i,a){e.getDocument().setLineWidth(t),e.getDocument().line(n,r,i,a,"S")}r.top&&(i=n.x,a=n.y,o=n.x+t.width,s=n.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,a,o,s)),r.bottom&&(i=n.x,a=n.y+t.height,o=n.x+t.width,s=n.y+t.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,a,o,s)),r.left&&(i=n.x,a=n.y,o=n.x,s=n.y+t.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),l(r.left,i,a,o,s)),r.right&&(i=n.x+t.width,a=n.y,o=n.x+t.width,s=n.y+t.height,r.top&&(a-=.5*r.top),r.bottom&&(s+=.5*r.bottom),l(r.right,i,a,o,s))}(e,t,n,i.lineWidth))}function g(e,t,n,r){var i=t.settings.margin.bottom,a=t.settings.showFoot;return("everyPage"===a||"lastPage"===a&&n)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-r.y-i}function v(e,t,n,i,a,o){void 0===a&&(a=[]),void 0===o&&(o=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||o||t.foot.forEach(function(n){return p(e,t,n,i,a)}),t.callEndPageHooks(e,i);var s=t.settings.margin;(0,r.addTableBorder)(e,t,n,i),y(e),t.pageNumber++,t.pageCount++,i.x=s.left,i.y=s.top,n.y=s.top,t.callWillDrawPageHooks(e,i),"everyPage"===t.settings.showHead&&(t.head.forEach(function(n){return p(e,t,n,i,a)}),e.applyStyles(e.userStyles))}function y(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}t.drawTable=function(e,t){var n=t.settings,i=n.startY,s=n.margin,d={x:s.left,y:i},m=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),g=i+s.bottom+m;"avoid"===n.pageBreak&&(g+=t.body.reduce(function(e,t){return e+t.height},0));var b=new a.DocHandler(e);("always"===n.pageBreak||null!=n.startY&&g>b.pageSize().height)&&(y(b),d.y=s.top),t.callWillDrawPageHooks(b,d);var x=(0,o.assign)({},d);t.startPageNumber=b.pageNumber(),n.horizontalPageBreak?function(e,t,n,r){var i=(0,l.calculateAllColumnsCanFitInPage)(e,t),a=t.settings;if("afterAllRows"===a.horizontalPageBreakBehaviour)i.forEach(function(i,a){e.applyStyles(e.userStyles),a>0?v(e,t,n,r,i.columns,!0):c(e,t,r,i.columns),function(e,t,n,r,i){e.applyStyles(e.userStyles),t.body.forEach(function(a,o){var s=o===t.body.length-1;f(e,t,a,s,n,r,i)})}(e,t,n,r,i.columns),h(e,t,r,i.columns)});else for(var o=-1,s=i[0],d=function(){var a=o;if(s){e.applyStyles(e.userStyles);var l=s.columns;o>=0?v(e,t,n,r,l,!0):c(e,t,r,l),a=u(e,t,o+1,r,l),h(e,t,r,l)}var d=a-o;i.slice(1).forEach(function(i){e.applyStyles(e.userStyles),v(e,t,n,r,i.columns,!0),u(e,t,o+1,r,i.columns,d),h(e,t,r,i.columns)}),o=a};o<t.body.length-1;)d()}(b,t,x,d):(b.applyStyles(b.userStyles),"firstPage"!==n.showHead&&"everyPage"!==n.showHead||t.head.forEach(function(e){return p(b,t,e,d,t.columns)}),b.applyStyles(b.userStyles),t.body.forEach(function(e,n){var r=n===t.body.length-1;f(b,t,e,r,x,d,t.columns)}),b.applyStyles(b.userStyles),"lastPage"!==n.showFoot&&"everyPage"!==n.showFoot||t.foot.forEach(function(e){return p(b,t,e,d,t.columns)})),(0,r.addTableBorder)(b,t,x,d),t.callEndPageHooks(b,d),t.finalY=d.y,e.lastAutoTable=t,e.previousAutoTable=t,e.autoTable&&(e.autoTable.previous=t),b.applyStyles(b.userStyles)},t.addPage=v},224:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAllColumnsCanFitInPage=void 0;var r=n(420);function i(e,t,n){var i;void 0===n&&(n={});var a=(0,r.getPageAvailableWidth)(e,t),o=new Map,s=[],l=[],c=[];t.settings.horizontalPageBreakRepeat,Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(e){var n=t.columns.find(function(t){return t.dataKey===e||t.index===e});n&&!o.has(n.index)&&(o.set(n.index,!0),s.push(n.index),l.push(t.columns[n.index]),a-=n.wrappedWidth)});for(var u=!0,h=null!==(i=null===n||void 0===n?void 0:n.start)&&void 0!==i?i:0;h<t.columns.length;)if(o.has(h))h++;else{var d=t.columns[h].wrappedWidth;if(!(u||a>=d))break;u=!1,s.push(h),l.push(t.columns[h]),a-=d,h++}return{colIndexes:s,columns:l,lastIndex:h-1}}t.calculateAllColumnsCanFitInPage=function(e,t){for(var n=[],r=0;r<t.columns.length;r++){var a=i(e,t,{start:r});a.columns.length&&(n.push(a),r=a.lastIndex)}return n}},324:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ellipsize=t.resizeColumns=t.calculateWidths=void 0;var r=n(420);function i(e,t,n){for(var r=t,a=e.reduce(function(e,t){return e+t.wrappedWidth},0),o=0;o<e.length;o++){var s=e[o],l=r*(s.wrappedWidth/a),c=s.width+l,u=n(s),h=c<u?u:c;t-=h-s.width,s.width=h}if(t=Math.round(1e10*t)/1e10){var d=e.filter(function(e){return!(t<0)||e.width>n(e)});d.length&&(t=i(d,t,n))}return t}function a(e,t,n,i,a){return e.map(function(e){return function(e,t,n,i,a){var o=1e4*i.scaleFactor();if((t=Math.ceil(t*o)/o)>=(0,r.getStringWidth)(e,n,i))return e;for(;t<(0,r.getStringWidth)(e+a,n,i)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}(e,t,n,i,a)})}t.calculateWidths=function(e,t){!function(e,t){var n=e.scaleFactor(),i=t.settings.horizontalPageBreak,a=(0,r.getPageAvailableWidth)(e,t);t.allRows().forEach(function(o){for(var s=0,l=t.columns;s<l.length;s++){var c=l[s],u=o.cells[c.index];if(u){var h=t.hooks.didParseCell;t.callCellHooks(e,h,u,o,c,null);var d=u.padding("horizontal");u.contentWidth=(0,r.getStringWidth)(u.text,u.styles,e)+d;var f=(0,r.getStringWidth)(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=f+u.padding("horizontal"),"number"===typeof u.styles.cellWidth)u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if("wrap"===u.styles.cellWidth||!0===i)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/n;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(e){for(var n=0,r=t.columns;n<r.length;n++){var i=r[n],a=e.cells[i.index];if(a&&1===a.colSpan)i.wrappedWidth=Math.max(i.wrappedWidth,a.wrappedWidth),i.minWidth=Math.max(i.minWidth,a.minWidth),i.minReadableWidth=Math.max(i.minReadableWidth,a.minReadableWidth);else{var o=t.styles.columnStyles[i.dataKey]||t.styles.columnStyles[i.index]||{},s=o.cellWidth||o.minCellWidth;s&&"number"===typeof s&&(i.minWidth=s,i.wrappedWidth=s)}a&&(a.colSpan>1&&!i.minWidth&&(i.minWidth=a.minWidth),a.colSpan>1&&!i.wrappedWidth&&(i.wrappedWidth=a.minWidth))}})}(e,t);var n=[],o=0;t.columns.forEach(function(e){var r=e.getMaxCustomCellWidth(t);r?e.width=r:(e.width=e.wrappedWidth,n.push(e)),o+=e.width});var s=t.getWidth(e.pageSize().width)-o;s&&(s=i(n,s,function(e){return Math.max(e.minReadableWidth,e.minWidth)})),s&&(s=i(n,s,function(e){return e.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/e.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),function(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var r=t[n],i=null,a=0,o=0,s=0;s<e.columns.length;s++){var l=e.columns[s];if((o-=1)>1&&e.columns[s+1])a+=l.width,delete r.cells[l.index];else if(i){var c=i;delete r.cells[l.index],i=null,c.width=l.width+a}else{if(!(c=r.cells[l.index]))continue;if(o=c.colSpan,a=0,c.colSpan>1){i=c,a+=l.width;continue}c.width=l.width+a}}}(t),function(e,t){for(var n={count:0,height:0},r=0,i=e.allRows();r<i.length;r++){for(var o=i[r],s=0,l=e.columns;s<l.length;s++){var c=l[s],u=o.cells[c.index];if(u){t.applyStyles(u.styles,!0);var h=u.width-u.padding("horizontal");if("linebreak"===u.styles.overflow)u.text=t.splitTextToSize(u.text,h+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if("ellipsize"===u.styles.overflow)u.text=a(u.text,h,u.styles,t,"...");else if("hidden"===u.styles.overflow)u.text=a(u.text,h,u.styles,t,"");else if("function"===typeof u.styles.overflow){var d=u.styles.overflow(u.text,h);u.text="string"===typeof d?[d]:d}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var f=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<f*u.rowSpan?n={height:f,count:u.rowSpan}:n&&n.count>0&&n.height>f&&(f=n.height),f>o.height&&(o.height=f)}}n.count--}}(t,e),function(e){for(var t={},n=1,r=e.allRows(),i=0;i<r.length;i++)for(var a=r[i],o=0,s=e.columns;o<s.length;o++){var l=s[o],c=t[l.index];if(n>1)n--,delete a.cells[l.index];else if(c)c.cell.height+=a.height,n=c.cell.colSpan,delete a.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var u=a.cells[l.index];if(!u)continue;if(u.height=a.height,u.rowSpan>1){var h=r.length-i,d=u.rowSpan>h?h:u.rowSpan;t[l.index]={cell:u,left:d,row:a}}}}}(t)},t.resizeColumns=i,t.ellipsize=a},964:function(t){if("undefined"===typeof e){var n=new Error("Cannot find module 'undefined'");throw n.code="MODULE_NOT_FOUND",n}t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}var i={};return function(){var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=e.Column=e.Row=e.Table=e.CellHookData=e.__drawTable=e.__createTable=e.applyPlugin=void 0;var t=r(340),n=r(776),a=r(664),o=r(972),s=r(260);Object.defineProperty(e,"Table",{enumerable:!0,get:function(){return s.Table}});var l=r(172);Object.defineProperty(e,"CellHookData",{enumerable:!0,get:function(){return l.CellHookData}});var c=r(260);function u(e){(0,t.default)(e)}Object.defineProperty(e,"Cell",{enumerable:!0,get:function(){return c.Cell}}),Object.defineProperty(e,"Column",{enumerable:!0,get:function(){return c.Column}}),Object.defineProperty(e,"Row",{enumerable:!0,get:function(){return c.Row}}),e.applyPlugin=u,e.__createTable=function(e,t){var r=(0,n.parseInput)(e,t);return(0,o.createTable)(e,r)},e.__drawTable=function(e,t){(0,a.drawTable)(e,t)};try{var h=r(964);h.jsPDF&&(h=h.jsPDF),u(h)}catch(d){}e.default=function(e,t){var r=(0,n.parseInput)(e,t),i=(0,o.createTable)(e,r);(0,a.drawTable)(e,i)}}(),i}()},e.exports=r(function(){try{return n(7762)}catch(e){}}())},579:(e,t,n)=>{"use strict";e.exports=n(1153)},745:()=>{},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var O,M=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Ee=null;function Ce(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function ke(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ne(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function Te(){}var Ie=!1;function De(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ae(e,t,n)}finally{Ie=!1,(null!==_e||null!==Ee)&&(Te(),Ne())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Pe=!1}function Le(e,t,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Me=null,Fe=!1,Be=null,Ue={onError:function(e){Oe=!0,Me=e}};function ze(e,t,n,r,i,a,o,s,l){Oe=!1,Me=null,Le.apply(Ue,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Qe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,_t,Et,Ct,kt=!1,Nt=[],At=null,Tt=null,It=null,Dt=new Map,Rt=new Map,Pt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){kt=!1,null!==At&&Ft(At)&&(At=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),Dt.forEach(Bt),Rt.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Wt(e){function t(t){return zt(t,e)}if(0<Nt.length){zt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&zt(At,e),null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Vt=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=bt,a=Vt.transition;Vt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Vt.transition=a}}function Gt(e,t,n,r){var i=bt,a=Vt.transition;Vt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Vt.transition=a}}function Kt(e,t,n,r){if(Ht){var i=Xt(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Ot(At,e,t,n,r,i),!0;case"dragenter":return Tt=Ot(Tt,e,t,n,r,i),!0;case"mouseover":return It=Ot(It,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Ot(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Ot(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&Hr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Xt(e,t,n,r){if(Yt=null,null!==(e=yi(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),hn=M({},cn,{view:0,detail:0}),dn=an(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(M({},fn,{dataTransfer:0})),gn=an(M({},hn,{relatedTarget:0})),vn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Cn(){return En}var kn=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(kn),An=an(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),Pn=[9,13,27,32],jn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var On=u&&"TextEvent"in window&&!Ln,Mn=u&&(!jn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Yn(e){Fr(e,0)}function Xn(e){if(K(xi(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];qn(t,Kn,e,we(e)),De(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Cr(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=Cr("animationend"),Nr=Cr("animationiteration"),Ar=Cr("animationstart"),Tr=Cr("transitionend"),Ir=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var jr=Dr[Pr];Rr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Nr,"onAnimationIteration"),Rr(Ar,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,c){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var u=Me;Oe=!1,Me=null,Fe||(Fe=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}De(function(){var r=a,i=we(n),o=[];e:{var s=Ir.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case kr:case Nr:case Ar:l=vn;break;case Tr:l=In;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(qr(p,m,f)))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:xi(l),f=null==c?s:xi(c),(s=new u(m,p+"leave",l,n,i)).target=h,s.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Yr(o,s,l,u,!1),null!==c&&null!==h&&Yr(o,h,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(Hn(s))if($n)g=or;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?qn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Wn=!0)),0<(v=Gr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!jn&&Un(e,t)?(e=en(),Zt=Jt=$t=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(qr(e,a,i)),null!=(a=Re(e,t))&&r.push(qr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Re(n,a))&&o.unshift(qr(n,l,s)):i||null!=(l=Re(n,a))&&o.push(qr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Qr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[fi]||null}var Si=[],_i=-1;function Ei(e){return{current:e}}function Ci(e){0>_i||(e.current=Si[_i],Si[_i]=null,_i--)}function ki(e,t){_i++,Si[_i]=e.current,e.current=t}var Ni={},Ai=Ei(Ni),Ti=Ei(!1),Ii=Ni;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ci(Ti),Ci(Ai)}function ji(e,t,n){if(Ai.current!==Ni)throw Error(a(168));ki(Ai,t),ki(Ti,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return M({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ii=Ai.current,ki(Ai,e),ki(Ti,Ti.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ti),Ci(Ai),ki(Ai,e)):Ci(Ti),ki(Ti,n)}var Fi=null,Bi=!1,Ui=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Wi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Wi),i}finally{bt=t,Ui=!1}}return null}var Vi=[],Hi=0,qi=null,Gi=0,Ki=[],Yi=0,Xi=null,Qi=1,$i="";function Ji(e,t){Vi[Hi++]=Gi,Vi[Hi++]=qi,qi=e,Gi=t}function Zi(e,t,n){Ki[Yi++]=Qi,Ki[Yi++]=$i,Ki[Yi++]=Xi,Xi=e;var r=Qi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Qi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===qi;)qi=Vi[--Hi],Vi[Hi]=null,Gi=Vi[--Hi],Vi[Hi]=null;for(;e===Xi;)Xi=Ki[--Yi],Ki[Yi]=null,$i=Ki[--Yi],Ki[Yi]=null,Qi=Ki[--Yi],Ki[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Qi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=ci(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=x.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&ya(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case S:return(t=Fc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);va(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function m(i,a,s,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===s.length)return n(i,h),ia&&Ji(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(a=o(h,a,m),null===u?c=h:u.sibling=h,u=h);return ia&&Ji(i,m),c}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),ia&&Ji(i,m),c}function g(i,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===h?u=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),ia&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(s=o(y,s,g),null===h?u=y:h.sibling=y,h=y);return ia&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(i,e)}),ia&&Ji(i,g),u}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===_){if(7===u.tag){n(r,u.sibling),(a=i(u,o.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ya(c)===u.type){n(r,u.sibling),(a=i(u,o.props)).ref=ga(r,u,o),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===_?((a=Lc(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=jc(o.type,o.key,o.props,null,r.mode,l)).ref=ga(r,a,o),l.return=r,r=l)}return s(r);case S:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,l)).return=r,r=a}return s(r);case R:return e(r,a,(u=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(L(o))return g(r,a,o,l);va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var xa=ba(!0),wa=ba(!1),Sa=Ei(null),_a=null,Ea=null,Ca=null;function ka(){Ca=Ea=_a=null}function Na(e){var t=Sa.current;Ci(Sa),e._currentValue=t}function Aa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){_a=e,Ca=Ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===Ea){if(null===_a)throw Error(a(308));Ea=e,_a.dependencies={lanes:0,firstContext:e}}else Ea=Ea.next=e;return t}var Da=null;function Ra(e){null===Da?Da=[e]:Da.push(e)}function Pa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ra(t)):(n.next=i.next,i.next=n),t.interleaved=n,ja(e,r)}function ja(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var La=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ja(e,n)}return null===(i=r.interleaved)?(t.next=t,Ra(r)):(t.next=i.next,i.next=t),r.interleaved=t,ja(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function za(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wa(e,t,n,r){var i=e.updateQueue;La=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,u=c=l=null,s=a;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:La=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=h}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},qa=Ei(Ha),Ga=Ei(Ha),Ka=Ei(Ha);function Ya(e){if(e===Ha)throw Error(a(174));return e}function Xa(e,t){switch(ki(Ka,t),ki(Ga,e),ki(qa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(qa),ki(qa,t)}function Qa(){Ci(qa),Ci(Ga),Ci(Ka)}function $a(e){Ya(Ka.current);var t=Ya(qa.current),n=le(t,e.type);t!==n&&(ki(Ga,e),ki(qa,n))}function Ja(e){Ga.current===e&&(Ci(qa),Ci(Ga))}var Za=Ei(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=x.ReactCurrentDispatcher,io=x.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:es,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=n(r,i)}while(uo)}if(ro.current=Jo,t=null!==so&&null!==so.next,ao=0,lo=so=oo=null,co=!1,t)throw Error(a(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function xo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((ao&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,oo.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ol|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _o(){}function Eo(e,t){var n=oo,r=bo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Oo(No.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Do(9,ko.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(a(349));0!==(30&ao)||Co(n,t,i)}return i}function Co(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,Ao(t)&&To(e)}function No(e,t,n){return n(function(){Ao(t)&&To(e)})}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function To(e){var t=ja(e,1);null!==t&&nc(t,e,1,-1)}function Io(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return bo().memoizedState}function Po(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Do(t,n,a,r))}oo.flags|=e,i.memoizedState=Do(1|t,n,a,r)}function Lo(e,t){return Po(8390656,8,e,t)}function Oo(e,t){return jo(2048,8,e,t)}function Mo(e,t){return jo(4,2,e,t)}function Fo(e,t){return jo(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Bo.bind(null,t,e),n)}function zo(){}function Wo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),oo.lanes|=n,Ol|=n,e.baseState=!0),t)}function qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Go(){return bo().memoizedState}function Ko(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e))Qo(t,n);else if(null!==(n=Pa(e,t,n,r))){nc(n,e,r,ec()),$o(n,t,r)}}function Yo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Qo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ra(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Pa(e,t,i,r))&&(nc(n,e,r,i=ec()),$o(n,t,r))}}function Xo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Qo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Ia,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ia,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Io,useDebugValue:zo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Io(!1),t=e[0];return e=qo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Tl)throw Error(a(349));0!==(30&ao)||Co(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(No.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Tl.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Qi&~(1<<32-ot(Qi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ia,useCallback:Wo,useContext:Ia,useEffect:Oo,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:Fo,useMemo:Vo,useReducer:wo,useRef:Ro,useState:function(){return wo(xo)},useDebugValue:zo,useDeferredValue:function(e){return Ho(bo(),so.memoizedState,e)},useTransition:function(){return[wo(xo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1},ts={readContext:Ia,useCallback:Wo,useContext:Ia,useEffect:Oo,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:Fo,useMemo:Vo,useReducer:So,useRef:Ro,useState:function(){return So(xo)},useDebugValue:zo,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:Ho(t,so.memoizedState,e)},useTransition:function(){return[So(xo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Fa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,i))&&(nc(t,e,i,r),Ua(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Fa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,i))&&(nc(t,e,i,r),Ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ba(e,i,r))&&(nc(t,e,r,n),Ua(t,e,r))}};function as(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function os(e,t,n){var r=!1,i=Ni,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Ri(t)?Ii:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ni),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Ri(t)?Ii:Ai.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Fa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),hs(0,t)},n}function ps(e,t,n){(n=Fa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fa(-1,1)).tag=2,Ba(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?wa(t,null,n,r):xa(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Ta(t,i),r=go(e,t,n,r,a,i),n=vo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_s(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return ks(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,ki(Pl,Rl),Rl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ki(Pl,Rl),Rl|=r;return xs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ks(e,t,n,r,i){var a=Ri(n)?Ii:Ai.current;return a=Di(t,a),Ta(t,i),n=go(e,t,n,r,a,i),r=vo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ns(e,t,n,r,i){if(Ri(n)){var a=!0;Oi(t)}else a=!1;if(Ta(t,i),null===t.stateNode)Vs(e,t),os(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Di(t,c=Ri(n)?Ii:Ai.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,o,r,c),La=!1;var d=t.memoizedState;o.state=d,Wa(t,r,o,i),l=t.memoizedState,s!==r||d!==l||Ti.current||La?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=La||as(t,n,s,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ma(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ia(l):l=Di(t,l=Ri(n)?Ii:Ai.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,o,r,l),La=!1,d=t.memoizedState,o.state=d,Wa(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||Ti.current||La?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=La||as(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Hs(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,s,a)):xs(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),Xa(e,t.containerInfo)}function Is(e,t,n,r,i){return fa(),pa(i),t.flags|=256,xs(e,t,n,r),t.child}var Ds,Rs,Ps,js,Ls={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,o=Za.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Za,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ls,e):Fs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=us(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&xa(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=us(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Tl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,ja(e,i),nc(r,e,i,-1))}return mc(),Bs(e,t,s,r=us(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Yi++]=Qi,Ki[Yi++]=$i,Ki[Yi++]=Xi,Qi=e.id,$i=e.overflow,Xi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Pc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Pc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&pa(r),xa(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Aa(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Gs(t),null;case 3:return r=t.stateNode,Qa(),Ci(Ti),Ci(Ai),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Rs(e,t),Gs(t),null;case 5:Ja(t);var i=Ya(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=Ya(qa.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Q(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ds(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":Q(e,r),i=X(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Br("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)js(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Ka.current),Ya(qa.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ci(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))da(),fa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Qa(),Rs(e,t),null===e&&Wr(t.stateNode.containerInfo),Gs(t),null;case 10:return Na(t.type._context),Gs(t),null;case 19:if(Ci(Za),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)qs(o,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,qs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Za,1&Za.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Wl&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Gs(t),null}else 2*$e()-o.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=Za.current,ki(Za,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),Ci(Ti),Ci(Ai),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ja(t),null;case 13:if(Ci(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(Za),null;case 4:return Qa(),null;case 10:return Na(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Ps=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(qa.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},js=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Qs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||Zs(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Wt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Qs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,dl(e,t,n),Qs=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));fl(o,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),be(l,s);var u=be(l,o);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=$e())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(u=Qs)||h,ml(t,e),Qs=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(d=Js=h;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zs(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Js=p):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Xs;var c=Qs;if(Xs=o,(Qs=l)&&!c)for(Js=i;null!==Js;)l=(o=Js).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Js=l):Sl(i);for(;null!==a;)Js=a,bl(a,t,n),a=a.sibling;Js=i,Xs=s,Qs=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):xl(e)}}function xl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Wt(d)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&il(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Sl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var a=t.return;try{il(t)}catch(l){Ec(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Ec(t,o,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var _l,El=Math.ceil,Cl=x.ReactCurrentDispatcher,kl=x.ReactCurrentOwner,Nl=x.ReactCurrentBatchConfig,Al=0,Tl=null,Il=null,Dl=0,Rl=0,Pl=Ei(0),jl=0,Ll=null,Ol=0,Ml=0,Fl=0,Bl=null,Ul=null,zl=0,Wl=1/0,Vl=null,Hl=!1,ql=null,Gl=null,Kl=!1,Yl=null,Xl=0,Ql=0,$l=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Al)?$e():-1!==Jl?Jl:Jl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Dl?Dl&-Dl:null!==ma.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,$l=null,Error(a(185));vt(e,n,r),0!==(2&Al)&&e===Tl||(e===Tl&&(0===(2&Al)&&(Ml|=n),4===jl&&sc(e,Dl)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Wl=$e()+500,Bi&&Wi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=dt(e,e===Tl?Dl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bi=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi(function(){0===(6&Al)&&Wi()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=dt(e,e===Tl?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Al;Al|=2;var o=pc();for(Tl===e&&Dl===t||(Vl=null,Wl=$e()+500,dc(e,t));;)try{yc();break}catch(l){fc(e,l)}ka(),Cl.current=o,Al=i,null!==Il?t=0:(Tl=null,Dl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ll,dc(e,0),sc(e,r),rc(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ll,dc(e,0),sc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Ul,Vl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Ul,Vl),t);break}wc(e,Ul,Vl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Ul,Vl),r);break}wc(e,Ul,Vl);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(a(327));Sc();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ll,dc(e,0),sc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Vl),rc(e,$e()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Wl=$e()+500,Bi&&Wi())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Sc();var t=Al;Al|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(Al=t))&&Wi()}}function hc(){Rl=Pl.current,Ci(Pl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Qa(),Ci(Ti),Ci(Ai),no();break;case 5:Ja(r);break;case 4:Qa();break;case 13:case 19:Ci(Za);break;case 10:Na(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Tl=e,Il=e=Pc(e.current,null),Dl=Rl=t,jl=0,Ll=null,Fl=Ml=Ol=0,Ul=Bl=null,null!==Da){for(t=0;t<Da.length;t++)if(null!==(r=(n=Da[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Da=null}return e}function fc(e,t){for(;;){var n=Il;try{if(ka(),ro.current=Jo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(ao=0,lo=so=oo=null,uo=!1,ho=0,kl.current=null,null===n||null===n.return){jl=1,Ll=t,Il=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&ms(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(o,u,t),mc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),pa(cs(c,l));break e}}o=c=cs(c,l),4!==jl&&(jl=2),null===Bl?Bl=[o]:Bl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,za(o,fs(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,za(o,ps(o,l,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(x){t=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Jo,null===e?Jo:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Tl||0===(268435455&Ol)&&0===(268435455&Ml)||sc(Tl,Dl)}function gc(e,t){var n=Al;Al|=2;var r=pc();for(Tl===e&&Dl===t||(Vl=null,dc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(ka(),Al=n,Cl.current=r,null!==Il)throw Error(a(261));return Tl=null,Dl=0,jl}function vc(){for(;null!==Il;)bc(Il)}function yc(){for(;null!==Il&&!Xe();)bc(Il)}function bc(e){var t=_l(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xc(e):Il=t,kl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Rl)))return void(Il=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return jl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===jl&&(jl=5)}function wc(e,t,n){var r=bt,i=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Yl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Tl&&(Il=Tl=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tc(tt,function(){return Sc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Nl.transition,Nl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,kl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=s),f===o&&++h===r&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Qe(),Al=l,bt=s,Nl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Yl=e,Xl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Xl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===$l?Ql++:(Ql=0,$l=e):Ql=0,Wi()}(e,t,n,r)}finally{Nl.transition=i,bt=r}return null}function Sc(){if(null!==Yl){var e=xt(Xl),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Al))throw Error(a(331));var i=Al;for(Al|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var f=(h=Js).sibling,p=h.return;if(al(h),h===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Ec(l,l.return,S)}if(l===s){Js=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Js=w;break e}Js=l.return}}if(Al=i,Wi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function _c(e,t,n){e=Ba(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ba(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Dl&n)===n&&(4===jl||3===jl&&(130023424&Dl)===Dl&&500>$e()-zl?dc(e,0):Fl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=ja(e,t))&&(vt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),kc(e,n)}function Tc(e,t){return Ke(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ic(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case E:s=8,i|=8;break;case C:return(e=Dc(12,n,t,2|i)).elementType=C,e.lanes=o,e;case T:return(e=Dc(13,n,t,i)).elementType=T,e.lanes=o,e;case I:return(e=Dc(19,n,t,i)).elementType=I,e.lanes=o,e;case P:return Oc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case N:s=9;break e;case A:s=11;break e;case D:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,s,l){return e=new Bc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function zc(e){if(!e)return Ni;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Wc(e,t,n,r,i,a,o,s,l){return(e=Uc(n,r,!0,e,0,a,0,s,l)).context=zc(null),n=e.current,(a=Fa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Ba(n,a,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Vc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ba(i,t,o))&&(nc(e,i,o,a),Ua(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),fa();break;case 5:$a(t);break;case 1:Ri(t.type)&&Oi(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Sa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(ki(Za,1&Za.current),null!==(e=Hs(e,t,n))?e.sibling:null);ki(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Di(t,Ai.current);Ta(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(r),e=ns(r,e),i){case 0:t=ks(null,t,r,e,n);break e;case 1:t=Ns(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Ts(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ma(e,t),Wa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Is(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Is(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return $a(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Ms(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xa(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,ki(Sa,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ti.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fa(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Aa(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Aa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ta(t,n),r=r(i=Ia(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Ss(e,t,r,i=ns(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Vs(e,t),t.tag=1,Ri(r)?(e=!0,Oi(t)):e=!1,Ta(t,n),os(t,r,i),ls(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Vc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=Wc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,Wr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc(function(){Vc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Vc(null,e,null,null)}),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,$e()),0===(6&Al)&&(Wl=$e()+500,Wi()))}break;case 13:uc(function(){var t=ja(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Gc(e,1)}},St=function(e){if(13===e.tag){var t=ja(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=ja(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},Et=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[bi,xi,wi,ke,Ne,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(a(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+A(l,0):a,w(o)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),T(o,t,i,"",function(e){return e})):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var u=a+A(s=e[c],c);l+=T(s,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=T(s=s.value,t,i,u=a+A(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4980:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2284);function i(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5173:(e,t,n)=>{e.exports=n(1497)()},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,P(S);else{var t=r(u);null!==t&&j(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var a=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!T());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&j(w,h.startTime-n),l=!1}return l}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,C=null,k=-1,N=5,A=-1;function T(){return!(t.unstable_now()-A<N)}function I(){if(null!==C){var e=t.unstable_now();A=e;var n=!0;try{n=C(!0,e)}finally{n?_():(E=!1,C=null)}}else E=!1}if("function"===typeof b)_=function(){b(I)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=I,_=function(){R.postMessage(null)}}else _=function(){v(I,0)};function P(e){C=e,E||(E=!0,_())}function j(e,n){k=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,j(w,a-o))):(e.sortIndex=s,n(c,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7318:()=>{},7762:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AcroForm:()=>wt,AcroFormAppearance:()=>bt,AcroFormButton:()=>dt,AcroFormCheckBox:()=>gt,AcroFormChoiceField:()=>lt,AcroFormComboBox:()=>ut,AcroFormEditBox:()=>ht,AcroFormListBox:()=>ct,AcroFormPasswordField:()=>yt,AcroFormPushButton:()=>ft,AcroFormRadioButton:()=>pt,AcroFormTextField:()=>vt,GState:()=>Te,ShadingPattern:()=>De,TilingPattern:()=>Re,default:()=>xn,jsPDF:()=>Pe});var r=n(2284),i=Uint8Array,a=Uint16Array,o=Int32Array,s=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(e,t){for(var n=new a(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new o(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},h=u(s,2),d=h.b,f=h.r;d[28]=258,f[258]=28;for(var p=u(l,0),m=p.b,g=p.r,v=new a(32768),y=0;y<32768;++y){var b=(43690&y)>>1|(21845&y)<<1;b=(61680&(b=(52428&b)>>2|(13107&b)<<2))>>4|(3855&b)<<4,v[y]=((65280&b)>>8|(255&b)<<8)>>1}var x=function(e,t,n){for(var r=e.length,i=0,o=new a(t);i<r;++i)e[i]&&++o[e[i]-1];var s,l=new a(t);for(i=1;i<t;++i)l[i]=l[i-1]+o[i-1]<<1;if(n){s=new a(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],h=t-e[i],d=l[e[i]-1]++<<h,f=d|(1<<h)-1;d<=f;++d)s[v[d]>>c]=u}else for(s=new a(r),i=0;i<r;++i)e[i]&&(s[i]=v[l[e[i]-1]++]>>15-e[i]);return s},w=new i(288);for(y=0;y<144;++y)w[y]=8;for(y=144;y<256;++y)w[y]=9;for(y=256;y<280;++y)w[y]=7;for(y=280;y<288;++y)w[y]=8;var S=new i(32);for(y=0;y<32;++y)S[y]=5;var _=x(w,9,0),E=x(w,9,1),C=x(S,5,0),k=x(S,5,1),N=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},A=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},T=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},I=function(e){return(e+7)/8|0},D=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new i(e.subarray(t,n))},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],P=function(e,t,n){var r=new Error(t||R[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,P),!n)throw r;return r},j=function(e,t,n,r){var a=e.length,o=r?r.length:0;if(!a||t.f&&!t.l)return n||new i(0);var u=!n,h=u||2!=t.i,f=t.i;u&&(n=new i(3*a));var p=function(e){var t=n.length;if(e>t){var r=new i(Math.max(2*t,e));r.set(n),n=r}},g=t.f||0,v=t.p||0,y=t.b||0,b=t.l,w=t.d,S=t.m,_=t.n,C=8*a;do{if(!b){g=A(e,v,1);var R=A(e,v+1,3);if(v+=3,!R){var j=e[(q=I(v)+4)-4]|e[q-3]<<8,L=q+j;if(L>a){f&&P(0);break}h&&p(y+j),n.set(e.subarray(q,L),y),t.b=y+=j,t.p=v=8*L,t.f=g;continue}if(1==R)b=E,w=k,S=9,_=5;else if(2==R){var O=A(e,v,31)+257,M=A(e,v+10,15)+4,F=O+A(e,v+5,31)+1;v+=14;for(var B=new i(F),U=new i(19),z=0;z<M;++z)U[c[z]]=A(e,v+3*z,7);v+=3*M;var W=N(U),V=(1<<W)-1,H=x(U,W,1);for(z=0;z<F;){var q,G=H[A(e,v,V)];if(v+=15&G,(q=G>>4)<16)B[z++]=q;else{var K=0,Y=0;for(16==q?(Y=3+A(e,v,3),v+=2,K=B[z-1]):17==q?(Y=3+A(e,v,7),v+=3):18==q&&(Y=11+A(e,v,127),v+=7);Y--;)B[z++]=K}}var X=B.subarray(0,O),Q=B.subarray(O);S=N(X),_=N(Q),b=x(X,S,1),w=x(Q,_,1)}else P(1);if(v>C){f&&P(0);break}}h&&p(y+131072);for(var $=(1<<S)-1,J=(1<<_)-1,Z=v;;Z=v){var ee=(K=b[T(e,v)&$])>>4;if((v+=15&K)>C){f&&P(0);break}if(K||P(2),ee<256)n[y++]=ee;else{if(256==ee){Z=v,b=null;break}var te=ee-254;if(ee>264){var ne=s[z=ee-257];te=A(e,v,(1<<ne)-1)+d[z],v+=ne}var re=w[T(e,v)&J],ie=re>>4;re||P(3),v+=15&re;Q=m[ie];if(ie>3){ne=l[ie];Q+=T(e,v)&(1<<ne)-1,v+=ne}if(v>C){f&&P(0);break}h&&p(y+131072);var ae=y+te;if(y<Q){var oe=o-Q,se=Math.min(Q,ae);for(oe+y<0&&P(3);y<se;++y)n[y]=r[oe+y]}for(;y<ae;++y)n[y]=n[y-Q]}}t.l=b,t.p=Z,t.b=y,t.f=g,b&&(g=1,t.m=S,t.d=w,t.n=_)}while(!g);return y!=n.length&&u?D(n,0,y):n.subarray(0,y)},L=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},O=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},M=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,s=n.slice();if(!o)return{t:H,l:0};if(1==o){var l=new i(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var c=n[0],u=n[1],h=0,d=1,f=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};d!=o-1;)c=n[n[h].f<n[f].f?h++:f++],u=n[h!=d&&n[h].f<n[f].f?h++:f++],n[d++]={s:-1,f:c.f+u.f,l:c,r:u};var p=s[0].s;for(r=1;r<o;++r)s[r].s>p&&(p=s[r].s);var m=new a(p+1),g=F(n[d-1],m,0);if(g>t){r=0;var v=0,y=g-t,b=1<<y;for(s.sort(function(e,t){return m[t.s]-m[e.s]||e.f-t.f});r<o;++r){var x=s[r].s;if(!(m[x]>t))break;v+=b-(1<<g-m[x]),m[x]=t}for(v>>=y;v>0;){var w=s[r].s;m[w]<t?v-=1<<t-m[w]++-1:++r}for(;r>=0&&v;--r){var S=s[r].s;m[S]==t&&(--m[S],++v)}g=t}return{t:new i(m),l:g}},F=function(e,t,n){return-1==e.s?Math.max(F(e.l,t,n+1),F(e.r,t,n+1)):t[e.s]=n},B=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new a(++t),r=0,i=e[0],o=1,s=function(e){n[r++]=e},l=1;l<=t;++l)if(e[l]==i&&l!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[l]}return{c:n.subarray(0,r),n:t}},U=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},z=function(e,t,n){var r=n.length,i=I(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return 8*(i+4+r)},W=function(e,t,n,r,i,o,u,h,d,f,p){L(t,p++,n),++i[256];for(var m=M(i,15),g=m.t,v=m.l,y=M(o,15),b=y.t,E=y.l,k=B(g),N=k.c,A=k.n,T=B(b),I=T.c,D=T.n,R=new a(19),P=0;P<N.length;++P)++R[31&N[P]];for(P=0;P<I.length;++P)++R[31&I[P]];for(var j=M(R,7),F=j.t,W=j.l,V=19;V>4&&!F[c[V-1]];--V);var H,q,G,K,Y=f+5<<3,X=U(i,w)+U(o,S)+u,Q=U(i,g)+U(o,b)+u+14+3*V+U(R,F)+2*R[16]+3*R[17]+7*R[18];if(d>=0&&Y<=X&&Y<=Q)return z(t,p,e.subarray(d,d+f));if(L(t,p,1+(Q<X)),p+=2,Q<X){H=x(g,v,0),q=g,G=x(b,E,0),K=b;var $=x(F,W,0);L(t,p,A-257),L(t,p+5,D-1),L(t,p+10,V-4),p+=14;for(P=0;P<V;++P)L(t,p+3*P,F[c[P]]);p+=3*V;for(var J=[N,I],Z=0;Z<2;++Z){var ee=J[Z];for(P=0;P<ee.length;++P){var te=31&ee[P];L(t,p,$[te]),p+=F[te],te>15&&(L(t,p,ee[P]>>5&127),p+=ee[P]>>12)}}}else H=_,q=w,G=C,K=S;for(P=0;P<h;++P){var ne=r[P];if(ne>255){O(t,p,H[(te=ne>>18&31)+257]),p+=q[te+257],te>7&&(L(t,p,ne>>23&31),p+=s[te]);var re=31&ne;O(t,p,G[re]),p+=K[re],re>3&&(O(t,p,ne>>5&8191),p+=l[re])}else O(t,p,H[ne]),p+=q[ne]}return O(t,p,H[256]),p+q[256]},V=new o([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H=new i(0),q=function(e,t,n,r,c,u){var h=u.z||e.length,d=new i(r+h+5*(1+Math.ceil(h/7e3))+c),p=d.subarray(r,d.length-c),m=u.l,v=7&(u.r||0);if(t){v&&(p[0]=u.r>>3);for(var y=V[t-1],b=y>>13,x=8191&y,w=(1<<n)-1,S=u.p||new a(32768),_=u.h||new a(w+1),E=Math.ceil(n/3),C=2*E,k=function(t){return(e[t]^e[t+1]<<E^e[t+2]<<C)&w},N=new o(25e3),A=new a(288),T=new a(32),R=0,P=0,j=u.i||0,L=0,O=u.w||0,M=0;j+2<h;++j){var F=k(j),B=32767&j,U=_[F];if(S[B]=U,_[F]=B,O<=j){var H=h-j;if((R>7e3||L>24576)&&(H>423||!m)){v=W(e,p,0,N,A,T,P,L,M,j-M,v),L=R=P=0,M=j;for(var q=0;q<286;++q)A[q]=0;for(q=0;q<30;++q)T[q]=0}var G=2,K=0,Y=x,X=B-U&32767;if(H>2&&F==k(j-X))for(var Q=Math.min(b,H)-1,$=Math.min(32767,j),J=Math.min(258,H);X<=$&&--Y&&B!=U;){if(e[j+G]==e[j+G-X]){for(var Z=0;Z<J&&e[j+Z]==e[j+Z-X];++Z);if(Z>G){if(G=Z,K=X,Z>Q)break;var ee=Math.min(X,Z-2),te=0;for(q=0;q<ee;++q){var ne=j-X+q&32767,re=ne-S[ne]&32767;re>te&&(te=re,U=ne)}}}X+=(B=U)-(U=S[B])&32767}if(K){N[L++]=268435456|f[G]<<18|g[K];var ie=31&f[G],ae=31&g[K];P+=s[ie]+l[ae],++A[257+ie],++T[ae],O=j+G,++R}else N[L++]=e[j],++A[e[j]]}}for(j=Math.max(j,O);j<h;++j)N[L++]=e[j],++A[e[j]];v=W(e,p,m,N,A,T,P,L,M,j-M,v),m||(u.r=7&v|p[v/8|0]<<3,v-=7,u.h=_,u.p=S,u.i=j,u.w=O)}else{for(j=u.w||0;j<h+m;j+=65535){var oe=j+65535;oe>=h&&(p[v/8|0]=m,oe=h),v=z(p,v+1,e.subarray(j,oe))}u.i=h}return D(d,0,r+I(v)+c)},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,a=0|n.length,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=n[o];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},K=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),s=new i(o.length+e.length);s.set(o),s.set(e,o.length),e=s,a.w=o.length}return q(e,null==t.level?6:t.level,null==t.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,a)},Y=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},X=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=G();i.p(t.dictionary),Y(e,2,i.d())}},Q=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&P(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&P(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function $(e,t){t||(t={});var n=G();n.p(e);var r=K(e,t,t.dictionary?6:2,4);return X(r,t),Y(r,r.length-4,n.d()),r}function J(e,t){return j(e.subarray(Q(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Z="undefined"!=typeof TextDecoder&&new TextDecoder;try{Z.decode(H,{stream:!0})}catch(wn){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ee=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function te(){ee.console&&"function"==typeof ee.console.log&&ee.console.log.apply(ee.console,arguments)}var ne={log:te,warn:function(e){ee.console&&("function"==typeof ee.console.warn?ee.console.warn.apply(ee.console,arguments):te.call(null,arguments))},error:function(e){ee.console&&("function"==typeof ee.console.error?ee.console.error.apply(ee.console,arguments):te(e))}};function re(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){le(r.response,t,n)},r.onerror=function(){ne.error("could not download file")},r.send()}function ie(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function ae(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var oe,se,le=ee.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,r.A)(window))||window!==ee?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=ee.URL||ee.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?ie(i.href)?re(e,t,n):ae(i,i.target="_blank"):ae(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){ae(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(ie(e))re(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){ae(i)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,r.A)(t)&&(ne.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return re(e,t,n);var a="application/octet-stream"===e.type,o=/constructor/i.test(ee.HTMLElement)||ee.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&o)&&"object"===("undefined"==typeof FileReader?"undefined":(0,r.A)(FileReader))){var l=new FileReader;l.onloadend=function(){var e=l.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var c=ee.URL||ee.webkitURL,u=c.createObjectURL(e);i?i.location=u:location.href=u,i=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});function ce(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,o=i.exec(e);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function ue(e,t){var n=e[0],r=e[1],i=e[2],a=e[3];n=de(n,r,i,a,t[0],7,-680876936),a=de(a,n,r,i,t[1],12,-389564586),i=de(i,a,n,r,t[2],17,606105819),r=de(r,i,a,n,t[3],22,-1044525330),n=de(n,r,i,a,t[4],7,-176418897),a=de(a,n,r,i,t[5],12,1200080426),i=de(i,a,n,r,t[6],17,-1473231341),r=de(r,i,a,n,t[7],22,-45705983),n=de(n,r,i,a,t[8],7,1770035416),a=de(a,n,r,i,t[9],12,-1958414417),i=de(i,a,n,r,t[10],17,-42063),r=de(r,i,a,n,t[11],22,-1990404162),n=de(n,r,i,a,t[12],7,1804603682),a=de(a,n,r,i,t[13],12,-40341101),i=de(i,a,n,r,t[14],17,-1502002290),n=fe(n,r=de(r,i,a,n,t[15],22,1236535329),i,a,t[1],5,-165796510),a=fe(a,n,r,i,t[6],9,-1069501632),i=fe(i,a,n,r,t[11],14,643717713),r=fe(r,i,a,n,t[0],20,-373897302),n=fe(n,r,i,a,t[5],5,-701558691),a=fe(a,n,r,i,t[10],9,38016083),i=fe(i,a,n,r,t[15],14,-660478335),r=fe(r,i,a,n,t[4],20,-405537848),n=fe(n,r,i,a,t[9],5,568446438),a=fe(a,n,r,i,t[14],9,-1019803690),i=fe(i,a,n,r,t[3],14,-187363961),r=fe(r,i,a,n,t[8],20,1163531501),n=fe(n,r,i,a,t[13],5,-1444681467),a=fe(a,n,r,i,t[2],9,-51403784),i=fe(i,a,n,r,t[7],14,1735328473),n=pe(n,r=fe(r,i,a,n,t[12],20,-1926607734),i,a,t[5],4,-378558),a=pe(a,n,r,i,t[8],11,-2022574463),i=pe(i,a,n,r,t[11],16,1839030562),r=pe(r,i,a,n,t[14],23,-35309556),n=pe(n,r,i,a,t[1],4,-1530992060),a=pe(a,n,r,i,t[4],11,1272893353),i=pe(i,a,n,r,t[7],16,-155497632),r=pe(r,i,a,n,t[10],23,-1094730640),n=pe(n,r,i,a,t[13],4,681279174),a=pe(a,n,r,i,t[0],11,-358537222),i=pe(i,a,n,r,t[3],16,-722521979),r=pe(r,i,a,n,t[6],23,76029189),n=pe(n,r,i,a,t[9],4,-640364487),a=pe(a,n,r,i,t[12],11,-421815835),i=pe(i,a,n,r,t[15],16,530742520),n=me(n,r=pe(r,i,a,n,t[2],23,-995338651),i,a,t[0],6,-198630844),a=me(a,n,r,i,t[7],10,1126891415),i=me(i,a,n,r,t[14],15,-1416354905),r=me(r,i,a,n,t[5],21,-57434055),n=me(n,r,i,a,t[12],6,1700485571),a=me(a,n,r,i,t[3],10,-1894986606),i=me(i,a,n,r,t[10],15,-1051523),r=me(r,i,a,n,t[1],21,-2054922799),n=me(n,r,i,a,t[8],6,1873313359),a=me(a,n,r,i,t[15],10,-30611744),i=me(i,a,n,r,t[6],15,-1560198380),r=me(r,i,a,n,t[13],21,1309151649),n=me(n,r,i,a,t[4],6,-145523070),a=me(a,n,r,i,t[11],10,-1120210379),i=me(i,a,n,r,t[2],15,718787259),r=me(r,i,a,n,t[9],21,-343485551),e[0]=_e(n,e[0]),e[1]=_e(r,e[1]),e[2]=_e(i,e[2]),e[3]=_e(a,e[3])}function he(e,t,n,r,i,a){return t=_e(_e(t,e),_e(r,a)),_e(t<<i|t>>>32-i,n)}function de(e,t,n,r,i,a,o){return he(t&n|~t&r,e,t,i,a,o)}function fe(e,t,n,r,i,a,o){return he(t&r|n&~r,e,t,i,a,o)}function pe(e,t,n,r,i,a,o){return he(t^n^r,e,t,i,a,o)}function me(e,t,n,r,i,a,o){return he(n^(t|~r),e,t,i,a,o)}function ge(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)ue(r,ve(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(ue(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,ue(r,i),r}function ve(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}oe=ee.atob.bind(ee),se=ee.btoa.bind(ee);var ye="0123456789abcdef".split("");function be(e){for(var t="",n=0;n<4;n++)t+=ye[e>>8*n+4&15]+ye[e>>8*n&15];return t}function xe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function we(e){return ge(e).map(xe).join("")}var Se="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=be(e[t]);return e.join("")}(ge("hello"));function _e(e,t){if(Se){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function Ee(e,t){var n,r,i,a;if(e!==n){for(var o=(i=e,a=1+(256/e.length|0),new Array(a+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+o.charCodeAt(l))%256,s[l]=s[c],s[c]=u}n=e,r=s}else s=r;var h=t.length,d=0,f=0,p="";for(l=0;l<h;l++)f=(f+(u=s[d=(d+1)%256]))%256,s[d]=s[f],s[f]=u,o=s[(s[d]+s[f])%256],p+=String.fromCharCode(t.charCodeAt(l)^o);return p}var Ce={print:4,modify:8,copy:16,"annot-forms":32};function ke(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(e){if(void 0!==Ce.perm)throw new Error("Invalid permission: "+e);i+=Ce[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var a=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=we(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Ee(this.encryptionKey,this.padding)}function Ne(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function Ae(e){if("object"!==(0,r.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!r],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[n]){var o=t[n][a];try{o[0].apply(e,r)}catch(n){ee.console&&ne.error("jsPDF PubSub Error",n.message,n)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Te(e){if(!(this instanceof Te))return new Te(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Ie(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function De(e,t,n,r,i){if(!(this instanceof De))return new De(e,t,n,r,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Ie.call(this,r,i)}function Re(e,t,n,r,i){if(!(this instanceof Re))return new Re(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Ie.call(this,r,i)}function Pe(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],a=arguments[2],o=arguments[3],s=[],l=1,c=16,u="S",h=null;"object"===(0,r.A)(e=e||{})&&(n=e.orientation,i=e.unit||i,a=e.format||a,o=e.compress||e.compressPdf||o,null!==(h=e.encryption||null)&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),s=e.filters||(!0===o?["FlateEncode"]:s),i=i||"mm",n=(""+(n||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=Ae;var m="1.3",g=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(e){m=e};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return v};var y=p.__private__.getPageFormat=function(e){return v[e]};a=a||"a4";var b="compat",x="advanced",w=b;function S(){this.saveGraphicsState(),J(new He(ye,0,0,-ye,0,_n()*ye).toString()+" cm"),this.setFontSize(this.getFontSize()/ye),u="n",w=x}function _(){this.restoreGraphicsState(),u="S",w=b}var E=p.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};p.advancedAPI=function(e){var t=w===b;return t&&S.call(this),"function"!=typeof e||(e(this),t&&_.call(this)),this},p.compatAPI=function(e){var t=w===x;return t&&_.call(this),"function"!=typeof e||(e(this),t&&S.call(this)),this},p.isAdvancedAPI=function(){return w===x};var C,k=function(e){if(w!==x)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=p.roundToPrecision=p.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};C=p.hpf=p.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return N(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return N(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return N(e,16)};var A=p.f2=p.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return N(e,2)},T=p.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return N(e,3)},I=p.scale=p.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return w===b?e*ye:w===x?e:void 0},D=function(e){return I(function(e){return w===b?_n()-e:w===x?e:void 0}(e))};p.__private__.setPrecision=p.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var R,P="00000000000000000000000000000000",j=p.__private__.getFileId=function(){return P},L=p.__private__.setFileId=function(e){return P=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():P.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==h&&(Rt=new ke(h.userPermissions,h.userPassword,h.ownerPassword,P)),P};p.setFileId=function(e){return L(e),this},p.getFileId=function(){return j()};var O=p.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),a=[n,z(r),"'",z(i),"'"].join("");return["D:",e.getFullYear(),z(e.getMonth()+1),z(e.getDate()),z(e.getHours()),z(e.getMinutes()),z(e.getSeconds()),a].join("")},M=p.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),o=parseInt(e.substr(14,2),10);return new Date(t,n,r,i,a,o,0)},F=p.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=O(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return R=t},B=p.__private__.getCreationDate=function(e){var t=R;return"jsDate"===e&&(t=M(R)),t};p.setCreationDate=function(e){return F(e),this},p.getCreationDate=function(e){return B(e)};var U,z=p.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},W=p.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},V=0,H=[],q=[],G=0,K=[],Y=[],X=!1,Q=q;p.__private__.setCustomOutputDestination=function(e){X=!0,Q=e};var $=function(e){X||(Q=e)};p.__private__.resetCustomOutputDestination=function(){X=!1,Q=q};var J=p.__private__.out=function(e){return e=e.toString(),G+=e.length+1,Q.push(e),Q},Z=p.__private__.write=function(e){return J(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},te=p.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},re=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return re};var ie=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(e){return ie=w===x?e/ye:e,this};var ae,oe=p.__private__.getFontSize=p.getFontSize=function(){return w===b?ie:ie*ye},ue=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(e){return ue=e,this},p.__private__.getR2L=p.getR2L=function(){return ue};var he,de=p.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ae=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ae=e}else ae=parseInt(e,10)};p.__private__.getZoomMode=function(){return ae};var fe,pe=p.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');he=e};p.__private__.getPageMode=function(){return he};var me=p.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');fe=e};p.__private__.getLayoutMode=function(){return fe},p.__private__.setDisplayMode=p.setDisplayMode=function(e,t,n){return de(e),me(t),pe(n),this};var ge={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ge[e]},p.__private__.getDocumentProperties=function(){return ge},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(e){for(var t in ge)ge.hasOwnProperty(t)&&e[t]&&(ge[t]=e[t]);return this},p.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ge[e]=t};var ve,ye,be,xe,we,Se={},_e={},Ee=[],Ce={},Ie={},je={},Le={},Oe=null,Me=0,Fe=[],Be=new Ae(p),Ue=e.hotfixes||[],ze={},We={},Ve=[],He=function e(t,n,r,i,a,o){if(!(this instanceof e))return new e(t,n,r,i,a,o);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(a)&&(a=0),isNaN(o)&&(o=0),this._matrix=[t,n,r,i,a,o]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),He.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(e)},He.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,a=e.tx*this.sx+e.ty*this.shx+this.tx,o=e.tx*this.shy+e.ty*this.sy+this.ty;return new He(t,n,r,i,a,o)},He.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,a=this.ty,o=Math.sqrt(e*e+t*t),s=(e/=o)*n+(t/=o)*r;n-=e*s,r-=t*s;var l=Math.sqrt(n*n+r*r);return s/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,s=-s,o=-o),{scale:new He(o,0,0,l,0,0),translate:new He(1,0,0,1,i,a),rotate:new He(e,t,-t,e,0,0),skew:new He(1,0,s,1,0,0)}},He.prototype.toString=function(e){return this.join(" ")},He.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,a=this.ty,o=1/(e*r-t*n),s=r*o,l=-t*o,c=-n*o,u=e*o;return new He(s,l,c,u,-s*i-c*a,-l*i-u*a)},He.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new gn(t,n)},He.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new gn(e.x+e.w,e.y+e.h));return new vn(t.x,t.y,n.x-t.x,n.y-t.y)},He.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,a=this.ty;return new He(e,t,n,r,i,a)},p.Matrix=He;var qe=p.matrixMult=function(e,t){return t.multiply(e)},Ge=new He(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ge;var Ke=function(e,t){if(!Ie[e]){var n=(t instanceof De?"Sh":"P")+(Object.keys(Ce).length+1).toString(10);t.id=n,Ie[e]=n,Ce[n]=t,Be.publish("addPattern",t)}};p.ShadingPattern=De,p.TilingPattern=Re,p.addShadingPattern=function(e,t){return k("addShadingPattern()"),Ke(e,t),this},p.beginTilingPattern=function(e){k("beginTilingPattern()"),bn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},p.endTilingPattern=function(e,t){k("endTilingPattern()"),t.stream=Y[U].join("\n"),Ke(e,t),Be.publish("endTilingPattern",t),Ve.pop().restore()};var Ye,Xe=p.__private__.newObject=function(){var e=Qe();return $e(e,!0),e},Qe=p.__private__.newObjectDeferred=function(){return V++,H[V]=function(){return G},V},$e=function(e,t){return t="boolean"==typeof t&&t,H[e]=G,t&&J(e+" 0 obj"),e},Je=p.__private__.newAdditionalObject=function(){var e={objId:Qe(),content:""};return K.push(e),e},Ze=Qe(),et=Qe(),tt=p.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return r},nt=p.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,i=e.ch2,a=e.ch3,o=e.ch4,s="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new ce(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,i=c>>8&255,a=255&c}if(void 0===i||void 0===o&&n===i&&i===a)if("string"==typeof n)t=n+" "+s[0];else if(2===e.precision)t=A(n/255)+" "+s[0];else t=T(n/255)+" "+s[0];else if(void 0===o||"object"===(0,r.A)(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",s[1]].join(" ");if("string"==typeof n)t=[n,i,a,s[1]].join(" ");else if(2===e.precision)t=[A(n/255),A(i/255),A(a/255),s[1]].join(" ");else t=[T(n/255),T(i/255),T(a/255),s[1]].join(" ")}else if("string"==typeof n)t=[n,i,a,o,s[2]].join(" ");else if(2===e.precision)t=[A(n),A(i),A(a),A(o),s[2]].join(" ");else t=[T(n),T(i),T(a),T(o),s[2]].join(" ");return t},rt=p.__private__.getFilters=function(){return s},it=p.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||rt(),r=e.alreadyAppliedFilters||[],i=e.addLength1||!1,a=t.length,o=e.objectId,s=function(e){return e};if(null!==h&&void 0===o)throw new Error("ObjectId must be passed to putStream for file encryption");null!==h&&(s=Rt.encryptor(o,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==Pe.API.processDataByFilters?Pe.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===i&&c.push({key:"Length1",value:a})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var d=0;d<c.length;d+=1)if("DecodeParms"===c[d].key){for(var f=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)f.push("null");f.push(c[d].value),c[d].value="["+f.join(" ")+"]"}}J("<<");for(var m=0;m<c.length;m++)J("/"+c[m].key+" "+c[m].value);J(">>"),0!==l.data.length&&(J("stream"),J(s(l.data)),J("endstream"))},at=p.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,i=e.contentsObjId;$e(r,!0),J("<</Type /Page"),J("/Parent "+e.rootDictionaryObjId+" 0 R"),J("/Resources "+e.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(C(e.mediaBox.bottomLeftX))+" "+parseFloat(C(e.mediaBox.bottomLeftY))+" "+C(e.mediaBox.topRightX)+" "+C(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&J("/CropBox ["+C(e.cropBox.bottomLeftX)+" "+C(e.cropBox.bottomLeftY)+" "+C(e.cropBox.topRightX)+" "+C(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&J("/BleedBox ["+C(e.bleedBox.bottomLeftX)+" "+C(e.bleedBox.bottomLeftY)+" "+C(e.bleedBox.topRightX)+" "+C(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&J("/TrimBox ["+C(e.trimBox.bottomLeftX)+" "+C(e.trimBox.bottomLeftY)+" "+C(e.trimBox.topRightX)+" "+C(e.trimBox.topRightY)+"]"),null!==e.artBox&&J("/ArtBox ["+C(e.artBox.bottomLeftX)+" "+C(e.artBox.bottomLeftY)+" "+C(e.artBox.topRightX)+" "+C(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&J("/UserUnit "+e.userUnit),Be.publish("putPage",{objId:r,pageContext:Fe[t],pageNumber:t,page:n}),J("/Contents "+i+" 0 R"),J(">>"),J("endobj");var a=n.join("\n");return w===x&&(a+="\nQ"),$e(i,!0),it({data:a,filters:rt(),objectId:i}),J("endobj"),r},ot=p.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Me;e++)Fe[e].objId=Qe(),Fe[e].contentsObjId=Qe();for(e=1;e<=Me;e++)n.push(at({number:e,data:Y[e],objId:Fe[e].objId,contentsObjId:Fe[e].contentsObjId,mediaBox:Fe[e].mediaBox,cropBox:Fe[e].cropBox,bleedBox:Fe[e].bleedBox,trimBox:Fe[e].trimBox,artBox:Fe[e].artBox,userUnit:Fe[e].userUnit,rootDictionaryObjId:Ze,resourceDictionaryObjId:et}));$e(Ze,!0),J("<</Type /Pages");var r="/Kids [";for(t=0;t<Me;t++)r+=n[t]+" 0 R ";J(r+"]"),J("/Count "+Me),J(">>"),J("endobj"),Be.publish("postPutPages")},st=function(e){Be.publish("putFont",{font:e,out:J,newObject:Xe,putStream:it}),!0!==e.isAlreadyPutted&&(e.objectNumber=Xe(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Ne(e.postScriptName)),J("/Subtype /Type1"),"string"==typeof e.encoding&&J("/Encoding /"+e.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},lt=function(e){e.objectNumber=Xe();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[C(e.x),C(e.y),C(e.x+e.width),C(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");it({data:n,additionalKeyValues:t,objectId:e.objectNumber}),J("endobj")},ct=function(e,t){t||(t=21);var n=Xe(),r=function(e,t){var n,r=[],i=1/(t-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=e[0].offset){var a={offset:0,color:e[0].color};e.unshift(a)}if(1!=e[e.length-1].offset){var o={offset:1,color:e[e.length-1].color};e.push(o)}for(var s="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var u=e[l].offset,h=(n-u)/(e[l+1].offset-u),d=e[l].color,f=e[l+1].color;s+=W(Math.round((1-h)*d[0]+h*f[0]).toString(16))+W(Math.round((1-h)*d[1]+h*f[1]).toString(16))+W(Math.round((1-h)*d[2]+h*f[2]).toString(16))}return s.trim()}(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),it({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),J("endobj"),e.objectNumber=Xe(),J("<< /ShadingType "+e.type),J("/ColorSpace /DeviceRGB");var a="/Coords ["+C(parseFloat(e.coords[0]))+" "+C(parseFloat(e.coords[1]))+" ";2===e.type?a+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3])):a+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3]))+" "+C(parseFloat(e.coords[4]))+" "+C(parseFloat(e.coords[5])),J(a+="]"),e.matrix&&J("/Matrix ["+e.matrix.toString()+"]"),J("/Function "+n+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},ut=function(e,t){var n=Qe(),r=Xe();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(C).join(" ")+"]"}),i.push({key:"XStep",value:C(e.xStep)}),i.push({key:"YStep",value:C(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),it({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),J("endobj")},ht=function(e){for(var t in e.objectNumber=Xe(),J("<<"),e)switch(t){case"opacity":J("/ca "+A(e[t]));break;case"stroke-opacity":J("/CA "+A(e[t]))}J(">>"),J("endobj")},dt=function(e){$e(e.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in J("/Font <<"),Se)Se.hasOwnProperty(e)&&(!1===d||!0===d&&f.hasOwnProperty(e))&&J("/"+e+" "+Se[e].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(Ce).length>0){for(var e in J("/Shading <<"),Ce)Ce.hasOwnProperty(e)&&Ce[e]instanceof De&&Ce[e].objectNumber>=0&&J("/"+e+" "+Ce[e].objectNumber+" 0 R");Be.publish("putShadingPatternDict"),J(">>")}}(),function(e){if(Object.keys(Ce).length>0){for(var t in J("/Pattern <<"),Ce)Ce.hasOwnProperty(t)&&Ce[t]instanceof p.TilingPattern&&Ce[t].objectNumber>=0&&Ce[t].objectNumber<e&&J("/"+t+" "+Ce[t].objectNumber+" 0 R");Be.publish("putTilingPatternDict"),J(">>")}}(e.objectOid),function(){if(Object.keys(je).length>0){var e;for(e in J("/ExtGState <<"),je)je.hasOwnProperty(e)&&je[e].objectNumber>=0&&J("/"+e+" "+je[e].objectNumber+" 0 R");Be.publish("putGStateDict"),J(">>")}}(),function(){for(var e in J("/XObject <<"),ze)ze.hasOwnProperty(e)&&ze[e].objectNumber>=0&&J("/"+e+" "+ze[e].objectNumber+" 0 R");Be.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},ft=function(){var e=[];(function(){for(var e in Se)Se.hasOwnProperty(e)&&(!1===d||!0===d&&f.hasOwnProperty(e))&&st(Se[e])})(),function(){var e;for(e in je)je.hasOwnProperty(e)&&ht(je[e])}(),function(){for(var e in ze)ze.hasOwnProperty(e)&&lt(ze[e])}(),function(e){var t;for(t in Ce)Ce.hasOwnProperty(t)&&(Ce[t]instanceof De?ct(Ce[t]):Ce[t]instanceof Re&&ut(Ce[t],e))}(e),Be.publish("putResources"),e.forEach(dt),dt({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),Be.publish("postPutResources")},pt=function(e){_e[e.fontName]=_e[e.fontName]||{},_e[e.fontName][e.fontStyle]=e.id},mt=function(e,t,n,r,i){var a={id:"F"+(Object.keys(Se).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Be.publish("addFont",{font:a,instance:this}),Se[a.id]=a,pt(a),a.id},gt=p.__private__.pdfEscape=p.pdfEscape=function(e,t){return function(e,t){var n,r,i,a,o,s,l,c,u;if(i=(t=t||{}).sourceEncoding||"Unicode",o=t.outputEncoding,(t.autoencode||o)&&Se[ve].metadata&&Se[ve].metadata[i]&&Se[ve].metadata[i].encoding&&(a=Se[ve].metadata[i].encoding,!o&&Se[ve].encoding&&(o=Se[ve].encoding),!o&&a.codePages&&(o=a.codePages[0]),"string"==typeof o&&(o=a[o]),o)){for(l=!1,s=[],n=0,r=e.length;n<r;n++)(c=o[e.charCodeAt(n)])?s.push(String.fromCharCode(c)):s.push(e[n]),s[n].charCodeAt(0)>>8&&(l=!0);e=s.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(s=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(u),s.push(c-(u<<8))}return String.fromCharCode.apply(void 0,s)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vt=p.__private__.beginPage=function(e){Y[++Me]=[],Fe[Me]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},xt(Me),$(Y[U])},yt=function(e,t){var r,i,o;switch(n=t||n,"string"==typeof e&&(r=y(e.toLowerCase()),Array.isArray(r)&&(i=r[0],o=r[1])),Array.isArray(e)&&(i=e[0]*ye,o=e[1]*ye),isNaN(i)&&(i=a[0],o=a[1]),(i>14400||o>14400)&&(ne.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),i=Math.min(14400,i),o=Math.min(14400,o)),a=[i,o],n.substr(0,1)){case"l":o>i&&(a=[o,i]);break;case"p":i>o&&(a=[o,i])}vt(a),Jt(Qt),J(sn),0!==fn&&J(fn+" J"),0!==pn&&J(pn+" j"),Be.publish("addPage",{pageNumber:Me})},bt=function(e){e>0&&e<=Me&&(Y.splice(e,1),Fe.splice(e,1),Me--,U>Me&&(U=Me),this.setPage(U))},xt=function(e){e>0&&e<=Me&&(U=e)},wt=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Y.length-1},St=function(e,t,n){var r,i=void 0;return n=n||{},e=void 0!==e?e:Se[ve].fontName,t=void 0!==t?t:Se[ve].fontStyle,r=e.toLowerCase(),void 0!==_e[r]&&void 0!==_e[r][t]?i=_e[r][t]:void 0!==_e[e]&&void 0!==_e[e][t]?i=_e[e][t]:!1===n.disableWarning&&ne.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=_e.times[t])&&(i=_e.times.normal),i},_t=p.__private__.putInfo=function(){var e=Xe(),t=function(e){return e};for(var n in null!==h&&(t=Rt.encryptor(e,0)),J("<<"),J("/Producer ("+gt(t("jsPDF "+Pe.version))+")"),ge)ge.hasOwnProperty(n)&&ge[n]&&J("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+gt(t(ge[n]))+")");J("/CreationDate ("+gt(t(R))+")"),J(">>"),J("endobj")},Et=p.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Ze;switch(Xe(),J("<<"),J("/Type /Catalog"),J("/Pages "+t+" 0 R"),ae||(ae="fullwidth"),ae){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ae;"%"===n.substr(n.length-1)&&(ae=parseInt(ae)/100),"number"==typeof ae&&J("/OpenAction [3 0 R /XYZ null null "+A(ae)+"]")}switch(fe||(fe="continuous"),fe){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}he&&J("/PageMode /"+he),Be.publish("putCatalog"),J(">>"),J("endobj")},Ct=p.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(V+1)),J("/Root "+V+" 0 R"),J("/Info "+(V-1)+" 0 R"),null!==h&&J("/Encrypt "+Rt.oid+" 0 R"),J("/ID [ <"+P+"> <"+P+"> ]"),J(">>")},kt=p.__private__.putHeader=function(){J("%PDF-"+m),J("%\xba\xdf\xac\xe0")},Nt=p.__private__.putXRef=function(){var e="0000000000";J("xref"),J("0 "+(V+1)),J("0000000000 65535 f ");for(var t=1;t<=V;t++)"function"==typeof H[t]?J((e+H[t]()).slice(-10)+" 00000 n "):void 0!==H[t]?J((e+H[t]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},At=p.__private__.buildDocument=function(){V=0,G=0,q=[],H=[],K=[],Ze=Qe(),et=Qe(),$(q),Be.publish("buildDocument"),kt(),ot(),function(){Be.publish("putAdditionalObjects");for(var e=0;e<K.length;e++){var t=K[e];$e(t.objId,!0),J(t.content),J("endobj")}Be.publish("postPutAdditionalObjects")}(),ft(),null!==h&&(Rt.oid=Xe(),J("<<"),J("/Filter /Standard"),J("/V "+Rt.v),J("/R "+Rt.r),J("/U <"+Rt.toHexString(Rt.U)+">"),J("/O <"+Rt.toHexString(Rt.O)+">"),J("/P "+Rt.P),J(">>"),J("endobj")),_t(),Et();var e=G;return Nt(),Ct(),J("startxref"),J(""+e),J("%%EOF"),$(Y[U]),q.join("\n")},Tt=p.__private__.getBlob=function(e){return new Blob([te(e)],{type:"application/pdf"})},It=p.output=p.__private__.output=(Ye=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return At();case"save":p.save(t.filename);break;case"arraybuffer":return te(At());case"blob":return Tt(At());case"bloburi":case"bloburl":if(void 0!==ee.URL&&"function"==typeof ee.URL.createObjectURL)return ee.URL&&ee.URL.createObjectURL(Tt(At()))||void 0;ne.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=At();try{n=se(r)}catch(e){n=se(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",a=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,a="");var o='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+a+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",s=ee.open();return null!==s&&s.document.write(o),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=ee.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ee))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',d=ee.open();if(null!==d&&(d.document.write(h),d.document.title=t.filename),d||"undefined"==typeof safari)return d;break;case"datauri":case"dataurl":return ee.document.location.href=this.output("datauristring",t);default:return null}},Ye.foo=function(){try{return Ye.apply(this,arguments)}catch(Ye){var e=Ye.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Ye.message;if(!ee.console)throw new Error(t);ee.console.error(t,Ye),ee.alert&&alert(t)}},Ye.foo.bar=Ye,Ye.foo),Dt=function(e){return!0===Array.isArray(Ue)&&Ue.indexOf(e)>-1};switch(i){case"pt":ye=1;break;case"mm":ye=72/25.4;break;case"cm":ye=72/2.54;break;case"in":ye=72;break;case"px":ye=1==Dt("px_scaling")?.75:96/72;break;case"pc":case"em":ye=12;break;case"ex":ye=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);ye=i}var Rt=null;F(),L();var Pt=p.__private__.getPageInfo=p.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Fe[e].objId,pageNumber:e,pageContext:Fe[e]}},jt=p.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Fe)if(Fe[t].objId===e)break;return Pt(t)},Lt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Fe[U].objId,pageNumber:U,pageContext:Fe[U]}};p.addPage=function(){return yt.apply(this,arguments),this},p.setPage=function(){return xt.apply(this,arguments),$.call(this,Y[U]),this},p.insertPage=function(e){return this.addPage(),this.movePage(U,e),this},p.movePage=function(e,t){var n,r;if(e>t){n=Y[e],r=Fe[e];for(var i=e;i>t;i--)Y[i]=Y[i-1],Fe[i]=Fe[i-1];Y[t]=n,Fe[t]=r,this.setPage(t)}else if(e<t){n=Y[e],r=Fe[e];for(var a=e;a<t;a++)Y[a]=Y[a+1],Fe[a]=Fe[a+1];Y[t]=n,Fe[t]=r,this.setPage(t)}return this},p.deletePage=function(){return bt.apply(this,arguments),this},p.__private__.text=p.text=function(e,t,n,i,a){var o,s,l,c,u,h,d,p,m,g=(i=i||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var v=n;n=t,t=e,e=v}if(arguments[3]instanceof He==0?(l=arguments[4],c=arguments[5],"object"===(0,r.A)(d=arguments[3])&&null!==d||("string"==typeof l&&(c=l,l=null),"string"==typeof d&&(c=d,d=null),"number"==typeof d&&(l=d,d=null),i={flags:d,angle:l,align:c})):(k("The transform parameter of text() with a Matrix value"),m=a),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return g;var y,b="",S="number"==typeof i.lineHeightFactor?i.lineHeightFactor:Xt,_=g.internal.scaleFactor;function E(e){return e=e.split("\t").join(Array(i.TabLen||9).join(" ")),gt(e,d)}function N(e){for(var t,n=e.concat(),r=[],i=n.length;i--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function A(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,i,a=e.concat(),o=[],s=a.length;s--;)"string"==typeof(r=a.shift())?o.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=t(r[0],r[1],r[2]),o.push([i[0],i[1],i[2]]));n=o}return n}var T=!1,D=!0;if("string"==typeof e)T=!0;else if(Array.isArray(e)){var R=e.concat();s=[];for(var P,j=R.length;j--;)("string"!=typeof(P=R.shift())||Array.isArray(P)&&"string"!=typeof P[0])&&(D=!1);T=D}if(!1===T)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var L=ie/g.internal.scaleFactor,O=L*(S-1);switch(i.baseline){case"bottom":n-=O;break;case"top":n+=L-O;break;case"hanging":n+=L-2*O;break;case"middle":n+=L/2-O}if((h=i.maxWidth||0)>0&&("string"==typeof e?e=g.splitTextToSize(e,h):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(g.splitTextToSize(t,h))},[]))),o={text:e,x:t,y:n,options:i,mutex:{pdfEscape:gt,activeFontKey:ve,fonts:Se,activeFontSize:ie}},Be.publish("preProcessText",o),e=o.text,l=(i=o.options).angle,m instanceof He==0&&l&&"number"==typeof l){l*=Math.PI/180,0===i.rotationDirection&&(l=-l),w===x&&(l=-l);var M=Math.cos(l),F=Math.sin(l);m=new He(M,F,-F,M,0,0)}else l&&l instanceof He&&(m=l);w!==x||m||(m=Ge),void 0!==(u=i.charSpace||hn)&&(b+=C(I(u))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=i.horizontalScale)&&(b+=C(100*p)+" Tz\n"),i.lang;var B=-1,U=void 0!==i.renderingMode?i.renderingMode:i.stroke,z=g.internal.getCurrentPageInfo().pageContext;switch(U){case 0:case!1:case"fill":B=0;break;case 1:case!0:case"stroke":B=1;break;case 2:case"fillThenStroke":B=2;break;case 3:case"invisible":B=3;break;case 4:case"fillAndAddForClipping":B=4;break;case 5:case"strokeAndAddPathForClipping":B=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":B=6;break;case 7:case"addToPathForClipping":B=7}var W=void 0!==z.usedRenderingMode?z.usedRenderingMode:-1;-1!==B?b+=B+" Tr\n":-1!==W&&(b+="0 Tr\n"),-1!==B&&(z.usedRenderingMode=B),c=i.align||"left";var V,H=ie*S,q=g.internal.pageSize.getWidth(),G=Se[ve];u=i.charSpace||hn,h=i.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},i.flags);var K=[],Y=function(e){return g.getStringUnitWidth(e,{font:G,charSpace:u,fontSize:ie,doKerning:!1})*ie/_};if("[object Array]"===Object.prototype.toString.call(e)){var X;s=N(e),"left"!==c&&(V=s.map(Y));var Q,$=0;if("right"===c){t-=V[0],e=[],j=s.length;for(var Z=0;Z<j;Z++)0===Z?(Q=nn(t),X=rn(n)):(Q=I($-V[Z]),X=-H),e.push([s[Z],Q,X]),$=V[Z]}else if("center"===c){t-=V[0]/2,e=[],j=s.length;for(var ee=0;ee<j;ee++)0===ee?(Q=nn(t),X=rn(n)):(Q=I(($-V[ee])/2),X=-H),e.push([s[ee],Q,X]),$=V[ee]}else if("left"===c){e=[],j=s.length;for(var te=0;te<j;te++)e.push(s[te])}else if("justify"===c&&"Identity-H"===G.encoding){e=[],j=s.length,h=0!==h?h:q;for(var ne=0,re=0;re<j;re++)if(X=0===re?rn(n):-H,Q=0===re?nn(t):ne,re<j-1){var ae=I((h-V[re])/(s[re].split(" ").length-1)),oe=s[re].split(" ");e.push([oe[0]+" ",Q,X]),ne=0;for(var se=1;se<oe.length;se++){var le=(Y(oe[se-1]+" "+oe[se])-Y(oe[se]))*_+ae;se==oe.length-1?e.push([oe[se],le,0]):e.push([oe[se]+" ",le,0]),ne-=le}}else e.push([s[re],Q,X]);e.push(["",ne,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],j=s.length,h=0!==h?h:q,re=0;re<j;re++)X=0===re?rn(n):-H,Q=0===re?nn(t):0,re<j-1?K.push(C(I((h-V[re])/(s[re].split(" ").length-1)))):K.push(0),e.push([s[re],Q,X])}}!0===("boolean"==typeof i.R2L?i.R2L:ue)&&(e=A(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),o={text:e,x:t,y:n,options:i,mutex:{pdfEscape:gt,activeFontKey:ve,fonts:Se,activeFontSize:ie}},Be.publish("postProcessText",o),e=o.text,y=o.mutex.isHex||!1;var ce=Se[ve].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=A(e,function(e,t,n){return[E(e),t,n]})),s=N(e),e=[];for(var he,de,fe,pe=Array.isArray(s[0])?1:0,me="",ge=function(e,t,n){var r="";return n instanceof He?(n="number"==typeof i.angle?qe(n,new He(1,0,0,1,e,t)):qe(new He(1,0,0,1,e,t),n),w===x&&(n=qe(new He(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=C(e)+" "+C(t)+" Td\n",r},ye=0;ye<s.length;ye++){switch(me="",pe){case 1:fe=(y?"<":"(")+s[ye][0]+(y?">":")"),he=parseFloat(s[ye][1]),de=parseFloat(s[ye][2]);break;case 0:fe=(y?"<":"(")+s[ye]+(y?">":")"),he=nn(t),de=rn(n)}void 0!==K&&void 0!==K[ye]&&(me=K[ye]+" Tw\n"),0===ye?e.push(me+ge(he,de,m)+fe):0===pe?e.push(me+fe):1===pe&&e.push(me+ge(he,de,m)+fe)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var be="BT\n/";return be+=ve+" "+ie+" Tf\n",be+=C(ie*S)+" TL\n",be+=cn+"\n",be+=b,be+=e,J(be+="ET"),f[ve]=!0,g};var Ot=p.__private__.clip=p.clip=function(e){return J("evenodd"===e?"W*":"W"),this};p.clipEvenOdd=function(){return Ot("evenodd")},p.__private__.discardPath=p.discardPath=function(){return J("n"),this};var Mt=p.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(e){return Mt(e)&&(u=e),this};var Ft=p.__private__.getStyle=p.getStyle=function(e){var t=u;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Bt=p.close=function(){return J("h"),this};p.stroke=function(){return J("S"),this},p.fill=function(e){return Ut("f",e),this},p.fillEvenOdd=function(e){return Ut("f*",e),this},p.fillStroke=function(e){return Ut("B",e),this},p.fillStrokeEvenOdd=function(e){return Ut("B*",e),this};var Ut=function(e,t){"object"===(0,r.A)(t)?Vt(t,e):J(e)},zt=function(e){null===e||w===x&&void 0===e||(e=Ft(e),J(e))};function Wt(e,t,n,r,i){var a=new Re(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);a.stream=this.stream;var o=e+"$$"+this.cloneIndex+++"$$";return Ke(o,a),a}var Vt=function(e,t){var n=Ie[e.key],r=Ce[n];if(r instanceof De)J("q"),J(Ht(t)),r.gState&&p.setGState(r.gState),J(e.matrix.toString()+" cm"),J("/"+n+" sh"),J("Q");else if(r instanceof Re){var i=new He(1,0,0,-1,0,_n());e.matrix&&(i=i.multiply(e.matrix||Ge),n=Wt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,i).id),J("q"),J("/Pattern cs"),J("/"+n+" scn"),r.gState&&p.setGState(r.gState),J(t),J("Q")}},Ht=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},qt=p.moveTo=function(e,t){return J(C(I(e))+" "+C(D(t))+" m"),this},Gt=p.lineTo=function(e,t){return J(C(I(e))+" "+C(D(t))+" l"),this},Kt=p.curveTo=function(e,t,n,r,i,a){return J([C(I(e)),C(D(t)),C(I(n)),C(D(r)),C(I(i)),C(D(a)),"c"].join(" ")),this};p.__private__.line=p.line=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Mt(i))throw new Error("Invalid arguments passed to jsPDF.line");return w===b?this.lines([[n-e,r-t]],e,t,[1,1],i||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},p.__private__.lines=p.lines=function(e,t,n,r,i,a){var o,s,l,c,u,h,d,f,p,m,g,v;if("number"==typeof e&&(v=n,n=t,t=e,e=v),r=r||[1,1],a=a||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Mt(i)||"boolean"!=typeof a)throw new Error("Invalid arguments passed to jsPDF.lines");for(qt(t,n),o=r[0],s=r[1],c=e.length,m=t,g=n,l=0;l<c;l++)2===(u=e[l]).length?(m=u[0]*o+m,g=u[1]*s+g,Gt(m,g)):(h=u[0]*o+m,d=u[1]*s+g,f=u[2]*o+m,p=u[3]*s+g,m=u[4]*o+m,g=u[5]*s+g,Kt(h,d,f,p,m,g));return a&&Bt(),zt(i),this},p.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":qt(r[0],r[1]);break;case"l":Gt(r[0],r[1]);break;case"c":Kt.apply(this,r);break;case"h":Bt()}}return this},p.__private__.rect=p.rect=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Mt(i))throw new Error("Invalid arguments passed to jsPDF.rect");return w===b&&(r=-r),J([C(I(e)),C(D(t)),C(I(n)),C(I(r)),"re"].join(" ")),zt(i),this},p.__private__.triangle=p.triangle=function(e,t,n,r,i,a,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(a)||!Mt(o))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[i-n,a-r],[e-i,t-a]],e,t,[1,1],o,!0),this},p.__private__.roundedRect=p.roundedRect=function(e,t,n,r,i,a,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(a)||!Mt(o))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),a=Math.min(a,.5*r),this.lines([[n-2*i,0],[i*s,0,i,a-a*s,i,a],[0,r-2*a],[0,a*s,-i*s,a,-i,a],[2*i-n,0],[-i*s,0,-i,-a*s,-i,-a],[0,2*a-r],[0,-a*s,i*s,-a,i,-a]],e+i,t,[1,1],o,!0),this},p.__private__.ellipse=p.ellipse=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Mt(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var a=4/3*(Math.SQRT2-1)*n,o=4/3*(Math.SQRT2-1)*r;return qt(e+n,t),Kt(e+n,t-o,e+a,t-r,e,t-r),Kt(e-a,t-r,e-n,t-o,e-n,t),Kt(e-n,t+o,e-a,t+r,e,t+r),Kt(e+a,t+r,e+n,t+o,e+n,t),zt(i),this},p.__private__.circle=p.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Mt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},p.setFont=function(e,t,n){return n&&(t=E(t,n)),ve=St(e,t,{disableWarning:!1}),this};var Yt=p.__private__.getFont=p.getFont=function(){return Se[St.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var e,t,n={};for(e in _e)if(_e.hasOwnProperty(e))for(t in n[e]=[],_e[e])_e[e].hasOwnProperty(t)&&n[e].push(t);return n},p.addFont=function(e,t,n,r,i){var a=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==a.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==a.indexOf(arguments[3])&&(n=E(n,r)),mt.call(this,e,t,n,i=i||"Identity-H")};var Xt,Qt=e.lineWidth||.200025,$t=p.__private__.getLineWidth=p.getLineWidth=function(){return Qt},Jt=p.__private__.setLineWidth=p.setLineWidth=function(e){return Qt=e,J(C(I(e))+" w"),this};p.__private__.setLineDash=Pe.API.setLineDash=Pe.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return C(I(e))}).join(" "),t=C(I(t)),J("["+e+"] "+t+" d"),this};var Zt=p.__private__.getLineHeight=p.getLineHeight=function(){return ie*Xt};p.__private__.getLineHeight=p.getLineHeight=function(){return ie*Xt};var en=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Xt=e),this},tn=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Xt};en(e.lineHeight);var nn=p.__private__.getHorizontalCoordinate=function(e){return I(e)},rn=p.__private__.getVerticalCoordinate=function(e){return w===x?e:Fe[U].mediaBox.topRightY-Fe[U].mediaBox.bottomLeftY-I(e)},an=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(e){return C(nn(e))},on=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(e){return C(rn(e))},sn=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return tt(sn)},p.__private__.setStrokeColor=p.setDrawColor=function(e,t,n,r){return sn=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),J(sn),this};var ln=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return tt(ln)},p.__private__.setFillColor=p.setFillColor=function(e,t,n,r){return ln=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),J(ln),this};var cn=e.textColor||"0 g",un=p.__private__.getTextColor=p.getTextColor=function(){return tt(cn)};p.__private__.setTextColor=p.setTextColor=function(e,t,n,r){return cn=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var hn=e.charSpace,dn=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(hn||0)};p.__private__.setCharSpace=p.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hn=e,this};var fn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fn=t,J(t+" J"),this};var pn=0;p.__private__.setLineJoin=p.setLineJoin=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pn=t,J(t+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(C(I(e))+" M"),this},p.GState=Te,p.setGState=function(e){(e="string"==typeof e?je[Le[e]]:mn(null,e)).equals(Oe)||(J("/"+e.id+" gs"),Oe=e)};var mn=function(e,t){if(!e||!Le[e]){var n=!1;for(var r in je)if(je.hasOwnProperty(r)&&je[r].equals(t)){n=!0;break}if(n)t=je[r];else{var i="GS"+(Object.keys(je).length+1).toString(10);je[i]=t,t.id=i}return e&&(Le[e]=t.id),Be.publish("addGState",t),t}};p.addGState=function(e,t){return mn(e,t),this},p.saveGraphicsState=function(){return J("q"),Ee.push({key:ve,size:ie,color:cn}),this},p.restoreGraphicsState=function(){J("Q");var e=Ee.pop();return ve=e.key,ie=e.size,cn=e.color,Oe=null,this},p.setCurrentTransformationMatrix=function(e){return J(e.toString()+" cm"),this},p.comment=function(e){return J("#"+e),this};var gn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},vn=function(e,t,n,r){gn.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var a=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}}),this},yn=function(){this.page=Me,this.currentPage=U,this.pages=Y.slice(0),this.pagesContext=Fe.slice(0),this.x=be,this.y=xe,this.matrix=we,this.width=wn(U),this.height=_n(U),this.outputDestination=Q,this.id="",this.objectNumber=-1};yn.prototype.restore=function(){Me=this.page,U=this.currentPage,Fe=this.pagesContext,Y=this.pages,be=this.x,xe=this.y,we=this.matrix,Sn(U,this.width),En(U,this.height),Q=this.outputDestination};var bn=function(e,t,n,r,i){Ve.push(new yn),Me=U=0,Y=[],be=e,xe=t,we=i,vt([n,r])};for(var xn in p.beginFormObject=function(e,t,n,r,i){return bn(e,t,n,r,i),this},p.endFormObject=function(e){return function(e){if(We[e])Ve.pop().restore();else{var t=new yn,n="Xo"+(Object.keys(ze).length+1).toString(10);t.id=n,We[e]=n,ze[n]=t,Be.publish("addFormObject",t),Ve.pop().restore()}}(e),this},p.doFormObject=function(e,t){var n=ze[We[e]];return J("q"),J(t.toString()+" cm"),J("/"+n.id+" Do"),J("Q"),this},p.getFormObject=function(e){var t=ze[We[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},p.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(le(Tt(At()),e),"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),this):new Promise(function(t,n){try{var r=le(Tt(At()),e);"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),t(r)}catch(e){n(e.message)}})},Pe.API)Pe.API.hasOwnProperty(xn)&&("events"===xn&&Pe.API.events.length?function(e,t){var n,r,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],r=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Be,Pe.API.events):p[xn]=Pe.API[xn]);var wn=p.getPageWidth=function(e){return(Fe[e=e||U].mediaBox.topRightX-Fe[e].mediaBox.bottomLeftX)/ye},Sn=p.setPageWidth=function(e,t){Fe[e].mediaBox.topRightX=t*ye+Fe[e].mediaBox.bottomLeftX},_n=p.getPageHeight=function(e){return(Fe[e=e||U].mediaBox.topRightY-Fe[e].mediaBox.bottomLeftY)/ye},En=p.setPageHeight=function(e,t){Fe[e].mediaBox.topRightY=t*ye+Fe[e].mediaBox.bottomLeftY};return p.internal={pdfEscape:gt,getStyle:Ft,getFont:Yt,getFontSize:oe,getCharSpace:dn,getTextColor:un,getLineHeight:Zt,getLineHeightFactor:tn,getLineWidth:$t,write:Z,getHorizontalCoordinate:nn,getVerticalCoordinate:rn,getCoordinateString:an,getVerticalCoordinateString:on,collections:{},newObject:Xe,newAdditionalObject:Je,newObjectDeferred:Qe,newObjectDeferredBegin:$e,getFilters:rt,putStream:it,events:Be,scaleFactor:ye,pageSize:{getWidth:function(){return wn(U)},setWidth:function(e){Sn(U,e)},getHeight:function(){return _n(U)},setHeight:function(e){En(U,e)}},encryptionOptions:h,encryption:Rt,getEncryptor:function(e){return null!==h?Rt.encryptor(e,0):function(e){return e}},output:It,getNumberOfPages:wt,pages:Y,out:J,f2:A,f3:T,getPageInfo:Pt,getPageInfoByObjId:jt,getCurrentPageInfo:Lt,getPDFVersion:g,Point:gn,Rectangle:vn,Matrix:He,hasHotfix:Dt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return wn(U)},set:function(e){Sn(U,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return _n(U)},set:function(e){En(U,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=re.length;t<n;t++){var r=mt.call(this,e[t][0],e[t][1],e[t][2],re[t][3],!0);!1===d&&(f[r]=!0);var i=e[t][0].split("-");pt({id:r,fontName:i[0],fontStyle:i[1]||""})}Be.publish("addFonts",{fonts:Se,dictionary:_e})}.call(p,re),ve="F1",yt(a,n),Be.publish("initialized"),p}ke.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},ke.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ke.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},ke.prototype.processOwnerPassword=function(e,t){return Ee(we(t).substr(0,5),e)},ke.prototype.encryptor=function(e,t){var n=we(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return Ee(n,e)}},Te.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,r.A)(e)!==(0,r.A)(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return 0===i},Pe.API={events:[]},Pe.version="2.5.2";var je=Pe.API,Le=1,Oe=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Me=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Fe=function(e){return e.toFixed(2)},Be=function(e){return e.toFixed(5)};je.__acroform__={};var Ue=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},ze=function(e){return e*Le},We=function(e){var t=new at,n=bt.internal.getHeight(e)||0,r=bt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Fe(r)),Number(Fe(n))],t},Ve=je.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},He=je.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},qe=je.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},Ge=je.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qe(e,t-1)},Ke=je.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Ve(e,t-1)},Ye=je.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return He(e,t-1)},Xe=je.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],a=e[1],o=e[2],s=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(a+s)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(a)||0,[Number(Fe(l.lowerLeft_X)),Number(Fe(l.lowerLeft_Y)),Number(Fe(l.upperRight_X)),Number(Fe(l.upperRight_Y))]},Qe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=$e(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Fe(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=We(e);return a.scope=e.scope,a.stream=t.join("\n"),a}},$e=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(e){return e.split("\n")}):i.map(function(e){return[e]});var a=n,o=bt.internal.getHeight(e)||0;o=o<0?-o:o;var s=bt.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(t,n,r){if(t+1<i.length){var a=n+" "+i[t+1][0];return Je(a,e,r).width<=s-4}return!1};a++;e:for(;a>0;){t="",a--;var c,u,h=Je("3",e,a).height,d=e.multiline?o-a:(o-h)/2,f=d+=2,p=0,m=0,g=0;if(a<=0){t="(...) Tj\n",t+="% Width of Text: "+Je(t,e,a=12).width+", FieldWidth:"+s+"\n";break}for(var v="",y=0,b=0;b<i.length;b++)if(i.hasOwnProperty(b)){var x=!1;if(1!==i[b].length&&g!==i[b].length-1){if((h+2)*(y+2)+2>o)continue e;v+=i[b][g],x=!0,m=b,b--}else{v=" "==(v+=i[b][g]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var w=parseInt(b),S=l(w,v,a),_=b>=i.length-1;if(S&&!_){v+=" ",g=0;continue}if(S||_){if(_)m=w;else if(e.multiline&&(h+2)*(y+2)+2>o)continue e}else{if(!e.multiline)continue e;if((h+2)*(y+2)+2>o)continue e;m=w}}for(var E="",C=p;C<=m;C++){var k=i[C];if(e.multiline){if(C===m){E+=k[g]+" ",g=(g+1)%k.length;continue}if(C===p){E+=k[k.length-1]+" ";continue}}E+=k[0]+" "}switch(E=" "==E.substr(E.length-1)?E.substr(0,E.length-1):E,u=Je(E,e,a).width,e.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;default:c=2}t+=Fe(c)+" "+Fe(f)+" Td\n",t+="("+Oe(E)+") Tj\n",t+=-Fe(c)+" 0 Td\n",f=-(a+2),u=0,p=x?m:m+1,y++,v=""}break}return r.text=t,r.fontSize=a,r},Je=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Ze={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},et=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},tt=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(st.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ze)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Le=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ot,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&et(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var i in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(i)){var a=e[i],o=[],s=a.Rect;if(a.Rect&&(a.Rect=Xe(a.Rect,t)),t.internal.newObjectDeferredBegin(a.objId,!0),a.DA=bt.createDefaultAppearanceStream(a),"object"===(0,r.A)(a)&&"function"==typeof a.getKeyValueListForStream&&(o=a.getKeyValueListForStream()),a.Rect=s,a.hasAppearanceStream&&!a.appearanceStreamContent){var l=Qe(a);o.push({key:"AP",value:"<</N "+l+">>"}),t.internal.acroformPlugin.xForms.push(l)}if(a.appearanceStreamContent){var c="";for(var u in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(u)){var h=a.appearanceStreamContent[u];if(c+="/"+u+" ",c+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var i in h)if(h.hasOwnProperty(i)){var d=h[i];"function"==typeof d&&(d=d.call(t,a)),c+="/"+i+" "+d+" ",t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=h)&&(d=d.call(t,a)),c+="/"+i+" "+d,t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d);c+=">>"}o.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:o,objectId:a.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=n,a=e[n];t.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,r.A)(a)&&"function"==typeof a.putStream&&a.putStream(),delete e[i]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},nt=je.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(e){return e};if(Array.isArray(e)){for(var a="[",o=0;o<e.length;o++)switch(0!==o&&(a+=" "),(0,r.A)(e[o])){case"boolean":case"number":case"object":a+=e[o].toString();break;case"string":"/"!==e[o].substr(0,1)?(void 0!==t&&n&&(i=n.internal.getEncryptor(t)),a+="("+Oe(i(e[o].toString()))+")"):a+=e[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rt=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Oe(r(e))+")"},it=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};it.prototype.toString=function(){return this.objId+" 0 R"},it.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},it.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:nt(i,this.objId,this.scope)}):i instanceof it?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:r,value:i}))}return e};var at=function(){it.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Ue(at,it);var ot=function(){it.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Oe(t(e))+")"}},set:function(t){e=t}})};Ue(ot,it);var st=function e(){it.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(t,3))},set:function(e){!0===Boolean(e)?this.F=Ke(t,3):this.F=Ye(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof mt)return;a="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Oe(t(a))+")"},set:function(e){a=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Le:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof mt||this instanceof vt))return rt(h,this.objId,this.scope)},set:function(e){e=e.toString(),h=e}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof dt==0?rt(d,this.objId,this.scope):d},set:function(e){e=e.toString(),d=this instanceof dt==0?"("===e.substr(0,1)?Me(e.substr(1,e.length-2)):Me(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof dt==1?Me(d.substr(1,d.length-1)):d},set:function(e){e=e.toString(),d=this instanceof dt==1?"/"+e:e}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof dt==0?rt(f,this.objId,this.scope):f},set:function(e){e=e.toString(),f=this instanceof dt==0?"("===e.substr(0,1)?Me(e.substr(1,e.length-2)):Me(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof dt==1?Me(f.substr(1,f.length-1)):f},set:function(e){e=e.toString(),f=this instanceof dt==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(e){e=Boolean(e),m=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,1):this.Ff=Ye(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,2):this.Ff=Ye(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,3):this.Ff=Ye(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Ue(st,it);var lt=function(){st.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nt(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,i=[];r=t.exec(e);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,18):this.Ff=Ye(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=Ke(this.Ff,19):this.Ff=Ye(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=Ke(this.Ff,20),t.sort()):this.Ff=Ye(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,22):this.Ff=Ye(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,23):this.Ff=Ye(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,27):this.Ff=Ye(this.Ff,27)}}),this.hasAppearanceStream=!1};Ue(lt,st);var ct=function(){lt.call(this),this.fontName="helvetica",this.combo=!1};Ue(ct,lt);var ut=function(){ct.call(this),this.combo=!0};Ue(ut,ct);var ht=function(){ut.call(this),this.edit=!0};Ue(ht,ut);var dt=function(){st.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,15):this.Ff=Ye(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,16):this.Ff=Ye(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,17):this.Ff=Ye(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,26):this.Ff=Ye(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Oe(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,r.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Ue(dt,st);var ft=function(){dt.call(this),this.pushButton=!0};Ue(ft,dt);var pt=function(){dt.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};Ue(pt,dt);var mt=function(){var e,t;st.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),i)n.push("/"+t+" ("+Oe(e(i[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,r.A)(e)&&(i=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(e){"string"==typeof e&&(i.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ue(mt,st),pt.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},pt.prototype.createOption=function(e){var t=new mt;return t.Parent=this,t.optionName=e,this.Kids.push(t),xt.call(this.scope,t),t};var gt=function(){dt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};Ue(gt,dt);var vt=function(){st.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,13):this.Ff=Ye(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,21):this.Ff=Ye(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,23):this.Ff=Ye(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,24):this.Ff=Ye(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,25):this.Ff=Ye(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,26):this.Ff=Ye(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ue(vt,st);var yt=function(){vt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=Ke(this.Ff,14):this.Ff=Ye(this.Ff,14)}}),this.password=!0};Ue(yt,vt);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=We(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=$e(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Fe(bt.internal.getWidth(e))+" "+Fe(bt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Fe(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=We(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],a=bt.internal.getHeight(e),o=bt.internal.getWidth(e),s=$e(e,e.caption);return i.push("1 g"),i.push("0 0 "+Fe(o)+" "+Fe(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Fe(o-1)+" "+Fe(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Fe(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=We(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Fe(bt.internal.getWidth(e))+" "+Fe(bt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=bt.RadioButton.Circle.YesNormal,t.D[e]=bt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=We(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=bt.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Be(bt.internal.getWidth(e)/2)+" "+Be(bt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=We(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*bt.internal.Bezier_C).toFixed(5)),o=Number((r*bt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Be(bt.internal.getWidth(e)/2)+" "+Be(bt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Be(bt.internal.getWidth(e)/2)+" "+Be(bt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=We(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*bt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Be(bt.internal.getWidth(e)/2)+" "+Be(bt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=bt.RadioButton.Cross.YesNormal,t.D[e]=bt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=We(e);t.scope=e.scope;var n=[],r=bt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Fe(bt.internal.getWidth(e)-2)+" "+Fe(bt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Fe(r.x1.x)+" "+Fe(r.x1.y)+" m"),n.push(Fe(r.x2.x)+" "+Fe(r.x2.y)+" l"),n.push(Fe(r.x4.x)+" "+Fe(r.x4.y)+" m"),n.push(Fe(r.x3.x)+" "+Fe(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=We(e);t.scope=e.scope;var n=bt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Fe(bt.internal.getWidth(e))+" "+Fe(bt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Fe(bt.internal.getWidth(e)-2)+" "+Fe(bt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Fe(n.x1.x)+" "+Fe(n.x1.y)+" m"),r.push(Fe(n.x2.x)+" "+Fe(n.x2.y)+" l"),r.push(Fe(n.x4.x)+" "+Fe(n.x4.y)+" m"),r.push(Fe(n.x3.x)+" "+Fe(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=We(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Fe(bt.internal.getWidth(e))+" "+Fe(bt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};bt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=bt.internal.getWidth(e),n=bt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},bt.internal.getWidth=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=ze(e.Rect[2])),t},bt.internal.getHeight=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=ze(e.Rect[3])),t};var xt=je.addField=function(e){if(tt(this,e),!(e instanceof st))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};je.AcroFormChoiceField=lt,je.AcroFormListBox=ct,je.AcroFormComboBox=ut,je.AcroFormEditBox=ht,je.AcroFormButton=dt,je.AcroFormPushButton=ft,je.AcroFormRadioButton=pt,je.AcroFormCheckBox=gt,je.AcroFormTextField=vt,je.AcroFormPasswordField=yt,je.AcroFormAppearance=bt,je.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:ut,EditBox:ht,Button:dt,PushButton:ft,RadioButton:pt,CheckBox:gt,TextField:vt,PasswordField:yt,Appearance:bt},Pe.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:ut,EditBox:ht,Button:dt,PushButton:ft,RadioButton:pt,CheckBox:gt,TextField:vt,PasswordField:yt,Appearance:bt};var wt=Pe.AcroForm;function St(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(e,r){var i,a,o,s,l,c=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(_(e))for(l in n)for(o=n[l],i=0;i<o.length;i+=1){for(s=!0,a=0;a<o[i].length;a+=1)if(void 0!==o[i][a]&&o[i][a]!==e[a]){s=!1;break}if(!0===s){c=l;break}}else for(l in n)for(o=n[l],i=0;i<o.length;i+=1){for(s=!0,a=0;a<o[i].length;a+=1)if(void 0!==o[i][a]&&o[i][a]!==e.charCodeAt(a)){s=!1;break}if(!0===s){c=l;break}}return c===t&&r!==t&&(c=r),c},a=function e(t){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var a=[];if(a.push({key:"Type",value:"/XObject"}),a.push({key:"Subtype",value:"/Image"}),a.push({key:"Width",value:t.width}),a.push({key:"Height",value:t.height}),t.colorSpace===v.INDEXED?a.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(a.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===v.DEVICE_CMYK&&a.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),a.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&a.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var o="",s=0,l=t.transparency.length;s<l;s++)o+=t.transparency[s]+" "+t.transparency[s]+" ";a.push({key:"Mask",value:"["+o+"]"})}void 0!==t.sMask&&a.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:a,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,h={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(h.filter=t.filter),e.call(this,h)}if(t.colorSpace===v.INDEXED){var d=this.internal.newObject();r({data:C(new Uint8Array(t.palette)),objectId:d}),n("endobj")}},o=function(){var e=this.internal.collections.addImage_images;for(var t in e)a.call(this,e[t])},s=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var e=this.internal.collections.addImage_images;return l.call(this),e},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(t){return"function"==typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===(0,r.A)(e)&&1===e.nodeType},f=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return oe(unescape(r).split("base64,").pop());var i=e.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var a;switch(n){case"PNG":a="image/png";break;case"WEBP":a="image/webp";break;default:a="image/jpeg"}return oe(t.toDataURL(a,1).split("base64,").pop())}},p=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},m=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},g=function(e,t,n,r,i,a){var o=m.call(this,n,r,i),s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=c.call(this);if(n=o[0],r=o[1],u[i.index]=i,a){a*=Math.PI/180;var h=Math.cos(a),d=Math.sin(a),f=function(e){return e.toFixed(4)},p=[f(h),f(d),f(-1*d),f(h),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,s(e),l(t+r),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([s(n),"0","0",s(r),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(r),s(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(_(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},x=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},w=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:t[1]})}return n},S=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return S()&&e instanceof ArrayBuffer};var _=e.__addimage__.isArrayBufferView=function(e){return S()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},C=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=_(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,i,a,o,s,c,u,h;if("number"==typeof arguments[1]?(n=t,i=arguments[1],a=arguments[2],o=arguments[3],s=arguments[4],c=arguments[5],u=arguments[6],h=arguments[7]):(n=arguments[1],i=arguments[2],a=arguments[3],o=arguments[4],s=arguments[5],c=arguments[6],u=arguments[7],h=arguments[8]),"object"===(0,r.A)(e=arguments[0])&&!d(e)&&"imageData"in e){var f=e;e=f.imageData,n=f.format||n||t,i=f.x||i||0,a=f.y||a||0,o=f.w||f.width||o,s=f.h||f.height||s,c=f.alias||c,u=f.compression||u,h=f.rotation||f.angle||h}var p=this.internal.getFilters();if(void 0===u&&-1!==p.indexOf("FlateEncode")&&(u="SLOW"),isNaN(i)||isNaN(a))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var m=k.call(this,e,n,c,u);return g.call(this,i,a,o,s,m,h),this};var k=function(n,r,a,o){var s,l,c;if("string"==typeof n&&i(n)===t){n=unescape(n);var m=N(n,!1);(""!==m||void 0!==(m=e.loadFile(n,!0)))&&(n=m)}if(d(n)&&(n=f(n,r)),r=i(n,r),!h(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(c=a)||0===c.length)&&(a=function(e){return"string"==typeof e||_(e)?b(e):_(e.data)?b(e.data):null}(n)),(s=p.call(this,a))||(S()&&(n instanceof Uint8Array||"RGBA"===r||(l=n,n=E(n))),s=this["process"+r.toUpperCase()](n,u.call(this),a,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:y.NONE}(o),l)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},N=e.__addimage__.convertBase64ToBinaryString=function(e,t){var n;t="boolean"!=typeof t||t;var r,i="";if("string"==typeof e){r=null!==(n=w(e))?n.data:e;try{i=oe(r)}catch(e){if(t)throw x(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};e.getImageProperties=function(n){var r,a,o="";if(d(n)&&(n=f(n)),"string"==typeof n&&i(n)===t&&(""===(o=N(n,!1))&&(o=e.loadFile(n)||""),n=o),a=i(n),!h(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if(!S()||n instanceof Uint8Array||(n=E(n)),!(r=this["process"+a.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=a,r}}(Pe.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Pe.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var h=0;h<l.length;h++){n=l[h];var d=this.internal.pdfEscape,f=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+d(g(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+s.objId+" 0 R",i+=" /T ("+d(g(v))+") >>",p.content=i;var y=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+y,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(p.objId,"0 R",m.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+d(f(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var x=this.annotations._nameMap[n.options.name];n.options.pageNumber=x.page,n.options.top=x.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+d(f(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var w=o(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+w+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,i){var a=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:o(e),y:s(t),w:o(e+n),h:s(t+r)},options:i,type:"link"})},e.textWithLink=function(e,t,n,r){var i,a,o=this.getTextWidth(e),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){a=r.maxWidth;var l=this.splitTextToSize(e,a).length;i=Math.ceil(s*l)}else a=o,i=s;return this.text(e,t,n,r),n+=.2*s,"center"===r.align&&(t-=o/2),"right"===r.align&&(t-=o),this.link(t,n-s,a,i,r),o},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Pe.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},o=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},s=e.__arabicParser__.isArabicEndLetter=function(e){return o(e)&&a(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return o(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return o(e)&&a(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return o(e)&&a(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return o(e)&&a(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return o(e)&&a(e)&&4==t[e.charCodeAt(0)].length},h=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,i="",a=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(a++,"number"==typeof(r=r[e.charCodeAt(t)])&&(i+=String.fromCharCode(r),r=n,a=0),t===e.length-1&&(r=n,i+=e.charAt(t-(a-1)),t-=a-1,a=0)):(r=n,i+=e.charAt(t-a),t-=a,a=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var d=e.__arabicParser__.getCorrectForm=function(e,t,n){return o(e)?!1===a(e)?-1:!c(e)||!o(t)&&!o(n)||!o(n)&&s(t)||s(e)&&!o(t)||s(e)&&l(t)||s(e)&&s(t)?0:u(e)&&o(t)&&!s(t)&&o(n)&&c(n)?3:s(e)||!o(n)?1:2:-1},f=function(e){var n=0,r=0,i=0,a="",s="",l="",c=(e=e||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),r=0;r<c[n].length;r+=1)a=c[n][r],s=c[n][r-1],l=c[n][r+1],o(a)?(i=d(a,s,l),u[n]+=-1!==i?String.fromCharCode(t[a.charCodeAt(0)][i]):a):u[n]+=a;u[n]=h(u[n])}return u.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([f(t[r][0]),t[r][1],t[r][2]]):n.push([f(t[r])]);e=n}else e=f(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(Pe.API),Pe.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")});return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Pe.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var a=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var o=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return o},set:function(e){o=e}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){i.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),r=t.font||this.getFont(),a=t.scaleFactor||this.internal.scaleFactor,o=0,s=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,u))},[])):e=Array.isArray(e)?e:[e];for(var h=0;h<e.length;h++)o<(l=this.getStringUnitWidth(e[h],{font:r})*n)&&(o=l);return 0!==o&&(s=e.length),{w:o/=a,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/a,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var e;e=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var r=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===e.lineNumber?(e.x=(r.x||0)+(r.width||0),e.y=r.y||0):r.y+r.height+e.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=s.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=r.y+r.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-a,e.y+a,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+a,{align:"center",baseline:"top",maxWidth:e.width-a-a}):this.text(e.text,e.x+a,e.y+a,{align:"left",baseline:"top",maxWidth:e.width-a-a})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,c,u,h){if(i.call(this),!c)throw new Error("No data for PDF table.");var d,f,p,m,g=[],v=[],y=[],b={},x={},w=[],S=[],_=(h=h||{}).autoSize||!1,E=!1!==h.printHeaders,C=h.css&&void 0!==h.css["font-size"]?16*h.css["font-size"]:h.fontSize||12,k=h.margins||Object.assign({width:this.getPageWidth()},t),N="number"==typeof h.padding?h.padding:3,A=h.headerBackgroundColor||"#c8c8c8",T=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=C,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=T,this.setFontSize(C),null==u)v=g=Object.keys(c[0]),y=g.map(function(){return"left"});else if(Array.isArray(u)&&"object"===(0,r.A)(u[0]))for(g=u.map(function(e){return e.name}),v=u.map(function(e){return e.prompt||e.name||""}),y=u.map(function(e){return e.align||"left"}),d=0;d<u.length;d+=1)x[u[d].name]=u[d].width*(19.049976/25.4);else Array.isArray(u)&&"string"==typeof u[0]&&(v=g=u,y=g.map(function(){return"left"}));if(_||Array.isArray(u)&&"string"==typeof u[0])for(d=0;d<g.length;d+=1){for(b[m=g[d]]=c.map(function(e){return e[m]}),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(v[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),f=b[m],this.setFont(void 0,"normal"),p=0;p<f.length;p+=1)w.push(this.getTextDimensions(f[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);x[m]=Math.max.apply(null,w)+N+N,w=[]}if(E){var I={};for(d=0;d<g.length;d+=1)I[g[d]]={},I[g[d]].text=v[d],I[g[d]].align=y[d];var D=l.call(this,I,x);S=g.map(function(t){return new o(e,n,x[t],D,I[t].text,void 0,I[t].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var R=u.reduce(function(e,t){return e[t.name]=t.align,e},{});for(d=0;d<c.length;d+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:d,data:c[d]},this);var P=l.call(this,c[d],x);for(p=0;p<g.length;p+=1){var j=c[d][g[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:d,col:p,data:j},this),s.call(this,new o(e,n,x[g[p]],P,j,d+2,R[g[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var l=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map(function(r){var i=e[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[r]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/i+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){i.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var a=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(a[0],a[1],a[2],a[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){r=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(r.y=this.internal.__cell__.margins.top||0,l.push(r)),r.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,r),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Pe.API);var _t={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Et=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ct=St(Et),kt=[100,200,300,400,500,600,700,800,900],Nt=St(kt);function At(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return _t[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),i=function(e){return"number"==typeof Ct[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function Tt(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var It={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Dt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Rt(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Pt(e){return e.trimLeft()}function jt(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Lt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Ot,Mt,Ft,Bt,Ut=["times"];!function(e){var t,n,i,a,o,s,l,c,u,h=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new s,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new s,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new h}]);var d=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var a=0;Object.defineProperty(this,"posY",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),u.margin=t}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(e){o=e}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(e){e instanceof h&&(u=e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(e){u.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=f(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=f(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var d=null;function p(e,t){if(null===d){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))})}),t}(e.getFontList());d=function(e){for(var t={},n=0;n<e.length;++n){var r=At(e[n]),i=r.family,a=r.stretch,o=r.style,s=r.weight;t[i]=t[i]||{},t[i][a]=t[i][a]||{},t[i][a][o]=t[i][a][o]||{},t[i][a][o][s]=r}return t}(n.concat(t))}return d}var m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(e){d=null,m=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],r=(t[2],t[3]),i=t[4],a=(t[5],t[6]),o=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===o?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(e){var t,n,r=[],i=e.trim();if(""===i)return Ut;if(i in Dt)return[Dt[i]];for(;""!==i;){switch(n=null,t=(i=Pt(i)).charAt(0)){case'"':case"'":n=jt(i.substring(1),t);break;default:n=Lt(i)}if(null===n)return Ut;if(r.push(n[0]),""!==(i=Pt(n[1]))&&","!==i.charAt(0))return Ut;i=i.replace(/^,/,"")}return r}(a);if(this.fontFaces){var l=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},It,n.genericFontFamilies||{}),a=null,o=null,s=0;s<t.length;++s)if(i[(a=At(t[s])).family]&&(a.family=i[a.family]),e.hasOwnProperty(a.family)){o=e[a.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+Rt(a)+"' and default family '"+r+"'.");if(o=function(e,t){if(t[e])return t[e];var n=Ct[e],r=n<=Ct.normal?-1:1,i=Tt(t,Et,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(a.stretch,o),o=function(e,t){if(t[e])return t[e];for(var n=_t[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(a.style,o),!(o=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=Nt[e],r=Tt(t,kt,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Rt(a)+"'.");return o}(p(this.pdf,this.fontFaces),s.map(function(e){return{family:e,stretch:"normal",weight:r,style:n}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var u="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<s.length;d++){if(void 0!==this.pdf.internal.getFont(s[d],c,{noFallback:!0,disableWarning:!0})){u=s[d];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(s[d],"bold",{noFallback:!0,disableWarning:!0}))u=s[d],c="bold";else if(void 0!==this.pdf.internal.getFont(s[d],"normal",{noFallback:!0,disableWarning:!0})){u=s[d],c="normal";break}}if(""===u)for(var f=0;f<s.length;f++)if(h[s[f]]){u=h[s[f]];break}u=""===u?"Times":u,this.pdf.setFont(u,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};d.prototype.setLineDash=function(e){this.lineDash=e},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){w.call(this,"fill",!1)},d.prototype.stroke=function(){w.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(e,t)},d.prototype.closePath=function(){var e=new s(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,r.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new s(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(e.x,e.y)},d.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(n.x,n.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},d.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new s(n,r)),a=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"qct",x1:a.x,y1:a.y,x:i.x,y:i.y}),this.ctx.lastPoint=new s(i.x,i.y)},d.prototype.bezierCurveTo=function(e,t,n,r,i,a){if(isNaN(i)||isNaN(a)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new s(i,a)),l=this.ctx.transform.applyToPoint(new s(e,t)),c=this.ctx.transform.applyToPoint(new s(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new s(o.x,o.y)},d.prototype.arc=function(e,t,n,r,i,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw ne.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(a=Boolean(a),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new s(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new s(0,n)),c=this.ctx.transform.applyToPoint(new s(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:i,counterclockwise:a})},d.prototype.arcTo=function(e,t,n,r,i){throw new Error("arcTo not implemented.")},d.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},d.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},d.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},d.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},d.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},d.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(e){var t,n,r,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,i=0;else{var a=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==a)t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),i=1;else if(null!==(a=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),i=parseFloat(a[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var o=new ce(e);e=o.ok?o.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:i,style:e}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},m=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};d.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ne.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!p.call(this)){var i=L(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;T.call(this,{text:e,x:t,y:n,scale:a,angle:i,align:this.textAlign,maxWidth:r})}},d.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ne.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){r=isNaN(r)?void 0:r;var i=L(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;T.call(this,{text:e,x:t,y:n,scale:a,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},d.prototype.measureText=function(e){if("string"!=typeof e)throw ne.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},d.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.rotate=function(e){if(isNaN(e))throw ne.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},d.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.transform=function(e,t,n,r,i,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(a))throw ne.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var o=new c(e,t,n,r,i,a);this.ctx.transform=this.ctx.transform.multiply(o)},d.prototype.setTransform=function(e,t,n,r,i,a){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,a=isNaN(a)?0:a,this.ctx.transform=new c(e,t,n,r,i,a)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(e,t,n,r,i,a,o,s,u){var h=this.pdf.getImageProperties(e),d=1,f=1,p=1,m=1;void 0!==r&&void 0!==s&&(p=s/r,m=u/i,d=h.width/r*s/r,f=h.height/i*u/i),void 0===a&&(a=t,o=n,t=0,n=0),void 0!==r&&void 0===s&&(s=r,u=i),void 0===r&&void 0===s&&(s=h.width,u=h.height);for(var y,w=this.ctx.transform.decompose(),_=L(w.rotate.shx),E=new c,C=(E=(E=(E=E.multiply(w.translate)).multiply(w.skew)).multiply(w.scale)).applyToRectangle(new l(a-t*p,o-n*m,r*d,i*f)),k=v.call(this,C),N=[],A=0;A<k.length;A+=1)-1===N.indexOf(k[A])&&N.push(k[A]);if(x(N),this.autoPaging)for(var T=N[0],I=N[N.length-1],D=T;D<I+1;D++){this.pdf.setPage(D);var R=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],P=1===D?this.posY+this.margin[0]:this.margin[0],j=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],O=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],M=1===D?0:j+(D-2)*O;if(0!==this.ctx.clip_path.length){var F=this.path;y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(y,this.posX+this.margin[3],-M+P+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=F}var B=JSON.parse(JSON.stringify(C));B=b([B],this.posX+this.margin[3],-M+P+this.ctx.prevPageLastElemOffset)[0];var U=(D>T||D<I)&&g.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],R,O,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,_),U&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",C.x,C.y,C.w,C.h,null,null,_)};var v=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+i)/n)+1);break;case"arc":r.push(Math.floor((e.y+i-e.radius)/n)+1),r.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var a=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"bct":var o=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((o.y+i)/n)+1),r.push(Math.floor((o.y+o.h+i)/n)+1);break;case"rect":r.push(Math.floor((e.y+i)/n)+1),r.push(Math.floor((e.y+e.h+i)/n)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)y.call(this);return r},y=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,a=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=a},b=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},x=function(e){return e.sort(function(e,t){return e-t})},w=function(e,t){for(var n,r,i=this.fillStyle,a=this.strokeStyle,o=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),d=[],f=0;f<h.length;f++)if(void 0!==h[f].x)for(var p=v.call(this,h[f]),m=0;m<p.length;m+=1)-1===d.indexOf(p[m])&&d.push(p[m]);for(var w=0;w<d.length;w++)for(;this.pdf.internal.getNumberOfPages()<d[w];)y.call(this);if(x(d),this.autoPaging)for(var _=d[0],E=d[d.length-1],C=_;C<E+1;C++){this.pdf.setPage(C),this.fillStyle=i,this.strokeStyle=a,this.lineCap=o,this.lineWidth=l,this.lineJoin=c;var k=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],N=1===C?this.posY+this.margin[0]:this.margin[0],A=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],T=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],I=1===C?0:A+(C-2)*T;if(0!==this.ctx.clip_path.length){var D=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(n,this.posX+this.margin[3],-I+N+this.ctx.prevPageLastElemOffset),S.call(this,e,!0),this.path=D}if(r=JSON.parse(JSON.stringify(u)),this.path=b(r,this.posX+this.margin[3],-I+N+this.ctx.prevPageLastElemOffset),!1===t||0===C){var R=(C>_||C<E)&&g.call(this);R&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,T,null).clip().discardPath()),S.call(this,e,t),R&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,S.call(this,e,t),this.lineWidth=s;this.path=u},S=function(e,t){if(("stroke"!==e||t||!m.call(this))&&("stroke"===e||t||!p.call(this))){for(var n,r,i=[],a=this.path,o=0;o<a.length;o++){var s=a[o];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var l=i.length;if(a[o-1]&&!isNaN(a[o-1].x)&&(n=[s.x-a[o-1].x,s.y-a[o-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(s);break}break;case"bct":n=[s.x1-a[o-1].x,s.y1-a[o-1].y,s.x2-a[o-1].x,s.y2-a[o-1].y,s.x-a[o-1].x,s.y-a[o-1].y],i[i.length-1].deltas.push(n);break;case"qct":var c=a[o-1].x+2/3*(s.x1-a[o-1].x),u=a[o-1].y+2/3*(s.y1-a[o-1].y),h=s.x+2/3*(s.x1-s.x),d=s.y+2/3*(s.y1-s.y),f=s.x,g=s.y;n=[c-a[o-1].x,u-a[o-1].y,h-a[o-1].x,d-a[o-1].y,f-a[o-1].x,g-a[o-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}r=t?null:"stroke"===e?"stroke":"fill";for(var v=!1,y=0;y<i.length;y++)if(i[y].arc)for(var b=i[y].abs,x=0;x<b.length;x++){var w=b[x];"arc"===w.type?C.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,t,!v):I.call(this,w.x,w.y),v=!0}else if(!0===i[y].close)this.pdf.internal.out("h"),v=!1;else if(!0!==i[y].begin){var S=i[y].start.x,_=i[y].start.y;D.call(this,i[y].deltas,S,_),v=!0}r&&k.call(this,r),t&&N.call(this)}},_=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},E=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(e,t,n,r,i,a,o,s,l){for(var c=P.call(this,n,r,i,a),u=0;u<c.length;u++){var h=c[u];0===u&&(l?A.call(this,h.x1+e,h.y1+t):I.call(this,h.x1+e,h.y1+t)),R.call(this,e,t,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}s?N.call(this):k.call(this,o)},k=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},N=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(e,t){this.pdf.internal.out(n(e)+" "+i(t)+" m")},T=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=_.call(this,e.y),i=E.call(this,r)-n.h,a=this.ctx.transform.applyToPoint(new s(e.x,r)),o=this.ctx.transform.decompose(),u=new c;u=(u=(u=u.multiply(o.translate)).multiply(o.skew)).multiply(o.scale);for(var h,d,f,p=this.ctx.transform.applyToRectangle(new l(e.x,r,n.w,n.h)),m=u.applyToRectangle(new l(e.x,i,n.w,n.h)),y=v.call(this,m),w=[],C=0;C<y.length;C+=1)-1===w.indexOf(y[C])&&w.push(y[C]);if(x(w),this.autoPaging)for(var k=w[0],N=w[w.length-1],A=k;A<N+1;A++){this.pdf.setPage(A);var T=1===A?this.posY+this.margin[0]:this.margin[0],I=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],D=this.pdf.internal.pageSize.height-this.margin[2],R=D-this.margin[0],P=this.pdf.internal.pageSize.width-this.margin[1],j=P-this.margin[3],L=1===A?0:I+(A-2)*R;if(0!==this.ctx.clip_path.length){var O=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(h,this.posX+this.margin[3],-1*L+T),S.call(this,"fill",!0),this.path=O}var M=b([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-L+T+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale);var F="text"!==this.autoPaging;if(F||M.y+M.h<=D){if(F||M.y>=T&&M.x<=P){var B=F?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||P-M.x)[0],U=b([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-L+T+this.ctx.prevPageLastElemOffset)[0],z=F&&(A>k||A<N)&&g.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],j,R,null).clip().discardPath()),this.pdf.text(B,U.x,U.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),z&&this.pdf.restoreGraphicsState()}}else M.y<D&&(this.ctx.prevPageLastElemOffset+=D-M.y);e.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)}else e.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale),this.pdf.text(e.text,a.x+this.posX,a.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)},I=function(e,t,r,a){r=r||0,a=a||0,this.pdf.internal.out(n(e+r)+" "+i(t+a)+" l")},D=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},R=function(e,n,r,i,s,l,c,u){this.pdf.internal.out([t(a(r+e)),t(o(i+n)),t(a(s+e)),t(o(l+n)),t(a(c+e)),t(o(u+n)),"c"].join(" "))},P=function(e,t,n,r){for(var i=2*Math.PI,a=Math.PI/2;t>n;)t-=i;var o=Math.abs(n-t);o<i&&r&&(o=i-o);for(var s=[],l=r?-1:1,c=t;o>1e-5;){var u=c+l*Math.min(o,a);s.push(j.call(this,e,c,u)),o-=Math.abs(u-c),c=u}return s},j=function(e,t,n){var r=(n-t)/2,i=e*Math.cos(r),a=e*Math.sin(r),o=i,s=-a,l=o*o+s*s,c=l+o*i+s*a,u=4/3*(Math.sqrt(2*l*c)-c)/(o*a-s*i),h=o-u*s,d=s+u*o,f=h,p=-d,m=r+t,g=Math.cos(m),v=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:h*g-d*v,y2:h*v+d*g,x3:f*g-p*v,y3:f*v+p*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},L=function(e){return 180*e/Math.PI},O=function(e,t,n,r,i,a){var o=e+.5*(n-e),s=t+.5*(r-t),c=i+.5*(n-i),u=a+.5*(r-a),h=Math.min(e,i,o,c),d=Math.max(e,i,o,c),f=Math.min(t,a,s,u),p=Math.max(t,a,s,u);return new l(h,f,d-h,p-f)},M=function(e,t,n,r,i,a,o,s){var c,u,h,d,f,p,m,g,v,y,b,x,w,S,_=n-e,E=r-t,C=i-n,k=a-r,N=o-i,A=s-a;for(u=0;u<41;u++)v=(m=(h=e+(c=u/40)*_)+c*((f=n+c*C)-h))+c*(f+c*(i+c*N-f)-m),y=(g=(d=t+c*E)+c*((p=r+c*k)-d))+c*(p+c*(a+c*A-p)-g),0==u?(b=v,x=y,w=v,S=y):(b=Math.min(b,v),x=Math.min(x,y),w=Math.max(w,v),S=Math.max(S,y));return new l(Math.round(b),Math.round(x),Math.round(w-b),Math.round(S-x))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Pe.API),function(e){var t=function(e){var t,n,r,i,a,o,s,l,c,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>r;r+=4)0!==(a=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(o=(a=((a=((a=((a=(a-(u=a%85))/85)-(c=a%85))/85)-(l=a%85))/85)-(s=a%85))/85)%85,n.push(o+33,s+33,l+33,c+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,i,a,o=String,s="length",l=255,c="charCodeAt",u="slice",h="replace";for(e[u](-2),e=e[u](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),r=[],i=0,a=(e+=t="uuuuu"[u](e[s]%5||5))[s];a>i;i+=5)n=52200625*(e[c](i)-33)+614125*(e[c](i+1)-33)+7225*(e[c](i+2)-33)+85*(e[c](i+3)-33)+(e[c](i+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[s]),o.fromCharCode.apply(o,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},i=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=$(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,a){var o=0,s=e||"",l=[];for("string"==typeof(a=a||[])&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=t(s),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=r(s),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:s,reverseChain:l.reverse().join(" ")}}}(Pe.API),(Bt=Pe.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,i=0,a=function(e){var t=e.length,n=[],r=String.fromCharCode;for(i=0;i<t;i+=1)n.push(r(255&e.charCodeAt(i)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(a(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return a(r.responseText)}(e,t,n)}catch(e){}return r}(e,t,n)},Bt.loadImageFile=Bt.loadFile,function(e){function t(){return(ee.html2canvas?Promise.resolve(ee.html2canvas):n.e(239).then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function i(){return(ee.DOMPurify?Promise.resolve(ee.DOMPurify):n.e(213).then(n.t.bind(n,6213,23))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var a=function(e){var t=(0,r.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},o=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},s=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(e,t){return e.__proto__=t||s.prototype,e},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(a(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(i).then(function(t){return this.set({src:o("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},s.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var a=0;a<n.length;++a){var o=n[a],s=o.src.find(function(e){return"truetype"===e.format});s&&t.addFont(s.url,o.ref.name,o.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},s.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},s.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},s.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(e){if("object"!==a(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in s.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},s.prototype.get=function(e,t){return this.then(function(){var n=e in s.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},s.prototype.setMargin=function(e){return this.then(function(){switch(a(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},s.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||Pe.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},s.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},s.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},s.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),i=n.call(r,e,t);return s.convert(i,this.__proto__)},s.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},s.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},s.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return s.convert(t,this)},s.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},s.prototype.error=function(e){return this.then(function(){throw new Error(e)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Pe.getPageSize=function(e,t,n){if("object"===(0,r.A)(e)){var i=e;e=i.orientation,t=i.unit||t,n=i.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var a,o=(""+n).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+t}var l,c=0,u=0;if(s.hasOwnProperty(o))c=s[o][1]/a,u=s[o][0]/a;else try{c=n[1],u=n[0]}catch(Bt){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",u>c&&(l=u,u=c,c=l);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>u&&(l=u,u=c,c=l)}return{width:u,height:c,unit:t,k:a,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(At):null;var n=new s(t);return t.worker?n:n.from(e).doCallback()}}(Pe.API),Pe.API.addJS=function(e){return Ft=e,this.internal.events.subscribe("postPutResources",function(){Ot=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ot+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Mt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ft+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Ot&&void 0!==Mt&&this.internal.out("/Names <</JavaScript "+Ot+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),i=0;i<r.length;i++){var a=r[i],o=n.exec(a);if(null!=o){var s=o[1];e.internal.newObjectDeferredBegin(s,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(i=0;i<l;i++){var u=e.internal.newObject();c.push(u);var h=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var d=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<c.length;i++)e.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+d+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var i=t.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var a=this.count=this.count_r({count:0},i);if(a>0&&this.line("/Count "+a),i.options&&i.options.pageNumber){var o=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<t.children.length;s++)this.renderItems(t.children[s])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Pe.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,i,a,o){var s,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(s=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,a={width:0,height:0,numcomponents:1},o=4;o<i;o+=2){if(o+=r,-1!==t.indexOf(e.charCodeAt(o+1))){n=256*e.charCodeAt(o+5)+e.charCodeAt(o+6),a={width:256*e.charCodeAt(o+7)+e.charCodeAt(o+8),height:n,numcomponents:e.charCodeAt(o+9)};break}r=256*e.charCodeAt(o+2)+e.charCodeAt(o+3)}return a}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}c={data:e,width:s.width,height:s.height,colorSpace:o,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(Pe.API);var zt,Wt,Vt,Ht,qt,Gt=function(){var e,t,n;function r(e){var t,n,r,i,a,o,s,l,c,u,h,d,f,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},a=this.readUInt16(),i=this.readUInt16()||100,o.delay=1e3*a/i,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=o?o.data:void 0)||this.imgData,d=0;0<=t?d<t:d>t;0<=t?++d:--d)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(f=0;0<=u?f<u:f>u;0<=u?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(h=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,h.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,h.slice(s+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,i=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function a(a,o,s,l){var c,u,h,d,f,p,m,g,v,y,b,x,w,S,_,E,C,k,N,A,T,I=Math.ceil((i.width-a)/s),D=Math.ceil((i.height-o)/l),R=i.width==I&&i.height==D;for(S=t*I,x=R?n:new Uint8Array(S*D),p=e.length,w=0,u=0;w<D&&r<p;){switch(e[r++]){case 0:for(d=C=0;C<S;d=C+=1)x[u++]=e[r++];break;case 1:for(d=k=0;k<S;d=k+=1)c=e[r++],f=d<t?0:x[u-t],x[u++]=(c+f)%256;break;case 2:for(d=N=0;N<S;d=N+=1)c=e[r++],h=(d-d%t)/t,_=w&&x[(w-1)*S+h*t+d%t],x[u++]=(_+c)%256;break;case 3:for(d=A=0;A<S;d=A+=1)c=e[r++],h=(d-d%t)/t,f=d<t?0:x[u-t],_=w&&x[(w-1)*S+h*t+d%t],x[u++]=(c+Math.floor((f+_)/2))%256;break;case 4:for(d=T=0;T<S;d=T+=1)c=e[r++],h=(d-d%t)/t,f=d<t?0:x[u-t],0===w?_=E=0:(_=x[(w-1)*S+h*t+d%t],E=h&&x[(w-1)*S+(h-1)*t+d%t]),m=f+_-E,g=Math.abs(m-f),y=Math.abs(m-_),b=Math.abs(m-E),v=g<=y&&g<=b?f:y<=b?_:E,x[u++]=(c+v)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!R){var P=((o+w*l)*i.width+a)*t,j=w*S;for(d=0;d<I;d+=1){for(var L=0;L<t;L+=1)n[P++]=x[j++];P+=(s-1)*t}}w++}}return e=J(e),1==i.interlaceMethod?(a(0,0,8,8),a(4,0,8,8),a(0,4,4,8),a(2,0,4,4),a(0,2,2,4),a(1,0,2,2),a(0,1,1,2)):a(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,i,a,o,s,l;for(n=this.palette,a=this.transparency.indexed||[],i=new Uint8Array((a.length||0)+n.length),r=0,e=0,t=o=0,s=n.length;o<s;t=o+=3)i[r++]=n[t],i[r++]=n[t+1],i[r++]=n[t+2],i[r++]=null!=(l=a[e++])?l:255;return i},r.prototype.copyToImageData=function(e,t){var n,r,i,a,o,s,l,c,u,h,d;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),r=4,n=!0),c=(i=e.data||e).length,o=u||t,a=s=0,1===r)for(;a<c;)l=u?4*t[a/4]:s,h=o[l++],i[a++]=h,i[a++]=h,i[a++]=h,i[a++]=n?o[l++]:255,s=l;else for(;a<c;)l=u?4*t[a/4]:s,i[a++]=o[l++],i[a++]=o[l++],i[a++]=o[l++],i[a++]=n?o[l++]:255,s=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var i=function(){if("[object Window]"===Object.prototype.toString.call(ee)){try{t=ee.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return i(),e=function(e){var r;if(!0===i())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,i,a,o,s,l,c;if(this.animation){for(c=[],r=o=0,s=(l=this.animation.frames).length;o<s;r=++o)n=l[r],i=t.createImageData(n.width,n.height),a=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,a),n.imageData=i,c.push(n.image=e(i));return c}},r.prototype.renderFrame=function(e,t){var n,r,i;return n=(r=this.animation.frames)[t],i=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,i,a,o,s=this;return n=0,o=this.animation,i=o.numFrames,r=o.frames,a=o.numPlays,(t=function(){var o,l;if(o=n++%i,l=r[o],s.renderFrame(e,o),i>1&&n/i<a)return s.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();function Kt(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,o=1<<1+(7&i);e[t++],e[t++];var s=null,l=null;a&&(s=t,l=o,t+=3*o);var c=!0,u=[],h=0,d=null,f=0,p=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((N=e[t++])>=0))throw Error("Invalid block size");if(0===N)break;t+=N}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];h=e[t++]|e[t++]<<8,d=e[t++],0==(1&m)&&(d=null),f=m>>2&7,t++;break;case 254:for(;;){if(!((N=e[t++])>=0))throw Error("Invalid block size");if(0===N)break;t+=N}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++],w=x>>6&1,S=1<<1+(7&x),_=s,E=l,C=!1;x>>7&&(C=!0,_=t,E=S,t+=3*S);var k=t;for(t++;;){var N;if(!((N=e[t++])>=0))throw Error("Invalid block size");if(0===N)break;t+=N}u.push({x:g,y:v,width:y,height:b,has_local_palette:C,palette_offset:_,palette_size:E,data_offset:k,data_length:t-k,transparent_index:d,interlaced:!!w,delay:h,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var i=this.frameInfo(t),a=i.width*i.height,o=new Uint8Array(a);Yt(e,i.data_offset,o,a);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,h=c,d=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=d,m=4*u;!0===i.interlaced&&(m+=4*n*7);for(var g=8,v=0,y=o.length;v<y;++v){var b=o[v];if(0===h&&(h=c,(p+=m)>=f&&(m=4*u+4*n*(g-1),p=d+(c+u)*(g<<1),g>>=1)),b===l)p+=4;else{var x=e[s+3*b],w=e[s+3*b+1],S=e[s+3*b+2];r[p++]=S,r[p++]=w,r[p++]=x,r[p++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,r){var i=this.frameInfo(t),a=i.width*i.height,o=new Uint8Array(a);Yt(e,i.data_offset,o,a);var s=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,h=c,d=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=d,m=4*u;!0===i.interlaced&&(m+=4*n*7);for(var g=8,v=0,y=o.length;v<y;++v){var b=o[v];if(0===h&&(h=c,(p+=m)>=f&&(m=4*u+4*n*(g-1),p=d+(c+u)*(g<<1),g>>=1)),b===l)p+=4;else{var x=e[s+3*b],w=e[s+3*b+1],S=e[s+3*b+2];r[p++]=x,r[p++]=w,r[p++]=S,r[p++]=255}--h}}}function Yt(e,t,n,r){for(var i=e[t++],a=1<<i,o=a+1,s=o+1,l=i+1,c=(1<<l)-1,u=0,h=0,d=0,f=e[t++],p=new Int32Array(4096),m=null;;){for(;u<16&&0!==f;)h|=e[t++]<<u,u+=8,1===f?f=e[t++]:--f;if(u<l)break;var g=h&c;if(h>>=l,u-=l,g!==a){if(g===o)break;for(var v=g<s?g:m,y=0,b=v;b>a;)b=p[b]>>8,++y;var x=b;if(d+y+(v!==g?1:0)>r)return void ne.log("Warning, gif stream longer than expected.");n[d++]=x;var w=d+=y;for(v!==g&&(n[d++]=x),b=v;y--;)b=p[b],n[--w]=255&b,b>>=8;null!==m&&s<4096&&(p[s++]=m<<8|x,s>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else s=o+1,c=(1<<(l=i+1))-1,m=null}return d!==r&&ne.log("Warning, gif stream shorter than expected."),n}function Xt(e){var t,n,r,i,a,o=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),f=new Array(64),p=new Array(64),m=[],g=0,v=7,y=new Array(64),b=new Array(64),x=new Array(64),w=new Array(256),S=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(e,t){for(var n=0,r=0,i=new Array,a=1;a<=16;a++){for(var o=1;o<=e[a];o++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=a,r++,n++;n*=2}return i}function P(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(j(255),j(0)):j(g),v=7,g=0)}function j(e){m.push(e)}function L(e){j(e>>8&255),j(255&e)}function O(e,t,n,r,i){for(var a,o=i[0],s=i[240],l=function(e,t){var n,r,i,a,o,s,l,c,u,h,d=0;for(u=0;u<8;++u){n=e[d],r=e[d+1],i=e[d+2],a=e[d+3],o=e[d+4],s=e[d+5],l=e[d+6];var p=n+(c=e[d+7]),m=n-c,g=r+l,v=r-l,y=i+s,b=i-s,x=a+o,w=a-o,S=p+x,_=p-x,E=g+y,C=g-y;e[d]=S+E,e[d+4]=S-E;var k=.707106781*(C+_);e[d+2]=_+k,e[d+6]=_-k;var N=.382683433*((S=w+b)-(C=v+m)),A=.5411961*S+N,T=1.306562965*C+N,I=.707106781*(E=b+v),D=m+I,R=m-I;e[d+5]=R+A,e[d+3]=R-A,e[d+1]=D+T,e[d+7]=D-T,d+=8}for(d=0,u=0;u<8;++u){n=e[d],r=e[d+8],i=e[d+16],a=e[d+24],o=e[d+32],s=e[d+40],l=e[d+48];var P=n+(c=e[d+56]),j=n-c,L=r+l,O=r-l,M=i+s,F=i-s,B=a+o,U=a-o,z=P+B,W=P-B,V=L+M,H=L-M;e[d]=z+V,e[d+32]=z-V;var q=.707106781*(H+W);e[d+16]=W+q,e[d+48]=W-q;var G=.382683433*((z=U+F)-(H=O+j)),K=.5411961*z+G,Y=1.306562965*H+G,X=.707106781*(V=F+O),Q=j+X,$=j-X;e[d+40]=$+K,e[d+24]=$-K,e[d+8]=Q+Y,e[d+56]=Q-Y,d++}for(u=0;u<64;++u)h=e[u]*t[u],f[u]=h>0?h+.5|0:h-.5|0;return f}(e,t),c=0;c<64;++c)p[_[c]]=l[c];var u=p[0]-n;n=p[0],0==u?P(r[0]):(P(r[d[a=32767+u]]),P(h[a]));for(var m=63;m>0&&0==p[m];)m--;if(0==m)return P(o),n;for(var g,v=1;v<=m;){for(var y=v;0==p[v]&&v<=m;)++v;var b=v-y;if(b>=16){g=b>>4;for(var x=1;x<=g;++x)P(s);b&=15}a=32767+p[v],P(i[(b<<4)+d[a]]),P(h[a]),v++}return 63!=m&&P(o),n}function M(e){e=Math.min(Math.max(e,1),100),a!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=o((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),s[_[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var h=o((i[a]*e+50)/100);h=Math.min(Math.max(h,1),255),l[_[a]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,p=0;p<8;p++)for(var m=0;m<8;m++)c[f]=1/(s[_[f]]*d[p]*d[m]*8),u[f]=1/(l[_[f]]*d[p]*d[m]*8),f++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),a=e)}this.encode=function(e,a){a&&M(a),m=new Array,g=0,v=7,L(65496),L(65504),L(16),j(74),j(70),j(73),j(70),j(0),j(1),j(1),j(0),L(1),L(1),j(0),j(0),function(){L(65499),L(132),j(0);for(var e=0;e<64;e++)j(s[e]);j(1);for(var t=0;t<64;t++)j(l[t])}(),function(e,t){L(65472),L(17),j(8),L(t),L(e),j(3),j(1),j(17),j(0),j(2),j(17),j(1),j(3),j(17),j(1)}(e.width,e.height),function(){L(65476),L(418),j(0);for(var e=0;e<16;e++)j(E[e+1]);for(var t=0;t<=11;t++)j(C[t]);j(16);for(var n=0;n<16;n++)j(k[n+1]);for(var r=0;r<=161;r++)j(N[r]);j(1);for(var i=0;i<16;i++)j(A[i+1]);for(var a=0;a<=11;a++)j(T[a]);j(17);for(var o=0;o<16;o++)j(I[o+1]);for(var s=0;s<=161;s++)j(D[s])}(),L(65498),L(12),j(3),j(1),j(0),j(2),j(17),j(3),j(17),j(0),j(63),j(0);var o=0,h=0,d=0;g=0,v=7,this.encode.displayName="_encode_";for(var f,p,w,_,R,F,B,U,z,W=e.data,V=e.width,H=e.height,q=4*V,G=0;G<H;){for(f=0;f<q;){for(R=q*G+f,B=-1,U=0,z=0;z<64;z++)F=R+(U=z>>3)*q+(B=4*(7&z)),G+U>=H&&(F-=q*(G+1+U-H)),f+B>=q&&(F-=f+B-q+4),p=W[F++],w=W[F++],_=W[F++],y[z]=(S[p]+S[w+256|0]+S[_+512|0]>>16)-128,b[z]=(S[p+768|0]+S[w+1024|0]+S[_+1280|0]>>16)-128,x[z]=(S[p+1280|0]+S[w+1536|0]+S[_+1792|0]>>16)-128;o=O(y,c,o,t,r),h=O(b,u,h,n,i),d=O(x,u,d,n,i),f+=32}G+=8}if(v>=0){var K=[];K[1]=v+1,K[0]=(1<<v+1)-1,P(K)}return L(65497),new Uint8Array(m)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=R(E,C),n=R(A,T),r=R(k,N),i=R(I,D),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)d[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)d[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)S[e]=19595*e,S[e+256|0]=38470*e,S[e+512|0]=7471*e+32768,S[e+768|0]=-11059*e,S[e+1024|0]=-21709*e,S[e+1280|0]=32768*e+8421375,S[e+1536|0]=-27439*e,S[e+1792|0]=-5329*e}(),M(e)}function Qt(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function $t(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,i){for(var a=0;a<i;a++)e[t+a]=n[r+a]}function i(e,t,n,r){for(var i=0;i<r;i++)e[t+i]=n}function a(e){return new Int32Array(e)}function o(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function s(e,t){var n=[];return function e(n,r,i){for(var a=i[r],o=0;o<a&&(n.push(i.length>r+1?[]:new t),!(i.length<r+1));o++)e(n[o],r+1,i)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,i,a){t(!(i%r));do{e[n+(i-=r)]=a}while(0<i)}function u(e,n,r,i,o){if(t(2328>=o),512>=o)var s=a(512);else if(null==(s=a(o)))return 0;return function(e,n,r,i,o,s){var u,d,f=n,p=1<<r,m=a(16),g=a(16);for(t(0!=o),t(null!=i),t(null!=e),t(0<r),d=0;d<o;++d){if(15<i[d])return 0;++m[i[d]]}if(m[0]==o)return 0;for(g[1]=0,u=1;15>u;++u){if(m[u]>1<<u)return 0;g[u+1]=g[u]+m[u]}for(d=0;d<o;++d)u=i[d],0<i[d]&&(s[g[u]++]=d);if(1==g[15])return(i=new h).g=0,i.value=s[0],c(e,f,1,p,i),p;var v,y=-1,b=p-1,x=0,w=1,S=1,_=1<<r;for(d=0,u=1,o=2;u<=r;++u,o<<=1){if(w+=S<<=1,0>(S-=m[u]))return 0;for(;0<m[u];--m[u])(i=new h).g=u,i.value=s[d++],c(e,f+x,o,_,i),x=l(x,u)}for(u=r+1,o=2;15>=u;++u,o<<=1){if(w+=S<<=1,0>(S-=m[u]))return 0;for(;0<m[u];--m[u]){if(i=new h,(x&b)!=y){for(f+=_,v=1<<(y=u)-r;15>y&&!(0>=(v-=m[y]));)++y,v<<=1;p+=_=1<<(v=y-r),e[n+(y=x&b)].g=v+r,e[n+y].value=f-n-y}i.g=u-r,i.value=s[d++],c(e,f+(x>>r),o,_,i),x=l(x,u)}}return w!=2*g[15]-1?0:p}(e,n,r,i,o,s)}function h(){this.value=this.g=0}function d(){this.value=this.g=0}function f(){this.G=o(5,h),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Bn,d)}function p(e,n,r,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+i,e.Zc=4<=i?r+i-4+1:r,k(e)}function m(e,t){for(var n=0;0<t--;)n|=A(e,128)<<t;return n}function g(e,t){var n=m(e,t);return N(e)?-n:n}function v(e,n,r,i){var a,o=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),a=0;a<i;++a)o+=n[r+a]<<8*a;e.Ra=o,e.bb=i,e.oa=n,e.pa=r}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Wn-8>>>0,++e.bb,e.u-=8;_(e)&&(e.h=1,e.u=0)}function b(e,n){if(t(0<=n),!e.h&&n<=zn){var r=S(e)&Un[n];return e.u+=n,y(e),r}return e.h=1,e.u=0}function x(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function S(e){return e.Ra>>>(e.u&Wn-1)>>>0}function _(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Wn}function E(e,t){e.u=t,e.h=_(e)}function C(e){e.u>=Vn&&(t(e.u>=Vn),y(e))}function k(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function N(e){return m(e,1)}function A(e,t){var n=e.Ca;0>e.b&&k(e);var r=e.b,i=n*t>>>8,a=(e.I>>>r>i)+0;for(a?(n-=i,e.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+Hn[r],e.b-=r,e.Ca=(n<<r)-1,a}function T(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function I(e,t){return e[t+0]|e[t+1]<<8}function D(e,t){return I(e,t)|e[t+2]<<16}function R(e,t){return I(e,t)|I(e,t+2)<<16}function P(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=a(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function j(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function O(e,n,r,i){t(null!=r),t(null!=i);var a=r[0],o=i[0];return 0==a&&(a=(e*o+n/2)/n),0==o&&(o=(n*a+e/2)/e),0>=a||0>=o?0:(r[0]=a,i[0]=o,1)}function M(e,t){return e+(1<<t)-1>>>t}function F(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function B(t,n){e[n]=function(n,r,i,a,o,s,l){var c;for(c=0;c<o;++c){var u=e[t](s[l+c-1],i,a+c);s[l+c]=F(n[r+c],u)}}}function U(){this.ud=this.hd=this.jd=0}function z(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function W(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function V(e,t){return W(e+(e-t+.5>>1))}function H(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function q(e,t,n,r,i,a,o){for(r=a[o-1],n=0;n<i;++n)a[o+n]=r=F(e[t+n],r)}function G(e,t,n,r,i){var a;for(a=0;a<n;++a){var o=e[t+a],s=o>>8&255,l=16711935&(l=(l=16711935&o)+((s<<16)+s));r[i+a]=(4278255360&o)+l>>>0}}function K(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function Y(e,t,n,r,i,a){var o;for(o=0;o<r;++o){var s=t[n+o],l=s>>>8,c=s,u=255&(u=(u=s>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),i[a+o]=(4278255360&s)+(u<<16)+c}}function X(t,n,r,i,a){e[n]=function(e,t,n,r,o,s,l,c,u){for(r=l;r<c;++r)for(l=0;l<u;++l)o[s++]=a(n[i(e[t++])])},e[t]=function(t,n,o,s,l,c,u){var h=8>>t.b,d=t.Ea,f=t.K[0],p=t.w;if(8>h)for(t=(1<<t.b)-1,p=(1<<h)-1;n<o;++n){var m,g=0;for(m=0;m<d;++m)m&t||(g=i(s[l++])),c[u++]=a(f[g&p]),g>>=h}else e["VP8LMapColor"+r](s,l,f,p,c,u,n,o,d)}}function Q(e,t,n,r,i){for(n=t+n;t<n;){var a=e[t++];r[i++]=a>>16&255,r[i++]=a>>8&255,r[i++]=255&a}}function $(e,t,n,r,i){for(n=t+n;t<n;){var a=e[t++];r[i++]=a>>16&255,r[i++]=a>>8&255,r[i++]=255&a,r[i++]=a>>24&255}}function J(e,t,n,r,i){for(n=t+n;t<n;){var a=(o=e[t++])>>16&240|o>>12&15,o=240&o|o>>28&15;r[i++]=a,r[i++]=o}}function Z(e,t,n,r,i){for(n=t+n;t<n;){var a=(o=e[t++])>>16&248|o>>13&7,o=o>>5&224|o>>3&31;r[i++]=a,r[i++]=o}}function ee(e,t,n,r,i){for(n=t+n;t<n;){var a=e[t++];r[i++]=255&a,r[i++]=a>>8&255,r[i++]=a>>16&255}}function te(e,t,n,i,a,o){if(0==o)for(n=t+n;t<n;)T(i,((o=e[t++])[0]>>24|o[1]>>8&65280|o[2]<<8&16711680|o[3]<<24)>>>0),a+=32;else r(i,a,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Vr||e==Hr||e==qr||e==Gr}function ie(){this.eb=[],this.size=this.A=this.fb=0}function ae(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new ae,this.sd=null}function se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,i=t.ba.f.RGBA,a=i.eb,o=i.fb+e.ka*i.A,s=vi[t.ba.S],l=e.y,c=e.O,u=e.f,h=e.N,d=e.ea,f=e.W,p=t.cc,m=t.dc,g=t.Mc,v=t.Nc,y=e.ka,b=e.ka+e.T,x=e.U,w=x+1>>1;for(0==y?s(l,c,null,null,u,h,d,f,u,h,d,f,a,o,null,null,x):(s(t.ec,t.fc,l,c,p,m,g,v,u,h,d,f,a,o-i.A,a,o,x),++n);y+2<b;y+=2)p=u,m=h,g=d,v=f,h+=e.Rc,f+=e.Rc,o+=2*i.A,s(l,(c+=2*e.fa)-e.fa,l,c,p,m,g,v,u,h,d,f,a,o-i.A,a,o,x);return c+=e.fa,e.j+b<e.o?(r(t.ec,t.fc,l,c,x),r(t.cc,t.dc,u,h,w),r(t.Mc,t.Nc,d,f,w),n--):1&b||s(l,c,null,null,u,h,d,f,u,h,d,f,a,o+i.A,null,null,x),n}function he(e,n,r){var i=e.F,a=[e.J];if(null!=i){var o=e.U,s=n.ba.S,l=s==Ur||s==qr;n=n.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,a[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var h=n.eb;u=n.fb+u*n.A,e=Cr(i,a[0],e.width,o,c,h,u+(l?0:3),n.A),t(r==c),e&&re(s)&&_r(h,u,l,o,c,n.A)}return 0}function de(e){var t=e.ma,n=t.ba.S,r=11>n,i=n==Mr||n==Br||n==Ur||n==zr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!On(t.Oa,e,i?11:12))return 0;if(i&&re(n)&&bn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=a(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,bn()}}else alert("todo:EmitYUV");i&&(t.Jb=he,r&&vn())}if(r&&!Di){for(e=0;256>e;++e)Ri[e]=89858*(e-128)+ki>>Ci,Li[e]=-22014*(e-128)+ki,ji[e]=-45773*(e-128),Pi[e]=113618*(e-128)+ki>>Ci;for(e=Ni;e<Ai;++e)t=76283*(e-16)+ki>>Ci,Oi[e-Ni]=qe(t,255),Mi[e-Ni]=qe(t+8>>4,15);Di=1}return 1}function fe(e){var n=e.ma,r=e.U,i=e.T;return t(!(1&e.ka)),0>=r||0>=i?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function pe(e){e.ma.memory=null}function me(e,t,n,r){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,n[0]=b(e,14)+1,r[0]=b(e,1),0!=b(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+b(t,n)+1}function ve(e,t){return 120<t?t-120:1<=(n=((n=Jr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ye(e,t,n){var r=S(n),i=e[t+=255&r].g-8;return 0<i&&(E(n,n.u+8),r=S(n),t+=e[t].value,t+=r&(1<<i)-1),E(n,n.u+e[t].g),e[t].value}function be(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function xe(e,n,r){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(r>>i)+(n>>i)])<e.Wb),e.Ya[n]}function we(e,n,i,a){var o=e.ab,s=e.c*n,l=e.C;n=l+n;var c=i,u=a;for(a=e.Ta,i=e.Ua;0<o--;){var h=e.gc[o],d=l,f=n,p=c,m=u,g=(u=a,c=i,h.Ea);switch(t(d<f),t(f<=h.nc),h.hc){case 2:Kn(p,m,(f-d)*g,u,c);break;case 0:var v=d,y=f,b=u,x=c,w=(k=h).Ea;0==v&&(qn(p,m,null,null,1,b,x),q(p,m+1,0,0,w-1,b,x+1),m+=w,x+=w,++v);for(var S=1<<k.b,_=S-1,E=M(w,k.b),C=k.K,k=k.w+(v>>k.b)*E;v<y;){var N=C,A=k,T=1;for(Gn(p,m,b,x-w,1,b,x);T<w;){var I=(T&~_)+S;I>w&&(I=w),(0,Jn[N[A++]>>8&15])(p,m+ +T,b,x+T-w,I-T,b,x+T),T=I}m+=w,x+=w,++v&_||(k+=E)}f!=h.nc&&r(u,c-g,u,c+(f-d-1)*g,g);break;case 1:for(g=p,y=m,w=(p=h.Ea)-(x=p&~(b=(m=1<<h.b)-1)),v=M(p,h.b),S=h.K,h=h.w+(d>>h.b)*v;d<f;){for(_=S,E=h,C=new U,k=y+x,N=y+p;y<k;)K(_[E++],C),Zn(C,g,y,m,u,c),y+=m,c+=m;y<N&&(K(_[E++],C),Zn(C,g,y,w,u,c),y+=w,c+=w),++d&b||(h+=v)}break;case 3:if(p==u&&m==c&&0<h.b){for(y=u,p=g=c+(f-d)*g-(x=(f-d)*M(h.Ea,h.b)),m=u,b=c,v=[],x=(w=x)-1;0<=x;--x)v[x]=m[b+x];for(x=w-1;0<=x;--x)y[p+x]=v[x];Yn(h,d,f,u,g,u,c)}else Yn(h,d,f,p,m,u,c)}c=a,u=i}u!=i&&r(a,i,c,u,s)}function Se(e,n){var r=e.V,i=e.Ba+e.c*e.C,a=n-e.C;if(t(n<=e.l.o),t(16>=a),0<a){var o=e.l,s=e.Ta,l=e.Ua,c=o.width;if(we(e,a,r,i),a=l=[l],t((r=e.C)<(i=n)),t(o.v<o.va),i>o.o&&(i=o.o),r<o.j){var u=o.j-r;r=o.j,a[0]+=u*c}if(r>=i?r=0:(a[0]+=4*o.v,o.ka=r-o.j,o.U=o.va-o.v,o.T=i-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var h=r.f.RGBA,d=(i=r.S,a=o.U,o=o.T,u=h.eb,h.A),f=o;for(h=h.fb+e.Ma*h.A;0<f--;){var p=s,m=l,g=a,v=u,y=h;switch(i){case Or:er(p,m,g,v,y);break;case Mr:tr(p,m,g,v,y);break;case Vr:tr(p,m,g,v,y),_r(v,y,0,g,1,0);break;case Fr:ir(p,m,g,v,y);break;case Br:te(p,m,g,v,y,1);break;case Hr:te(p,m,g,v,y,1),_r(v,y,0,g,1,0);break;case Ur:te(p,m,g,v,y,0);break;case qr:te(p,m,g,v,y,0),_r(v,y,1,g,1,0);break;case zr:nr(p,m,g,v,y);break;case Gr:nr(p,m,g,v,y),Er(v,y,g,1,0);break;case Wr:rr(p,m,g,v,y);break;default:t(0)}l+=c,h+=d}e.Ma+=o}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function _e(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function Ee(e,n,r,i,a,o){if(0!=e.Z){var s=e.qd,l=e.rd;for(t(null!=gi[e.Z]);n<r;++n)gi[e.Z](s,l,i,a,i,a,o),s=i,l=a,a+=o;e.qd=s,e.rd=l}}function Ce(e,n){var r=e.l.ma,i=0==r.Z||1==r.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var a=e.l.width,o=r.ca,s=r.tb+a*i,l=e.V,c=e.Ba+e.c*i,u=e.gc;t(1==e.ab),t(3==u[0].hc),Qn(u[0],i,n,l,c,o,s),Ee(r,i,n,o,s,a)}e.C=e.Ma=n}function ke(e,n,r,i,a,o,s){var l=e.$/i,c=e.$%i,u=e.m,h=e.s,d=r+e.$,f=d;a=r+i*a;var p=r+i*o,m=280+h.ua,g=e.Pb?l:16777216,v=0<h.ua?h.Wa:null,y=h.wc,b=d<p?xe(h,c,l):null;t(e.C<o),t(p<=a);var x=!1;e:for(;;){for(;x||d<p;){var w=0;if(l>=g){var k=d-r;t((g=e).Pb),g.wd=g.m,g.xd=k,0<g.s.ua&&j(g.s.Wa,g.s.vb),g=l+ei}if(c&y||(b=xe(h,c,l)),t(null!=b),b.Qb&&(n[d]=b.qb,x=!0),!x)if(C(u),b.jc){w=u,k=n;var N=d,A=b.pd[S(w)&Bn-1];t(b.jc),256>A.g?(E(w,w.u+A.g),k[N]=A.value,w=0):(E(w,w.u+A.g-256),t(256<=A.value),w=A.value),0==w&&(x=!0)}else w=ye(b.G[0],b.H[0],u);if(u.h)break;if(x||256>w){if(!x)if(b.nd)n[d]=(b.qb|w<<8)>>>0;else{if(C(u),x=ye(b.G[1],b.H[1],u),C(u),k=ye(b.G[2],b.H[2],u),N=ye(b.G[3],b.H[3],u),u.h)break;n[d]=(N<<24|x<<16|w<<8|k)>>>0}if(x=!1,++d,++c>=i&&(c=0,++l,null!=s&&l<=o&&!(l%16)&&s(e,l),null!=v))for(;f<d;)w=n[f++],v.X[(506832829*w&4294967295)>>>v.Mb]=w}else if(280>w){if(w=ge(w-256,u),k=ye(b.G[4],b.H[4],u),C(u),k=ve(i,k=ge(k,u)),u.h)break;if(d-r<k||a-d<w)break e;for(N=0;N<w;++N)n[d+N]=n[d+N-k];for(d+=w,c+=w;c>=i;)c-=i,++l,null!=s&&l<=o&&!(l%16)&&s(e,l);if(t(d<=a),c&y&&(b=xe(h,c,l)),null!=v)for(;f<d;)w=n[f++],v.X[(506832829*w&4294967295)>>>v.Mb]=w}else{if(!(w<m))break e;for(x=w-280,t(null!=v);f<d;)w=n[f++],v.X[(506832829*w&4294967295)>>>v.Mb]=w;w=d,t(!(x>>>(k=v).Xa)),n[w]=k.X[x],x=!0}x||t(u.h==_(u))}if(e.Pb&&u.h&&d<a)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&j(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=s&&s(e,l>o?o:l),e.a=0,e.$=d-r}return 1}return e.a=3,0}function Ne(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Ae(){var t=new sn;return null==t?null:(t.a=0,t.xb=mi,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Kn=G,Zn=Y,er=Q,tr=$,nr=J,rr=Z,ir=ee,e.VP8LMapColor32b=Xn,e.VP8LMapColor8b=$n,t)}function Te(e,n,r,s,l){var c=1,d=[e],p=[n],m=s.m,g=s.s,v=null,y=0;e:for(;;){if(r)for(;c&&b(m,1);){var x=d,w=p,_=s,k=1,N=_.m,A=_.gc[_.ab],T=b(N,2);if(_.Oc&1<<T)c=0;else{switch(_.Oc|=1<<T,A.hc=T,A.Ea=x[0],A.nc=w[0],A.K=[null],++_.ab,t(4>=_.ab),T){case 0:case 1:A.b=b(N,3)+2,k=Te(M(A.Ea,A.b),M(A.nc,A.b),0,_,A.K),A.K=A.K[0];break;case 3:var I,D=b(N,8)+1,R=16<D?0:4<D?1:2<D?2:3;if(x[0]=M(A.Ea,R),A.b=R,I=k=Te(D,1,0,_,A.K)){var j,L=D,O=A,B=1<<(8>>O.b),U=a(B);if(null==U)I=0;else{var z=O.K[0],W=O.w;for(U[0]=O.K[0][0],j=1;j<1*L;++j)U[j]=F(z[W+j],U[j-1]);for(;j<4*B;++j)U[j]=0;O.K[0]=null,O.K[0]=U,I=1}}k=I;break;case 2:break;default:t(0)}c=k}}if(d=d[0],p=p[0],c&&b(m,1)&&!(c=1<=(y=b(m,4))&&11>=y)){s.a=3;break e}var V;if(V=c)t:{var H,q,G,K=s,Y=d,X=p,Q=y,$=r,J=K.m,Z=K.s,ee=[null],te=1,ne=0,re=Zr[Q];n:for(;;){if($&&b(J,1)){var ie=b(J,3)+2,ae=M(Y,ie),oe=M(X,ie),se=ae*oe;if(!Te(ae,oe,0,K,ee))break n;for(ee=ee[0],Z.xc=ie,H=0;H<se;++H){var le=ee[H]>>8&65535;ee[H]=le,le>=te&&(te=le+1)}}if(J.h)break n;for(q=0;5>q;++q){var ce=Xr[q];!q&&0<Q&&(ce+=1<<Q),ne<ce&&(ne=ce)}var ue=o(te*re,h),he=te,de=o(he,f);if(null==de)var fe=null;else t(65536>=he),fe=de;var pe=a(ne);if(null==fe||null==pe||null==ue){K.a=1;break n}var me=ue;for(H=G=0;H<te;++H){var ge=fe[H],ve=ge.G,ye=ge.H,xe=0,we=1,Se=0;for(q=0;5>q;++q){ce=Xr[q],ve[q]=me,ye[q]=G,!q&&0<Q&&(ce+=1<<Q);r:{var _e,Ee=ce,Ce=K,Ae=pe,Ie=me,De=G,Re=0,Pe=Ce.m,je=b(Pe,1);if(i(Ae,0,0,Ee),je){var Le=b(Pe,1)+1,Oe=b(Pe,1),Me=b(Pe,0==Oe?1:8);Ae[Me]=1,2==Le&&(Ae[Me=b(Pe,8)]=1);var Fe=1}else{var Be=a(19),Ue=b(Pe,4)+4;if(19<Ue){Ce.a=3;var ze=0;break r}for(_e=0;_e<Ue;++_e)Be[$r[_e]]=b(Pe,3);var We=void 0,Ve=void 0,He=Ce,qe=Be,Ge=Ee,Ke=Ae,Ye=0,Xe=He.m,Qe=8,$e=o(128,h);i:for(;u($e,0,7,qe,19);){if(b(Xe,1)){var Je=2+2*b(Xe,3);if((We=2+b(Xe,Je))>Ge)break i}else We=Ge;for(Ve=0;Ve<Ge&&We--;){C(Xe);var Ze=$e[0+(127&S(Xe))];E(Xe,Xe.u+Ze.g);var et=Ze.value;if(16>et)Ke[Ve++]=et,0!=et&&(Qe=et);else{var tt=16==et,nt=et-16,rt=Yr[nt],it=b(Xe,Kr[nt])+rt;if(Ve+it>Ge)break i;for(var at=tt?Qe:0;0<it--;)Ke[Ve++]=at}}Ye=1;break i}Ye||(He.a=3),Fe=Ye}(Fe=Fe&&!Pe.h)&&(Re=u(Ie,De,8,Ae,Ee)),Fe&&0!=Re?ze=Re:(Ce.a=3,ze=0)}if(0==ze)break n;if(we&&1==Qr[q]&&(we=0==me[G].g),xe+=me[G].g,G+=ze,3>=q){var ot,st=pe[0];for(ot=1;ot<ce;++ot)pe[ot]>st&&(st=pe[ot]);Se+=st}}if(ge.nd=we,ge.Qb=0,we&&(ge.qb=(ve[3][ye[3]+0].value<<24|ve[1][ye[1]+0].value<<16|ve[2][ye[2]+0].value)>>>0,0==xe&&256>ve[0][ye[0]+0].value&&(ge.Qb=1,ge.qb+=ve[0][ye[0]+0].value<<8)),ge.jc=!ge.Qb&&6>Se,ge.jc){var lt,ct=ge;for(lt=0;lt<Bn;++lt){var ut=lt,ht=ct.pd[ut],dt=ct.G[0][ct.H[0]+ut];256<=dt.value?(ht.g=dt.g+256,ht.value=dt.value):(ht.g=0,ht.value=0,ut>>=be(dt,8,ht),ut>>=be(ct.G[1][ct.H[1]+ut],16,ht),ut>>=be(ct.G[2][ct.H[2]+ut],0,ht),be(ct.G[3][ct.H[3]+ut],24,ht))}}}Z.vc=ee,Z.Wb=te,Z.Ya=fe,Z.yc=ue,V=1;break t}V=0}if(!(c=V)){s.a=3;break e}if(0<y){if(g.ua=1<<y,!P(g.Wa,y)){s.a=1,c=0;break e}}else g.ua=0;var ft=s,pt=d,mt=p,gt=ft.s,vt=gt.xc;if(ft.c=pt,ft.i=mt,gt.md=M(pt,vt),gt.wc=0==vt?-1:(1<<vt)-1,r){s.xb=pi;break e}if(null==(v=a(d*p))){s.a=1,c=0;break e}c=(c=ke(s,v,0,d,p,p,null))&&!m.h;break e}return c?(null!=l?l[0]=v:(t(null==v),t(r)),s.$=0,r||Ne(g)):Ne(g),c}function Ie(e,n){var r=e.c*e.i,i=r+n+16*n;return t(e.c<=n),e.V=a(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function De(e,n){var r=e.C,i=n-r,a=e.V,o=e.Ba+e.c*r;for(t(n<=e.l.o);0<i;){var s=16<i?16:i,l=e.l.ma,c=e.l.width,u=c*s,h=l.ca,d=l.tb+c*r,f=e.Ta,p=e.Ua;we(e,s,a,o),kr(f,p,h,d,u),Ee(l,r,r+s,h,d,c),i-=s,a+=s*e.c,r+=s}t(r==n),e.C=e.Ma=n}function Re(){this.ub=this.yd=this.td=this.Rb=0}function Pe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function je(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Le(){this.Yb=function(){var e=[];return function e(t,n,r){for(var i=r[n],a=0;a<i&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));a++)e(t[a],n+1,r)}(e,0,[3,11]),e}()}function Oe(){this.jb=a(3),this.Wc=s([4,8],Le),this.Xc=s([4,17],Le)}function Me(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Fe(){this.ld=this.La=this.dd=this.tc=0}function Be(){this.Na=this.la=0}function Ue(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ze(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function We(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fe),this.Y=0,this.ya=Array(new ze),this.aa=0,this.l=new Ge}function Ve(){this.y=a(16),this.f=a(8),this.ea=a(8)}function He(){this.cb=this.a=0,this.sc="",this.m=new x,this.Od=new Re,this.Kc=new Pe,this.ed=new Me,this.Qa=new je,this.Ic=this.$c=this.Aa=0,this.D=new We,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,x),this.ia=0,this.pb=o(4,Ue),this.Pa=new Oe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ve),this.Hd=0,this.rb=Array(new Be),this.sb=0,this.wa=Array(new Fe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ze),this.L=this.aa=0,this.gd=s([4,2],Fe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qe(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var e=new He;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ri||(ri=$e)),e}function Ye(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Qe(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Ye(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,a=n.w,o=n.ha;if(4>o)return Ye(e,7,"Truncated header.");var s=r[a+0]|r[a+1]<<8|r[a+2]<<16,l=e.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return Ye(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ye(e,4,"Frame not displayable.");a+=3,o-=3;var c=e.Kc;if(l.Rb){if(7>o)return Ye(e,7,"cannot parse picture header");if(!Xe(r,a,o))return Ye(e,3,"Bad code word");c.c=16383&(r[a+4]<<8|r[a+3]),c.Td=r[a+4]>>6,c.i=16383&(r[a+6]<<8|r[a+5]),c.Ud=r[a+6]>>6,a+=7,o-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((s=e.Pa).jb,0,255,s.jb.length),t(null!=(s=e.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(l.ub>o)return Ye(e,7,"bad partition length");p(s=e.m,r,a,l.ub),a+=l.ub,o-=l.ub,l.Rb&&(c.Ld=N(s),c.Kd=N(s)),c=e.Qa;var u,h=e.Pa;if(t(null!=s),t(null!=c),c.Cb=N(s),c.Cb){if(c.Bb=N(s),N(s)){for(c.Fb=N(s),u=0;4>u;++u)c.Zb[u]=N(s)?g(s,7):0;for(u=0;4>u;++u)c.Lb[u]=N(s)?g(s,6):0}if(c.Bb)for(u=0;3>u;++u)h.jb[u]=N(s)?m(s,8):255}else c.Bb=0;if(s.Ka)return Ye(e,3,"cannot parse segment header");if((c=e.ed).zd=N(s),c.Tb=m(s,6),c.wb=m(s,3),c.Pc=N(s),c.Pc&&N(s)){for(h=0;4>h;++h)N(s)&&(c.vd[h]=g(s,6));for(h=0;4>h;++h)N(s)&&(c.od[h]=g(s,6))}if(e.L=0==c.Tb?0:c.zd?1:2,s.Ka)return Ye(e,3,"cannot parse filter header");var d=o;if(o=u=a,a=u+d,c=d,e.Xb=(1<<m(e.m,2))-1,d<3*(h=e.Xb))r=7;else{for(u+=3*h,c-=3*h,d=0;d<h;++d){var f=r[o+0]|r[o+1]<<8|r[o+2]<<16;f>c&&(f=c),p(e.Jc[+d],r,u,f),u+=f,c-=f,o+=3}p(e.Jc[+h],r,u,c),r=u<a?0:5}if(0!=r)return Ye(e,r,"cannot parse partitions");for(r=m(u=e.m,7),o=N(u)?g(u,4):0,a=N(u)?g(u,4):0,c=N(u)?g(u,4):0,h=N(u)?g(u,4):0,u=N(u)?g(u,4):0,d=e.Qa,f=0;4>f;++f){if(d.Cb){var v=d.Zb[f];d.Fb||(v+=r)}else{if(0<f){e.pb[f]=e.pb[0];continue}v=r}var y=e.pb[f];y.Sc[0]=ti[qe(v+o,127)],y.Sc[1]=ni[qe(v+0,127)],y.Eb[0]=2*ti[qe(v+a,127)],y.Eb[1]=101581*ni[qe(v+c,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=ti[qe(v+h,117)],y.Qc[1]=ni[qe(v+u,127)],y.lc=v+u}if(!l.Rb)return Ye(e,4,"Not a key frame.");for(N(s),l=e.Pa,r=0;4>r;++r){for(o=0;8>o;++o)for(a=0;3>a;++a)for(c=0;11>c;++c)h=A(s,ci[r][o][a][c])?m(s,8):si[r][o][a][c],l.Wc[r][o].Yb[a][c]=h;for(o=0;17>o;++o)l.Xc[r][o]=l.Wc[r][ui[o]]}return e.kc=N(s),e.kc&&(e.Bd=m(s,8)),e.cb=1}function $e(e,t,n,r,i,a,o){var s=t[i].Yb[n];for(n=0;16>i;++i){if(!A(e,s[n+0]))return i;for(;!A(e,s[n+1]);)if(s=t[++i].Yb[0],n=0,16==i)return 16;var l=t[i+1].Yb;if(A(e,s[n+2])){var c=e,u=0;if(A(c,(d=s)[(h=n)+3]))if(A(c,d[h+6])){for(s=0,h=2*(u=A(c,d[h+8]))+(d=A(c,d[h+9+u])),u=0,d=ii[h];d[s];++s)u+=u+A(c,d[s]);u+=3+(8<<h)}else A(c,d[h+7])?(u=7+2*A(c,165),u+=A(c,145)):u=5+A(c,159);else u=A(c,d[h+4])?3+A(c,d[h+5]):2;s=l[2]}else u=1,s=l[1];l=o+ai[i],0>(c=e).b&&k(c);var h,d=c.b,f=(h=c.Ca>>1)-(c.I>>d)>>31;--c.b,c.Ca+=f,c.Ca|=1,c.I-=(h+1&f)<<d,a[l]=((u^f)-f)*r[(0<i)+0]}return 16}function Je(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,n){if(null==e)return 0;if(null==n)return Ye(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Qe(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var s=Bi[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-s>>4,e.zb=n.j-s>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+s>>4,e.Hb=n.va+15+s>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(s=0;4>s;++s){var c;if(e.Qa.Cb){var u=e.Qa.Lb[s];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var h=e.gd[s][c],d=u;if(l.Pc&&(d+=l.vd[0],c&&(d+=l.od[0])),0<(d=0>d?0:63<d?63:d)){var f=d;0<l.wb&&(f=4<l.wb?f>>2:f>>1)>9-l.wb&&(f=9-l.wb),1>f&&(f=1),h.dd=f,h.tc=2*d+f,h.ld=40<=d?2:15<=d?1:0}else h.tc=0;h.La=c}}}s=0}else Ye(e,6,"Frame setup failed"),s=e.a;if(s=0==s){if(s){e.$c=0,0<e.Aa||(e.Ic=zi);e:{s=e.Ic,l=4*(f=e.za);var p=32*f,m=f+1,g=0<e.L?f*(0<e.Aa?2:1):0,v=(2==e.Aa?2:1)*f;if((h=l+832+(c=3*(16*s+Bi[e.L])/2*p)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=h)s=0;else{if(h>e.Vb){if(e.Vb=0,e.Ec=a(h),e.Fc=0,null==e.Ec){s=Ye(e,1,"no memory during frame initialization.");break e}e.Vb=h}h=e.Ec,d=e.Fc,e.Ac=h,e.Bc=d,d+=l,e.Gd=o(p,Ve),e.Hd=0,e.rb=o(m+1,Be),e.sb=1,e.wa=g?o(g,Fe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=f),t(!0),e.oc=h,e.pc=d,d+=832,e.ya=o(v,ze),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=f),e.R=16*f,e.B=8*f,f=(p=Bi[e.L])*e.R,p=p/2*e.B,e.sa=h,e.ta=d+f,e.qa=e.sa,e.ra=e.ta+16*s*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*s*e.B+p,e.$c=0,d+=c,e.mb=u?h:null,e.nb=u?d:null,t(d+u<=e.Fc+e.Vb),Je(e),i(e.Ac,e.Bc,0,l),s=1}}if(s){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Dr){for(s=-255;255>=s;++s)Nr[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Ar[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Tr[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Ir[255+s]=0>s?0:255<s?255:s;Dr=1}ar=ct,or=at,lr=ot,cr=st,ur=lt,sr=it,hr=Yt,dr=Xt,fr=Jt,pr=Zt,mr=Qt,gr=$t,vr=en,yr=tn,br=Wt,xr=Vt,wr=Ht,Sr=qt,di[0]=Et,di[1]=ht,di[2]=St,di[3]=_t,di[4]=Ct,di[5]=Nt,di[6]=kt,di[7]=At,di[8]=It,di[9]=Tt,hi[0]=vt,hi[1]=ft,hi[2]=pt,hi[3]=mt,hi[4]=yt,hi[5]=bt,hi[6]=xt,fi[0]=jt,fi[1]=dt,fi[2]=Dt,fi[3]=Rt,fi[4]=Ot,fi[5]=Lt,fi[6]=Mt,s=1}else s=0}s&&(s=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var o,s=e.Jc[e.M&e.Xb],l=e.m,c=e;for(o=0;o<c.za;++o){var u=l,h=c,d=h.Ac,f=h.Bc+4*o,p=h.zc,m=h.ya[h.aa+o];if(h.Qa.Bb?m.$b=A(u,h.Pa.jb[0])?2+A(u,h.Pa.jb[2]):A(u,h.Pa.jb[1]):m.$b=0,h.kc&&(m.Ad=A(u,h.Bd)),m.Za=!A(u,145)+0,m.Za){var g=m.Ob,v=0;for(h=0;4>h;++h){var y,b=p[0+h];for(y=0;4>y;++y){b=li[d[f+y]][b];for(var x=oi[A(u,b[0])];0<x;)x=oi[2*x+A(u,b[x])];b=-x,d[f+y]=b}r(g,v,d,f,4),v+=4,p[0+h]=b}}else b=A(u,156)?A(u,128)?1:3:A(u,163)?2:0,m.Ob[0]=b,i(d,f,b,4),i(p,0,b,4);m.Dd=A(u,142)?A(u,114)?A(u,183)?1:3:2:0}if(c.m.Ka)return Ye(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=s,u=(l=e).rb[l.sb-1],d=l.rb[l.sb+l.ja],o=l.ya[l.aa+l.ja],f=l.kc?o.Ad:0)u.la=d.la=0,o.Za||(u.Na=d.Na=0),o.Hc=0,o.Gc=0,o.ia=0;else{var w,S;if(u=d,d=c,f=l.Pa.Xc,p=l.ya[l.aa+l.ja],m=l.pb[p.$b],h=p.ad,g=0,v=l.rb[l.sb-1],b=y=0,i(h,g,0,384),p.Za)var _=0,E=f[3];else{x=a(16);var C=u.Na+v.Na;if(C=ri(d,f[1],C,m.Eb,0,x,0),u.Na=v.Na=(0<C)+0,1<C)ar(x,0,h,g);else{var k=x[0]+3>>3;for(x=0;256>x;x+=16)h[g+x]=k}_=1,E=f[0]}var N=15&u.la,T=15&v.la;for(x=0;4>x;++x){var I=1&T;for(k=S=0;4>k;++k)N=N>>1|(I=(C=ri(d,E,C=I+(1&N),m.Sc,_,h,g))>_)<<7,S=S<<2|(3<C?3:1<C?2:0!=h[g+0]),g+=16;N>>=4,T=T>>1|I<<7,y=(y<<8|S)>>>0}for(E=N,_=T>>4,w=0;4>w;w+=2){for(S=0,N=u.la>>4+w,T=v.la>>4+w,x=0;2>x;++x){for(I=1&T,k=0;2>k;++k)C=I+(1&N),N=N>>1|(I=0<(C=ri(d,f[2],C,m.Qc,0,h,g)))<<3,S=S<<2|(3<C?3:1<C?2:0!=h[g+0]),g+=16;N>>=2,T=T>>1|I<<5}b|=S<<4*w,E|=N<<4<<w,_|=(240&T)<<w}u.la=E,v.la=_,p.Hc=y,p.Gc=b,p.ia=43690&b?0:m.ia,f=!(y|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[o.$b][o.Za],l.wa[l.Y+l.ja].La|=!f),c.Ka)return Ye(e,7,"Premature end-of-file encountered.")}if(Je(e),l=n,c=1,o=(s=e).D,u=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(o.M=s.M,o.uc=u,jn(s,o),c=1,o=(S=s.D).Nb,u=(b=Bi[s.L])*s.R,d=b/2*s.B,x=16*o*s.R,k=8*o*s.B,f=s.sa,p=s.ta-u+x,m=s.qa,h=s.ra-d+k,g=s.Ha,v=s.Ia-d+k,T=0==(N=S.M),y=N>=s.Va-1,2==s.Aa&&jn(s,S),S.uc)for(I=(C=s).D.M,t(C.D.uc),S=C.yb;S<C.Hb;++S){_=S,E=I;var D=(R=(z=C).D).Nb;w=z.R;var R=R.wa[R.Y+_],P=z.sa,j=z.ta+16*D*w+16*_,L=R.dd,O=R.tc;if(0!=O)if(t(3<=O),1==z.L)0<_&&xr(P,j,w,O+4),R.La&&Sr(P,j,w,O),0<E&&br(P,j,w,O+4),R.La&&wr(P,j,w,O);else{var M=z.B,F=z.qa,B=z.ra+8*D*M+8*_,U=z.Ha,z=z.Ia+8*D*M+8*_;D=R.ld,0<_&&(dr(P,j,w,O+4,L,D),pr(F,B,U,z,M,O+4,L,D)),R.La&&(gr(P,j,w,O,L,D),yr(F,B,U,z,M,O,L,D)),0<E&&(hr(P,j,w,O+4,L,D),fr(F,B,U,z,M,O+4,L,D)),R.La&&(mr(P,j,w,O,L,D),vr(F,B,U,z,M,O,L,D))}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(S=16*N,N=16*(N+1),T?(l.y=s.sa,l.O=s.ta+x,l.f=s.qa,l.N=s.ra+k,l.ea=s.Ha,l.W=s.Ia+k):(S-=b,l.y=f,l.O=p,l.f=m,l.N=h,l.ea=g,l.W=v),y||(N-=b),N>l.o&&(N=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&S<N&&(l.J=dn(s,l,S,N-S),l.F=s.mb,null==l.F&&0==l.F.length)){c=Ye(s,3,"Could not decode alpha data.");break e}S<l.j&&(b=l.j-S,S=l.j,t(!(1&b)),l.O+=s.R*b,l.N+=s.B*(b>>1),l.W+=s.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),S<N&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=S-l.j,l.U=l.va-l.v,l.T=N-S,c=l.put(l))}o+1!=s.Ic||y||(r(s.sa,s.ta-u,f,p+16*s.R,u),r(s.qa,s.ra-d,m,h+8*s.B,d),r(s.Ha,s.Ia-d,g,v+8*s.B,d))}if(!c)return Ye(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),s&=1}return s?(e.cb=0,s):0}function et(e,t,n,r,i){i=e[t+n+32*r]+(i>>3),e[t+n+32*r]=-256&i?0>i?0:255:i}function tt(e,t,n,r,i,a){et(e,t,0,n,r+i),et(e,t,1,n,r+a),et(e,t,2,n,r-a),et(e,t,3,n,r-i)}function nt(e){return(20091*e>>16)+e}function rt(e,t,n,r){var i,o=0,s=a(16);for(i=0;4>i;++i){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-nt(e[t+12]),h=nt(e[t+4])+(35468*e[t+12]>>16);s[o+0]=l+h,s[o+1]=c+u,s[o+2]=c-u,s[o+3]=l-h,o+=4,t++}for(i=o=0;4>i;++i)l=(e=s[o+0]+4)+s[o+8],c=e-s[o+8],u=(35468*s[o+4]>>16)-nt(s[o+12]),et(n,r,0,0,l+(h=nt(s[o+4])+(35468*s[o+12]>>16))),et(n,r,1,0,c+u),et(n,r,2,0,c-u),et(n,r,3,0,l-h),o++,r+=32}function it(e,t,n,r){var i=e[t+0]+4,a=35468*e[t+4]>>16,o=nt(e[t+4]),s=35468*e[t+1]>>16;tt(n,r,0,i+o,e=nt(e[t+1]),s),tt(n,r,1,i+a,e,s),tt(n,r,2,i-a,e,s),tt(n,r,3,i-o,e,s)}function at(e,t,n,r,i){rt(e,t,n,r),i&&rt(e,t+16,n,r+4)}function ot(e,t,n,r){or(e,t+0,n,r,1),or(e,t+32,n,r+128,1)}function st(e,t,n,r){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)et(n,r,t,i,e)}function lt(e,t,n,r){e[t+0]&&cr(e,t+0,n,r),e[t+16]&&cr(e,t+16,n,r+4),e[t+32]&&cr(e,t+32,n,r+128),e[t+48]&&cr(e,t+48,n,r+128+4)}function ct(e,t,n,r){var i,o=a(16);for(i=0;4>i;++i){var s=e[t+0+i]+e[t+12+i],l=e[t+4+i]+e[t+8+i],c=e[t+4+i]-e[t+8+i],u=e[t+0+i]-e[t+12+i];o[0+i]=s+l,o[8+i]=s-l,o[4+i]=u+c,o[12+i]=u-c}for(i=0;4>i;++i)s=(e=o[0+4*i]+3)+o[3+4*i],l=o[1+4*i]+o[2+4*i],c=o[1+4*i]-o[2+4*i],u=e-o[3+4*i],n[r+0]=s+l>>3,n[r+16]=u+c>>3,n[r+32]=s-l>>3,n[r+48]=u-c>>3,r+=64}function ut(e,t,n){var r,i=t-32,a=jr,o=255-e[i-1];for(r=0;r<n;++r){var s,l=a,c=o+e[t-1];for(s=0;s<n;++s)e[t+s]=l[c+e[i+s]];t+=32}}function ht(e,t){ut(e,t,4)}function dt(e,t){ut(e,t,8)}function ft(e,t){ut(e,t,16)}function pt(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function mt(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function gt(e,t,n){var r;for(r=0;16>r;++r)i(t,n+32*r,e,16)}function vt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];gt(r>>5,e,t)}function yt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];gt(r>>4,e,t)}function bt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];gt(r>>4,e,t)}function xt(e,t){gt(128,e,t)}function wt(e,t,n){return e+2*t+n+2>>2}function St(e,t){var n,i=t-32;for(i=new Uint8Array([wt(e[i-1],e[i+0],e[i+1]),wt(e[i+0],e[i+1],e[i+2]),wt(e[i+1],e[i+2],e[i+3]),wt(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)r(e,t+32*n,i,0,i.length)}function _t(e,t){var n=e[t-1],r=e[t-1+32],i=e[t-1+64],a=e[t-1+96];T(e,t+0,16843009*wt(e[t-1-32],n,r)),T(e,t+32,16843009*wt(n,r,i)),T(e,t+64,16843009*wt(r,i,a)),T(e,t+96,16843009*wt(i,a,a))}function Et(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)i(e,t+32*n,r,4)}function Ct(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],a=e[t-1-32],o=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=wt(r,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=wt(n,r,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=wt(a,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=wt(o,a,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=wt(s,o,a),e[t+3+32]=e[t+2+0]=wt(l,s,o),e[t+3+0]=wt(c,l,s)}function kt(e,t){var n=e[t+1-32],r=e[t+2-32],i=e[t+3-32],a=e[t+4-32],o=e[t+5-32],s=e[t+6-32],l=e[t+7-32];e[t+0+0]=wt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=wt(n,r,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=wt(r,i,a),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=wt(i,a,o),e[t+3+32]=e[t+2+64]=e[t+1+96]=wt(a,o,s),e[t+3+64]=e[t+2+96]=wt(o,s,l),e[t+3+96]=wt(s,l,l)}function Nt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],a=e[t-1-32],o=e[t+0-32],s=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=a+o+1>>1,e[t+1+0]=e[t+2+64]=o+s+1>>1,e[t+2+0]=e[t+3+64]=s+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=wt(i,r,n),e[t+0+64]=wt(r,n,a),e[t+0+32]=e[t+1+96]=wt(n,a,o),e[t+1+32]=e[t+2+96]=wt(a,o,s),e[t+2+32]=e[t+3+96]=wt(o,s,l),e[t+3+32]=wt(s,l,c)}function At(e,t){var n=e[t+0-32],r=e[t+1-32],i=e[t+2-32],a=e[t+3-32],o=e[t+4-32],s=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+i+1>>1,e[t+2+0]=e[t+1+64]=i+a+1>>1,e[t+3+0]=e[t+2+64]=a+o+1>>1,e[t+0+32]=wt(n,r,i),e[t+1+32]=e[t+0+96]=wt(r,i,a),e[t+2+32]=e[t+1+96]=wt(i,a,o),e[t+3+32]=e[t+2+96]=wt(a,o,s),e[t+3+64]=wt(o,s,l),e[t+3+96]=wt(s,l,c)}function Tt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],a=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+i+1>>1,e[t+2+32]=e[t+0+64]=i+a+1>>1,e[t+1+0]=wt(n,r,i),e[t+3+0]=e[t+1+32]=wt(r,i,a),e[t+3+32]=e[t+1+64]=wt(i,a,a),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=a}function It(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],a=e[t-1+96],o=e[t-1-32],s=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+o+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=i+r+1>>1,e[t+0+96]=a+i+1>>1,e[t+3+0]=wt(s,l,c),e[t+2+0]=wt(o,s,l),e[t+1+0]=e[t+3+32]=wt(n,o,s),e[t+1+32]=e[t+3+64]=wt(r,n,o),e[t+1+64]=e[t+3+96]=wt(i,r,n),e[t+1+96]=wt(a,i,r)}function Dt(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Rt(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Pt(e,t,n){var r;for(r=0;8>r;++r)i(t,n+32*r,e,8)}function jt(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Pt(r>>4,e,t)}function Lt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Pt(r>>3,e,t)}function Ot(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Pt(r>>3,e,t)}function Mt(e,t){Pt(128,e,t)}function Ft(e,t,n){var r=e[t-n],i=e[t+0],a=3*(i-r)+Rr[1020+e[t-2*n]-e[t+n]],o=Pr[112+(a+4>>3)];e[t-n]=jr[255+r+Pr[112+(a+3>>3)]],e[t+0]=jr[255+i-o]}function Bt(e,t,n,r){var i=e[t+0],a=e[t+n];return Lr[255+e[t-2*n]-e[t-n]]>r||Lr[255+a-i]>r}function Ut(e,t,n,r){return 4*Lr[255+e[t-n]-e[t+0]]+Lr[255+e[t-2*n]-e[t+n]]<=r}function zt(e,t,n,r,i){var a=e[t-3*n],o=e[t-2*n],s=e[t-n],l=e[t+0],c=e[t+n],u=e[t+2*n],h=e[t+3*n];return 4*Lr[255+s-l]+Lr[255+o-c]>r?0:Lr[255+e[t-4*n]-a]<=i&&Lr[255+a-o]<=i&&Lr[255+o-s]<=i&&Lr[255+h-u]<=i&&Lr[255+u-c]<=i&&Lr[255+c-l]<=i}function Wt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Ut(e,t+r,n,i)&&Ft(e,t+r,n)}function Vt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Ut(e,t+r*n,1,i)&&Ft(e,t+r*n,1)}function Ht(e,t,n,r){var i;for(i=3;0<i;--i)Wt(e,t+=4*n,n,r)}function qt(e,t,n,r){var i;for(i=3;0<i;--i)Vt(e,t+=4,n,r)}function Gt(e,t,n,r,i,a,o,s){for(a=2*a+1;0<i--;){if(zt(e,t,n,a,o))if(Bt(e,t,n,s))Ft(e,t,n);else{var l=e,c=t,u=n,h=l[c-2*u],d=l[c-u],f=l[c+0],p=l[c+u],m=l[c+2*u],g=27*(y=Rr[1020+3*(f-d)+Rr[1020+h-p]])+63>>7,v=18*y+63>>7,y=9*y+63>>7;l[c-3*u]=jr[255+l[c-3*u]+y],l[c-2*u]=jr[255+h+v],l[c-u]=jr[255+d+g],l[c+0]=jr[255+f-g],l[c+u]=jr[255+p-v],l[c+2*u]=jr[255+m-y]}t+=r}}function Kt(e,t,n,r,i,a,o,s){for(a=2*a+1;0<i--;){if(zt(e,t,n,a,o))if(Bt(e,t,n,s))Ft(e,t,n);else{var l=e,c=t,u=n,h=l[c-u],d=l[c+0],f=l[c+u],p=Pr[112+(4+(m=3*(d-h))>>3)],m=Pr[112+(m+3>>3)],g=p+1>>1;l[c-2*u]=jr[255+l[c-2*u]+g],l[c-u]=jr[255+h+m],l[c+0]=jr[255+d-p],l[c+u]=jr[255+f-g]}t+=r}}function Yt(e,t,n,r,i,a){Gt(e,t,n,1,16,r,i,a)}function Xt(e,t,n,r,i,a){Gt(e,t,1,n,16,r,i,a)}function Qt(e,t,n,r,i,a){var o;for(o=3;0<o;--o)Kt(e,t+=4*n,n,1,16,r,i,a)}function $t(e,t,n,r,i,a){var o;for(o=3;0<o;--o)Kt(e,t+=4,1,n,16,r,i,a)}function Jt(e,t,n,r,i,a,o,s){Gt(e,t,i,1,8,a,o,s),Gt(n,r,i,1,8,a,o,s)}function Zt(e,t,n,r,i,a,o,s){Gt(e,t,1,i,8,a,o,s),Gt(n,r,1,i,8,a,o,s)}function en(e,t,n,r,i,a,o,s){Kt(e,t+4*i,i,1,8,a,o,s),Kt(n,r+4*i,i,1,8,a,o,s)}function tn(e,t,n,r,i,a,o,s){Kt(e,t+4,1,i,8,a,o,s),Kt(n,r+4,1,i,8,a,o,s)}function nn(){this.ba=new oe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function an(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new h}function sn(){this.xb=this.a=0,this.l=new Ge,this.ca=new oe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=o(4,an),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(e,t,n,r,i,a,o){for(e=null==e?0:e[t+0],t=0;t<o;++t)i[a+t]=e+n[r+t]&255,e=i[a+t]}function un(e,t,n,r,i,a,o){var s;if(null==e)cn(null,null,n,r,i,a,o);else for(s=0;s<o;++s)i[a+s]=e[t+s]+n[r+s]&255}function hn(e,t,n,r,i,a,o){if(null==e)cn(null,null,n,r,i,a,o);else{var s,l=e[t+0],c=l,u=l;for(s=0;s<o;++s)c=u+(l=e[t+s])-c,u=n[r+s]+(-256&c?0>c?0:255:c)&255,c=l,i[a+s]=u}}function dn(e,n,i,o){var s=n.width,l=n.o;if(t(null!=e&&null!=n),0>i||0>=o||i+o>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ln,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=a(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,h=e.P,d=e.qc,f=e.mb,p=e.nb,m=h+1,g=d-1,y=c.l;if(t(null!=u&&null!=f&&null!=n),gi[0]=null,gi[1]=cn,gi[2]=un,gi[3]=hn,c.ca=f,c.tb=p,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=d)n=0;else if(c.$a=3&u[h+0],c.Z=u[h+0]>>2&3,c.Lc=u[h+0]>>4&3,h=u[h+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||h)n=0;else if(y.put=fe,y.ac=de,y.bc=pe,y.ma=c,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,c.$a)e:{t(1==c.$a),n=Ae();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,v(n.m,u,m,g),!Te(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&_e(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=a(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Ie(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:o=l-i}t(null!=e.ga),t(i+o<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(m=e.rc,g=e.Vc,y=e.Fa,h=e.P+1+i*n,d=e.mb,f=e.nb+i*n,t(h<=e.P+e.qc),0!=u.Z)for(t(null!=gi[u.Z]),c=0;c<o;++c)gi[u.Z](m,g,y,h,d,f,n),m=d,g=f,f+=n,h+=n;else for(c=0;c<o;++c)r(d,f,y,h,n),m=d,g=f,f+=n,h+=n;e.rc=m,e.Vc=g}else{if(t(null!=u.mc),n=i+o,t(null!=(c=u.mc)),t(n<=c.i),c.C>=n)n=1;else if(u.ic||vn(),u.ic){u=c.V,m=c.Ba,g=c.c;var b=c.i,x=(y=1,h=c.$/g,d=c.$%g,f=c.m,p=c.s,c.$),w=g*b,S=g*n,E=p.wc,k=x<S?xe(p,d,h):null;t(x<=w),t(n<=b),t(_e(p));t:for(;;){for(;!f.h&&x<S;){if(d&E||(k=xe(p,d,h)),t(null!=k),C(f),256>(b=ye(k.G[0],k.H[0],f)))u[m+x]=b,++x,++d>=g&&(d=0,++h<=n&&!(h%16)&&Ce(c,h));else{if(!(280>b)){y=0;break t}b=ge(b-256,f);var N,A=ye(k.G[4],k.H[4],f);if(C(f),!(x>=(A=ve(g,A=ge(A,f)))&&w-x>=b)){y=0;break t}for(N=0;N<b;++N)u[m+x+N]=u[m+x+N-A];for(x+=b,d+=b;d>=g;)d-=g,++h<=n&&!(h%16)&&Ce(c,h);x<S&&d&E&&(k=xe(p,d,h))}t(f.h==_(f))}Ce(c,h>n?n:h);break t}!y||f.h&&x<w?(y=0,c.a=f.h?5:3):c.$=x,n=y}else n=ke(c,c.V,c.Ba,c.c,c.i,n,De);if(!n){o=0;break e}}i+o>=l&&(e.Cc=1),o=1}if(!o)return null;if(e.Cc&&(null!=(o=e.ga)&&(o.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*s}function fn(e,t,n,r,i,a){for(;0<i--;){var o,s=e,l=t+(n?1:0),c=e,u=t+(n?0:3);for(o=0;o<r;++o){var h=c[u+4*o];255!=h&&(h*=32897,s[l+4*o+0]=s[l+4*o+0]*h>>23,s[l+4*o+1]=s[l+4*o+1]*h>>23,s[l+4*o+2]=s[l+4*o+2]*h>>23)}t+=a}}function pn(e,t,n,r,i){for(;0<r--;){var a;for(a=0;a<n;++a){var o=e[t+2*a+0],s=15&(c=e[t+2*a+1]),l=4369*s,c=(240&c|c>>4)*l>>16;e[t+2*a+0]=(240&o|o>>4)*l>>16&240|(15&o|o<<4)*l>>16>>4&15,e[t+2*a+1]=240&c|s}t+=i}}function mn(e,t,n,r,i,a,o,s){var l,c,u=255;for(c=0;c<i;++c){for(l=0;l<r;++l){var h=e[t+l];a[o+4*l]=h,u&=h}t+=n,o+=s}return 255!=u}function gn(e,t,n,r,i){var a;for(a=0;a<i;++a)n[r+a]=e[t+a]>>8}function vn(){_r=fn,Er=pn,Cr=mn,kr=gn}function yn(n,r,i){e[n]=function(e,n,a,o,s,l,c,u,h,d,f,p,m,g,v,y,b){var x,w=b-1>>1,S=s[l+0]|c[u+0]<<16,_=h[d+0]|f[p+0]<<16;t(null!=e);var E=3*S+_+131074>>2;for(r(e[n+0],255&E,E>>16,m,g),null!=a&&(E=3*_+S+131074>>2,r(a[o+0],255&E,E>>16,v,y)),x=1;x<=w;++x){var C=s[l+x]|c[u+x]<<16,k=h[d+x]|f[p+x]<<16,N=S+C+_+k+524296,A=N+2*(C+_)>>3;E=A+S>>1,S=(N=N+2*(S+k)>>3)+C>>1,r(e[n+2*x-1],255&E,E>>16,m,g+(2*x-1)*i),r(e[n+2*x-0],255&S,S>>16,m,g+(2*x-0)*i),null!=a&&(E=N+_>>1,S=A+k>>1,r(a[o+2*x-1],255&E,E>>16,v,y+(2*x-1)*i),r(a[o+2*x+0],255&S,S>>16,v,y+(2*x+0)*i)),S=C,_=k}1&b||(E=3*S+_+131074>>2,r(e[n+b-1],255&E,E>>16,m,g+(b-1)*i),null!=a&&(E=3*_+S+131074>>2,r(a[o+b-1],255&E,E>>16,v,y+(b-1)*i)))}}function bn(){vi[Or]=yi,vi[Mr]=xi,vi[Fr]=bi,vi[Br]=wi,vi[Ur]=Si,vi[zr]=_i,vi[Wr]=Ei,vi[Vr]=xi,vi[Hr]=wi,vi[qr]=Si,vi[Gr]=_i}function xn(e){return e&~Ii?0>e?0:255:e>>Ti}function wn(e,t){return xn((19077*e>>8)+(26149*t>>8)-14234)}function Sn(e,t,n){return xn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function _n(e,t){return xn((19077*e>>8)+(33050*t>>8)-17685)}function En(e,t,n,r,i){r[i+0]=wn(e,n),r[i+1]=Sn(e,t,n),r[i+2]=_n(e,t)}function Cn(e,t,n,r,i){r[i+0]=_n(e,t),r[i+1]=Sn(e,t,n),r[i+2]=wn(e,n)}function kn(e,t,n,r,i){var a=Sn(e,t,n);t=a<<3&224|_n(e,t)>>3,r[i+0]=248&wn(e,n)|a>>5,r[i+1]=t}function Nn(e,t,n,r,i){var a=240&_n(e,t)|15;r[i+0]=240&wn(e,n)|Sn(e,t,n)>>4,r[i+1]=a}function An(e,t,n,r,i){r[i+0]=255,En(e,t,n,r,i+1)}function Tn(e,t,n,r,i){Cn(e,t,n,r,i),r[i+3]=255}function In(e,t,n,r,i){En(e,t,n,r,i),r[i+3]=255}function qe(e,t){return 0>e?0:e>t?t:e}function Dn(t,n,r){e[t]=function(e,t,i,a,o,s,l,c,u){for(var h=c+(-2&u)*r;c!=h;)n(e[t+0],i[a+0],o[s+0],l,c),n(e[t+1],i[a+0],o[s+0],l,c+r),t+=2,++a,++s,c+=2*r;1&u&&n(e[t+0],i[a+0],o[s+0],l,c)}}function Rn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Pn(e,t,n,r,i){switch(e>>>30){case 3:or(t,n,r,i,0);break;case 2:sr(t,n,r,i);break;case 1:cr(t,n,r,i)}}function jn(e,t){var n,a,o=t.M,s=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,h=e.pc+584,d=e.oc,f=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[h+32*n-1]=129,d[f+32*n-1]=129;for(0<o?l[c-1-32]=u[h-1-32]=d[f-1-32]=129:(i(l,c-32-1,127,21),i(u,h-32-1,127,9),i(d,f-32-1,127,9)),a=0;a<e.za;++a){var p=t.ya[t.aa+a];if(0<a){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(u,h+32*n-4,u,h+32*n+4,4),r(d,f+32*n-4,d,f+32*n+4,4)}var m=e.Gd,g=e.Hd+a,v=p.ad,y=p.Hc;if(0<o&&(r(l,c-32,m[g].y,0,16),r(u,h-32,m[g].f,0,8),r(d,f-32,m[g].ea,0,8)),p.Za){var b=l,x=c-32+16;for(0<o&&(a>=e.za-1?i(b,x,m[g].y[15],4):r(b,x,m[g+1].y,0,4)),n=0;4>n;n++)b[x+128+n]=b[x+256+n]=b[x+384+n]=b[x+0+n];for(n=0;16>n;++n,y<<=2)b=l,x=c+Fi[n],di[p.Ob[n]](b,x),Pn(y,v,16*+n,b,x)}else if(b=Rn(a,o,p.Ob[0]),hi[b](l,c),0!=y)for(n=0;16>n;++n,y<<=2)Pn(y,v,16*+n,l,c+Fi[n]);for(n=p.Gc,b=Rn(a,o,p.Dd),fi[b](u,h),fi[b](d,f),y=v,b=u,x=h,255&(p=n|0)&&(170&p?lr(y,256,b,x):ur(y,256,b,x)),p=d,y=f,255&(n>>=8)&&(170&n?lr(v,320,p,y):ur(v,320,p,y)),o<e.Ub-1&&(r(m[g].y,0,l,c+480,16),r(m[g].f,0,u,h+224,8),r(m[g].ea,0,d,f+224,8)),n=8*s*e.B,m=e.sa,g=e.ta+16*a+16*s*e.R,v=e.qa,p=e.ra+8*a+n,y=e.Ha,b=e.Ia+8*a+n,n=0;16>n;++n)r(m,g+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(v,p+n*e.B,u,h+32*n,8),r(y,b+n*e.B,d,f+32*n,8)}}function Ln(e,r,i,a,o,s,l,c,u){var h=[0],d=[0],f=0,p=null!=u?u.kd:0,m=null!=u?u:new rn;if(null==e||12>i)return 7;m.data=e,m.w=r,m.ha=i,r=[r],i=[i],m.gb=[m.gb];e:{var g=r,y=i,b=m.gb;if(t(null!=e),t(null!=y),t(null!=b),b[0]=0,12<=y[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){b=3;break e}var x=R(e,g[0]+4);if(12>x||4294967286<x){b=3;break e}if(p&&x>y[0]-8){b=7;break e}b[0]=x,g[0]+=12,y[0]-=12}b=0}if(0!=b)return b;for(x=0<m.gb[0],i=i[0];;){e:{var S=e;y=r,b=i;var _=h,E=d,C=g=[0];if((A=f=[f])[0]=0,8>b[0])b=7;else{if(!n(S,y[0],"VP8X")){if(10!=R(S,y[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var k=R(S,y[0]+8),N=1+D(S,y[0]+12);if(2147483648<=N*(S=1+D(S,y[0]+15))){b=3;break e}null!=C&&(C[0]=k),null!=_&&(_[0]=N),null!=E&&(E[0]=S),y[0]+=18,b[0]-=18,A[0]=1}b=0}}if(f=f[0],g=g[0],0!=b)return b;if(y=!!(2&g),!x&&f)return 3;if(null!=s&&(s[0]=!!(16&g)),null!=l&&(l[0]=y),null!=c&&(c[0]=0),l=h[0],g=d[0],f&&y&&null==u){b=0;break}if(4>i){b=7;break}if(x&&f||!x&&!f&&!n(e,r[0],"ALPH")){i=[i],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];e:{k=e,b=r,x=i;var A=m.gb;_=m.na,E=m.P,C=m.Sa,N=22,t(null!=k),t(null!=x),S=b[0];var T=x[0];for(t(null!=_),t(null!=C),_[0]=null,E[0]=null,C[0]=0;;){if(b[0]=S,x[0]=T,8>T){b=7;break e}var I=R(k,S+4);if(4294967286<I){b=3;break e}var P=8+I+1&-2;if(N+=P,0<A&&N>A){b=3;break e}if(!n(k,S,"VP8 ")||!n(k,S,"VP8L")){b=0;break e}if(T[0]<P){b=7;break e}n(k,S,"ALPH")||(_[0]=k,E[0]=S+8,C[0]=I),S+=P,T-=P}}if(i=i[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=b)break}i=[i],m.Ja=[m.Ja],m.xa=[m.xa];e:if(A=e,b=r,x=i,_=m.gb[0],E=m.Ja,C=m.xa,k=b[0],S=!n(A,k,"VP8 "),N=!n(A,k,"VP8L"),t(null!=A),t(null!=x),t(null!=E),t(null!=C),8>x[0])b=7;else{if(S||N){if(A=R(A,k+4),12<=_&&A>_-12){b=3;break e}if(p&&A>x[0]-8){b=7;break e}E[0]=A,b[0]+=8,x[0]-=8,C[0]=N}else C[0]=5<=x[0]&&47==A[k+0]&&!(A[k+4]>>5),E[0]=x[0];b=0}if(i=i[0],m.Ja=m.Ja[0],m.xa=m.xa[0],r=r[0],0!=b)break;if(4294967286<m.Ja)return 3;if(null==c||y||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>i){b=7;break}c=l,p=g,y=s,null==e||5>i?e=0:5<=i&&47==e[r+0]&&!(e[r+4]>>5)?(x=[0],A=[0],_=[0],v(E=new w,e,r,i),me(E,x,A,_)?(null!=c&&(c[0]=x[0]),null!=p&&(p[0]=A[0]),null!=y&&(y[0]=_[0]),e=1):e=0):e=0}else{if(10>i){b=7;break}c=g,null==e||10>i||!Xe(e,r+3,i-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,y=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=m.Ja||!y||!e?e=0:(l&&(l[0]=y),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],f&&(h[0]!=l||d[0]!=g))return 3;null!=u&&(u[0]=m,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-i));break}return 0==b||7==b&&f&&null==u?(null!=s&&(s[0]|=null!=m.na&&0<m.na.length),null!=a&&(a[0]=l),null!=o&&(o[0]=g),0):b}function On(e,t,n){var r=t.width,i=t.height,a=0,o=0,s=r,l=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(s=e.cd,l=e.bd,a=e.v,o=e.j,11>n||(a&=-2,o&=-2),0>a||0>o||0>=s||0>=l||a+s>r||o+l>i))return 0;if(t.v=a,t.j=o,t.va=a+s,t.o=o+l,t.U=s,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!O(s,l,n=[e.ib],a=[e.hb]))return 0;t.ib=n[0],t.hb=a[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*i/4,t.Kb=0),1}function Mn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Fn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,o=n.bd,s=-2&n.v,l=-2&n.j;if(0>s||0>l||0>=i||0>=o||s+i>e||l+o>t)return 2;e=i,t=o}if(n.da){if(!O(e,t,i=[n.ib],o=[n.hb]))return 2;e=i[0],t=o[0]}}r.width=e,r.height=t;e:{var c=r.width,u=r.height;if(e=r.S,0>=c||0>=u||!(e>=Or&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){s=o=i=t=0;var h=(l=c*Wi[e])*u;if(11>e||(o=(u+1)/2*(t=(c+1)/2),12==e&&(s=(i=c)*u)),null==(u=a(h+2*o+s))){e=1;break e}r.sd=u,11>e?((c=r.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=h):((c=r.f.kb).y=u,c.O=0,c.fa=l,c.Fd=h,c.f=u,c.N=0+h,c.Ab=t,c.Cd=o,c.ea=u,c.W=0+h+o,c.Db=t,c.Ed=o,12==e&&(c.F=u,c.J=0+h+2*o),c.Tc=s,c.lb=i)}if(t=1,i=r.S,o=r.width,s=r.height,i>=Or&&13>i)if(11>i)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(s-1)+o<=e.size,t&=l>=o*Wi[i],t&=null!=e.eb;else{e=r.f.kb,l=(o+1)/2,h=(s+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var d=Math.abs(e.Db),f=Math.abs(e.lb),p=f*(s-1)+o;t&=c*(s-1)+o<=e.Fd,t&=u*(h-1)+l<=e.Cd,t=(t&=d*(h-1)+l<=e.Ed)&c>=o&u>=l&d>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=f>=o,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Mn(r)),e}var Bn=64,Un=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],zn=24,Wn=32,Vn=8,Hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return z(z(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return z(e,t[n-1])},e.Predictor7=function(e,t,n){return z(e,t[n+0])},e.Predictor8=function(e,t,n){return z(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return z(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return z(z(e,t[n-1]),z(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=H(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+H(r>>16&255,e>>16&255,t>>16&255)+H(r>>8&255,e>>8&255,t>>8&255)+H(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(W((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|W((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|W((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|W((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(V((e=z(e,t[n+0]))>>24&255,r>>24&255)<<24|V(e>>16&255,r>>16&255)<<16|V(e>>8&255,r>>8&255)<<8|V(255&e,255&r))>>>0};var qn=e.PredictorAdd0;e.PredictorAdd1=q,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Gn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Kn,Yn=e.ColorIndexInverseTransform,Xn=e.MapARGB,Qn=e.VP8LColorIndexInverseTransformAlpha,$n=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zn,er,tr,nr,rr,ir,ar,or,sr,lr,cr,ur,hr,dr,fr,pr,mr,gr,vr,yr,br,xr,wr,Sr,_r,Er,Cr,kr,Nr=a(511),Ar=a(2041),Tr=a(225),Ir=a(767),Dr=0,Rr=Ar,Pr=Tr,jr=Ir,Lr=Nr,Or=0,Mr=1,Fr=2,Br=3,Ur=4,zr=5,Wr=6,Vr=7,Hr=8,qr=9,Gr=10,Kr=[2,3,7],Yr=[3,3,11],Xr=[280,256,256,256,40],Qr=[0,1,1,1,0],$r=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ei=8,ti=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ri=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ai=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ci=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ui=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hi=[],di=[],fi=[],pi=1,mi=2,gi=[],vi=[];yn("UpsampleRgbLinePair",En,3),yn("UpsampleBgrLinePair",Cn,3),yn("UpsampleRgbaLinePair",In,4),yn("UpsampleBgraLinePair",Tn,4),yn("UpsampleArgbLinePair",An,4),yn("UpsampleRgba4444LinePair",Nn,2),yn("UpsampleRgb565LinePair",kn,2);var yi=e.UpsampleRgbLinePair,bi=e.UpsampleBgrLinePair,xi=e.UpsampleRgbaLinePair,wi=e.UpsampleBgraLinePair,Si=e.UpsampleArgbLinePair,_i=e.UpsampleRgba4444LinePair,Ei=e.UpsampleRgb565LinePair,Ci=16,ki=1<<Ci-1,Ni=-227,Ai=482,Ti=6,Ii=(256<<Ti)-1,Di=0,Ri=a(256),Pi=a(256),ji=a(256),Li=a(256),Oi=a(Ai-Ni),Mi=a(Ai-Ni);Dn("YuvToRgbRow",En,3),Dn("YuvToBgrRow",Cn,3),Dn("YuvToRgbaRow",In,4),Dn("YuvToBgraRow",Tn,4),Dn("YuvToArgbRow",An,4),Dn("YuvToRgba4444Row",Nn,2),Dn("YuvToRgb565Row",kn,2);var Fi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bi=[0,2,8],Ui=[8,7,6,4,4,2,2,2,1,1,1,1],zi=1;this.WebPDecodeRGBA=function(e,n,r,i,a){var o=Mr,s=new nn,l=new oe;s.ba=l,l.S=o,l.width=[l.width],l.height=[l.height];var c=l.width,u=l.height,h=new se;if(null==h||null==e)var d=2;else t(null!=h),d=Ln(e,n,r,h.width,h.height,h.Pd,h.Qd,h.format,null);if(0!=d?c=0:(null!=c&&(c[0]=h.width[0]),null!=u&&(u[0]=h.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=i&&(i[0]=l.width),null!=a&&(a[0]=l.height);e:{if(i=new Ge,(a=new rn).data=e,a.w=n,a.ha=r,a.kd=1,n=[0],t(null!=a),(0==(e=Ln(a.data,a.w,a.ha,null,null,null,n,null,a))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=s),i.data=a.data,i.w=a.w+a.offset,i.ha=a.ha-a.offset,i.put=fe,i.ac=de,i.bc=pe,i.ma=s,a.xa){if(null==(e=Ae())){s=1;break e}if(function(e,n){var r=[0],i=[0],a=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,v(e.m,n.data,n.w,n.ha),!me(e.m,r,i,a)){e.a=3;break t}if(e.xb=mi,n.width=r[0],n.height=i[0],!Te(r[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,i)){if(i=0==(n=Fn(i.width,i.height,s.Oa,s.ba))){t:{i=e;n:for(;;){if(null==i){i=0;break t}if(t(null!=i.s.yc),t(null!=i.s.Ya),t(0<i.s.Wb),t(null!=(r=i.l)),t(null!=(a=r.ma)),0!=i.xb){if(i.ca=a.ba,i.tb=a.tb,t(null!=i.ca),!On(a.Oa,r,Br)){i.a=2;break n}if(!Ie(i,r.width))break n;if(r.da)break n;if((r.da||re(i.ca.S))&&vn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&vn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!P(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!ke(i,i.V,i.Ba,i.c,i.i,r.o,Se))break n;a.Dc=i.Ma,i=1;break t}t(0!=i.a),i=0}i=!i}i&&(n=e.a)}else n=e.a}else{if(null==(e=new Ke)){s=1;break e}if(e.Fa=a.na,e.P=a.P,e.qc=a.Sa,Qe(e,i)){if(0==(n=Fn(i.width,i.height,s.Oa,s.ba))){if(e.Aa=0,r=s.Oa,t(null!=(a=e)),null!=r){if(0<(c=0>(c=r.Md)?0:100<c?255:255*c/100)){for(u=h=0;4>u;++u)12>(d=a.pb[u]).lc&&(d.ia=c*Ui[0>d.lc?0:d.lc]>>3),h|=d.ia;h&&(alert("todo:VP8InitRandom"),a.ia=1)}a.Ga=r.Id,100<a.Ga?a.Ga=100:0>a.Ga&&(a.Ga=0)}Ze(e,i)||(n=e.a)}}else n=e.a}0==n&&null!=s.Oa&&s.Oa.fd&&(n=Mn(s.ba))}s=n}o=0!=s?null:11>o?l.f.RGBA.eb:l.f.kb.y}else o=null;return o};var Wi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function h(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var d=[0],f=[0],p=[],m=new l,g=e,v=function(e,t){var n={},r=0,i=!1,a=0,o=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){var s,l;for(h(e,t+=4),t+=8;t<e.length;){var d=c(e,t),f=h(e,t+=4);t+=4;var p=f+(1&f);switch(d){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(v=n.frames[r]).src_off=i?o:t-8,v.src_size=a+f+8,r++,i&&(i=!1,a=0,o=0);break;case"VP8X":(v=n.header={}).feature_flags=e[t];var m=t+4;v.canvas_width=1+u(e,m),m+=3,v.canvas_height=1+u(e,m),m+=3;break;case"ALPH":i=!0,a=p+8,o=t-8;break;case"ANIM":(v=n.header).bgcolor=h(e,t),m=t+4,v.loop_count=(s=e)[(l=m)+0]|s[l+1]<<8,m+=2;break;case"ANMF":var g,v;(v=n.frames[r]={}).offset_x=2*u(e,t),t+=3,v.offset_y=2*u(e,t),t+=3,v.width=1+u(e,t),t+=3,v.height=1+u(e,t),t+=3,v.duration=u(e,t),t+=3,g=e[t++],v.dispose=1&g,v.blend=g>>1&1}"ANMF"!=d&&(t+=p)}return n}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,b=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,d=[y.canvas_height],f=[y.canvas_width];for(var x=0;x<b.length&&0!=b[x].blend;x++);}var w=b[0],S=m.WebPDecodeRGBA(g,w.src_off,w.src_size,f,d);w.rgba=S,w.imgwidth=f[0],w.imgheight=d[0];for(var _=0;_<f[0]*d[0]*4;_++)p[_]=S[_];return this.width=f,this.height=d,this.data=p,this}!function(e){var t=function(t,r,l,c){var u=4,h=a;switch(c){case e.image_compression.FAST:u=1,h=i;break;case e.image_compression.MEDIUM:u=6,h=o;break;case e.image_compression.SLOW:u=9,h=s}var d=$(t=n(t,r,l,h),{level:u});return e.__addimage__.arrayBufferToBinaryString(d)},n=function(e,t,n,r){for(var i,a,o,s=e.length/t,l=new Uint8Array(e.length+s),h=c(),d=0;d<s;d+=1){if(o=d*t,i=e.subarray(o,o+t),r)l.set(r(i,n,a),o+d);else{for(var f,p=h.length,m=[];f<p;f+=1)m[f]=h[f](i,n,a);var g=u(m.concat());l.set(m[g],o+d)}a=i}return l},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},i=function(e,t){var n,r=[],i=e.length;r[0]=1;for(var a=0;a<i;a+=1)n=e[a-t]||0,r[a+1]=e[a]-n+256&255;return r},a=function(e,t,n){var r,i=[],a=e.length;i[0]=2;for(var o=0;o<a;o+=1)r=n&&n[o]||0,i[o+1]=e[o]-r+256&255;return i},o=function(e,t,n){var r,i,a=[],o=e.length;a[0]=3;for(var s=0;s<o;s+=1)r=e[s-t]||0,i=n&&n[s]||0,a[s+1]=e[s]+256-(r+i>>>1)&255;return a},s=function(e,t,n){var r,i,a,o,s=[],c=e.length;s[0]=4;for(var u=0;u<c;u+=1)r=e[u-t]||0,i=n&&n[u]||0,a=n&&n[u-t]||0,o=l(r,i,a),s[u+1]=e[u]-o+256&255;return s},l=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),a=Math.abs(e+t-n-n);return r<=i&&r<=a?e:i<=a?t:n},c=function(){return[r,i,a,o,s]},u=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,i,a){var o,s,l,c,u,h,d,f,p,m,g,v,y,b,x,w=this.decode.FLATE_DECODE,S="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new Gt(n)).imgData,s=l.bits,o=l.colorSpace,u=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){p=(f=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*l.colors),m=new Uint8Array(p);var _,E=l.pixelBitlength-l.bits;for(b=0,x=0;b<p;b++){for(y=f[b],_=0;_<E;)g[x++]=y>>>_&255,_+=l.bits;m[b]=y>>>_&255}}if(16===l.bits){p=(f=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*(32/l.pixelBitlength)*l.colors),m=new Uint8Array(p*(32/l.pixelBitlength)),v=l.colors>1,b=0,x=0;for(var C=0;b<p;)y=f[b++],g[x++]=y>>>0&255,v&&(g[x++]=y>>>16&255,y=f[b++],g[x++]=y>>>0&255),m[C++]=y>>>16&255;s=8}a!==e.image_compression.NONE?(n=t(g,l.width*l.colors,l.colors,a),d=t(m,l.width,1,a)):(n=g,d=m,w=void 0)}if(3===l.colorType&&(o=this.color_spaces.INDEXED,h=l.palette,l.transparency.indexed)){var k=l.transparency.indexed,N=0;for(b=0,p=k.length;b<p;++b)N+=k[b];if((N/=255)===p-1&&-1!==k.indexOf(0))c=[k.indexOf(0)];else if(N!==p){for(f=l.decodePixels(),m=new Uint8Array(f.length),b=0,p=f.length;b<p;b++)m[b]=k[f[b]];d=t(m,l.width,1)}}var A=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(a);return w===this.decode.FLATE_DECODE&&(S="/Predictor "+A+" "),S+="/Colors "+u+" /BitsPerComponent "+s+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:i,data:n,index:r,filter:w,decodeParameters:S,transparency:c,palette:h,sMask:d,predictor:A,width:l.width,height:l.height,bitsPerComponent:s,colorSpace:o}}}}(Pe.API),function(e){e.processGIF89A=function(t,n,r,i){var a=new Kt(t),o=a.width,s=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:s},u=new Xt(100).encode(c,100);return e.processJPEG.call(this,u,n,r,i)},e.processGIF87A=e.processGIF89A}(Pe.API),Qt.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qt.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){ne.log("bit decode error:"+e)}},Qt.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[a>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}0!==n&&(this.pos+=4-n)}},Qt.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,s=a>>4,l=15&a,c=this.palette[s];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}0!==t&&(this.pos+=4-t)}},Qt.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}0!==e&&(this.pos+=4-e)}},Qt.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,s=(a>>5&t)/t*255|0,l=(a>>10&t)/t*255|0,c=a>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=o,this.data[u+3]=c}this.pos+=e}},Qt.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/t*255|0,u=i*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=e}},Qt.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Qt.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=o}},Qt.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var a=new Qt(t,!1),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(Pe.API),$t.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var a=new $t(t,!1),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(Pe.API),Pe.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var u=r[c],h=r[c+1],d=r[c+2],f=r[c+3];a[s++]=u,a[s++]=h,a[s++]=d,o[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Pe.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zt=Pe.API,Wt=zt.getCharWidthsArray=function(e,t){var n,i,a=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,h=u.fof?u.fof:1,d=!1!==t.doKerning,f=0,p=e.length,m=0,g=l[0]||c,v=[];for(n=0;n<p;n++)i=e.charCodeAt(n),"function"==typeof a.metadata.widthOfString?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+s*(1e3/o)||0)/1e3):(f=d&&"object"===(0,r.A)(u[i])&&!isNaN(parseInt(u[i][m],10))?u[i][m]/h:0,v.push((l[i]||g)/c+f)),m=i;return v},Vt=zt.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return zt.processArabic&&(e=zt.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,i)/n:Wt.apply(this,arguments).reduce(function(e,t){return e+t},0)},Ht=function(e,t,n,r){for(var i=[],a=0,o=e.length,s=0;a!==o&&s+t[a]<n;)s+=t[a],a++;i.push(e.slice(0,a));var l=a;for(s=0;a!==o;)s+t[a]>r&&(i.push(e.slice(l,a)),s=0,l=a),s+=t[a],a++;return l!==a&&i.push(e.slice(l,a)),i},qt=function(e,t,n){n||(n={});var r,i,a,o,s,l,c,u=[],h=[u],d=n.textIndent||0,f=0,p=0,m=e.split(" "),g=Wt.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?m[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),y=[];m.map(function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):y.push(e[0])}),m=y,l=Vt.apply(this,[v,n])}for(a=0,o=m.length;a<o;a++){var b=0;if(r=m[a],l&&"\n"==r[0]&&(r=r.substr(1),b=1),d+f+(p=(i=Wt.apply(this,[r,n])).reduce(function(e,t){return e+t},0))>t||b){if(p>t){for(s=Ht.apply(this,[r,i,t-(d+f),t]),u.push(s.shift()),u=[s.pop()];s.length;)h.push([s.shift()]);p=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(e,t){return e+t},0)}else u=[r];h.push(u),d=p+l,f=g}else u.push(r),d+=f+p,f=g}return c=l?function(e,t){return(t?v:"")+e.join(" ")}:function(e){return e.join(" ")},h.map(c)},zt.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=r.length;s<l;s++)c=c.concat(qt.apply(this,[r[s],o,a]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[t[a]]="0123456789abcdef"[a],i["0123456789abcdef"[a]]=t[a];var o=function(e){return"0x"+parseInt(e,10).toString(16)},s=e.__fontmetrics__.compress=function(e){var t,n,a,l,c=["{"];for(var u in e){if(t=e[u],isNaN(parseInt(u,10))?n="'"+u+"'":(u=parseInt(u,10),n=(n=o(u).slice(2)).slice(0,-1)+i[n.slice(-1)]),"number"==typeof t)t<0?(a=o(t).slice(3),l="-"):(a=o(t).slice(2),l=""),a=l+a.slice(0,-1)+i[a.slice(-1)];else{if("object"!==(0,r.A)(t))throw new Error("Don't know what to do with value type "+(0,r.A)(t)+".");a=s(t)}c.push(n+a)}return c.push("}"),c.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,i,a,o={},s=1,l=o,c=[],u="",h="",d=e.length-1,f=1;f<d;f+=1)"'"==(a=e[f])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(a):"{"==a?(c.push([l,i]),l={},i=void 0):"}"==a?((r=c.pop())[0][r[1]]=l,i=void 0,l=r[0]):"-"==a?s=-1:void 0===i?n.hasOwnProperty(a)?(u+=n[a],i=parseInt(u,16)*s,s=1,u=""):u+=a:n.hasOwnProperty(a)?(h+=n[a],l[i]=parseInt(h,16)*s,s=1,i=void 0,h=""):h+=a;return o},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},h={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=h.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=u.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(Pe.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(void 0===a)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===a.existsFileInVFS(i.postScriptName)?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(oe(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(Pe),function(){function e(){return(ee.canvg?Promise.resolve(ee.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Pe.API.addSvgAsImage=function(t,n,r,i,a,o,s,l){if(isNaN(n)||isNaN(r))throw ne.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw ne.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then(function(e){return e.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(h)}).then(function(){d.addImage(c.toDataURL("image/jpeg",1),n,r,i,a,s,l)})}}(),Pe.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Pe.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,a,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),c=[],u=0,h=0,d=0;function f(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=l.length;for(d=0;d<p;d+=1)n[l[d]].value=n[l[d]].defaultValue,n[l[d]].explicitSet=!1}if("object"===(0,r.A)(e))for(a in e)if(o=e[a],f(l,a)&&void 0!==o){if("boolean"===n[a].type&&"boolean"==typeof o)n[a].value=o;else if("name"===n[a].type&&f(n[a].valueSet,o))n[a].value=o;else if("integer"===n[a].type&&Number.isInteger(o))n[a].value=o;else if("array"===n[a].type){for(u=0;u<o.length;u+=1)if(i=!0,1===o[u].length&&"number"==typeof o[u][0])c.push(String(o[u]-1));else if(o[u].length>1){for(h=0;h<o[u].length;h+=1)"number"!=typeof o[u][h]&&(i=!1);!0===i&&c.push([o[u][0]-1,o[u][1]-1].join(" "))}n[a].value="["+c.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),a=unescape(encodeURIComponent("</x:xmpmeta>")),o=n.length+r.length+i.length+t.length+a.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+o+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+i+a),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Pe.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,i=["","0","00","000","0000"],a=[""],o=0,s=e.length;o<s;++o){if(n=t.metadata.characterToGlyph(e.charCodeAt(o)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(o),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return a.join("");n=n.toString(16),a.push(i[4-n.length],n)}return a.join("")},r=function(e){var t,n,r,i,a,o,s;for(a="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],o=0,s=(n=Object.keys(e).sort(function(e,t){return e-t})).length;o<s;o++)t=n[o],r.length>=100&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+i+">"));return r.length&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),a+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,a=t.newObject,o=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var h=a();o({data:c,addLength1:!0,objectId:h}),i("endobj");var d=a();o({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),i("endobj");var f=a();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+Ne(n.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var p=a();i("<<"),i("/Type /Font"),i("/BaseFont /"+Ne(n.fontName)),i("/FontDescriptor "+f+" 0 R"),i("/W "+e.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=a(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+d+" 0 R"),i("/BaseFont /"+Ne(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+p+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,a=t.newObject,o=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,l="",c=0;c<s.length;c++)l+=String.fromCharCode(s[c]);var u=a();o({data:l,addLength1:!0,objectId:u}),i("endobj");var h=a();o({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var d=a();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+u+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+Ne(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=a();for(var f=0;f<n.metadata.hmtx.widths.length;f++)n.metadata.hmtx.widths[f]=parseInt(n.metadata.hmtx.widths[f]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+Ne(n.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,r=e.text||"",i=e.x,a=e.y,o=e.options||{},s=e.mutex||{},l=s.pdfEscape,c=s.activeFontKey,u=s.fonts,h=c,d="",f=0,p="",m=u[h].encoding;if("Identity-H"!==u[h].encoding)return{text:r,x:i,y:a,options:o,mutex:s};for(p=r,h=c,Array.isArray(r)&&(p=r[0]),f=0;f<p.length;f+=1)u[h].metadata.hasOwnProperty("cmap")&&(t=u[h].metadata.cmap.unicode.codeMap[p[f].charCodeAt(0)]),t||p[f].charCodeAt(0)<256&&u[h].metadata.hasOwnProperty("Unicode")?d+=p[f]:d+="";var g="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===m?g=l(d,h).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===m&&(g=n(d,u[h])),s.isHex=!0,{text:g,x:i,y:a,options:o,mutex:s}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var a=0;for(a=0;a<t.length;a+=1)Array.isArray(t[a])&&3===t[a].length?n.push([i(Object.assign({},r,{text:t[a][0]})).text,t[a][1],t[a][2]]):n.push(i(Object.assign({},r,{text:t[a]})).text);e.text=n}else e.text=i(Object.assign({},r,{text:t})).text}])}(Pe),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Pe.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,i,a,o,s,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),n=t>>8,r=f[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":m.test(n)?"L":8===n?"R":"N"},b=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=y(e.charAt(n))))return!1;if("R"===t)return!0}return!1},x=function(e,t,o,s){var l,c,u,h,d=t[s];switch(d){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(d="AN");break;case"AL":g=!0,d="R";break;case"WS":case"BN":d="N";break;case"CS":s<1||s+1>=t.length||"EN"!==(l=o[s-1])&&"AN"!==l||"EN"!==(c=t[s+1])&&"AN"!==c?d="N":g&&(c="AN"),d=c===l?c:"N";break;case"ES":d="EN"===(l=s>0?o[s-1]:"B")&&s+1<t.length&&"EN"===t[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===o[s-1]){d="EN";break}if(g){d="N";break}for(u=s+1,h=t.length;u<h&&"ET"===t[u];)u++;d=u<h&&"EN"===t[u]?"EN":"N";break;case"NSM":if(i&&!a){for(h=t.length,u=s+1;u<h&&"NSM"===t[u];)u++;if(u<h){var f=e[s],p=f>=1425&&f<=2303||64286===f;if(l=t[u],p&&("R"===l||"AL"===l)){d="R";break}}}d=s<1||"B"===(l=t[s-1])?"N":o[s-1];break;case"B":g=!1,n=!0,d=v;break;case"S":r=!0,d="N"}return d},w=function(e,t,n){var r=e.split("");return n&&S(r,n,{hiLevel:v}),r.reverse(),t&&t.reverse(),r.join("")},S=function(e,t,i){var a,o,s,l,c,f=-1,p=e.length,m=0,b=[],w=v?h:u,S=[];for(g=!1,n=!1,r=!1,o=0;o<p;o++)S[o]=y(e[o]);for(s=0;s<p;s++){if(c=m,b[s]=x(e,S,b,s),a=240&(m=w[c][d[b[s]]]),m&=15,t[s]=l=w[m][5],a>0)if(16===a){for(o=f;o<s;o++)t[o]=1;f=-1}else f=-1;if(w[m][6])-1===f&&(f=s);else if(f>-1){for(o=f;o<s;o++)t[o]=l;f=-1}"B"===S[s]&&(t[s]=0),i.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=v;for(var i=r-1;i>=0&&"WS"===e[i];i--)t[i]=v}}(S,t,p)},_=function(e,t,r,i,a){if(!(a.hiLevel<e)){if(1===e&&1===v&&!n)return t.reverse(),void(r&&r.reverse());for(var o,s,l,c,u=t.length,h=0;h<u;){if(i[h]>=e){for(l=h+1;l<u&&i[l]>=e;)l++;for(c=h,s=l-1;c<s;c++,s--)o=t[c],t[c]=t[s],t[s]=o,r&&(o=r[c],r[c]=r[s],r[s]=o);h=l}h++}}},E=function(e,t,n){var r=e.split(""),i={hiLevel:v};return n||(n=[]),S(r,n,i),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<e.length;i++)1===t[i]&&(r=p.indexOf(e[i]))>=0&&(e[i]=p[r+1])}(r,n,i),_(2,r,t,n,i),_(1,r,t,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===a&&(a=b(e)),void 0===s&&(s=b(e))}(e,t),i||!o||s)if(i&&o&&a^s)v=a?1:0,e=w(e,t,n);else if(!i&&o&&s)v=a?1:0,e=E(e,t,n),e=w(e,t);else if(!i||a||o||s){if(i&&!o&&a^s)e=w(e,t),a?(v=0,e=E(e,t,n)):(v=1,e=E(e,t,n),e=w(e,t));else if(i&&a&&!o&&s)v=1,e=E(e,t,n),e=w(e,t);else if(!i&&!o&&a^s){var r=l;a?(v=1,e=E(e,t,n),v=0,l=!1,e=E(e,t,n),l=r):(v=0,e=E(e,t,n),e=w(e,t),v=1,l=!1,e=E(e,t,n),l=r,e=w(e,t))}}else v=0,e=E(e,t,n);else v=a?1:0,e=E(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,o=e.isOutputVisual,a=e.isInputRtl,s=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,r=(e.x,e.y,e.options||{}),i=(e.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var a=0;for(i=[],a=0;a<t.length;a+=1)"[object Array]"===Object.prototype.toString.call(t[a])?i.push([n.doBidiReorder(t[a][0]),t[a][1],t[a][2]]):i.push([n.doBidiReorder(t[a])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Pe),Pe.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Zt(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new bn(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new en(this.contents),this.head=new rn(this),this.name=new hn(this),this.cmap=new on(this),this.toUnicode={},this.hhea=new sn(this),this.maxp=new dn(this),this.hmtx=new fn(this),this.post=new cn(this),this.os2=new ln(this),this.loca=new yn(this),this.glyf=new mn(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,i;for(i=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)r=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return a*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Jt,Zt=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,i,a,o,s;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^s)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*i+65536*a+256*o+s},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),en=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,i,a,o,s,l,c,u,h,d,f,p;for(p in d=Object.keys(t).length,s=Math.log(2),u=16*Math.floor(Math.log(d)/s),a=Math.floor(u/s),c=16*d-u,(r=new Zt).writeInt(this.scalarType),r.writeShort(d),r.writeShort(u),r.writeShort(a),r.writeShort(c),i=16*d,l=r.pos+i,o=null,f=[],t)for(h=t[p],r.writeString(p),r.writeInt(e(h)),r.writeInt(l),r.writeInt(h.length),f=f.concat(h),"head"===p&&(o=l),l+=h.length;l%4;)f.push(0),l++;return r.write(f),n=2981146554-e(r.data),r.pos=o+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,i;for(e=pn.call(e);e.length%4;)e.push(0);for(r=new Zt(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),tn={}.hasOwnProperty,nn=function(e,t){for(var n in t)tn.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Jt=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var rn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new Zt).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),an=function(){function e(e,t){var n,r,i,a,o,s,l,c,u,h,d,f,p,m,g,v,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=e.readByte();break;case 4:for(d=e.readUInt16(),h=d/2,e.pos+=6,i=function(){var t,n;for(n=[],s=t=0;0<=h?t<h:t>h;s=0<=h?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],s=t=0;0<=h?t<h:t>h;s=0<=h?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],s=t=0;0<=h?t<h:t>h;s=0<=h?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],s=t=0;0<=h?t<h:t>h;s=0<=h?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,o=function(){var t,n;for(n=[],s=t=0;0<=r?t<r:t>r;s=0<=r?++t:--t)n.push(e.readUInt16());return n}(),s=g=0,y=i.length;g<y;s=++g)for(m=i[s],n=v=f=p[s];f<=m?v<=m:v>=m;n=f<=m?++v:--v)0===c[s]?a=n+l[s]:0!==(a=o[c[s]/2+(n-f)-(h-s)]||0)&&(a+=l[s]),this.codeMap[n]=65535&a}e.pos=u}return e.encode=function(e,t){var n,r,i,a,o,s,l,c,u,h,d,f,p,m,g,v,y,b,x,w,S,_,E,C,k,N,A,T,I,D,R,P,j,L,O,M,F,B,U,z,W,V,H,q,G,K;switch(T=new Zt,a=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,m=function(){var e=[];for(f=0;f<256;++f)e.push(0);return e}(),v={0:0},i={},I=0,j=a.length;I<j;I++)null==v[H=e[r=a[I]]]&&(v[H]=++p),i[r]={old:e[r],new:v[e[r]]},m[r]=v[e[r]];return T.writeUInt16(1),T.writeUInt16(0),T.writeUInt32(12),T.writeUInt16(0),T.writeUInt16(262),T.writeUInt16(0),T.write(m),{charMap:i,subtable:T.data,maxGlyphID:p+1};case"unicode":for(N=[],u=[],y=0,v={},n={},g=l=null,D=0,L=a.length;D<L;D++)null==v[x=e[r=a[D]]]&&(v[x]=++y),n[r]={old:x,new:v[x]},o=v[x]-r,null!=g&&o===l||(g&&u.push(g),N.push(r),l=o),g=r;for(g&&u.push(g),u.push(65535),N.push(65535),C=2*(E=N.length),_=2*Math.pow(Math.log(E)/Math.LN2,2),h=Math.log(_/2)/Math.LN2,S=2*E-_,s=[],w=[],d=[],f=R=0,O=N.length;R<O;f=++R){if(k=N[f],c=u[f],65535===k){s.push(0),w.push(0);break}if(k-(A=n[k].new)>=32768)for(s.push(0),w.push(2*(d.length+E-f)),r=P=k;k<=c?P<=c:P>=c;r=k<=c?++P:--P)d.push(n[r].new);else s.push(A-k),w.push(0)}for(T.writeUInt16(3),T.writeUInt16(1),T.writeUInt32(12),T.writeUInt16(4),T.writeUInt16(16+8*E+2*d.length),T.writeUInt16(0),T.writeUInt16(C),T.writeUInt16(_),T.writeUInt16(h),T.writeUInt16(S),W=0,M=u.length;W<M;W++)r=u[W],T.writeUInt16(r);for(T.writeUInt16(0),V=0,F=N.length;V<F;V++)r=N[V],T.writeUInt16(r);for(q=0,B=s.length;q<B;q++)o=s[q],T.writeUInt16(o);for(G=0,U=w.length;G<U;G++)b=w[G],T.writeUInt16(b);for(K=0,z=d.length;K<z;K++)p=d[K],T.writeUInt16(p);return{charMap:n,subtable:T.data,maxGlyphID:y+1}}},e}(),on=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new an(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=an.encode(e,t),(r=new Zt).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),sn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),ln=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),cn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),un=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},hn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,i,a,o,s,l,c,u,h;for(e.pos=this.offset,e.readShort(),t=e.readShort(),o=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(s={},i=c=0,u=n.length;c<u;i=++c)r=n[i],e.pos=r.offset,l=e.readString(r.length),a=new un(l,r),null==s[h=r.nameID]&&(s[h]=[]),s[r.nameID].push(a);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),dn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),fn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,i,a,o,s;for(e.pos=this.offset,this.metrics=[],t=0,o=this.file.hhea.numberOfMetrics;0<=o?t<o:t>o;t=0<=o?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],s=[],t=a=0;0<=r?a<r:a>r;t=0<=r?++a:--a)s.push(this.widths.push(n));return s},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),pn=[].slice,mn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,i,a,o,s,l,c,u;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(r=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,a=(o=new Zt(t.read(r))).readShort(),l=o.readShort(),u=o.readShort(),s=o.readShort(),c=o.readShort(),this.cache[e]=-1===a?new vn(o,l,u,s,c):new gn(o,a,l,u,s,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,i,a,o,s;for(a=[],i=[],o=0,s=t.length;o<s;o++)r=e[t[o]],i.push(a.length),r&&(a=a.concat(r.encode(n)));return i.push(a.length),{table:a,offsets:i}},e}(),gn=function(){function e(e,t,n,r,i,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),vn=function(){function e(e,t,n,r,i){var a,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new Zt(pn.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),yn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,a=0;a<n.length;++a)if(n[a]=r,i<t.length&&t[i]==a){++i,n[a]=r;var o=this.offsets[a],s=this.offsets[a+1]-o;s>0&&(r+=s)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),bn=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,i,a,o,s;for(r={},a=0,o=e.length;a<o;a++)r[i=e[a]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(null!=(n=r[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in s=this.glyphsFor(t))n=s[i],r[i]=n;return r},e.prototype.encode=function(e,t){var n,r,i,a,o,s,l,c,u,h,d,f,p,m,g;for(r in n=on.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),d={0:0},g=n.charMap)d[(s=g[r]).old]=s.new;for(f in h=n.maxGlyphID,a)f in d||(d[f]=h++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(d),u=Object.keys(c).sort(function(e,t){return e-t}),p=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)o=u[e],n.push(c[o]);return n}(),i=this.font.glyf.encode(a,p,d),l=this.font.loca.encode(i.offsets,p),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();Pe.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,i,a,o;if(Array.isArray(n))return"["+function(){var e,i,a;for(a=[],e=0,i=n.length;e<i;e++)r=n[e],a.push(t.convert(r));return a}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in a=["<<"],n)o=n[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join("\n")}return""+n},t}();const xn=Pe},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8082:()=>{},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8853:(e,t,n)=>{"use strict";e.exports=n(7234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(a,o),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{213:"b83e01ad",239:"e20e3777",455:"36f7b110"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="seed-it:";n.l=(r,i,a,o)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,a,[o,s,l]=r,c=0;if(o.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkseed_it=self.webpackChunkseed_it||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(5043),r=n.t(t,2),i=n(4391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const o="popstate";function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(VD){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(t,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:d=!1}=i,f=l.history,p=e.Pop,m=null,g=v();function v(){return(f.state||{idx:null}).idx}function y(){p=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:p,location:x.location,delta:n})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),s(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(a({},f.state,{idx:g}),""));let x={get action(){return p},get location(){return t(l,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(o,y),m=e,()=>{l.removeEventListener(o,y),m=null}},createHref:e=>n(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=u(x.location,t,n);r&&r(i,t),g=v()+1;let a=c(i,g),o=x.createHref(i);try{f.pushState(a,"",o)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;l.location.assign(o)}d&&m&&m({action:p,location:x.location,delta:1})},replace:function(t,n){p=e.Replace;let i=u(x.location,t,n);r&&r(i,t),g=v();let a=c(i,g),o=x.createHref(i);f.replaceState(a,"",o),d&&m&&m({action:p,location:x.location,delta:0})},go:e=>f.go(e)};return x}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let i=I(("string"===typeof t?d(t):t).pathname||"/",n);if(null==i)return null;let a=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let s=0;null==o&&s<a.length;++s){let e=T(i);o=N(a[s],e,r)}return o}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(s(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let l=F([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:k(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)}),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let o=y(r.join("/")),s=[];return s.push(...o.map(e=>""===e?a:[a,e].join("/"))),i&&s.push(...o),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,x=3,w=2,S=1,_=10,E=-2,C=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=E),t&&(r+=w),n.filter(e=>!C(e)).reduce((e,t)=>e+(b.test(t)?x:""===t?S:_),r)}function N(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},a="/",o=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:F([a,u.pathname]),pathnameBase:B(F([a,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(a=F([a,u.pathnameBase]))}return o}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1),c=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:c,pathname:a,pathnameBase:o,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const D=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function R(e,t){void 0===t&&(t="/");let n,{pathname:r,search:i="",hash:a=""}="string"===typeof e?d(e):e;if(r)if(o=r,D.test(o))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),l(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?P(r.substring(1),"/"):P(r,t)}else n=t;var o;return{pathname:n,search:U(i),hash:z(a)}}function P(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function j(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=d(e):(i=a({},e),s(!i.pathname||!i.pathname.includes("?"),j("?","pathname","search",i)),s(!i.pathname||!i.pathname.includes("#"),j("#","pathname","hash",i)),s(!i.search||!i.search.includes("#"),j("#","search","hash",i)));let o,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)o=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=R(i,o),h=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!f||(u.pathname+="/"),u}const F=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],H=(new Set(V),["get",...V]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const G=t.createContext(null);const K=t.createContext(null);const Y=t.createContext(null);const X=t.createContext(null);const Q=t.createContext({outlet:null,matches:[],isDataRoute:!1});const J=t.createContext(null);function Z(){return null!=t.useContext(X)}function ee(){return Z()||s(!1),t.useContext(X).location}function te(e){t.useContext(Y).static||t.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=t.useContext(Q);return e?function(){let{router:e}=de(ue.UseNavigateStable),n=pe(he.UseNavigateStable),r=t.useRef(!1);te(()=>{r.current=!0});let i=t.useCallback(function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,q({fromRouteId:n},i)))},[e,n]);return i}():function(){Z()||s(!1);let e=t.useContext(G),{basename:n,future:r,navigator:i}=t.useContext(Y),{matches:a}=t.useContext(Q),{pathname:o}=ee(),l=JSON.stringify(O(a,r.v7_relativeSplatPath)),c=t.useRef(!1);te(()=>{c.current=!0});let u=t.useCallback(function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let a=M(t,JSON.parse(l),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:F([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)},[n,i,l,o,e]);return u}()}function re(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(Y),{matches:a}=t.useContext(Q),{pathname:o}=ee(),s=JSON.stringify(O(a,i.v7_relativeSplatPath));return t.useMemo(()=>M(e,JSON.parse(s),o,"path"===r),[e,s,o,r])}function ie(n,r,i,a){Z()||s(!1);let{navigator:o}=t.useContext(Y),{matches:l}=t.useContext(Q),c=l[l.length-1],u=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,p=ee();if(r){var g;let e="string"===typeof r?d(r):r;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||s(!1),f=e}else f=p;let v=f.pathname||"/",y=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=m(n,{pathname:y});let x=ce(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,i,a);return r&&x?t.createElement(X.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},x):x}function ae(){let e=function(){var e;let n=t.useContext(J),r=fe(he.UseRouteError),i=pe(he.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}const oe=t.createElement(ae,null);class se extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Q.Provider,{value:this.props.routeContext},t.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:n,match:r,children:i}=e,a=t.useContext(G);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Q.Provider,{value:n},i)}function ce(e,n,r,i){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(o=i)&&o.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(a=r)?void 0:a.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||s(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,l=h>=0?l.slice(0,h+1):[l[0]];break}}}return l.reduceRight((e,i,a)=>{let o,s=!1,d=null,f=null;var p;r&&(o=c&&i.route.id?c[i.route.id]:void 0,d=i.route.errorElement||oe,u&&(h<0&&0===a?(p="route-fallback",!1||me[p]||(me[p]=!0),s=!0,f=null):h===a&&(s=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(l.slice(0,a+1)),g=()=>{let n;return n=o?d:s?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(le,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(se,{location:r.location,revalidation:r.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function de(e){let n=t.useContext(G);return n||s(!1),n}function fe(e){let n=t.useContext(K);return n||s(!1),n}function pe(e){let n=function(){let e=t.useContext(Q);return e||s(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||s(!1),r.route.id}const me={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ve(e){let{to:n,replace:r,state:i,relative:a}=e;Z()||s(!1);let{future:o,static:l}=t.useContext(Y),{matches:c}=t.useContext(Q),{pathname:u}=ee(),h=ne(),d=M(n,O(c,o.v7_relativeSplatPath),u,"path"===a),f=JSON.stringify(d);return t.useEffect(()=>h(JSON.parse(f),{replace:r,state:i,relative:a}),[h,f,a,r,i]),null}function ye(e){s(!1)}function be(n){let{basename:r="/",children:i=null,location:a,navigationType:o=e.Pop,navigator:l,static:c=!1,future:u}=n;Z()&&s(!1);let h=r.replace(/^\/*/,"/"),f=t.useMemo(()=>({basename:h,navigator:l,static:c,future:q({v7_relativeSplatPath:!1},u)}),[h,u,l,c]);"string"===typeof a&&(a=d(a));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=a,b=t.useMemo(()=>{let e=I(p,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:o}},[h,p,m,g,v,y,o]);return null==b?null:t.createElement(Y.Provider,{value:f},t.createElement(X.Provider,{children:i,value:b}))}function xe(e){let{children:t,location:n}=e;return ie(we(t),n)}new Promise(()=>{});t.Component;function we(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let a=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,we(e.props.children,a));e.type!==ye&&s(!1),e.props.index&&e.props.children&&s(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=we(e.props.children,a)),r.push(o)}),r}var Se=n(7950),_e=n.t(Se,2);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function Ce(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(VD){}new Map;const Ne=r.startTransition;_e.flushSync,r.useId;function Ae(e){let{basename:n,children:r,future:i,window:a}=e,o=t.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),f(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,e)}({window:a,v5Compat:!0}));let s=o.current,[l,c]=t.useState({action:s.action,location:s.location}),{v7_startTransition:d}=i||{},p=t.useCallback(e=>{d&&Ne?Ne(()=>c(e)):c(e)},[c,d]);return t.useLayoutEffect(()=>s.listen(p),[s,p]),t.useEffect(()=>ge(i),[i]),t.createElement(be,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:s,future:i})}const Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=t.forwardRef(function(e,n){let r,{onClick:i,relative:a,reloadDocument:o,replace:l,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,m=Ce(e,ke),{basename:g}=t.useContext(Y),v=!1;if("string"===typeof d&&Ie.test(d)&&(r=d,Te))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=I(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch(VD){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Z()||s(!1);let{basename:i,navigator:a}=t.useContext(Y),{hash:o,pathname:l,search:c}=re(e,{relative:r}),u=l;return"/"!==i&&(u="/"===l?i:F([i,l])),a.createHref({pathname:u,search:c,hash:o})}(d,{relative:a}),b=function(e,n){let{target:r,replace:i,state:a,preventScrollReset:o,relative:s,viewTransition:l}=void 0===n?{}:n,c=ne(),u=ee(),d=re(e,{relative:s});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:h(u)===h(d);c(e,{replace:n,state:a,preventScrollReset:o,relative:s,viewTransition:l})}},[u,c,d,i,a,r,e,o,s,l])}(d,{replace:l,state:c,target:u,preventScrollReset:f,relative:a,viewTransition:p});return t.createElement("a",Ee({},m,{href:r||y,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:u}))});var Re,Pe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Re||(Re={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Pe||(Pe={}));function je(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Le=function e(t,n){function r(e,r,i){if("undefined"!==typeof document){"number"===typeof(i=je({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in i)i[o]&&(a+="; "+o,!0!==i[o]&&(a+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+a}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var a=n[i].split("="),o=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(r[s]=t.read(o,s),e===s)break}catch(VD){}}return e?r[e]:r}},remove:function(e,t){r(e,"",je({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,je({},this.attributes,t))},withConverter:function(t){return e(je({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Oe=n(4980);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach(function(t){(0,Oe.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Be=n(579);const Ue=function(){const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(null),[s,l]=(0,t.useState)({});return(0,Be.jsxs)("div",{className:"homepage-container",children:[(0,Be.jsxs)("header",{className:"homepage-header",children:[(0,Be.jsx)("div",{className:"logo-container",children:(0,Be.jsx)("img",{src:"/SEED_Logo.png",alt:"SEED-IT Logo",className:"logo"})}),(0,Be.jsxs)("button",{className:"mobile-menu-btn",onClick:()=>n(!e),"aria-label":"Toggle menu",children:[(0,Be.jsx)("span",{}),(0,Be.jsx)("span",{}),(0,Be.jsx)("span",{})]}),(0,Be.jsxs)("nav",{className:"homepage-nav ".concat(e?"active":""),children:[(0,Be.jsx)("a",{href:"#about",className:"nav-link",onClick:e=>{e.preventDefault(),n(!1),document.getElementById("about").scrollIntoView({behavior:"smooth"})},children:"About"}),(0,Be.jsx)("a",{href:"#courses",className:"nav-link",onClick:e=>{e.preventDefault(),n(!1),document.querySelector(".seed-courses-section").scrollIntoView({behavior:"smooth"})},children:"Courses"}),(0,Be.jsx)("a",{href:"#testimonials",className:"nav-link",onClick:e=>{e.preventDefault(),n(!1),document.getElementById("testimonials").scrollIntoView({behavior:"smooth"})},children:"Success Stories"}),(0,Be.jsx)("a",{href:"#schedule",className:"nav-link",onClick:e=>{e.preventDefault(),n(!1),document.getElementById("schedule").scrollIntoView({behavior:"smooth"})},children:"Schedule"}),(0,Be.jsx)("a",{href:"#news",className:"nav-link",onClick:e=>{e.preventDefault(),n(!1),document.getElementById("news").scrollIntoView({behavior:"smooth"})},children:"News"}),(0,Be.jsx)("a",{href:"#contact",className:"nav-link",onClick:e=>{e.preventDefault(),n(!1),document.querySelector(".homepage-footer").scrollIntoView({behavior:"smooth"})},children:"Contact"}),(0,Be.jsx)(De,{to:"/login",className:"nav-link header-btn header-btn-primary",onClick:()=>n(!1),children:"Login Now"}),(0,Be.jsx)(De,{to:"/register",className:"nav-link header-btn header-btn-outline",onClick:()=>n(!1),children:"Register"})]})]}),e&&(0,Be.jsx)("div",{className:"mobile-menu-overlay",onClick:()=>n(!1)}),(0,Be.jsx)("section",{className:"seed-banner-section","data-rocket-lazy-bg-b4df35fb-36d2-43b0-bcfb-7da6d9b2415c":"excluded",children:(0,Be.jsx)("div",{className:"seed-container-fluid",children:(0,Be.jsxs)("div",{className:"seed-row",children:[(0,Be.jsx)("div",{className:"seed-col-left",children:(0,Be.jsxs)("div",{className:"seed-banner-content",children:[(0,Be.jsx)("p",{children:"Get trained by Industry Experts via"}),(0,Be.jsx)("h2",{children:"Instructor-led Live Online or Classroom Training"}),(0,Be.jsx)("h2",{children:"Student and Staff Login"}),(0,Be.jsx)("p",{children:"Access your personalized dashboard and learning resources:"}),(0,Be.jsxs)("div",{className:"seed-btn-section",children:[(0,Be.jsx)(De,{to:"/login",className:"seed-orange-btn",children:"Login Now"}),(0,Be.jsx)(De,{to:"/register",className:"seed-outline-btn",children:"Register"})]})]})}),(0,Be.jsx)("div",{className:"seed-col-right",children:(0,Be.jsx)("div",{className:"seed-banner-image",children:(0,Be.jsx)("img",{src:"https://raw.githubusercontent.com/seeditDev/SEED-Website/316d3a1cd2ccf88284d13a46429758acd77ea06f/Plugins/main-banner-seed-it.webp",alt:"SEED IT",width:"100%",height:"100%"})})})]})})}),(0,Be.jsx)("section",{className:"seed-stats-section",id:"about",children:(0,Be.jsxs)("div",{className:"seed-stats-container",children:[(0,Be.jsx)("div",{className:"seed-stats-details",children:(0,Be.jsxs)("div",{className:"seed-stats-row",children:[(0,Be.jsx)("div",{className:"seed-stats-col",children:(0,Be.jsxs)("div",{className:"seed-stats-icon-box",children:[(0,Be.jsx)("div",{className:"seed-stats-icon",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/bj0CNNWc/students-icon.webp",alt:"SEED IT Students",width:"100%",height:"100%"})}),(0,Be.jsxs)("div",{className:"seed-stats-content",children:[(0,Be.jsx)("h2",{children:"8000+"}),(0,Be.jsx)("p",{children:"Alumni"})]})]})}),(0,Be.jsx)("div",{className:"seed-stats-col",children:(0,Be.jsxs)("div",{className:"seed-stats-icon-box",children:[(0,Be.jsx)("div",{className:"seed-stats-icon",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/99r1TBHy/course-icon.webp",alt:"SEED IT Courses",width:"100%",height:"100%"})}),(0,Be.jsxs)("div",{className:"seed-stats-content",children:[(0,Be.jsx)("h2",{children:"40+"}),(0,Be.jsx)("p",{children:"Courses"})]})]})}),(0,Be.jsx)("div",{className:"seed-stats-col",children:(0,Be.jsxs)("div",{className:"seed-stats-icon-box",children:[(0,Be.jsx)("div",{className:"seed-stats-icon",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/gLKwL4mb/trainers-icon.webp",alt:"SEED IT Trainers",width:"100%",height:"100%"})}),(0,Be.jsxs)("div",{className:"seed-stats-content",children:[(0,Be.jsx)("h2",{children:"100+"}),(0,Be.jsx)("p",{children:"Expert IT Trainers"})]})]})})]})}),(0,Be.jsxs)("div",{className:"seed-about-content",children:[(0,Be.jsx)("h1",{children:"SEED Innovating Technologies and Educational Services (SEED-IT)"}),(0,Be.jsx)("p",{children:"SEED Innovating Technologies and Educational Services (SEED-IT) is a leading Training and Placement company managed by IT veterans with more than a decade of experience in leading MNC companies. We are spread across cities like Coimbatore, Tiruppur, Bangalore, Chennai, Hyderabad, Vizag and Kochi. We are known for our practical approach towards training that enables students to gain real-time exposure on competitive technologies. Training is offered by employees from MNCs to give real corporate exposure to the students."}),(0,Be.jsx)("h2",{children:"Why SEED IT is the Best Training Institute in Coimbatore?"}),(0,Be.jsxs)("ul",{className:"seed-features-list",children:[(0,Be.jsx)("li",{children:"Helped more than 50,000+ students and professionals to start & shift their Career into IT"}),(0,Be.jsx)("li",{children:"We enroll only 30-60 students per batch so that individual attention to each and every student is guaranteed"}),(0,Be.jsx)("li",{children:"We have placement tie-up with more than 300+ companies. Our Placement team works tirelessly to help you get your dream IT job!"}),(0,Be.jsx)("li",{children:"Trainers from leading IT companies to provide an in-depth and practical training with real-time projects"}),(0,Be.jsx)("li",{children:"Unlimited Lab Usage."})]})]})]})}),(0,Be.jsx)("section",{className:"seed-features-section",children:(0,Be.jsxs)("div",{className:"seed-features-container",children:[(0,Be.jsx)("h3",{children:"Features"}),(0,Be.jsxs)("div",{className:"seed-features-row",children:[(0,Be.jsx)("div",{className:"seed-feature-col",children:(0,Be.jsx)("div",{className:"seed-feature-box",children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)("h3",{children:"Real-Time Experts as Trainers"}),(0,Be.jsx)("p",{children:"At SEED IT, you will learn from industry experts eager to share their knowledge with learners. You will also get personally mentored by the Experts."})]})})}),(0,Be.jsx)("div",{className:"seed-feature-col",children:(0,Be.jsx)("div",{className:"seed-feature-box",children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)("h3",{children:"LIVE Project"}),(0,Be.jsx)("p",{children:"Get the opportunity to work on real-time projects that will provide you with deep experience. Showcase your project experience and increase your chances of getting hired!"})]})})}),(0,Be.jsx)("div",{className:"seed-feature-col",children:(0,Be.jsx)("div",{className:"seed-feature-box",children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)("h3",{children:"Certification"}),(0,Be.jsx)("p",{children:"SEED IT offers certification. Also, get ready to clear global certifications. 90% of SEED IT students appear for global certifications and 100% of them clear it."})]})})}),(0,Be.jsx)("div",{className:"seed-feature-col",children:(0,Be.jsx)("div",{className:"seed-feature-box",children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)("h3",{children:"Affordable Fees"}),(0,Be.jsx)("p",{children:"At SEED IT, the course fee is not only affordable, but you can also pay it in installments. Quality training at an affordable price is our motto."})]})})}),(0,Be.jsx)("div",{className:"seed-feature-col",children:(0,Be.jsx)("div",{className:"seed-feature-box",children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)("h3",{children:"Flexibility"}),(0,Be.jsx)("p",{children:"At SEED IT, you get the ultimate flexibility. Classroom or online training? Early morning or late evening? Weekday or weekend? Regular Pace or Fast Track? - Choose whatever suits you best."})]})})}),(0,Be.jsx)("div",{className:"seed-feature-col",children:(0,Be.jsx)("div",{className:"seed-feature-box",children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)("h3",{children:"Placement Support"}),(0,Be.jsx)("p",{children:"Tied-up & signed MOUs with over 300+ small & medium-sized companies to support you with opportunities to kick-start & advance your career."})]})})})]})]})}),(0,Be.jsx)("section",{className:"seed-accreditation-section",children:(0,Be.jsxs)("div",{className:"seed-accreditation-container",children:[(0,Be.jsx)("h3",{children:"Accreditations"}),(0,Be.jsx)("div",{className:"seed-accreditation-content",children:(0,Be.jsxs)("div",{className:"seed-accreditation-row",children:[(0,Be.jsx)("div",{className:"seed-accreditation-col",children:(0,Be.jsx)("div",{className:"seed-accreditation-img",children:(0,Be.jsx)("img",{width:"140",height:"96",src:"https://i.ibb.co/4wkDt1X9/iso-logo.webp",alt:"ISO Certification"})})}),(0,Be.jsx)("div",{className:"seed-accreditation-col",children:(0,Be.jsx)("div",{className:"seed-accreditation-img",children:(0,Be.jsx)("img",{width:"140",height:"96",src:"https://i.ibb.co/jsXzX3X/istqb.webp",alt:"ISTQB Certification"})})}),(0,Be.jsx)("div",{className:"seed-accreditation-col",children:(0,Be.jsx)("div",{className:"seed-accreditation-img",children:(0,Be.jsx)("img",{width:"140",height:"96",src:"https://i.ibb.co/8nHQNSqC/bc.webp",alt:"British Council Certification"})})}),(0,Be.jsx)("div",{className:"seed-accreditation-col",children:(0,Be.jsx)("div",{className:"seed-accreditation-img",children:(0,Be.jsx)("img",{width:"140",height:"96",src:"https://i.ibb.co/1JsXQNvy/microsoft-logo.webp",alt:"Microsoft Certification"})})})]})})]})}),(0,Be.jsx)("section",{className:"seed-companies-section",children:(0,Be.jsxs)("div",{className:"seed-companies-container",children:[(0,Be.jsx)("h3",{children:"Our Students Work at"}),(0,Be.jsxs)("div",{className:"seed-companies-grid",children:[(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/M5jMzPP2/tcs.png",alt:"TCS"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/fd86LyBc/infosys.png",alt:"Infosys"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/C54XbrpD/wipro.png",alt:"Wipro"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/C3bdWcY4/cognizant.png",alt:"Cognizant"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/ks32DXxc/accenture.png",alt:"Accenture"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/bRPgdrwq/hcl.png",alt:"HCL"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/4rF75sN/capgemini.png",alt:"Capgemini"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/PGXNxWj7/ibm.png",alt:"IBM"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/r2GL4Prx/deloitte.png",alt:"Deloitte"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/cSqhYGx4/oracle.png",alt:"Oracle"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/p65qWjmd/amazon.png",alt:"Amazon"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/B5jtb10j/microsoft.png",alt:"Microsoft"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/ycXbCfQY/google.png",alt:"Google"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/DgHvmYQ6/dell.png",alt:"Dell"})}),(0,Be.jsx)("div",{className:"seed-company-item",children:(0,Be.jsx)("img",{src:"https://i.ibb.co/DDMdHwwj/hp.png",alt:"HP"})})]})]})}),(0,Be.jsxs)("section",{className:"seed-courses-section",children:[(0,Be.jsxs)("div",{className:"seed-courses-container",children:[(0,Be.jsx)("h2",{children:"Popular Courses"}),(0,Be.jsx)("button",{className:"seed-nav-button seed-nav-prev",onClick:()=>{document.querySelector(".seed-courses-grid").scrollBy({left:-320,behavior:"smooth"})},children:"\u2039"}),(0,Be.jsx)("button",{className:"seed-nav-button seed-nav-next",onClick:()=>{document.querySelector(".seed-courses-grid").scrollBy({left:320,behavior:"smooth"})},children:"\u203a"}),(0,Be.jsxs)("div",{className:"seed-courses-grid",children:[(0,Be.jsxs)("div",{className:"seed-course-box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udd25 Data Structures & Algorithms"}),(0,Be.jsx)("p",{children:"Master DSA with hands-on problems."}),(0,Be.jsx)("button",{className:"seed-course-button",onClick:()=>{o({title:"Data Structures & Algorithms",description:"Master DSA with hands-on problems and real-world applications. Learn essential algorithms and data structures used in modern software development.",duration:"4 months",topics:["Arrays, Strings & Matrix Problems","Linked Lists & Dynamic Memory","Stacks, Queues & Hash Tables","Trees, BST & AVL Trees","Graphs & Graph Algorithms","Dynamic Programming & Greedy","Searching & Sorting Algorithms","Backtracking & Recursion","Time & Space Complexity Analysis","Interview Problem Solving"],prerequisites:"Basic programming knowledge in any language",price:"\u20b925,000"}),i(!0)},children:"View Course"})]}),(0,Be.jsxs)("div",{className:"seed-course-box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udcbb Full Stack Web Development"}),(0,Be.jsx)("p",{children:"Learn MERN stack from scratch."}),(0,Be.jsx)("button",{className:"seed-course-button",onClick:()=>{o({title:"Full Stack Web Development",description:"Comprehensive MERN stack development course covering frontend, backend, and database management.",duration:"6 months",topics:["HTML5, CSS3 & Modern Layouts","JavaScript ES6+ & DOM Manipulation","React.js & Redux State Management","Node.js & Express.js Backend","MongoDB & Mongoose ODM","RESTful API Development","JWT Authentication & Security","React Hooks & Custom Hooks","Responsive Design & Bootstrap","Git Version Control & Deployment"],prerequisites:"Basic computer knowledge",price:"\u20b935,000"}),i(!0)},children:"View Course"})]}),(0,Be.jsxs)("div",{className:"seed-course-box",children:[(0,Be.jsx)("h3",{children:"\ud83e\udd16 Machine Learning & AI"}),(0,Be.jsx)("p",{children:"Understand ML models and deep learning."}),(0,Be.jsx)("button",{className:"seed-course-button",onClick:()=>{o({title:"Machine Learning & AI",description:"Comprehensive course on Machine Learning algorithms, Deep Learning, and AI applications.",duration:"5 months",topics:["Python & NumPy for ML","Data Preprocessing & Pandas","Supervised Learning Algorithms","Unsupervised Learning & Clustering","Deep Neural Networks & PyTorch","Convolutional Neural Networks","Natural Language Processing","Computer Vision & OpenCV","Reinforcement Learning Basics","ML Model Deployment & MLOps"],prerequisites:"Python programming, Basic statistics",price:"\u20b940,000"}),i(!0)},children:"View Course"})]}),(0,Be.jsxs)("div",{className:"seed-course-box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udd22 SQL & Database Management"}),(0,Be.jsx)("p",{children:"Master SQL for data-driven applications."}),(0,Be.jsx)("button",{className:"seed-course-button",onClick:()=>{o({title:"SQL & Database Management",description:"Learn database design, SQL queries, and database management systems.",duration:"3 months",topics:["Database Design & Normalization","SQL Fundamentals & CRUD","Advanced Queries & Joins","Stored Procedures & Functions","Indexing & Query Optimization","Transaction Management & ACID","Database Security & Backup","NoSQL Databases Introduction","Data Warehousing Concepts","ETL Processes & Data Migration"],prerequisites:"None",price:"\u20b920,000"}),i(!0)},children:"View Course"})]}),(0,Be.jsxs)("div",{className:"seed-course-box",children:[(0,Be.jsx)("h3",{children:"\ud83c\udf10 DevOps & Cloud Computing"}),(0,Be.jsx)("p",{children:"Master modern DevOps practices and cloud platforms."}),(0,Be.jsx)("button",{className:"seed-course-button",onClick:()=>{o({title:"DevOps & Cloud Computing",description:"Comprehensive course covering DevOps practices, cloud platforms, and infrastructure automation.",duration:"5 months",topics:["Linux Administration & Shell Scripting","Docker & Container Orchestration","Kubernetes & Microservices","AWS Cloud Services & Architecture","Azure & Multi-cloud Strategy","CI/CD Pipeline Implementation","Infrastructure as Code (Terraform)","Monitoring & Logging (ELK Stack)","Cloud Security & Compliance","DevOps Best Practices & Tools"],prerequisites:"Basic understanding of operating systems",price:"\u20b945,000"}),i(!0)},children:"View Course"})]}),(0,Be.jsxs)("div",{className:"seed-course-box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udd12 Cybersecurity & Ethical Hacking"}),(0,Be.jsx)("p",{children:"Learn advanced security techniques and penetration testing."}),(0,Be.jsx)("button",{className:"seed-course-button",onClick:()=>{o({title:"Cybersecurity & Ethical Hacking",description:"Comprehensive cybersecurity course covering offensive and defensive security techniques.",duration:"6 months",topics:["Network Security Fundamentals","Web Application Security","Penetration Testing Methodology","Malware Analysis & Reverse Engineering","Cryptography & Encryption","Security Tools & Frameworks","Incident Response & Forensics","Cloud Security & DevSecOps","Mobile Application Security","Security Compliance & Standards"],prerequisites:"Basic networking knowledge",price:"\u20b950,000"}),i(!0)},children:"View Course"})]}),(0,Be.jsxs)("div",{className:"seed-course-box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udcf1 Mobile App Development"}),(0,Be.jsx)("p",{children:"Build cross-platform mobile applications."}),(0,Be.jsx)("button",{className:"seed-course-button",onClick:()=>{o({title:"Mobile App Development",description:"Learn to build professional mobile applications for iOS and Android platforms.",duration:"4 months",topics:["React Native Fundamentals","Native iOS Development (Swift)","Native Android Development (Kotlin)","Cross-platform Development","UI/UX Design Principles","State Management & Redux","API Integration & Networking","Mobile App Security","App Store Deployment","Performance Optimization"],prerequisites:"Basic JavaScript knowledge",price:"\u20b935,000"}),i(!0)},children:"View Course"})]}),(0,Be.jsxs)("div",{className:"seed-course-box",children:[(0,Be.jsx)("h3",{children:"\ud83c\udfae Game Development"}),(0,Be.jsx)("p",{children:"Create engaging games with modern engines."}),(0,Be.jsx)("button",{className:"seed-course-button",onClick:()=>{o({title:"Game Development",description:"Learn game development using Unity and Unreal Engine with industry-standard practices.",duration:"6 months",topics:["Unity Engine Fundamentals","C# Programming for Games","3D Modeling & Animation","Game Physics & Mechanics","Character & Level Design","Game UI/UX Design","Multiplayer Game Development","Game AI & Behavior Trees","Sound Design & Integration","Game Optimization & Publishing"],prerequisites:"Basic programming knowledge",price:"\u20b945,000"}),i(!0)},children:"View Course"})]})]})]}),r&&a&&(0,Be.jsx)("div",{className:"seed-modal-overlay",onClick:()=>i(!1),children:(0,Be.jsxs)("div",{className:"seed-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Be.jsx)("button",{className:"seed-modal-close",onClick:()=>i(!1),children:"\xd7"}),(0,Be.jsxs)("div",{className:"seed-modal-header",children:[(0,Be.jsx)("h2",{children:a.title}),(0,Be.jsx)("span",{className:"seed-modal-price",children:a.price})]}),(0,Be.jsxs)("div",{className:"seed-modal-body",children:[(0,Be.jsx)("p",{className:"seed-modal-description",children:a.description}),(0,Be.jsxs)("div",{className:"seed-modal-details",children:[(0,Be.jsxs)("div",{className:"seed-modal-detail-item",children:[(0,Be.jsx)("h4",{children:"Duration"}),(0,Be.jsx)("p",{children:a.duration})]}),(0,Be.jsxs)("div",{className:"seed-modal-detail-item",children:[(0,Be.jsx)("h4",{children:"Prerequisites"}),(0,Be.jsx)("p",{children:a.prerequisites})]})]}),(0,Be.jsxs)("div",{className:"seed-modal-topics",children:[(0,Be.jsx)("h4",{children:"What you'll learn"}),(0,Be.jsx)("ul",{children:a.topics.map((e,t)=>(0,Be.jsx)("li",{children:e},t))})]}),(0,Be.jsx)("button",{className:"seed-modal-enroll",children:"Enroll Now"})]})]})})]}),(0,Be.jsx)("section",{className:"seed-testimonials-section",id:"testimonials",children:(0,Be.jsxs)("div",{className:"seed-container",children:[(0,Be.jsx)("h2",{children:"Student Success Stories"}),(0,Be.jsxs)("div",{className:"seed-testimonials-grid",children:[(0,Be.jsx)("div",{className:"seed-testimonial-card",children:(0,Be.jsxs)("div",{className:"seed-testimonial-content",children:[(0,Be.jsx)("p",{children:'"The practical approach and industry-expert trainers helped me secure a position at TCS. Highly recommended!"'}),(0,Be.jsx)("h4",{children:"Priya S."}),(0,Be.jsx)("p",{className:"seed-designation",children:"Software Engineer at TCS"})]})}),(0,Be.jsx)("div",{className:"seed-testimonial-card",children:(0,Be.jsxs)("div",{className:"seed-testimonial-content",children:[(0,Be.jsx)("p",{children:'"SEED IT\'s Full Stack course was comprehensive and up-to-date with industry standards. Got placed in Infosys!"'}),(0,Be.jsx)("h4",{children:"Rahul M."}),(0,Be.jsx)("p",{className:"seed-designation",children:"Full Stack Developer at Infosys"})]})}),(0,Be.jsx)("div",{className:"seed-testimonial-card",children:(0,Be.jsxs)("div",{className:"seed-testimonial-content",children:[(0,Be.jsx)("p",{children:'"The DevOps course helped me transition from a developer to a DevOps engineer. Great learning experience!"'}),(0,Be.jsx)("h4",{children:"Arun K."}),(0,Be.jsx)("p",{className:"seed-designation",children:"DevOps Engineer at HCL"})]})})]})]})}),(0,Be.jsx)("section",{className:"seed-schedule-section",id:"schedule",children:(0,Be.jsxs)("div",{className:"seed-container",children:[(0,Be.jsx)("h2",{children:"Upcoming Batches"}),(0,Be.jsxs)("div",{className:"seed-schedule-grid",children:[(0,Be.jsxs)("div",{className:"seed-schedule-card",children:[(0,Be.jsx)("h3",{children:"Full Stack Development"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Weekday Batch: June 15, 2025"}),(0,Be.jsx)("li",{children:"Weekend Batch: June 20, 2025"}),(0,Be.jsx)("li",{children:"Time: 9:00 AM - 1:00 PM"}),(0,Be.jsx)("li",{children:"Mode: Online & Offline"})]})]}),(0,Be.jsxs)("div",{className:"seed-schedule-card",children:[(0,Be.jsx)("h3",{children:"Data Science & ML"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Weekday Batch: June 18, 2025"}),(0,Be.jsx)("li",{children:"Weekend Batch: June 22, 2025"}),(0,Be.jsx)("li",{children:"Time: 2:00 PM - 6:00 PM"}),(0,Be.jsx)("li",{children:"Mode: Online & Offline"})]})]}),(0,Be.jsxs)("div",{className:"seed-schedule-card",children:[(0,Be.jsx)("h3",{children:"DevOps & Cloud"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Weekday Batch: June 25, 2025"}),(0,Be.jsx)("li",{children:"Weekend Batch: June 29, 2025"}),(0,Be.jsx)("li",{children:"Time: 10:00 AM - 2:00 PM"}),(0,Be.jsx)("li",{children:"Mode: Online & Offline"})]})]})]})]})}),(0,Be.jsx)("section",{className:"seed-news-section",id:"news",children:(0,Be.jsxs)("div",{className:"seed-container",children:[(0,Be.jsx)("h2",{children:"Latest News & Events"}),(0,Be.jsxs)("div",{className:"seed-news-grid",children:[(0,Be.jsxs)("div",{className:"seed-news-card",children:[(0,Be.jsx)("h3",{children:"Placement Drive"}),(0,Be.jsx)("p",{children:"Upcoming placement drive with top MNCs on July 1st, 2025"}),(0,Be.jsx)("a",{href:"#",className:"seed-read-more",children:"Read More"})]}),(0,Be.jsxs)("div",{className:"seed-news-card",children:[(0,Be.jsx)("h3",{children:"Free Workshop"}),(0,Be.jsx)("p",{children:"Join our free workshop on Cloud Computing basics on June 10th, 2025"}),(0,Be.jsx)("a",{href:"#",className:"seed-read-more",children:"Read More"})]}),(0,Be.jsxs)("div",{className:"seed-news-card",children:[(0,Be.jsx)("h3",{children:"New Course Launch"}),(0,Be.jsx)("p",{children:"Launching Advanced Cybersecurity course with industry certification"}),(0,Be.jsx)("a",{href:"#",className:"seed-read-more",children:"Read More"})]})]})]})}),(0,Be.jsx)("section",{className:"seed-faq-section",id:"faq",children:(0,Be.jsxs)("div",{className:"seed-container",children:[(0,Be.jsx)("h2",{children:"Frequently Asked Questions"}),(0,Be.jsxs)("div",{className:"seed-faq-grid",children:[(0,Be.jsxs)("div",{className:"seed-faq-item",onClick:()=>l(e=>Fe(Fe({},e),{},{1:!e[1]})),children:[(0,Be.jsxs)("div",{className:"seed-faq-header",children:[(0,Be.jsx)("h3",{children:"What are the payment options available?"}),(0,Be.jsx)("span",{className:"seed-faq-arrow ".concat(s[1]?"expanded":""),children:"\u25bc"})]}),s[1]&&(0,Be.jsx)("p",{children:"We offer flexible payment options including EMI, full payment, and installment-based payments. We accept all major payment methods."})]}),(0,Be.jsxs)("div",{className:"seed-faq-item",onClick:()=>l(e=>Fe(Fe({},e),{},{2:!e[2]})),children:[(0,Be.jsxs)("div",{className:"seed-faq-header",children:[(0,Be.jsx)("h3",{children:"Do you provide placement assistance?"}),(0,Be.jsx)("span",{className:"seed-faq-arrow ".concat(s[2]?"expanded":""),children:"\u25bc"})]}),s[2]&&(0,Be.jsx)("p",{children:"Yes, we provide 100% placement assistance with our network of 300+ hiring partners and dedicated placement team."})]}),(0,Be.jsxs)("div",{className:"seed-faq-item",onClick:()=>l(e=>Fe(Fe({},e),{},{3:!e[3]})),children:[(0,Be.jsxs)("div",{className:"seed-faq-header",children:[(0,Be.jsx)("h3",{children:"What is the course duration?"}),(0,Be.jsx)("span",{className:"seed-faq-arrow ".concat(s[3]?"expanded":""),children:"\u25bc"})]}),s[3]&&(0,Be.jsx)("p",{children:"Course duration varies from 3-6 months based on the program. We offer both fast-track and regular pace options."})]}),(0,Be.jsxs)("div",{className:"seed-faq-item",onClick:()=>l(e=>Fe(Fe({},e),{},{4:!e[4]})),children:[(0,Be.jsxs)("div",{className:"seed-faq-header",children:[(0,Be.jsx)("h3",{children:"Is there a demo class available?"}),(0,Be.jsx)("span",{className:"seed-faq-arrow ".concat(s[4]?"expanded":""),children:"\u25bc"})]}),s[4]&&(0,Be.jsx)("p",{children:"Yes, we offer a free demo class for all our courses to help you understand our teaching methodology."})]}),(0,Be.jsxs)("div",{className:"seed-faq-item",onClick:()=>l(e=>Fe(Fe({},e),{},{5:!e[5]})),children:[(0,Be.jsxs)("div",{className:"seed-faq-header",children:[(0,Be.jsx)("h3",{children:"What is the class size for each batch?"}),(0,Be.jsx)("span",{className:"seed-faq-arrow ".concat(s[5]?"expanded":""),children:"\u25bc"})]}),s[5]&&(0,Be.jsx)("p",{children:"We maintain small batch sizes of 30-60 students to ensure individual attention and better learning outcomes."})]}),(0,Be.jsxs)("div",{className:"seed-faq-item",onClick:()=>l(e=>Fe(Fe({},e),{},{6:!e[6]})),children:[(0,Be.jsxs)("div",{className:"seed-faq-header",children:[(0,Be.jsx)("h3",{children:"Are the courses available online?"}),(0,Be.jsx)("span",{className:"seed-faq-arrow ".concat(s[6]?"expanded":""),children:"\u25bc"})]}),s[6]&&(0,Be.jsx)("p",{children:"Yes, all our courses are available in both online and offline modes. You can choose the mode that suits you best."})]}),(0,Be.jsxs)("div",{className:"seed-faq-item",onClick:()=>l(e=>Fe(Fe({},e),{},{7:!e[7]})),children:[(0,Be.jsxs)("div",{className:"seed-faq-header",children:[(0,Be.jsx)("h3",{children:"Do you provide certification after course completion?"}),(0,Be.jsx)("span",{className:"seed-faq-arrow ".concat(s[7]?"expanded":""),children:"\u25bc"})]}),s[7]&&(0,Be.jsx)("p",{children:"Yes, we provide industry-recognized certification upon successful completion of the course."})]}),(0,Be.jsxs)("div",{className:"seed-faq-item",onClick:()=>l(e=>Fe(Fe({},e),{},{8:!e[8]})),children:[(0,Be.jsxs)("div",{className:"seed-faq-header",children:[(0,Be.jsx)("h3",{children:"What is the training methodology?"}),(0,Be.jsx)("span",{className:"seed-faq-arrow ".concat(s[8]?"expanded":""),children:"\u25bc"})]}),s[8]&&(0,Be.jsx)("p",{children:"Our training methodology includes hands-on practice, real-world projects, and mentoring by industry experts."})]})]})]})}),(0,Be.jsx)("footer",{className:"homepage-footer",children:(0,Be.jsxs)("div",{className:"seed-footer-container",children:[(0,Be.jsxs)("div",{className:"seed-footer-grid",children:[(0,Be.jsxs)("div",{className:"seed-footer-col",children:[(0,Be.jsx)("h4",{children:"Contact Us"}),(0,Be.jsxs)("div",{className:"seed-contact-info",children:[(0,Be.jsx)("h5",{children:"Coimbatore:"}),(0,Be.jsx)("p",{children:"SEED Innovating Technologies and Educational Services (SEED-IT)"}),(0,Be.jsx)("p",{children:"CHIL SEZ IT Park (Special Economic Zone),"}),(0,Be.jsx)("p",{children:"Saravanampatti, Coimbatore - 641035"}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Phone:"})," +91-94427 30135"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Email:"})," seed.skillup@gmail.com"]})]})]}),(0,Be.jsxs)("div",{className:"seed-footer-col",children:[(0,Be.jsx)("h4",{children:"Quick Links"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:(0,Be.jsx)("a",{href:"#about",onClick:e=>{e.preventDefault(),document.getElementById("about").scrollIntoView({behavior:"smooth"})},children:"About Us"})}),(0,Be.jsx)("li",{children:(0,Be.jsx)("a",{href:"#courses",onClick:e=>{e.preventDefault(),document.querySelector(".seed-courses-section").scrollIntoView({behavior:"smooth"})},children:"Our Courses"})}),(0,Be.jsx)("li",{children:(0,Be.jsx)("a",{href:"#schedule",onClick:e=>{e.preventDefault(),document.getElementById("schedule").scrollIntoView({behavior:"smooth"})},children:"Training Schedule"})}),(0,Be.jsx)("li",{children:(0,Be.jsx)("a",{href:"#testimonials",onClick:e=>{e.preventDefault(),document.getElementById("testimonials").scrollIntoView({behavior:"smooth"})},children:"Placements"})}),(0,Be.jsx)("li",{children:(0,Be.jsx)("a",{href:"#about",onClick:e=>{e.preventDefault(),document.getElementById("about").scrollIntoView({behavior:"smooth"})},children:"Corporate Training"})})]})]}),(0,Be.jsxs)("div",{className:"seed-footer-col",children:[(0,Be.jsx)("h4",{children:"Training Modes"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Online Live Classes"}),(0,Be.jsx)("li",{children:"Classroom Training"}),(0,Be.jsx)("li",{children:"Hybrid Learning"}),(0,Be.jsx)("li",{children:"Weekend Batches"}),(0,Be.jsx)("li",{children:"Corporate Training"})]})]}),(0,Be.jsxs)("div",{className:"seed-footer-col",children:[(0,Be.jsx)("h4",{children:"Follow Us"}),(0,Be.jsxs)("div",{className:"seed-social-links",children:[(0,Be.jsx)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",children:"Facebook"}),(0,Be.jsx)("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",children:"LinkedIn"}),(0,Be.jsx)("a",{href:"https://instagram.com/seed_skillup",target:"_blank",rel:"noopener noreferrer",children:"Instagram"}),(0,Be.jsx)("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",children:"Twitter"})]})]})]}),(0,Be.jsxs)("div",{className:"seed-footer-bottom",children:[(0,Be.jsx)("p",{children:"\xa9 2023-2025 SEED Innovating Technologies and Educational Services (SEED-IT). All Rights Reserved."}),(0,Be.jsxs)("div",{className:"seed-footer-links",children:[(0,Be.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),document.querySelector(".homepage-container").scrollIntoView({behavior:"smooth"})},children:"Back to Top"}),(0,Be.jsx)("a",{href:"#faq",onClick:e=>{e.preventDefault(),document.getElementById("faq").scrollIntoView({behavior:"smooth"})},children:"FAQ"}),(0,Be.jsx)("a",{href:"#news",onClick:e=>{e.preventDefault(),document.getElementById("news").scrollIntoView({behavior:"smooth"})},children:"News"})]}),(0,Be.jsxs)("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"10px"},children:["Version ",kY]})]})]})})]})};var ze={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},We=t.createContext&&t.createContext(ze),Ve=function(){return Ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ve.apply(this,arguments)},He=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function qe(e){return e&&e.map(function(e,n){return t.createElement(e.tag,Ve({key:n},e.attr),qe(e.child))})}function Ge(e){return function(n){return t.createElement(Ke,Ve({attr:Ve({},e.attr)},n),qe(e.child))}}function Ke(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,s=He(e,["attr","size","title"]),l=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Ve({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:Ve(Ve({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==We?t.createElement(We.Consumer,null,function(e){return n(e)}):n(ze)}function Ye(e){return Ge({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"}}]})(e)}function Xe(e){return Ge({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function Qe(e){return Ge({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}}]})(e)}function $e(e){return Ge({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function Je(e){return Ge({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"}}]})(e)}function Ze(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"}}]})(e)}function et(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"}}]})(e)}function tt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}}]})(e)}function nt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(e)}function rt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 544 512"},child:[{tag:"path",attr:{d:"M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"}}]})(e)}function it(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function at(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function ot(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function st(e){return Ge({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"}}]})(e)}function lt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function ct(e){return Ge({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"}}]})(e)}function ut(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function ht(e){return Ge({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function dt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"}}]})(e)}function ft(e){return Ge({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function pt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-96 144c0 4.42-3.58 8-8 8h-8c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h8c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-8c-26.51 0-48-21.49-48-48v-32c0-26.51 21.49-48 48-48h8c4.42 0 8 3.58 8 8v16zm44.27 104H160c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h12.27c5.95 0 10.41-3.5 10.41-6.62 0-1.3-.75-2.66-2.12-3.84l-21.89-18.77c-8.47-7.22-13.33-17.48-13.33-28.14 0-21.3 19.02-38.62 42.41-38.62H200c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-12.27c-5.95 0-10.41 3.5-10.41 6.62 0 1.3.75 2.66 2.12 3.84l21.89 18.77c8.47 7.22 13.33 17.48 13.33 28.14.01 21.29-19 38.62-42.39 38.62zM256 264v20.8c0 20.27 5.7 40.17 16 56.88 10.3-16.7 16-36.61 16-56.88V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v20.8c0 35.48-12.88 68.89-36.28 94.09-3.02 3.25-7.27 5.11-11.72 5.11s-8.7-1.86-11.72-5.11c-23.4-25.2-36.28-58.61-36.28-94.09V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8zm121-159L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"}}]})(e)}function mt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 121.9c0-6.3-2.5-12.4-7-16.9L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128zM571 308l-95.7-96.4c-10.1-10.1-27.4-3-27.4 11.3V288h-64v64h64v65.2c0 14.3 17.3 21.4 27.4 11.3L571 332c6.6-6.6 6.6-17.4 0-24zm-379 28v-32c0-8.8 7.2-16 16-16h176V160H248c-13.2 0-24-10.8-24-24V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V352H208c-8.8 0-16-7.2-16-16z"}}]})(e)}function gt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"}}]})(e)}function vt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"}}]})(e)}function yt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}function bt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function xt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"}}]})(e)}function wt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}}]})(e)}function St(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}}]})(e)}function _t(e){return Ge({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"}}]})(e)}function Et(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(e)}function Ct(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(e)}function kt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function Nt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(e)}function At(e){return Ge({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function Tt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"}}]})(e)}function It(e){return Ge({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function Dt(e){return Ge({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}]})(e)}const Rt="/SEEDDB",Pt="https://raw.githubusercontent.com/seeditDev/SEEDDB/main",jt="https://api.github.com/repos/seeditDev/SEEDDB/contents",Lt={"2K24":"2024 Batch","2K25":"2025 Batch","2K26":"2026 Batch","2K27":"2027 Batch","2K28":"2028 Batch"},Ot={_0x5f:"Z2l0aHViX3Bh",_0x4e:"dF8xMUJDT1FG",_0x3d:"Q0EwYU1RcHVi",_0x2c:"SmZ0dk9xX3Nv",_0x1b:"S0lDWlVyNVY4",_0xa0:"ZHN5ckZsTDVa",_0xb1:"SW5IZWNXYjYw",_0xc2:"d1ZEdEpsR1dY",_0xd3:"dG56bWZDUUZK",_0xe4:"UU9KTjJBZDhocEZO"},Mt={"SEED-IT":"SEED Innovating Technologies and Educational Services (SEED-IT)",KITE:"KGiSL Institute of Technology (KITE)",KGCAS:"KGiSL College of Arts and Science (KGCAS)",KGIIM:"KGiSL Institute of Information Management (KGiSL-IIM)"},Ft={EXPIRY_TIME:18e5,PREFIX:{PROFILES:"college_profiles_",ACCESS:"college_access_",SCORES:"college_scores_",FULL_DB:"college_fulldb_"}},Bt={LOCAL:{STAFF_PASSWORD:"".concat(Rt,"/staffLogin/staffPassword.json"),getCollegeData:(e,t,n)=>"".concat(Rt,"/colleges/").concat(e,"/").concat(t,"/").concat(n,".json"),ACCESS_CONTROL:"".concat(Rt,"/access_control.json")},GITHUB:{STAFF_PASSWORD:"".concat(Pt,"/staffLogin/staffPassword.json"),getCollegeData:(e,t,n)=>"".concat(Pt,"/colleges/").concat(e,"/").concat(t,"/").concat(n,".json"),ACCESS_CONTROL:"".concat(Pt,"/access_control.json")},GITHUB_API:{STAFF_PASSWORD:"".concat(jt,"/staffLogin/staffPassword.json"),getCollegeData:(e,t,n)=>"".concat(jt,"/colleges/").concat(e,"/").concat(t,"/").concat(n,".json"),ACCESS_CONTROL:"".concat(jt,"/access_control.json")}},Ut="profiles",zt="access",Wt="scores",Vt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,o=a?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;s||(d=64,a||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==o||null==s)throw new qt;const l=t<<2|a>>4;if(r.push(l),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==s){const e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gt=function(e){return function(e){const t=Vt(e);return Ht.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Kt=function(e){try{return Ht.decodeString(e,!0)}catch(VD){console.error("base64Decode failed: ",VD)}return null};const Yt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Xt=()=>{try{return Yt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(VD){return}const t=e&&Kt(e[1]);return t&&JSON.parse(t)})()}catch(VD){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(VD))}},Qt=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Xt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},$t=()=>{var e;return null===(e=Xt())||void 0===e?void 0:e.config};class Jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Zt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Gt(JSON.stringify({alg:"none",type:"JWT"})),Gt(JSON.stringify(a)),""].join(".")}function en(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function tn(){return!function(){var e;const t=null===(e=Xt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(VD){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nn(){try{return"object"===typeof indexedDB}catch(VD){return!1}}class rn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,an.prototype.create)}}class an{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(on,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new rn(n,a,t)}}const on=/\{\$([^}]+)}/g;function sn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(ln(n)&&ln(a)){if(!sn(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ln(e){return null!==e&&"object"===typeof e}function cn(e){return e&&e._delegate?e._delegate:e}class un{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const hn="[DEFAULT]";class dn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Jt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(VD){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(VD){if(r)return null;throw VD}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:hn})}catch(VD){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(VD){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(EM){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===hn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(EM){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;return this.component?this.component.multipleInstances?e:hn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const pn=[];var mn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(mn||(mn={}));const gn={debug:mn.DEBUG,verbose:mn.VERBOSE,info:mn.INFO,warn:mn.WARN,error:mn.ERROR,silent:mn.SILENT},vn=mn.INFO,yn={[mn.DEBUG]:"log",[mn.VERBOSE]:"log",[mn.INFO]:"info",[mn.WARN]:"warn",[mn.ERROR]:"error"},bn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=yn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class xn{constructor(e){this.name=e,this._logLevel=vn,this._logHandler=bn,this._userLogHandler=null,pn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?gn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,mn.DEBUG,...t),this._logHandler(this,mn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,mn.VERBOSE,...t),this._logHandler(this,mn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,mn.INFO,...t),this._logHandler(this,mn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,mn.WARN,...t),this._logHandler(this,mn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,mn.ERROR,...t),this._logHandler(this,mn.ERROR,...t)}}let wn,Sn;const _n=new WeakMap,En=new WeakMap,Cn=new WeakMap,kn=new WeakMap,Nn=new WeakMap;let An={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return En.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Cn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Tn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Sn||(Sn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Rn(this),n),Dn(_n.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Dn(e.apply(Rn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(Rn(this),t,...r);return Cn.set(a,t.sort?t.sort():[t]),Dn(a)}}function In(e){return"function"===typeof e?Tn(e):(e instanceof IDBTransaction&&function(e){if(En.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});En.set(e,t)}(e),t=e,(wn||(wn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,An):e);var t}function Dn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Dn(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&_n.set(t,e)}).catch(()=>{}),Nn.set(t,e),t}(e);if(kn.has(e))return kn.get(e);const t=In(e);return t!==e&&(kn.set(e,t),Nn.set(t,e)),t}const Rn=e=>Nn.get(e);const Pn=["get","getKey","getAll","getAllKeys","count"],jn=["put","add","delete","clear"],Ln=new Map;function On(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ln.get(t))return Ln.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=jn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Pn.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return r&&(a=a.index(s.shift())),(await Promise.all([a[n](...s),i&&t.done]))[0]};return Ln.set(t,a),a}!function(e){An=e(An)}(e=>Fe(Fe({},e),{},{get:(t,n,r)=>On(t,n)||e.get(t,n,r),has:(t,n)=>!!On(t,n)||e.has(t,n)}));class Mn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Fn="@firebase/app",Bn="0.10.13",Un=new xn("@firebase/app"),zn="@firebase/app-compat",Wn="@firebase/analytics-compat",Vn="@firebase/analytics",Hn="@firebase/app-check-compat",qn="@firebase/app-check",Gn="@firebase/auth",Kn="@firebase/auth-compat",Yn="@firebase/database",Xn="@firebase/data-connect",Qn="@firebase/database-compat",$n="@firebase/functions",Jn="@firebase/functions-compat",Zn="@firebase/installations",er="@firebase/installations-compat",tr="@firebase/messaging",nr="@firebase/messaging-compat",rr="@firebase/performance",ir="@firebase/performance-compat",ar="@firebase/remote-config",or="@firebase/remote-config-compat",sr="@firebase/storage",lr="@firebase/storage-compat",cr="@firebase/firestore",ur="@firebase/vertexai-preview",hr="@firebase/firestore-compat",dr="firebase",fr="[DEFAULT]",pr={[Fn]:"fire-core",[zn]:"fire-core-compat",[Vn]:"fire-analytics",[Wn]:"fire-analytics-compat",[qn]:"fire-app-check",[Hn]:"fire-app-check-compat",[Gn]:"fire-auth",[Kn]:"fire-auth-compat",[Yn]:"fire-rtdb",[Xn]:"fire-data-connect",[Qn]:"fire-rtdb-compat",[$n]:"fire-fn",[Jn]:"fire-fn-compat",[Zn]:"fire-iid",[er]:"fire-iid-compat",[tr]:"fire-fcm",[nr]:"fire-fcm-compat",[rr]:"fire-perf",[ir]:"fire-perf-compat",[ar]:"fire-rc",[or]:"fire-rc-compat",[sr]:"fire-gcs",[lr]:"fire-gcs-compat",[cr]:"fire-fst",[hr]:"fire-fst-compat",[ur]:"fire-vertex","fire-js":"fire-js",[dr]:"fire-js-all"},mr=new Map,gr=new Map,vr=new Map;function yr(e,t){try{e.container.addComponent(t)}catch(VD){Un.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),VD)}}function br(e){const t=e.name;if(vr.has(t))return Un.debug("There were multiple attempts to register component ".concat(t,".")),!1;vr.set(t,e);for(const n of mr.values())yr(n,e);for(const n of gr.values())yr(n,e);return!0}function xr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const wr=new an("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Sr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const _r="10.14.1";function Er(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:fr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wr.create("bad-app-name",{appName:String(i)});if(n||(n=$t()),!n)throw wr.create("no-options");const a=mr.get(i);if(a){if(sn(n,a.options)&&sn(r,a.config))return a;throw wr.create("duplicate-app",{appName:i})}const o=new fn(i);for(const l of vr.values())o.addComponent(l);const s=new Sr(n,r,o);return mr.set(i,s),s}function Cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fr;const t=mr.get(e);if(!t&&e===fr&&$t())return Er();if(!t)throw wr.create("no-app",{appName:e});return t}function kr(e,t,n){var r;let i=null!==(r=pr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Un.warn(e.join(" "))}br(new un("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Nr="firebase-heartbeat-store";let Ar=null;function Tr(){return Ar||(Ar=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),s=Dn(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Dn(o.result),e.oldVersion,e.newVersion,Dn(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Nr)}catch(VD){console.warn(VD)}}}).catch(e=>{throw wr.create("idb-open",{originalErrorMessage:e.message})})),Ar}async function Ir(e,t){try{const n=(await Tr()).transaction(Nr,"readwrite"),r=n.objectStore(Nr);await r.put(t,Dr(e)),await n.done}catch(VD){if(VD instanceof rn)Un.warn(VD.message);else{const t=wr.create("idb-set",{originalErrorMessage:null===VD||void 0===VD?void 0:VD.message});Un.warn(t.message)}}}function Dr(e){return"".concat(e.name,"!").concat(e.options.appId)}class Rr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(VD){Un.warn(VD)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Pr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Lr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Lr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Gt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(VD){return Un.warn(VD),""}}}function Pr(){return(new Date).toISOString().substring(0,10)}class jr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!nn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Tr()).transaction(Nr),n=await t.objectStore(Nr).get(Dr(e));return await t.done,n}catch(VD){if(VD instanceof rn)Un.warn(VD.message);else{const t=wr.create("idb-get",{originalErrorMessage:null===VD||void 0===VD?void 0:VD.message});Un.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ir(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ir(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Lr(e){return Gt(JSON.stringify({version:2,heartbeats:e})).length}var Or;Or="",br(new un("platform-logger",e=>new Mn(e),"PRIVATE")),br(new un("heartbeat",e=>new Rr(e),"PRIVATE")),kr(Fn,Bn,Or),kr(Fn,Bn,"esm2017"),kr("fire-js","");kr("firebase","10.14.1","app");var Mr,Fr,Br="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ur={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,a=this.h,o=0;o<t;){if(0==a)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[a++]=e.charCodeAt(o++),a==this.blockSize){n(this,i),a=0;break}}else for(;o<t;)if(i[a++]=e[o++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function a(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(s,s);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),a=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=a.add(r);0>=c.l(e)&&(i=i.add(n),a=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=o(n)).j(t);h(c)||0<c.l(e);)c=(a=o(n-=r)).j(t);u(a)&&(a=l),i=i.add(a),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,a=[],o=0;o<i;o++)a[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,a=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,a=0;a<=t;a++){var o=i+(65535&this.i(a))+(65535&e.i(a)),s=(o>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);i=s>>>16,o&=65535,s&=65535,n[a]=s<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var a=0;a<e.g.length;a++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(a)>>>16,g=65535&e.i(a);n[2*i+2*a]+=f*g,p(n,2*i+2*a),n[2*i+2*a+1]+=l*g,p(n,2*i+2*a+1),n[2*i+2*a+1]+=f*m,p(n,2*i+2*a+1),n[2*i+2*a+2]+=l*m,p(n,2*i+2*a+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Fr=Ur.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=s,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Mr=Ur.Integer=r}).apply("undefined"!==typeof Br?Br:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var zr,Wr,Vr,Hr,qr,Gr,Kr,Yr,Xr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Qr={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Xr&&Xr];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break e;i=i[o]}(r=r(a=i[e=e[e.length-1]]))!=a&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(a(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){i.setTimeout(()=>{throw e},0)}function E(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new k,e=>e.reset());class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let N,A=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=i.Promise.resolve(void 0);N=()=>{e.then(D)}};var D=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(QD){_(QD)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function R(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(QD){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(JD){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,P);var O={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function B(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function W(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Array.prototype.indexOf.call(i,t,void 0);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=V(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new B(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function G(e,t,n,r,i){if(r&&r.once)return Y(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)G(e,t[a],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var s=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,s,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)j||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Y(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Y(e,t[a],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function X(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)X(e,t[a],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=V(a=e.g[t],n,r,i))&&(U(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])W(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(W(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function $(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;w(t=new P(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ie(o=t.g=n[a],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.da&&o.capture==n){var s=o.listener,l=o.ha||o.src;o.fa&&W(e.i,o),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function ae(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=ae(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function be(){P.call(this,"c")}h(ye,P),h(be,P);var xe={},we=null;function Se(){return we=we||new ne}function _e(e){P.call(this,xe.La,e)}function Ee(e){const t=Se();re(t,new _e(t))}function Ce(e,t){P.call(this,xe.STAT_EVENT,e),this.stat=t}function ke(e){const t=Se();re(t,new Ce(t,e))}function Ne(e,t){P.call(this,xe.Ma,e),this.size=t}function Ae(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Ie(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",h(_e,P),xe.STAT_EVENT="statevent",h(Ce,P),xe.Ma="timingevent",h(Ne,P),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var De,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function je(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}h(je,pe),je.prototype.g=function(){return new XMLHttpRequest},je.prototype.i=function(){return{}},De=new je;var Me={},Fe={};function Be(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Ve(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var a=0;a<i.length;a++){var o=G(n,i[a],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",s=a.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function We(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ae(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||sn(e.j,e)}function Ke(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch($D){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Xt(n)}nn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ae(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch($D){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(et(a,a.h),a.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var s=o,l=r.L;l&&(s.I=l),s.B&&(qe(s),Ve(s)),r.g=o}else tn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch($D){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=d||7==t||Ee(),qe(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=qt(this.g);e="";var a=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),Ge(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==a-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ke(this),Ge(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=We(this,s),e==Fe){4==d&&(this.s=4,ke(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,ke(15),Ie(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ye(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=s.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),rn(h),h.M=!0,ke(11))}}else Ie(this.i,this.l,s,"[Invalid Chunked Response]"),Ke(this),Ge(this)}else Ie(this.i,this.l,s,null),Ye(this,s);4==d&&Ke(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[i]||[];t[i]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ke(this),Ge(this)}}}catch($r){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),ke(17)),Ke(this),this.s=2,Ge(this)):He(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function at(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof at){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,st(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function ot(e){return new at(e)}function st(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,yt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}at.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){wt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return wt(e),t=Ct(e,t),e.g.has(t)}function Et(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),d(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(JD){}}function Nt(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(VD){throw t.push(r+"type="+encodeURIComponent("_badmap")),VD}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ot(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){wt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)_t(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,_t(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=a;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Tt,pe),Tt.prototype.g=function(){return new It(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),h(It,ne),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Pt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ot,ne);var Mt=/^https?$/i,Ft=["POST","PUT"];function Bt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Wt(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ae(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),a=!Mt.test(o?o.toLowerCase():"")}n=a}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<Ht(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",Ut(e)}}finally{Wt(e)}}}function Wt(e,t){if(e.g){Vt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(VD){}}}function Vt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ei){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new Nt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Qt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(ZD){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}un(e)}function Xt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Qt(e){Xt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;N||I(),A||(N(),A=!0),T.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Be(n,r,t)}function Zt(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const s=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{At(s,e,"req"+n+"_")}catch($r){r&&r(s)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;N||I(),A||(N(),A=!0),T.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ae(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){on(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Ne(r,n)),$t(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ae(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new at(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ht(r),t?function(e,t){const n=new Te;if(i.Image){const r=new Image;r.onload=u(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),un(e),Qt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof at?ot(n):new at(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var a=i.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var o=new at(null);r&&st(o,r),t&&(o.g=t),a&&lt(o,a),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new Tt({eb:n})):new Ot(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function mn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function yn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?me(this.o):me(De),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(JD){return void Bt(this,JD)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),a=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vt(this),this.u=!0,this.g.send(e),this.u=!1}catch(JD){Bt(this,JD)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Wt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let a=this.o;if(this.S&&(a?(a=b(a),w(a,this.S)):a=this.S),null!==this.m||this.O||(i.H=a,a=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(jt(a)))+"&"+t:this.m&&Lt(n,this.m,a)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Be(i,n,null)):Be(i,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||$e(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ae(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Xt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),nn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&$t(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)},h(gn,ye),h(vn,be),h(yn,fn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Yr=Qr.createWebChannelTransport=function(){return new pn},Kr=Qr.getStatEventTarget=function(){return Se()},Gr=Qr.Event=xe,qr=Qr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Hr=Qr.ErrorCode=Re,Pe.COMPLETE="complete",Vr=Qr.EventType=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Wr=Qr.WebChannel=ge,Qr.FetchXmlHttpFactory=Tt,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,zr=Qr.XhrIo=Ot}).apply("undefined"!==typeof Xr?Xr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const $r="@firebase/firestore";class Jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");let Zr="10.14.0";const ei=new xn("@firebase/firestore");function ti(){return ei.logLevel}function ni(e){if(ei.logLevel<=mn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ai);ei.debug("Firestore (".concat(Zr,"): ").concat(e),...i)}}function ri(e){if(ei.logLevel<=mn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ai);ei.error("Firestore (".concat(Zr,"): ").concat(e),...i)}}function ii(e){if(ei.logLevel<=mn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ai);ei.warn("Firestore (".concat(Zr,"): ").concat(e),...i)}}function ai(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(WD){return e}}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Zr,") INTERNAL ASSERTION FAILED: ")+e;throw ri(t),new Error(t)}function si(e,t){e||oi()}function li(e,t){return e}const ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ui extends rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class hi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class di{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class fi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}}class pi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mi{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){si(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hi,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{ni("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ni("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ni("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(si("string"==typeof t.accessToken),new di(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return si(null===e||"string"==typeof e),new Jr(e)}}class gi{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vi{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new gi(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bi{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){si(void 0===this.o);const n=e=>{null!=e.error&&ni("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,ni("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ni("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ni("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(si("string"==typeof e.token),this.R=e.token,new yi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function xi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class wi{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=xi(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Si(e,t){return e<t?-1:e>t?1:0}function _i(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Ei{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ui(ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ui(ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ui(ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ui(ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ei.fromMillis(Date.now())}static fromDate(e){return Ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ei(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Si(this.nanoseconds,e.nanoseconds):Si(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ci{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ci(e)}static min(){return new Ci(new Ei(0,0))}static max(){return new Ci(new Ei(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ki{constructor(e,t,n){void 0===t?t=0:t>e.length&&oi(),void 0===n?n=e.length-t:n>e.length-t&&oi(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ki.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ni extends ki{construct(e,t,n){return new Ni(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ui(ci.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Ni(e)}static emptyPath(){return new Ni([])}}const Ai=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ti extends ki{construct(e,t,n){return new Ti(e,t,n)}static isValidIdentifier(e){return Ai.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ti.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ti(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ui(ci.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ui(ci.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ui(ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(i(),r++)}if(i(),a)throw new ui(ci.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ti(t)}static emptyPath(){return new Ti([])}}class Ii{constructor(e){this.path=e}static fromPath(e){return new Ii(Ni.fromString(e))}static fromName(e){return new Ii(Ni.fromString(e).popFirst(5))}static empty(){return new Ii(Ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ni.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ii(new Ni(e.slice()))}}class Di{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Di.UNKNOWN_ID=-1;function Ri(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ci.fromTimestamp(1e9===r?new Ei(n+1,0):new Ei(n,r));return new ji(i,Ii.empty(),t)}function Pi(e){return new ji(e.readTime,e.key,-1)}class ji{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ji(Ci.min(),Ii.empty(),-1)}static max(){return new ji(Ci.max(),Ii.empty(),-1)}}function Li(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ii.comparator(e.documentKey,t.documentKey),0!==n?n:Si(e.largestBatchId,t.largestBatchId))}const Oi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Fi(e){if(e.code!==ci.FAILED_PRECONDITION||e.message!==Oi)throw e;ni("LocalStore","Unexpectedly lost primary lease")}class Bi{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bi((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Bi?t:Bi.resolve(t)}catch(e){return Bi.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Bi.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Bi.reject(t)}static resolve(e){return new Bi((t,n)=>{t(e)})}static reject(e){return new Bi((t,n)=>{n(e)})}static waitFor(e){return new Bi((t,n)=>{let r=0,i=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++i,a&&i===r&&t()},e=>n(e))}),a=!0,i===r&&t()})}static or(e){let t=Bi.resolve(!1);for(const n of e)t=t.next(e=>e?Bi.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Bi((n,r)=>{const i=e.length,a=new Array(i);let o=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{a[l]=e,++o,o===i&&n(a)},e=>r(e))}})}static doWhile(e,t){return new Bi((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ui(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zi(e){return"IndexedDbTransactionError"===e.name}class Wi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Vi(e){return null==e}function Hi(e){return 0===e&&1/e==-1/0}function qi(e){return"number"==typeof e&&Number.isInteger(e)&&!Hi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Wi.oe=-1;const Gi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ki=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yi=Ki,Xi=[...Yi,"indexConfiguration","indexState","indexEntries"];function Qi(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $i(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ji(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zi{constructor(e,t){this.comparator=e,this.root=t||ta.EMPTY}insert(e,t){return new Zi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ta.BLACK,null,null))}remove(e){return new Zi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ta.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ea(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ea(this.root,e,this.comparator,!1)}getReverseIterator(){return new ea(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ea(this.root,e,this.comparator,!0)}}class ea{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ta{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ta.RED,this.left=null!=r?r:ta.EMPTY,this.right=null!=i?i:ta.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ta(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ta.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ta.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ta.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ta.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oi();if(this.right.isRed())throw oi();const e=this.left.check();if(e!==this.right.check())throw oi();return e+(this.isRed()?0:1)}}ta.EMPTY=null,ta.RED=!0,ta.BLACK=!1,ta.EMPTY=new class{constructor(){this.size=0}get key(){throw oi()}get value(){throw oi()}get color(){throw oi()}get left(){throw oi()}get right(){throw oi()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ta(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class na{constructor(e){this.comparator=e,this.data=new Zi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ra(this.data.getIterator())}getIteratorFrom(e){return new ra(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof na))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new na(this.comparator);return t.data=e,t}}class ra{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ia{constructor(e){this.fields=e,e.sort(Ti.comparator)}static empty(){return new ia([])}unionWith(e){let t=new na(Ti.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ia(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _i(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class aa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class oa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new aa("Invalid base64 string: "+e):e}}(e);return new oa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new oa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Si(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oa.EMPTY_BYTE_STRING=new oa("");const sa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function la(e){if(si(!!e),"string"==typeof e){let t=0;const n=sa.exec(e);if(si(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ca(e.seconds),nanos:ca(e.nanos)}}function ca(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ua(e){return"string"==typeof e?oa.fromBase64String(e):oa.fromUint8Array(e)}function ha(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function da(e){const t=e.mapValue.fields.__previous_value__;return ha(t)?da(t):t}function fa(e){const t=la(e.mapValue.fields.__local_write_time__.timestampValue);return new Ei(t.seconds,t.nanos)}class pa{constructor(e,t,n,r,i,a,o,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=l}}class ma{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ma("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ma&&e.projectId===this.projectId&&e.database===this.database}}const ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function va(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ha(e)?4:Pa(e)?9007199254740991:Da(e)?10:11:oi()}function ya(e,t){if(e===t)return!0;const n=va(e);if(n!==va(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fa(e).isEqual(fa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=la(e.timestampValue),r=la(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ua(e.bytesValue).isEqual(ua(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ca(e.geoPointValue.latitude)===ca(t.geoPointValue.latitude)&&ca(e.geoPointValue.longitude)===ca(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ca(e.integerValue)===ca(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ca(e.doubleValue),r=ca(t.doubleValue);return n===r?Hi(n)===Hi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return _i(e.arrayValue.values||[],t.arrayValue.values||[],ya);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qi(n)!==Qi(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ya(n[i],r[i])))return!1;return!0}(e,t);default:return oi()}}function ba(e,t){return void 0!==(e.values||[]).find(e=>ya(e,t))}function xa(e,t){if(e===t)return 0;const n=va(e),r=va(t);if(n!==r)return Si(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Si(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ca(e.integerValue||e.doubleValue),r=ca(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wa(e.timestampValue,t.timestampValue);case 4:return wa(fa(e),fa(t));case 5:return Si(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ua(e),r=ua(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Si(n[i],r[i]);if(0!==e)return e}return Si(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Si(ca(e.latitude),ca(t.latitude));return 0!==n?n:Si(ca(e.longitude),ca(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Sa(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,a;const o=e.fields||{},s=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=s.value)||void 0===r?void 0:r.arrayValue,u=Si((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Sa(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ga.mapValue&&t===ga.mapValue)return 0;if(e===ga.mapValue)return 1;if(t===ga.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let o=0;o<r.length&&o<a.length;++o){const e=Si(r[o],a[o]);if(0!==e)return e;const t=xa(n[r[o]],i[a[o]]);if(0!==t)return t}return Si(r.length,a.length)}(e.mapValue,t.mapValue);default:throw oi()}}function wa(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Si(e,t);const n=la(e),r=la(t),i=Si(n.seconds,r.seconds);return 0!==i?i:Si(n.nanos,r.nanos)}function Sa(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=xa(n[i],r[i]);if(e)return e}return Si(n.length,r.length)}function _a(e){return Ea(e)}function Ea(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=la(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ua(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ii.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ea(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ea(e.fields[i]));return n+"}"}(e.mapValue):oi()}function Ca(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ka(e){return!!e&&"integerValue"in e}function Na(e){return!!e&&"arrayValue"in e}function Aa(e){return!!e&&"nullValue"in e}function Ta(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ia(e){return!!e&&"mapValue"in e}function Da(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ra(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $i(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ra(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ra(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Pa(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ja{constructor(e){this.value=e}static empty(){return new ja({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ia(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(t)}setAll(e){let t=Ti.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ra(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ia(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ia(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){$i(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ja(Ra(this.value))}}function La(e){const t=[];return $i(e.fields,(e,n)=>{const r=new Ti([e]);if(Ia(n)){const e=La(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ia(t)}class Oa{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Oa(e,0,Ci.min(),Ci.min(),Ci.min(),ja.empty(),0)}static newFoundDocument(e,t,n,r){return new Oa(e,1,t,Ci.min(),n,r,0)}static newNoDocument(e,t){return new Oa(e,2,t,Ci.min(),Ci.min(),ja.empty(),0)}static newUnknownDocument(e,t){return new Oa(e,3,t,Ci.min(),Ci.min(),ja.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ci.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ja.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ja.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ci.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ma{constructor(e,t){this.position=e,this.inclusive=t}}function Fa(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ii.comparator(Ii.fromName(o.referenceValue),n.key):xa(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ba(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ya(e.position[n],t.position[n]))return!1;return!0}class Ua{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function za(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Wa{}class Va extends Wa{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new $a(e,t,n):"array-contains"===t?new to(e,n):"in"===t?new no(e,n):"not-in"===t?new ro(e,n):"array-contains-any"===t?new io(e,n):new Va(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ja(e,n):new Za(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xa(t,this.value)):null!==t&&va(this.value)===va(t)&&this.matchesComparison(xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return oi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ha extends Wa{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ha(e,t)}matches(e){return qa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qa(e){return"and"===e.op}function Ga(e){return Ka(e)&&qa(e)}function Ka(e){for(const t of e.filters)if(t instanceof Ha)return!1;return!0}function Ya(e){if(e instanceof Va)return e.field.canonicalString()+e.op.toString()+_a(e.value);if(Ga(e))return e.filters.map(e=>Ya(e)).join(",");{const t=e.filters.map(e=>Ya(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Xa(e,t){return e instanceof Va?function(e,t){return t instanceof Va&&e.op===t.op&&e.field.isEqual(t.field)&&ya(e.value,t.value)}(e,t):e instanceof Ha?function(e,t){return t instanceof Ha&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Xa(n,t.filters[r]),!0)}(e,t):void oi()}function Qa(e){return e instanceof Va?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(_a(e.value))}(e):e instanceof Ha?function(e){return e.op.toString()+" {"+e.getFilters().map(Qa).join(" ,")+"}"}(e):"Filter"}class $a extends Va{constructor(e,t,n){super(e,t,n),this.key=Ii.fromName(n.referenceValue)}matches(e){const t=Ii.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ja extends Va{constructor(e,t){super(e,"in",t),this.keys=eo("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Za extends Va{constructor(e,t){super(e,"not-in",t),this.keys=eo("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ii.fromName(e.referenceValue))}class to extends Va{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Na(t)&&ba(t.arrayValue,this.value)}}class no extends Va{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ba(this.value.arrayValue,t)}}class ro extends Va{constructor(e,t){super(e,"not-in",t)}matches(e){if(ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ba(this.value.arrayValue,t)}}class io extends Va{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Na(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ba(this.value.arrayValue,e))}}class ao{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function oo(e){return new ao(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function so(e){const t=li(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ya(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Vi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>_a(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>_a(e)).join(",")),t.ue=e}return t.ue}function lo(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!za(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Xa(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ba(e.startAt,t.startAt)&&Ba(e.endAt,t.endAt)}function co(e){return Ii.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class uo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ho(e,t,n,r,i,a,o,s){return new uo(e,t,n,r,i,a,o,s)}function fo(e){return new uo(e)}function po(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function mo(e){return null!==e.collectionGroup}function go(e){const t=li(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new na(Ti.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Ua(r,n))}),e.has(Ti.keyField().canonicalString())||t.ce.push(new Ua(Ti.keyField(),n))}return t.ce}function vo(e){const t=li(e);return t.le||(t.le=yo(t,go(e))),t.le}function yo(e,t){if("F"===e.limitType)return oo(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ua(e.field,t)});const n=e.endAt?new Ma(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ma(e.startAt.position,e.startAt.inclusive):null;return oo(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function bo(e,t){const n=e.filters.concat([t]);return new uo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xo(e,t,n){return new uo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wo(e,t){return lo(vo(e),vo(t))&&e.limitType===t.limitType}function So(e){return"".concat(so(vo(e)),"|lt:").concat(e.limitType)}function _o(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Qa(e)).join(", "),"]")),Vi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>_a(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>_a(e)).join(",")),"Target(".concat(t,")")}(vo(e)),"; limitType=").concat(e.limitType,")")}function Eo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ii.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of go(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Fa(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,go(e),t))&&!(e.endAt&&!function(e,t,n){const r=Fa(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,go(e),t))}(e,t)}function Co(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ko(e){return(t,n)=>{let r=!1;for(const i of go(e)){const e=No(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function No(e,t,n){const r=e.field.isKeyField()?Ii.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?xa(r,i):oi()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return oi()}}class Ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ji(this.inner)}size(){return this.innerSize}}const To=new Zi(Ii.comparator);function Io(){return To}const Do=new Zi(Ii.comparator);function Ro(){let e=Do;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Po(e){let t=Do;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function jo(){return Oo()}function Lo(){return Oo()}function Oo(){return new Ao(e=>e.toString(),(e,t)=>e.isEqual(t))}const Mo=new Zi(Ii.comparator),Fo=new na(Ii.comparator);function Bo(){let e=Fo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Uo=new na(Si);function zo(){return Uo}function Wo(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hi(t)?"-0":t}}function Vo(e){return{integerValue:""+e}}function Ho(e,t){return qi(t)?Vo(t):Wo(e,t)}class qo{constructor(){this._=void 0}}function Go(e,t,n){return e instanceof Xo?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ha(t)&&(t=da(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Qo?$o(e,t):e instanceof Jo?Zo(e,t):function(e,t){const n=Yo(e,t),r=ts(n)+ts(e.Pe);return ka(n)&&ka(e.Pe)?Vo(r):Wo(e.serializer,r)}(e,t)}function Ko(e,t,n){return e instanceof Qo?$o(e,t):e instanceof Jo?Zo(e,t):n}function Yo(e,t){return e instanceof es?function(e){return ka(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Xo extends qo{}class Qo extends qo{constructor(e){super(),this.elements=e}}function $o(e,t){const n=ns(t);for(const r of e.elements)n.some(e=>ya(e,r))||n.push(r);return{arrayValue:{values:n}}}class Jo extends qo{constructor(e){super(),this.elements=e}}function Zo(e,t){let n=ns(t);for(const r of e.elements)n=n.filter(e=>!ya(e,r));return{arrayValue:{values:n}}}class es extends qo{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ts(e){return ca(e.integerValue||e.doubleValue)}function ns(e){return Na(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class rs{constructor(e,t){this.field=e,this.transform=t}}class is{constructor(e,t){this.version=e,this.transformResults=t}}class as{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function os(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ss{}function ls(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ys(e.key,as.none()):new fs(e.key,e.data,as.none());{const n=e.data,r=ja.empty();let i=new na(Ti.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ps(e.key,r,new ia(i.toArray()),as.none())}}function cs(e,t,n){e instanceof fs?function(e,t,n){const r=e.value.clone(),i=gs(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ps?function(e,t,n){if(!os(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=gs(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ms(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function us(e,t,n,r){return e instanceof fs?function(e,t,n,r){if(!os(e.precondition,t))return n;const i=e.value.clone(),a=vs(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ps?function(e,t,n,r){if(!os(e.precondition,t))return n;const i=vs(e.fieldTransforms,r,t),a=t.data;return a.setAll(ms(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return os(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Yo(r.transform,e||null);null!=i&&(null===n&&(n=ja.empty()),n.set(r.field,i))}return n||null}function ds(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&_i(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Qo&&t instanceof Qo||e instanceof Jo&&t instanceof Jo?_i(e.elements,t.elements,ya):e instanceof es&&t instanceof es?ya(e.Pe,t.Pe):e instanceof Xo&&t instanceof Xo}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class fs extends ss{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ps extends ss{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ms(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function gs(e,t,n){const r=new Map;si(e.length===n.length);for(let i=0;i<n.length;i++){const a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Ko(o,s,n[i]))}return r}function vs(e,t,n){const r=new Map;for(const i of e){const e=i.transform,a=n.data.field(i.field);r.set(i.field,Go(e,a,t))}return r}class ys extends ss{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bs extends ss{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xs{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&cs(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=us(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=us(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Lo();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;const s=ls(a,o);null!==s&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(Ci.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bo())}isEqual(e){return this.batchId===e.batchId&&_i(this.mutations,e.mutations,(e,t)=>ds(e,t))&&_i(this.baseMutations,e.baseMutations,(e,t)=>ds(e,t))}}class ws{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){si(e.mutations.length===n.length);let r=Mo;const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new ws(e,t,n,r)}}class Ss{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class _s{constructor(e,t){this.count=e,this.unchangedNames=t}}var Es,Cs;function ks(e){switch(e){default:return oi();case ci.CANCELLED:case ci.UNKNOWN:case ci.DEADLINE_EXCEEDED:case ci.RESOURCE_EXHAUSTED:case ci.INTERNAL:case ci.UNAVAILABLE:case ci.UNAUTHENTICATED:return!1;case ci.INVALID_ARGUMENT:case ci.NOT_FOUND:case ci.ALREADY_EXISTS:case ci.PERMISSION_DENIED:case ci.FAILED_PRECONDITION:case ci.ABORTED:case ci.OUT_OF_RANGE:case ci.UNIMPLEMENTED:case ci.DATA_LOSS:return!0}}function Ns(e){if(void 0===e)return ri("GRPC error has no .code"),ci.UNKNOWN;switch(e){case Es.OK:return ci.OK;case Es.CANCELLED:return ci.CANCELLED;case Es.UNKNOWN:return ci.UNKNOWN;case Es.DEADLINE_EXCEEDED:return ci.DEADLINE_EXCEEDED;case Es.RESOURCE_EXHAUSTED:return ci.RESOURCE_EXHAUSTED;case Es.INTERNAL:return ci.INTERNAL;case Es.UNAVAILABLE:return ci.UNAVAILABLE;case Es.UNAUTHENTICATED:return ci.UNAUTHENTICATED;case Es.INVALID_ARGUMENT:return ci.INVALID_ARGUMENT;case Es.NOT_FOUND:return ci.NOT_FOUND;case Es.ALREADY_EXISTS:return ci.ALREADY_EXISTS;case Es.PERMISSION_DENIED:return ci.PERMISSION_DENIED;case Es.FAILED_PRECONDITION:return ci.FAILED_PRECONDITION;case Es.ABORTED:return ci.ABORTED;case Es.OUT_OF_RANGE:return ci.OUT_OF_RANGE;case Es.UNIMPLEMENTED:return ci.UNIMPLEMENTED;case Es.DATA_LOSS:return ci.DATA_LOSS;default:return oi()}}(Cs=Es||(Es={}))[Cs.OK=0]="OK",Cs[Cs.CANCELLED=1]="CANCELLED",Cs[Cs.UNKNOWN=2]="UNKNOWN",Cs[Cs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cs[Cs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cs[Cs.NOT_FOUND=5]="NOT_FOUND",Cs[Cs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cs[Cs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cs[Cs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cs[Cs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cs[Cs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cs[Cs.ABORTED=10]="ABORTED",Cs[Cs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cs[Cs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cs[Cs.INTERNAL=13]="INTERNAL",Cs[Cs.UNAVAILABLE=14]="UNAVAILABLE",Cs[Cs.DATA_LOSS=15]="DATA_LOSS";let As=null;function Ts(){return new TextEncoder}const Is=new Mr([4294967295,4294967295],0);function Ds(e){const t=Ts().encode(e),n=new Fr;return n.update(t),new Uint8Array(n.digest())}function Rs(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Mr([n,r],0),new Mr([i,a],0)]}class Ps{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new js("Invalid padding: ".concat(t));if(n<0)throw new js("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new js("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new js("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Mr.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Mr.fromNumber(n)));return 1===r.compare(Is)&&(r=new Mr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Ds(e),[n,r]=Rs(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Ps(i,r,t);return n.forEach(e=>a.insert(e)),a}insert(e){if(0===this.Ie)return;const t=Ds(e),[n,r]=Rs(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class js extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ls{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Os.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ls(Ci.min(),r,new Zi(Si),Io(),Bo())}}class Os{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Os(n,t,Bo(),Bo(),Bo())}}class Ms{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Fs{constructor(e,t){this.targetId=e,this.me=t}}class Bs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oa.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Us{constructor(){this.fe=0,this.ge=Vs(),this.pe=oa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Bo(),t=Bo(),n=Bo();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:oi()}}),new Os(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Vs()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,si(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zs{constructor(e){this.Le=e,this.Be=new Map,this.ke=Io(),this.qe=Ws(),this.Qe=new Zi(Si)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:oi()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(co(i))if(0===n){const e=new Ii(i.path);this.Ue(t,e,Oa.newNoDocument(e,Ci.min()))}else si(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==As||As.et(function(e,t,n,r,i){var a,o,s,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(a=null==d?void 0:d.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(l=null===(s=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let a,o;try{a=ua(n).toUint8Array()}catch(e){if(e instanceof aa)return ii("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Ps(a,r,i)}catch(e){return ii(e instanceof js?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),a="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(a)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&co(i.target)){const t=new Ii(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Oa.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Bo();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Ls(e,t,this.Qe,this.ke,n);return this.ke=Io(),this.qe=Ws(),this.Qe=new Zi(Si),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Us,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new na(Si),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ni("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Us),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ws(){return new Zi(Ii.comparator)}function Vs(){return new Zi(Ii.comparator)}const Hs={asc:"ASCENDING",desc:"DESCENDING"},qs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gs={and:"AND",or:"OR"};class Ks{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ys(e,t){return e.useProto3Json||Vi(t)?t:{value:t}}function Xs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qs(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $s(e,t){return Xs(e,t.toTimestamp())}function Js(e){return si(!!e),Ci.fromTimestamp(function(e){const t=la(e);return new Ei(t.seconds,t.nanos)}(e))}function Zs(e,t){return el(e,t).canonicalString()}function el(e,t){const n=function(e){return new Ni(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function tl(e){const t=Ni.fromString(e);return si(wl(t)),t}function nl(e,t){return Zs(e.databaseId,t.path)}function rl(e,t){const n=tl(t);if(n.get(1)!==e.databaseId.projectId)throw new ui(ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ui(ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ii(sl(n))}function il(e,t){return Zs(e.databaseId,t)}function al(e){const t=tl(e);return 4===t.length?Ni.emptyPath():sl(t)}function ol(e){return new Ni(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sl(e){return si(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ll(e,t,n){return{name:nl(e,t),fields:n.value.mapValue.fields}}function cl(e,t){let n;if(t instanceof fs)n={update:ll(e,t.key,t.value)};else if(t instanceof ys)n={delete:nl(e,t.key)};else if(t instanceof ps)n={update:ll(e,t.key,t.data),updateMask:xl(t.fieldMask)};else{if(!(t instanceof bs))return oi();n={verify:nl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Xo)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Jo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof es)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw oi()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:$s(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:oi()}(e,t.precondition)),n}function ul(e,t){return{documents:[il(e,t.path)]}}function hl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=il(e,i);const a=function(e){if(0!==e.length)return bl(Ha.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:vl(e.field),direction:pl(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=Ys(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function dl(e){let t=al(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){si(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=fl(e);return t instanceof Ha&&Ga(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Ua(yl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Vi(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ma(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ma(n,t)}(n.endAt)),ho(t,i,o,a,s,"F",l,c)}function fl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yl(e.unaryFilter.field);return Va.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=yl(e.unaryFilter.field);return Va.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=yl(e.unaryFilter.field);return Va.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=yl(e.unaryFilter.field);return Va.create(i,"!=",{nullValue:"NULL_VALUE"});default:return oi()}}(e):void 0!==e.fieldFilter?function(e){return Va.create(yl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oi()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ha.create(e.compositeFilter.filters.map(e=>fl(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return oi()}}(e.compositeFilter.op))}(e):oi()}function pl(e){return Hs[e]}function ml(e){return qs[e]}function gl(e){return Gs[e]}function vl(e){return{fieldPath:e.canonicalString()}}function yl(e){return Ti.fromServerFormat(e.fieldPath)}function bl(e){return e instanceof Va?function(e){if("=="===e.op){if(Ta(e.value))return{unaryFilter:{field:vl(e.field),op:"IS_NAN"}};if(Aa(e.value))return{unaryFilter:{field:vl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ta(e.value))return{unaryFilter:{field:vl(e.field),op:"IS_NOT_NAN"}};if(Aa(e.value))return{unaryFilter:{field:vl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(e.field),op:ml(e.op),value:e.value}}}(e):e instanceof Ha?function(e){const t=e.getFilters().map(e=>bl(e));return 1===t.length?t[0]:{compositeFilter:{op:gl(e.op),filters:t}}}(e):oi()}function xl(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function wl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Sl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ci.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ci.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:oa.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(e){return new Sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _l{constructor(e){this.ct=e}}function El(e){const t=dl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xo(t,t.limit,"L"):t}class Cl{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ca(e.integerValue));else if("doubleValue"in e){const n=ca(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Hi(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=la(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ua(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Pa(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Da(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):oi()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const a="value",o=(null===(r=null===(n=i[a].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(ca(o)),this.Vt(a,t),this.Tt(i[a],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ii.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Cl.vt=new Cl;class kl{constructor(){this.un=new Nl}addToCollectionParentIndex(e,t){return this.un.add(t),Bi.resolve()}getCollectionParents(e,t){return Bi.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Bi.resolve()}deleteFieldIndex(e,t){return Bi.resolve()}deleteAllFieldIndexes(e){return Bi.resolve()}createTargetIndexes(e,t){return Bi.resolve()}getDocumentsMatchingTarget(e,t){return Bi.resolve(null)}getIndexType(e,t){return Bi.resolve(0)}getFieldIndexes(e,t){return Bi.resolve([])}getNextCollectionGroupToUpdate(e){return Bi.resolve(null)}getMinOffset(e,t){return Bi.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return Bi.resolve(ji.min())}updateCollectionGroup(e,t,n){return Bi.resolve()}updateIndexEntries(e,t){return Bi.resolve()}}class Nl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new na(Ni.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new na(Ni.comparator)).toArray()}}new Uint8Array(0);class Al{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Al(e,Al.DEFAULT_COLLECTION_PERCENTILE,Al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Al.DEFAULT_COLLECTION_PERCENTILE=10,Al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Al.DEFAULT=new Al(41943040,Al.DEFAULT_COLLECTION_PERCENTILE,Al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Al.DISABLED=new Al(-1,0,0);class Tl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Tl(0)}static kn(){return new Tl(-1)}}class Il{constructor(){this.changes=new Ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Bi.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Dl{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Rl{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&us(n.mutation,e,ia.empty(),Ei.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Bo()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bo();const r=jo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ro();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=jo();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Bo()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Io();const a=Oo(),o=Oo();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ps)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),us(o.mutation,t,o.mutation.getFieldMask(),Ei.now())):a.set(t.key,ia.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Dl(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Oo();let r=new Zi((e,t)=>e-t),i=Bo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const a=t.get(e);if(null===a)return;let o=n.get(e)||ia.empty();o=i.applyToLocalView(a,o),n.set(e,o);const s=(r.get(i.batchId)||Bo()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),s=r.key,l=r.value,c=Lo();l.forEach(e=>{if(!i.has(e)){const r=ls(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,s,c))}return Bi.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ii.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mo(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Bi.resolve(jo());let o=-1,s=i;return a.next(t=>Bi.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Bi.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,Bo())).next(e=>({batchId:o,changes:Po(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ii(t)).next(e=>{let t=Ro();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let a=Ro();return this.indexManager.getCollectionParents(e,i).next(o=>Bi.forEach(o,o=>{const s=function(e,t){return new uo(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{a=a.insert(e,t)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Oa.newInvalidDocument(r)))});let n=Ro();return e.forEach((e,r)=>{const a=i.get(e);void 0!==a&&us(a.mutation,r,ia.empty(),Ei.now()),Eo(t,r)&&(n=n.insert(e,r))}),n})}}class Pl{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Bi.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Js(e.createTime)}}(t)),Bi.resolve()}getNamedQuery(e,t){return Bi.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:El(e.bundledQuery),readTime:Js(e.readTime)}}(t)),Bi.resolve()}}class jl{constructor(){this.overlays=new Zi(Ii.comparator),this.Ir=new Map}getOverlay(e,t){return Bi.resolve(this.overlays.get(t))}getOverlays(e,t){const n=jo();return Bi.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Bi.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Bi.resolve()}getOverlaysForCollection(e,t,n){const r=jo(),i=t.length+1,a=new Ii(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Bi.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Zi((e,t)=>e-t);const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=jo(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=jo(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Bi.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ss(t,n));let i=this.Ir.get(t);void 0===i&&(i=Bo(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class Ll{constructor(){this.sessionToken=oa.EMPTY_BYTE_STRING}getSessionToken(e){return Bi.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Bi.resolve()}}class Ol{constructor(){this.Tr=new na(Ml.Er),this.dr=new na(Ml.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Ml(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Ml(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Ii(new Ni([])),n=new Ml(t,e),r=new Ml(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ii(new Ni([])),n=new Ml(t,e),r=new Ml(t,e+1);let i=Bo();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ml(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ml{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ii.comparator(e.key,t.key)||Si(e.wr,t.wr)}static Ar(e,t){return Si(e.wr,t.wr)||Ii.comparator(e.key,t.key)}}class Fl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new na(Ml.Er)}checkEmpty(e){return Bi.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new xs(i,t,n,r);this.mutationQueue.push(a);for(const o of r)this.br=this.br.add(new Ml(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Bi.resolve(a)}lookupMutationBatch(e,t){return Bi.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Bi.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Bi.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Bi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ml(t,0),r=new Ml(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),Bi.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new na(Si);return t.forEach(e=>{const t=new Ml(e,0),r=new Ml(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Bi.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ii.isDocumentKey(i)||(i=i.child(""));const a=new Ml(new Ii(i),0);let o=new na(Si);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)},a),Bi.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){si(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Bi.forEach(t.mutations,r=>{const i=new Ml(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Ml(t,0),r=this.br.firstAfterOrEqual(n);return Bi.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bi.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Bl{constructor(e){this.Mr=e,this.docs=new Zi(Ii.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bi.resolve(n?n.document.mutableCopy():Oa.newInvalidDocument(t))}getEntries(e,t){let n=Io();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Oa.newInvalidDocument(e))}),Bi.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Io();const a=t.path,o=new Ii(a.child("")),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){const{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Li(Pi(o),n)<=0||(r.has(o.key)||Eo(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Bi.resolve(i)}getAllFromCollectionGroup(e,t,n,r){oi()}Or(e,t){return Bi.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ul(this)}getSize(e){return Bi.resolve(this.size)}}class Ul extends Il{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Bi.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class zl{constructor(e){this.persistence=e,this.Nr=new Ao(e=>so(e),lo),this.lastRemoteSnapshotVersion=Ci.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ol,this.targetCount=0,this.kr=Tl.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Bi.resolve()}getLastRemoteSnapshotVersion(e){return Bi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bi.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Bi.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Bi.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Tl(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Bi.resolve()}updateTargetData(e,t){return this.Kn(t),Bi.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Bi.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Bi.waitFor(i).next(()=>r)}getTargetCount(e){return Bi.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Bi.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Bi.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Bi.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Bi.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Bi.resolve(n)}containsKey(e,t){return Bi.resolve(this.Br.containsKey(t))}}class Wl{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Wi(0),this.Kr=!1,this.Kr=!0,this.$r=new Ll,this.referenceDelegate=e(this),this.Ur=new zl(this),this.indexManager=new kl,this.remoteDocumentCache=function(e){return new Bl(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new _l(t),this.Gr=new Pl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jl,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Fl(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){ni("MemoryPersistence","Starting transaction:",e);const r=new Vl(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Bi.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Vl extends Mi{constructor(e){super(),this.currentSequenceNumber=e}}class Hl{constructor(e){this.persistence=e,this.Jr=new Ol,this.Yr=null}static Zr(e){return new Hl(e)}get Xr(){if(this.Yr)return this.Yr;throw oi()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Bi.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Bi.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Bi.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bi.forEach(this.Xr,n=>{const r=Ii.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Ci.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Bi.or([()=>Bi.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class ql{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Bo(),r=Bo();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ql(e,t.fromCache,n,r)}}class Gl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Kl{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=tn()?8:Ui(en())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Gl;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(ti()<=mn.DEBUG&&ni("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Bi.resolve()):(ti()<=mn.DEBUG&&ni("QueryEngine","Query:",_o(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(ti()<=mn.DEBUG&&ni("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vo(t))):Bi.resolve())}Yi(e,t){if(po(t))return Bi.resolve(null);let n=vo(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=xo(t,null,"F"),n=vo(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Bo(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const a=this.ts(t,r);return this.ns(t,a,i,n.readTime)?this.Yi(e,xo(t,null,"F")):this.rs(e,a,t,n)}))})))}Zi(e,t,n,r){return po(t)||r.isEqual(Ci.min())?Bi.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(t,i);return this.ns(t,a,n,r)?Bi.resolve(null):(ti()<=mn.DEBUG&&ni("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_o(t)),this.rs(e,a,t,Ri(r,-1)).next(e=>e))})}ts(e,t){let n=new na(ko(e));return t.forEach((t,r)=>{Eo(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return ti()<=mn.DEBUG&&ni("QueryEngine","Using full collection scan to execute query:",_o(t)),this.Ji.getDocumentsMatchingQuery(e,t,ji.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Yl{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Zi(Si),this._s=new Ao(e=>so(e),lo),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rl(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Xl(e,t,n,r){return new Yl(e,t,n,r)}async function Ql(e,t){const n=li(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],a=[];let o=Bo();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:a}))})})}function $l(e){const t=li(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Jl(e,t,n){let r=Bo(),i=Bo();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Io();return n.forEach((n,a)=>{const o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ci.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ni("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)}),{Ps:r,Is:i}})}function Zl(e,t){const n=li(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function ec(e,t){const n=li(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,Bi.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new Sl(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function tc(e,t,n){const r=li(e),i=r.os.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!zi(e))throw e;ni("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(i.target)}function nc(e,t,n){const r=li(e);let i=Ci.min(),a=Bo();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=li(e),i=r._s.get(n);return void 0!==i?Bi.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,vo(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{a=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Ci.min(),n?a:Bo())).next(e=>(rc(r,Co(t),e),{documents:e,Ts:a})))}function rc(e,t,n){let r=e.us.get(t)||Ci.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class ic{constructor(){this.activeTargetIds=zo()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ac{constructor(){this.so=new ic,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ic,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oc{_o(e){}shutdown(){}}class sc{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ni("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ni("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lc=null;function cc(){return null===lc?lc=268435456+Math.round(2147483648*Math.random()):lc++,"0x"+lc.toString(16)}const uc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hc{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const dc="WebChannelConnection";class fc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,i){const a=cc(),o=this.xo(e,t.toUriEncodedString());ni("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,r,i),this.No(e,o,s,n).then(t=>(ni("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t),t=>{throw ii("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t})}Lo(e,t,n,r,i,a){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=uc[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=cc();return new Promise((a,o)=>{const s=new zr;s.setWithCredentials(!0),s.listenOnce(Vr.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case Hr.NO_ERROR:const t=s.getResponseJson();ni(dc,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Hr.TIMEOUT:ni(dc,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ui(ci.DEADLINE_EXCEEDED,"Request time out"));break;case Hr.HTTP_ERROR:const n=s.getStatus();if(ni(dc,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ci).indexOf(t)>=0?t:ci.UNKNOWN}(t.status);o(new ui(e,t.message))}else o(new ui(ci.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ui(ci.UNAVAILABLE,"Connection failed."));break;default:oi()}}finally{ni(dc,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);ni(dc,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=cc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Yr(),o=Kr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");ni(dc,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=a.createWebChannel(c,s);let h=!1,d=!1;const f=new hc({Io:t=>{d?ni(dc,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ni(dc,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),ni(dc,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Wr.EventType.OPEN,()=>{d||(ni(dc,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),p(u,Wr.EventType.CLOSE,()=>{d||(d=!0,ni(dc,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),p(u,Wr.EventType.ERROR,t=>{d||(d=!0,ii(dc,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new ui(ci.UNAVAILABLE,"The operation could not be completed")))}),p(u,Wr.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];si(!!i);const a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ni(dc,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Es[e];if(void 0!==t)return Ns(t)}(t),i=o.message;void 0===n&&(n=ci.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.So(new ui(n,i)),u.close()}else ni(dc,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.bo(i)}}),p(o,Gr.STAT_EVENT,t=>{t.stat===qr.PROXY?ni(dc,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===qr.NOPROXY&&ni(dc,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function pc(){return"undefined"!=typeof document?document:null}function mc(e){return new Ks(e,!0)}class gc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&ni("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class vc{constructor(e,t,n,r,i,a,o,s){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gc(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===ci.RESOURCE_EXHAUSTED?(ri(t.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ci.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new ui(ci.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ni("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ni("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yc extends vc{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:oi()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(si(void 0===t||"string"==typeof t),oa.fromBase64String(t||"")):(si(void 0===t||t instanceof Buffer||t instanceof Uint8Array),oa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){const t=void 0===e.code?ci.UNKNOWN:Ns(e.code);return new ui(t,e.message||"")}(o);n=new Bs(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=rl(e,r.document.name),a=Js(r.document.updateTime),o=r.document.createTime?Js(r.document.createTime):Ci.min(),s=new ja({mapValue:{fields:r.document.fields}}),l=Oa.newFoundDocument(i,a,o,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ms(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=rl(e,r.document),a=r.readTime?Js(r.readTime):Ci.min(),o=Oa.newNoDocument(i,a),s=r.removedTargetIds||[];n=new Ms([],s,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=rl(e,r.document),a=r.removedTargetIds||[];n=new Ms([],a,i,null)}else{if(!("filter"in t))return oi();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,a=new _s(r,i),o=e.targetId;n=new Fs(o,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ci.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ci.min():t.readTime?Js(t.readTime):Ci.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ol(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=co(r)?{documents:ul(e,r)}:{query:hl(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Qs(e,t.resumeToken);const r=Ys(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ci.min())>0){n.readTime=Xs(e,t.snapshotVersion.toTimestamp());const r=Ys(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oi()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ol(this.serializer),t.removeTarget=e,this.a_(t)}}class bc extends vc{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return si(!!e.streamToken),this.lastStreamToken=e.streamToken,si(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){si(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(si(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Js(e.updateTime):Js(t);return n.isEqual(Ci.min())&&(n=Js(t)),new is(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Js(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ol(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>cl(this.serializer,e))};this.a_(t)}}class xc extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ui(ci.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Mo(e,el(t,n),r,a,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ci.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ui(ci.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[o,s]=a;return this.connection.Lo(e,el(t,n),r,o,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ci.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ui(ci.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class wc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(ri(t),this.D_=!1):ni("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Sc{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{Dc(this)&&(ni("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=li(e);t.L_.add(4),await Ec(t),t.q_.set("Unknown"),t.L_.delete(4),await _c(t)}(this))})}),this.q_=new wc(n,r)}}async function _c(e){if(Dc(e))for(const t of e.B_)await t(!0)}async function Ec(e){for(const t of e.B_)await t(!1)}function Cc(e,t){const n=li(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Ic(n)?Tc(n):Qc(n).r_()&&Nc(n,t))}function kc(e,t){const n=li(e),r=Qc(n);n.N_.delete(t),r.r_()&&Ac(n,t),0===n.N_.size&&(r.r_()?r.o_():Dc(n)&&n.q_.set("Unknown"))}function Nc(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ci.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Qc(e).A_(t)}function Ac(e,t){e.Q_.xe(t),Qc(e).R_(t)}function Tc(e){e.Q_=new zs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Qc(e).start(),e.q_.v_()}function Ic(e){return Dc(e)&&!Qc(e).n_()&&e.N_.size>0}function Dc(e){return 0===li(e).L_.size}function Rc(e){e.Q_=void 0}async function Pc(e){e.q_.set("Online")}async function jc(e){e.N_.forEach((t,n)=>{Nc(e,t)})}async function Lc(e,t){Rc(e),Ic(e)?(e.q_.M_(t),Tc(e)):e.q_.set("Unknown")}async function Oc(e,t,n){if(e.q_.set("Online"),t instanceof Bs&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){ni("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Mc(e,n)}else if(t instanceof Ms?e.Q_.Ke(t):t instanceof Fs?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ci.min()))try{const t=await $l(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(oa.EMPTY_BYTE_STRING,r.snapshotVersion)),Ac(e,t);const i=new Sl(r.target,t,n,r.sequenceNumber);Nc(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ni("RemoteStore","Failed to raise snapshot:",t),await Mc(e,t)}}async function Mc(e,t,n){if(!zi(t))throw t;e.L_.add(1),await Ec(e),e.q_.set("Offline"),n||(n=()=>$l(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ni("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await _c(e)})}function Fc(e,t){return t().catch(n=>Mc(e,n,t))}async function Bc(e){const t=li(e),n=$c(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Uc(t);)try{const e=await Zl(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,zc(t,e)}catch(e){await Mc(t,e)}Wc(t)&&Vc(t)}function Uc(e){return Dc(e)&&e.O_.length<10}function zc(e,t){e.O_.push(t);const n=$c(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Wc(e){return Dc(e)&&!$c(e).n_()&&e.O_.length>0}function Vc(e){$c(e).start()}async function Hc(e){$c(e).p_()}async function qc(e){const t=$c(e);for(const n of e.O_)t.m_(n.mutations)}async function Gc(e,t,n){const r=e.O_.shift(),i=ws.from(r,t,n);await Fc(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Bc(e)}async function Kc(e,t){t&&$c(e).V_&&await async function(e,t){if(function(e){return ks(e)&&e!==ci.ABORTED}(t.code)){const n=e.O_.shift();$c(e).s_(),await Fc(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Bc(e)}}(e,t),Wc(e)&&Vc(e)}async function Yc(e,t){const n=li(e);n.asyncQueue.verifyOperationInProgress(),ni("RemoteStore","RemoteStore received new credentials");const r=Dc(n);n.L_.add(3),await Ec(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await _c(n)}async function Xc(e,t){const n=li(e);t?(n.L_.delete(2),await _c(n)):t||(n.L_.add(2),await Ec(n),n.q_.set("Unknown"))}function Qc(e){return e.K_||(e.K_=function(e,t,n){const r=li(e);return r.w_(),new yc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Pc.bind(null,e),Ro:jc.bind(null,e),mo:Lc.bind(null,e),d_:Oc.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Ic(e)?Tc(e):e.q_.set("Unknown")):(await e.K_.stop(),Rc(e))})),e.K_}function $c(e){return e.U_||(e.U_=function(e,t,n){const r=li(e);return r.w_(),new bc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hc.bind(null,e),mo:Kc.bind(null,e),f_:qc.bind(null,e),g_:Gc.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Bc(e)):(await e.U_.stop(),e.O_.length>0&&(ni("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class Jc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,o=new Jc(e,t,a,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ui(ci.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zc(e,t){if(ri("AsyncQueue","".concat(t,": ").concat(e)),zi(e))return new ui(ci.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class eu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ii.comparator(t.key,n.key):(e,t)=>Ii.comparator(e.key,t.key),this.keyedMap=Ro(),this.sortedSet=new Zi(this.comparator)}static emptySet(e){return new eu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new eu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class tu{constructor(){this.W_=new Zi(Ii.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):oi():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class nu{constructor(e,t,n,r,i,a,o,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach(e=>{a.push({type:0,doc:e})}),new nu(e,t,eu.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ru{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class iu{constructor(){this.queries=au(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=li(e),r=n.queries;n.queries=au(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new ui(ci.ABORTED,"Firestore shutting down"))}}function au(){return new Ao(e=>So(e),wo)}async function ou(e,t){const n=li(e);let r=3;const i=t.query;let a=n.queries.get(i);a?!a.H_()&&t.J_()&&(r=2):(a=new ru,r=t.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Zc(e,"Initialization of query '".concat(_o(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,a),a.j_.push(t),t.Z_(n.onlineState),a.z_&&t.X_(a.z_)&&uu(n)}async function su(e,t){const n=li(e),r=t.query;let i=3;const a=n.queries.get(r);if(a){const e=a.j_.indexOf(t);e>=0&&(a.j_.splice(e,1),0===a.j_.length?i=t.J_()?0:1:!a.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lu(e,t){const n=li(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&uu(n)}function cu(e,t,n){const r=li(e),i=r.queries.get(t);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(t)}function uu(e){e.Y_.forEach(e=>{e.next()})}var hu,du;(du=hu||(hu={})).ea="default",du.Cache="cache";class fu{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new nu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hu.Cache}}class pu{constructor(e){this.key=e}}class mu{constructor(e){this.key=e}}class gu{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Bo(),this.mutatedKeys=Bo(),this.Aa=ko(e),this.Ra=new eu(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new tu,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Eo(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(s&&this.Aa(u,s)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(s||l)&&(o=!0)),f&&(u?(a=a.add(u),i=d?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oi()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],s=0===this.da.size&&this.current&&!r?1:0,l=s!==this.Ea;return this.Ea=s,0!==a.length||l?{snapshot:new nu(this.query,e.Ra,i,a,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new tu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Bo(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new mu(e))}),this.da.forEach(n=>{e.has(n)||t.push(new pu(n))}),t}ba(e){this.Ta=e.Ts,this.da=Bo();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return nu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class vu{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class yu{constructor(e){this.key=e,this.va=!1}}class bu{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ao(e=>So(e),wo),this.Ma=new Map,this.xa=new Set,this.Oa=new Zi(Ii.comparator),this.Na=new Map,this.La=new Ol,this.Ba={},this.ka=new Map,this.qa=Tl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function xu(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=zu(e);let i;const a=r.Fa.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await Su(r,t,n,!0),i}async function wu(e,t){const n=zu(e);await Su(n,t,!0,!1)}async function Su(e,t,n,r){const i=await ec(e.localStore,vo(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n);let s;return r&&(s=await _u(e,t,a,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Cc(e.remoteStore,i),s}async function _u(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await nc(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const a=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return Lu(e,t.targetId,s.wa),s.snapshot}(e,t,n,r);const a=await nc(e.localStore,t,!0),o=new gu(t,a.Ts),s=o.ma(a.documents),l=Os.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(s,e.isPrimaryClient,l);Lu(e,n,c.wa);const u=new vu(t,n,o);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Eu(e,t,n){const r=li(e),i=r.Fa.get(t),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(e=>!wo(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kc(r.remoteStore,i.targetId),Pu(r,i.targetId)}).catch(Fi)):(Pu(r,i.targetId),await tc(r.localStore,i.targetId,!0))}async function Cu(e,t){const n=li(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kc(n.remoteStore,r.targetId))}async function ku(e,t){const n=li(e);try{const e=await function(e,t){const n=li(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach((a,s)=>{const l=i.get(s);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,a.removedDocuments,s).next(()=>n.Ur.addMatchingKeys(e,a.addedDocuments,s)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(oa.EMPTY_BYTE_STRING,Ci.min()).withLastLimboFreeSnapshotVersion(Ci.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,a)&&o.push(n.Ur.updateTargetData(e,c))});let s=Io(),l=Bo();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Jl(e,a,t.documentUpdates).next(e=>{s=e.Ps,l=e.Is})),!r.isEqual(Ci.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Bi.waitFor(o).next(()=>a.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(si(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?si(r.va):e.removedDocuments.size>0&&(si(r.va),r.va=!1))}),await Fu(n,e,t)}catch(e){await Fi(e)}}function Nu(e,t,n){const r=li(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=li(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&uu(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Au(e,t,n){const r=li(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),a=i&&i.key;if(a){let e=new Zi(Ii.comparator);e=e.insert(a,Oa.newNoDocument(a,Ci.min()));const n=Bo().add(a),i=new Ls(Ci.min(),new Map,new Zi(Si),e,n);await ku(r,i),r.Oa=r.Oa.remove(a),r.Na.delete(t),Mu(r)}else await tc(r.localStore,t,!1).then(()=>Pu(r,t,n)).catch(Fi)}async function Tu(e,t){const n=li(e),r=t.batch.batchId;try{const e=await function(e,t){const n=li(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,a=i.keys();let o=Bi.resolve();return a.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const a=n.docVersions.get(e);si(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Bo();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Ru(n,r,null),Du(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fu(n,e)}catch(e){await Fi(e)}}async function Iu(e,t,n){const r=li(e);try{const e=await function(e,t){const n=li(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(si(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Ru(r,t,n),Du(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Fu(r,e)}catch(n){await Fi(n)}}function Du(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Ru(e,t,n){const r=li(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Pu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||ju(e,t)})}function ju(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(kc(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Mu(e))}function Lu(e,t,n){for(const r of n)r instanceof pu?(e.La.addReference(r.key,t),Ou(e,r)):r instanceof mu?(ni("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||ju(e,r.key)):oi()}function Ou(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(ni("SyncEngine","New document in limbo: "+n),e.xa.add(r),Mu(e))}function Mu(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ii(Ni.fromString(t)),r=e.qa.next();e.Na.set(r,new yu(n)),e.Oa=e.Oa.insert(n,r),Cc(e.remoteStore,new Sl(vo(fo(n.path)),r,"TargetPurposeLimboResolution",Wi.oe))}}async function Fu(e,t,n){const r=li(e),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((e,s)=>{o.push(r.Ka(s,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=ql.Wi(s.targetId,e);a.push(t)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=li(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Bi.forEach(t,t=>Bi.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Bi.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!zi(e))throw e;ni("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,a))}async function Bu(e,t){const n=li(e);if(!n.currentUser.isEqual(t)){ni("SyncEngine","User change. New user:",t.toKey());const e=await Ql(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new ui(ci.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Fu(n,e.hs)}}function Uu(e,t){const n=li(e),r=n.Na.get(t);if(r&&r.va)return Bo().add(r.key);{let e=Bo();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function zu(e){const t=li(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ku.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Au.bind(null,t),t.Ca.d_=lu.bind(null,t.eventManager),t.Ca.$a=cu.bind(null,t.eventManager),t}function Wu(e){const t=li(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Iu.bind(null,t),t}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Xl(this.persistence,new Kl,e.initialUser,this.serializer)}Ga(e){return new Wl(Hl.Zr,this.serializer)}Wa(e){return new ac}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class Hu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bu.bind(null,this.syncEngine),await Xc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new iu}createDatastore(e){const t=mc(e.databaseInfo.databaseId),n=function(e){return new fc(e)}(e.databaseInfo);return function(e,t,n,r){return new xc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Sc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Nu(this.syncEngine,e,0),sc.D()?new sc:new oc)}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){const s=new bu(e,t,n,r,i,a);return o&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=li(e);ni("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Ec(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Hu.provider={build:()=>new Hu};class qu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Gu{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Jr.UNAUTHENTICATED,this.clientId=wi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{ni("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ni("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(WD){const n=Zc(WD,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ku(e,t){e.asyncQueue.verifyOperationInProgress(),ni("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ql(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Yu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Xu(e);ni("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Yc(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Yc(t.remoteStore,n)),e._onlineComponents=t}async function Xu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ni("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ku(e,e._uninitializedComponentsProvider._offline)}catch(WD){const n=WD;if(!function(e){return"FirebaseError"===e.name?e.code===ci.FAILED_PRECONDITION||e.code===ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await Ku(e,new Vu)}}else ni("FirestoreClient","Using default OfflineComponentProvider"),await Ku(e,new Vu);return e._offlineComponents}async function Qu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ni("FirestoreClient","Using user provided OnlineComponentProvider"),await Yu(e,e._uninitializedComponentsProvider._online)):(ni("FirestoreClient","Using default OnlineComponentProvider"),await Yu(e,new Hu))),e._onlineComponents}function $u(e){return Qu(e).then(e=>e.syncEngine)}async function Ju(e){const t=await Qu(e),n=t.eventManager;return n.onListen=xu.bind(null,t.syncEngine),n.onUnlisten=Eu.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=wu.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Cu.bind(null,t.syncEngine),n}function Zu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new hi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new qu({next:s=>{a.Za(),t.enqueueAndForget(()=>su(e,o));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new ui(ci.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new ui(ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new fu(fo(n.path),a,{includeMetadataChanges:!0,_a:!0});return ou(e,o)}(await Ju(e),e.asyncQueue,t,n,r)),r.promise}function eh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new hi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new qu({next:n=>{a.Za(),t.enqueueAndForget(()=>su(e,o)),n.fromCache&&"server"===r.source?i.reject(new ui(ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new fu(n,a,{includeMetadataChanges:!0,_a:!0});return ou(e,o)}(await Ju(e),e.asyncQueue,t,n,r)),r.promise}function th(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const nh=new Map;function rh(e,t,n){if(!n)throw new ui(ci.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ih(e){if(!Ii.isDocumentKey(e))throw new ui(ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ah(e){if(Ii.isDocumentKey(e))throw new ui(ci.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function oh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":oi()}function sh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ui(ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oh(e);throw new ui(ci.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class lh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ui(ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ui(ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ui(ci.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=th(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ui(ci.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ui(ci.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ui(ci.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ui(ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ui(ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lh(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new fi;switch(e.type){case"firstParty":return new vi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ui(ci.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nh.get(e);t&&(ni("ComponentProvider","Removing Datastore"),nh.delete(e),t.terminate())}(this),Promise.resolve()}}class uh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uh(this.firestore,e,this._query)}}class hh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hh(this.firestore,e,this._key)}}class dh extends uh{constructor(e,t,n){super(e,t,fo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hh(this.firestore,null,new Ii(e))}withConverter(e){return new dh(this.firestore,e,this._path)}}function fh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=cn(e),rh("collection","path",t),e instanceof ch){const n=Ni.fromString(t,...r);return ah(n),new dh(e,null,n)}{if(!(e instanceof hh||e instanceof dh))throw new ui(ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ni.fromString(t,...r));return ah(n),new dh(e.firestore,null,n)}}function ph(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=cn(e),1===arguments.length&&(t=wi.newId()),rh("doc","path",t),e instanceof ch){const n=Ni.fromString(t,...r);return ih(n),new hh(e,null,new Ii(n))}{if(!(e instanceof hh||e instanceof dh))throw new ui(ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ni.fromString(t,...r));return ih(n),new hh(e.firestore,e instanceof dh?e.converter:null,new Ii(n))}}class mh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gc(this,"async_queue_retry"),this.Vu=()=>{const e=pc();e&&ni("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=pc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=pc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new hi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(VD){if(!zi(VD))throw VD;ni("AsyncQueue","Operation failed with retryable error: "+VD)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ri("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Jc.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&oi()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class gh extends ch{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new mh,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mh(e),this._firestoreClient=void 0,await e}}}function vh(e){if(e._terminated)throw new ui(ci.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||yh(e),e._firestoreClient}function yh(e){var t,n,r;const i=e._freezeSettings(),a=function(e,t,n,r){return new pa(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,th(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Gu(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class bh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bh(oa.fromBase64String(e))}catch(e){throw new ui(ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new bh(oa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ui(ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ti(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wh{constructor(e){this._methodName=e}}class Sh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ui(ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ui(ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Si(this._lat,e._lat)||Si(this._long,e._long)}}class _h{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Eh=/^__.*__$/;class Ch{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new fs(e,this.data,t,this.fieldTransforms)}}class kh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ps(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oi()}}class Ah{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ah(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Nh(this.Cu)&&Eh.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Th{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||mc(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ah({Cu:e,methodName:t,qu:n,path:Ti.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(e){const t=e._freezeSettings(),n=mc(e._databaseId);return new Th(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Dh(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(a.merge||a.mergeFields?2:0,t,n,i);Uh("Data must be an object, but it was:",o,r);const s=Fh(r,o);let l,c;if(a.merge)l=new ia(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const i=zh(t,r,n);if(!o.contains(i))throw new ui(ci.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));qh(e,i)||e.push(i)}l=new ia(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Ch(new ja(s),l,c)}class Rh extends wh{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rh}}class Ph extends wh{_toFieldTransform(e){return new rs(e.path,new Xo)}isEqual(e){return e instanceof Ph}}function jh(e,t,n,r){const i=e.Qu(1,t,n);Uh("Data must be an object, but it was:",i,r);const a=[],o=ja.empty();$i(r,(e,r)=>{const s=Vh(t,e,n);r=cn(r);const l=i.Nu(s);if(r instanceof Rh)a.push(s);else{const e=Mh(r,l);null!=e&&(a.push(s),o.set(s,e))}});const s=new ia(a);return new kh(o,s,i.fieldTransforms)}function Lh(e,t,n,r,i,a){const o=e.Qu(1,t,n),s=[zh(t,r,n)],l=[i];if(a.length%2!=0)throw new ui(ci.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<a.length;d+=2)s.push(zh(t,a[d])),l.push(a[d+1]);const c=[],u=ja.empty();for(let d=s.length-1;d>=0;--d)if(!qh(c,s[d])){const e=s[d];let t=l[d];t=cn(t);const n=o.Nu(e);if(t instanceof Rh)c.push(e);else{const r=Mh(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new ia(c);return new kh(u,h,o.fieldTransforms)}function Oh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Mh(n,e.Qu(r?4:3,t))}function Mh(e,t){if(Bh(e=cn(e)))return Uh("Unsupported field value:",t,e),Fh(e,t);if(e instanceof wh)return function(e,t){if(!Nh(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Mh(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=cn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ho(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ei.fromDate(e);return{timestampValue:Xs(t.serializer,n)}}if(e instanceof Ei){const n=new Ei(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xs(t.serializer,n)}}if(e instanceof Sh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bh)return{bytesValue:Qs(t.serializer,e._byteString)};if(e instanceof hh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Zs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof _h)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Wo(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(oh(e)))}(e,t)}function Fh(e,t){const n={};return Ji(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$i(e,(e,r)=>{const i=Mh(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Bh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ei||e instanceof Sh||e instanceof bh||e instanceof hh||e instanceof wh||e instanceof _h)}function Uh(e,t,n){if(!Bh(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=oh(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function zh(e,t,n){if((t=cn(t))instanceof xh)return t._internalPath;if("string"==typeof t)return Vh(e,t);throw Hh("Field path arguments must be of type string or ",e,!1,void 0,n)}const Wh=new RegExp("[~\\*/\\[\\]]");function Vh(e,t,n){if(t.search(Wh)>=0)throw Hh("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xh(...t.split("."))._internalPath}catch(qD){throw Hh("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Hh(e,t,n,r,i){const a=r&&!r.isEmpty(),o=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(a||o)&&(l+=" (found",a&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new ui(ci.INVALID_ARGUMENT,s+e+l)}function qh(e,t){return e.some(e=>e.isEqual(t))}class Gh{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Kh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Kh extends Gh{data(){return super.data()}}function Yh(e,t){return"string"==typeof t?Vh(e,t):t instanceof xh?t._internalPath:t._delegate._internalPath}function Xh(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ui(ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qh{}class $h extends Qh{}function Jh(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Qh&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof ed).length,n=e.filter(e=>e instanceof Zh).length;if(t>1||t>0&&n>0)throw new ui(ci.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Zh extends $h{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Zh(e,t,n)}_apply(e){const t=this._parse(e);return rd(e._query,t),new uh(e.firestore,e.converter,bo(e._query,t))}_parse(e){const t=Ih(e.firestore),n=function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ui(ci.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){nd(o,a);const t=[];for(const n of o)t.push(td(r,e,n));s={arrayValue:{values:t}}}else s=td(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||nd(o,a),s=Oh(n,t,o,"in"===a||"not-in"===a);return Va.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class ed extends Qh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ed(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ha.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)rd(n,i),n=bo(n,i)}(e._query,t),new uh(e.firestore,e.converter,bo(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function td(e,t,n){if("string"==typeof(n=cn(n))){if(""===n)throw new ui(ci.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mo(t)&&-1!==n.indexOf("/"))throw new ui(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ni.fromString(n));if(!Ii.isDocumentKey(r))throw new ui(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ca(e,new Ii(r))}if(n instanceof hh)return Ca(e,n._key);throw new ui(ci.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(oh(n),"."))}function nd(e,t){if(!Array.isArray(e)||0===e.length)throw new ui(ci.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function rd(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ui(ci.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ui(ci.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class id{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ca(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oi()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return $i(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>ca(e.doubleValue));return new _h(i)}convertGeoPoint(e){return new Sh(ca(e.latitude),ca(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=da(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fa(e));default:return null}}convertTimestamp(e){const t=la(e);return new Ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ni.fromString(e);si(wl(n));const r=new ma(n.get(1),n.get(3)),i=new Ii(n.popFirst(5));return r.isEqual(t)||ri("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ad(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class od{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sd extends Gh{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Yh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ld extends sd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class cd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new od(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ld(this._firestore,this._userDataWriter,n.key,n,new od(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ui(ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ld(e._firestore,e._userDataWriter,n.doc.key,n.doc,new od(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ld(e._firestore,e._userDataWriter,t.doc.key,t.doc,new od(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,a=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:ud(t.type),doc:r,oldIndex:i,newIndex:a}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ud(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oi()}}function hd(e){e=sh(e,hh);const t=sh(e.firestore,gh);return Zu(vh(t),e._key).then(n=>gd(t,e,n))}class dd extends id{constructor(e){super(),this.firestore=e}convertBytes(e){return new bh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hh(this.firestore,null,t)}}function fd(e){e=sh(e,uh);const t=sh(e.firestore,gh),n=vh(t),r=new dd(t);return Xh(e._query),eh(n,e._query).then(n=>new cd(t,r,e,n))}function pd(e,t,n){e=sh(e,hh);const r=sh(e.firestore,gh),i=ad(e.converter,t,n);return md(r,[Dh(Ih(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,as.none())])}function md(e,t){return function(e,t){const n=new hi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Wu(e);try{const e=await function(e,t){const n=li(e),r=Ei.now(),i=t.reduce((e,t)=>e.add(t.key),Bo());let a,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=Io(),l=Bo();return n.cs.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{a=i;const o=[];for(const e of t){const t=hs(e,a.get(e.key).overlayedDocument);null!=t&&o.push(new ps(e.key,t,La(t.value.mapValue),as.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Po(a)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Zi(Si)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Fu(r,e.changes),await Bc(r.remoteStore)}catch(e){const t=Zc(e,"Failed to persist write");n.reject(t)}}(await $u(e),t,n)),n.promise}(vh(e),t)}function gd(e,t,n){const r=n.docs.get(t._key),i=new dd(e);return new sd(e,i,t._key,r,new od(n.hasPendingWrites,n.fromCache),t.converter)}class vd{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,t,n){this._verifyNotCommitted();const r=yd(e,this._firestore),i=ad(r.converter,t,n),a=Dh(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,as.none())),this}update(e,t,n){this._verifyNotCommitted();const r=yd(e,this._firestore);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return i="string"==typeof(t=cn(t))||t instanceof xh?Lh(this._dataReader,"WriteBatch.update",r._key,t,n,o):jh(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,as.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yd(e,this._firestore);return this._mutations=this._mutations.concat(new ys(t._key,as.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ui(ci.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yd(e,t){if((e=cn(e)).firestore!==t)throw new ui(ci.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function bd(){return new Ph("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Zr=e}(_r),br(new un("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),o=new gh(new mi(e.getProvider("auth-internal")),new bi(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ui(ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ma(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),kr($r,"4.7.3",e),kr($r,"4.7.3","esm2017")}();const xd="firebasestorage.googleapis.com",wd="storageBucket";class Sd extends rn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Cd(e),"Firebase Storage: ".concat(t," (").concat(Cd(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sd.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var _d,Ed;function Cd(e){return"storage/"+e}function kd(){return new Sd(_d.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Nd(){return new Sd(_d.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ad(){return new Sd(_d.CANCELED,"User canceled the upload/download.")}function Td(e){return new Sd(_d.INVALID_ARGUMENT,e)}function Id(){return new Sd(_d.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(_d||(_d={}));class Dd{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Dd.makeFromUrl(e,t)}catch(VD){return new Dd(e,"")}if(""===n.path)return n;throw r=e,new Sd(_d.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat(t===xd?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Dd(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Sd(_d.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Rd{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Pd(e,t,n,r){if(r<t)throw Td("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Td("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function jd(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Ld(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ed||(Ed={}));class Od{constructor(e,t,n,r,i,a,o,s,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Md(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ed.NO_ERROR,i=n.getStatus();if(!t||Ld(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Ed.ABORT;return void e(!1,new Md(!1,null,t))}const a=-1!==this.successCodes_.indexOf(i);e(!0,new Md(a,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(VD){r(VD)}else if(null!==i){const e=kd();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Id():Ad())}else{r(Nd())}};this.canceled_?t(0,new Md(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,a=null,o=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function d(){a&&clearTimeout(a)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let a;r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout(()=>{o=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Md{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Fd(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Bd{constructor(e,t){this._service=e,this._location=t instanceof Dd?t:Dd.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bd(e,t)}get root(){const e=new Dd(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fd(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Dd(this._location.bucket,e);return new Bd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Sd(_d.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ud(e,t){const n=null===t||void 0===t?void 0:t[wd];return null==n?null:Dd.makeFromBucketSpec(n,e)}class zd{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=xd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Dd.makeFromBucketSpec(r,this._host):Ud(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Dd.makeFromBucketSpec(this._url,e):this._bucket=Ud(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pd("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pd("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bd(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Rd(Id());{const a=function(e,t,n,r,i,a){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=jd(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Od(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Wd="@firebase/storage",Vd="0.13.2",Hd="storage";function qd(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new zd(r,i,a,n,_r)}br(new un(Hd,qd,"PUBLIC").setMultipleInstances(!0)),kr(Wd,Vd,""),kr(Wd,Vd,"esm2017");const Gd=Er({apiKey:"AIzaSyANO2d-RUXV0x5fvTjRT1UkpssP-T_Qz1Q",authDomain:"daily-tracker-a4092.firebaseapp.com",projectId:"daily-tracker-a4092",storageBucket:"daily-tracker-a4092.appspot.com",messagingSenderId:"1023352927583",appId:"1:1023352927583:web:2f0234b40a448390b6b2ea",measurementId:"G-G9GDW34WTS"}),Kd=function(e,t){const n="string"==typeof e?e:t||"(default)",r=xr("object"==typeof e?e:Cr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Qt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const a=(e=sh(e,ch))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Jr.MOCK_USER;else{t=Zt(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new ui(ci.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Jr(a)}e._authCredentials=new pi(new di(t,n))}}(r,...e)}return r}(Gd);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr(),t=arguments.length>1?arguments[1]:void 0;e=cn(e);const n=xr(e,Hd).getImmediate({identifier:t}),r=Qt("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Zt(i,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(Gd);const Yd=new class{constructor(){this.memoryCache=new Map,this.CACHE_TIMEOUT=18e5,this.STATIC_CACHE_TIMEOUT=6048e5,this.PDF_CACHE_PREFIX="seed-pdf-",this.USER_CACHE_PREFIX="seed-user-",this.ASSET_CACHE_PREFIX="seed-asset-",this.CACHE_VERSION_KEY="cache_version"}setMemoryCache(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.CACHE_TIMEOUT;this.memoryCache.set(e,{data:t,timestamp:Date.now(),version:kY,timeout:n})}getMemoryCache(e){const t=this.memoryCache.get(e);if(!t)return null;const n=t.timeout||this.CACHE_TIMEOUT;return Date.now()-t.timestamp>n||t.version!==kY?(this.memoryCache.delete(e),null):t.data}clearMemoryCache(){this.memoryCache.clear()}setLocalCache(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.CACHE_TIMEOUT;try{const i=n+e,a={data:t,timestamp:Date.now(),version:kY,timeout:r};return localStorage.setItem(i,JSON.stringify(a)),!0}catch(i){return console.error("Error setting local cache:",i),!1}}getLocalCache(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const n=t+e,r=localStorage.getItem(n);if(!r)return null;const{data:i,timestamp:a,version:o,timeout:s=this.CACHE_TIMEOUT}=JSON.parse(r);return Date.now()-a>s||o!==kY?(localStorage.removeItem(n),null):i}catch(n){return console.error("Error getting local cache:",n),null}}clearCacheOnVersionChange(e,t){if(!e||!t||0!==AY(t,e)){console.log("Clearing cache due to version change: ".concat(e," -> ").concat(t)),this.clearMemoryCache();for(let e=localStorage.length-1;e>=0;e--){const t=localStorage.key(e);t&&(t.startsWith(this.PDF_CACHE_PREFIX)||t.startsWith(this.USER_CACHE_PREFIX)||t.startsWith(this.ASSET_CACHE_PREFIX))&&localStorage.removeItem(t)}return localStorage.setItem(this.CACHE_VERSION_KEY,t),!0}return!1}clearExpiredCache(){const e=localStorage.getItem(this.CACHE_VERSION_KEY);if(e===kY){for(const[e,t]of this.memoryCache.entries())(Date.now()-t.timestamp>this.CACHE_TIMEOUT||t.version!==kY)&&this.memoryCache.delete(e);for(let e=localStorage.length-1;e>=0;e--){const n=localStorage.key(e);if(n&&(n.startsWith(this.PDF_CACHE_PREFIX)||n.startsWith(this.USER_CACHE_PREFIX)||n.startsWith(this.ASSET_CACHE_PREFIX)))try{const e=JSON.parse(localStorage.getItem(n));(Date.now()-e.timestamp>this.CACHE_TIMEOUT||e.version!==kY)&&localStorage.removeItem(n)}catch(t){localStorage.removeItem(n)}}}else this.clearCacheOnVersionChange(e,kY)}initCacheSystem(){const e=localStorage.getItem(this.CACHE_VERSION_KEY);e!==kY&&this.clearCacheOnVersionChange(e,kY),setInterval(()=>this.clearExpiredCache(),36e5)}async cachePDF(e,t){return this.setMemoryCache(e,t),this.setLocalCache(e,t,this.PDF_CACHE_PREFIX)}async getPDF(e){const t=this.getMemoryCache(e);if(t)return t;const n=this.getLocalCache(e,this.PDF_CACHE_PREFIX);return n?(this.setMemoryCache(e,n),n):null}async cacheUserData(e,t){return this.setMemoryCache(e,t),this.setLocalCache(e,t,this.USER_CACHE_PREFIX)}async getUserData(e){const t=this.getMemoryCache(e);if(t)return t;const n=this.getLocalCache(e,this.USER_CACHE_PREFIX);if(n)return this.setMemoryCache(e,n),n;try{const t=await hd(ph(Kd,"users",e));if(t.exists()){const n=t.data();return await this.cacheUserData(e,n),n}}catch(r){console.error("Error fetching user data:",r)}return null}async cacheAsset(e,t){return this.setMemoryCache(e,t,this.STATIC_CACHE_TIMEOUT),this.setLocalCache(e,t,this.ASSET_CACHE_PREFIX,this.STATIC_CACHE_TIMEOUT)}async getAsset(e){const t=this.getMemoryCache(e);if(t)return t;const n=this.getLocalCache(e,this.ASSET_CACHE_PREFIX);return n?(this.setMemoryCache(e,n),n):null}getCacheSize(){let e=0;for(const[t,n]of this.memoryCache.entries())e+=JSON.stringify(n).length;for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);(n.startsWith(this.PDF_CACHE_PREFIX)||n.startsWith(this.USER_CACHE_PREFIX)||n.startsWith(this.ASSET_CACHE_PREFIX))&&(e+=localStorage.getItem(n).length)}return e}static setCache(e,t){const n={data:t,timestamp:Date.now()};localStorage.setItem(e,JSON.stringify(n))}static getCache(e){const t=localStorage.getItem(e);if(!t)return null;const{data:n,timestamp:r}=JSON.parse(t);return Date.now()-r>Ft.EXPIRY_TIME?(localStorage.removeItem(e),null):n}static clearCache(e){localStorage.removeItem(e)}static clearAllCache(){Object.values(Ft.PREFIX).forEach(e=>{Object.keys(localStorage).filter(t=>t.startsWith(e)).forEach(e=>localStorage.removeItem(e))})}static getCacheKey(e,t){return"".concat(e).concat(t)}},Xd=Yd;const Qd=class{static async fetchWithCache(e,t){try{const n=Yd.getLocalCache(t);if(n)return n;const r=await fetch(e);if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));const i=await r.json();return Yd.setLocalCache(t,i),i}catch(n){throw console.error("Fetch error:",n),n}}static async fetchWithFallback(e,t,n,r){try{const o=Yd.getLocalCache(r);if(o)return console.log("[DataService] Returning cached data for:",r),o;try{console.log("[DataService] Trying local fetch:",e);const t=await fetch(e);if(t.ok){console.log("[DataService] Local fetch successful");const e=await t.json();return Yd.setLocalCache(r,e),e}console.log("[DataService] Local fetch failed, trying GitHub API")}catch(i){console.log("[DataService] Local fetch error:",i)}try{console.log("[DataService] Attempting GitHub API fetch");const e=atob(Object.values(Ot).join("")),n=await fetch(t,{headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(e)}});if(n.ok){const e=await n.json();console.log("[DataService] GitHub API fetch successful");const t=JSON.parse(atob(e.content));return Yd.setLocalCache(r,t),t}console.log("[DataService] GitHub API fetch failed, trying raw GitHub")}catch(a){console.log("[DataService] GitHub API error:",a)}console.log("[DataService] Attempting raw GitHub fetch:",n);const s=await fetch(n);if(!s.ok)throw new Error("Failed to fetch data: ".concat(s.status));console.log("[DataService] Raw GitHub fetch successful");const l=await s.json();return Yd.setLocalCache(r,l),l}catch(o){throw console.error("[DataService] All fetch attempts failed:",o),o}}static async getCollegeData(e,t,n){const r="".concat(Ft.PREFIX[t.toUpperCase()]).concat(e,"_").concat(n||"all");if(!e)throw new Error("College parameter is required");if(!t)throw new Error("File type parameter is required");if(t===zt&&!n)throw new Error("Year parameter is required for access data");const i={local:Bt.LOCAL.getCollegeData(e,n,t),githubApi:Bt.GITHUB_API.getCollegeData(e,n,t),github:Bt.GITHUB.getCollegeData(e,n,t)};return console.log("[DataService] Fetching ".concat(t," data for college: ").concat(e,", year: ").concat(n||"all",", URLs:"),i),await this.fetchWithFallback(i.local,i.githubApi,i.github,r)}static async getUserCredentials(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"student";const t=Bt.LOCAL.STAFF_PASSWORD,n=Bt.GITHUB_API.STAFF_PASSWORD,r=Bt.GITHUB.STAFF_PASSWORD,i="credentials_".concat(e);return await this.fetchWithFallback(t,n,r,i)}static async validateCredentials(e,t,n,r,i){try{if(console.log("[DataService] Validating credentials for:",{email:e,role:n,college:r||"N/A",year:i||"N/A"}),"staff"===n.toLowerCase()){console.log("[DataService] Staff login - Fetching from staff endpoints");const n=await this.fetchWithFallback(Bt.LOCAL.STAFF_PASSWORD,Bt.GITHUB_API.STAFF_PASSWORD,Bt.GITHUB.STAFF_PASSWORD,"staff_credentials");console.log("[DataService] Staff data received:",n);const r=n.find(n=>n.Email===e&&n.Password===t);return console.log("[DataService] Staff validation result:",r?"Found":"Not Found"),r?Fe(Fe({},r),{},{isAuthenticated:!0}):null}{console.log("[DataService] Student login - Fetching profiles for college: ".concat(r,", year: ").concat(i));const n=await this.getCollegeData(r,Ut,i);console.log("[DataService] Profiles received:",n);const a=n.find(t=>t.Email===e);return console.log("[DataService] Student profile found:",a?"Yes":"No"),a&&a.Password===t?(console.log("[DataService] Student validation successful for: ".concat(e)),Fe(Fe({},a),{},{isAuthenticated:!0})):(console.log("[DataService] Student validation failed:",{profileFound:!!a,passwordMatch:!!a&&a.Password===t}),null)}}catch(a){throw console.error("Validation error:",a),a}}static async getUserScores(e,t){try{const n=JSON.parse(localStorage.getItem("auth_data")||"{}"),r=n.Year,i=(await this.getCollegeData(t,Wt,r)).find(t=>t["Hackerrank Mail"]===e)||null;if(i){const e=Fe(Fe({},n),{},{scores:i});localStorage.setItem("auth_data",JSON.stringify(e))}return i}catch(n){return console.error("Error fetching scores:",n),null}}static async getAccessControl(){try{const e="access_control_data",t=Yd.getLocalCache(e);if(t)return console.log("[DataService] Returning cached access control data"),t;const n={local:Bt.LOCAL.ACCESS_CONTROL,githubApi:Bt.GITHUB_API.ACCESS_CONTROL,github:Bt.GITHUB.ACCESS_CONTROL};console.log("[DataService] Fetching access control data");return await this.fetchWithFallback(n.local,n.githubApi,n.github,e)}catch(e){throw console.error("[DataService] Error fetching access control:",e),e}}static async getUserAccess(e,t){try{var n,r,i,a;console.log("[DataService] getUserAccess called with email:",e,"college:",t);const o=JSON.parse(localStorage.getItem("auth_data")||"{}");if(o.access)return console.log("[DataService] Returning access data from auth_data in localStorage"),o.access;const s=o.Year,l=o.Department;if(!s||!l)throw console.error("[DataService] Missing year or department in auth data"),new Error("Year and department information is missing. Please log in again.");const c=await this.getAccessControl(),u=null===c||void 0===c||null===(n=c.access_control)||void 0===n||null===(r=n.colleges)||void 0===r||null===(i=r[t])||void 0===i||null===(a=i[s])||void 0===a?void 0:a[l];if(!u)throw console.error("[DataService] No access configuration found for:",{college:t,year:s,department:l}),new Error("No access configuration found for your department. Please contact support.");const h=new Date,d=new Date(u.batch_start),f=new Date(u.batch_end);if(h<d)throw new Error("Your batch access will begin on ".concat(d.toLocaleDateString()));if(h>f)throw new Error("Your batch access ended on ".concat(f.toLocaleDateString()));const p={user_info:{email:e,year:s,department:l,college:t,batch_start:u.batch_start,batch_end:u.batch_end},allowed_modules:u.allowed_modules,assessment_controls:u.assessment_controls||{}},m=Fe(Fe({},o),{},{access:p});return localStorage.setItem("auth_data",JSON.stringify(m)),p}catch(o){throw console.error("[DataService] Error in getUserAccess:",o),o}}static async checkModuleAccess(e){try{const t=JSON.parse(localStorage.getItem("auth_data")||"{}").access;return!(null===t||void 0===t||!t.allowed_modules)&&t.allowed_modules.includes(e)}catch(t){return console.error("[DataService] Error checking module access:",t),!1}}static async checkAssessmentAccess(e){try{var t;const n=JSON.parse(localStorage.getItem("auth_data")||"{}").access;if(null===n||void 0===n||null===(t=n.assessment_controls)||void 0===t||!t[e])return{allowed:!1,reason:"Assessment not configured"};const r=n.assessment_controls[e],i=new Date,a=new Date(r.start_time),o=new Date(r.end_time);return"scheduled"!==r.status?{allowed:!1,reason:"Assessment ".concat(r.status)}:i<a?{allowed:!1,reason:"Assessment starts at ".concat(a.toLocaleString()),startTime:a,endTime:o,duration:r.duration_minutes}:i>o?{allowed:!1,reason:"Assessment ended at ".concat(o.toLocaleString())}:{allowed:!0,startTime:a,endTime:o,duration:r.duration_minutes,attemptsAllowed:r.attempts_allowed}}catch(n){return console.error("[DataService] Error checking assessment access:",n),{allowed:!1,reason:"Error checking assessment access"}}}static async getPortalLinks(){try{console.log("getPortalLinks called");const e=sessionStorage.getItem("portal_links");if(e)try{const t=JSON.parse(e);return console.log("Returning portal links from sessionStorage"),t}catch(VD){console.error("Error parsing portal links from sessionStorage:",VD)}const t=localStorage.getItem("portal_links");if(t)try{const e=JSON.parse(t);return console.log("Found portal links in localStorage, migrating to sessionStorage"),sessionStorage.setItem("portal_links",t),localStorage.removeItem("portal_links"),console.log("Migrated portal links from localStorage to sessionStorage"),e}catch(VD){console.error("Error parsing portal links from localStorage:",VD)}const n="portal_links",r=Yd.getLocalCache(n);if(r)return console.log("Found portal links in legacy cache system with key:",n),sessionStorage.setItem("portal_links",JSON.stringify(r)),console.log("Migrated portal links to sessionStorage"),Yd.clearCache(n),console.log("Cleared legacy cache entry"),r;console.log("No cached portal links found, fetching from server");const i="https://raw.githubusercontent.com/seeditDev/SEEDDB/main/portalLinks/portalLinks.json";console.log("Fetching portal links from URL:",i);const a=await fetch(i);if(!a.ok)throw console.error("Portal links HTTP error, status:",a.status),new Error("Failed to fetch portal links: HTTP error ".concat(a.status));const o=await a.json();return console.log("Portal links received:",o),sessionStorage.setItem("portal_links",JSON.stringify(o)),console.log("Stored portal links in sessionStorage"),o}catch(e){throw console.error("Error in getPortalLinks:",e),e}}static async getUserData(e){const t="auth_".concat(e);return Yd.getLocalCache(t)}static clearUserData(e){const t="auth_".concat(e);Yd.clearCache(t)}},$d={student:"/student/dashboard",staff:"/staff/dashboard"},Jd=()=>{const[e,n]=(0,t.useState)("student"),[r,i]=(0,t.useState)(""),[a,o]=(0,t.useState)(""),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[h,d]=(0,t.useState)(""),[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(!1),[b,x]=(0,t.useState)(""),[w,S]=(0,t.useState)(!1),[_,E]=(0,t.useState)([]),[C,k]=(0,t.useState)(""),[N,A]=(0,t.useState)(!1),[T,I]=(0,t.useState)(Object.entries(Lt)),D=ne();(0,t.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("rememberedUser"));e&&(i(e.username),o(e.password),n(e.role),"student"===e.role&&(l(e.college),e.college&&x(Mt[e.college]),u(e.year),e.year&&k(Lt[e.year])),g(!0)),E(Object.entries(Mt)),I(Object.entries(Lt))},[]);const R=e=>""===(e=(e||b).trim().toLowerCase())?Object.entries(Mt):Object.entries(Mt).filter(t=>{let[n,r]=t;return r.toLowerCase().includes(e)||n.toLowerCase().includes(e)}),P=e=>""===(e=e.trim().toLowerCase())?Object.entries(Lt):Object.entries(Lt).filter(t=>{let[n,r]=t;return r.toLowerCase().includes(e)||n.toLowerCase().includes(e)}),j=e=>{n(e),"staff"===e&&l(""),i(""),o(""),d(""),p(!1)};return(0,t.useEffect)(()=>{const e=e=>{e.target.closest(".search-container")||S(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,t.useEffect)(()=>{const e=e=>{e.target.closest(".year-search-container")||A(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,Be.jsxs)("div",{className:"login-page",children:[(0,Be.jsx)("div",{className:"background-section",children:(0,Be.jsxs)("div",{className:"background-content",children:[(0,Be.jsxs)("div",{className:"background-logo",children:["SEED",(0,Be.jsx)("span",{})]}),(0,Be.jsxs)("div",{className:"welcome-text",children:[(0,Be.jsx)("h2",{children:"Welcome Back to SEED!"}),(0,Be.jsx)("p",{children:"Where every login brings you closer to your goals."}),(0,Be.jsx)("p",{className:"login-prompt",children:"Log in to continue your journey"}),(0,Be.jsx)("p",{className:"empowerment-text",children:"Empower yourself with the tools, knowledge, and opportunities to succeed."})]})]})}),(0,Be.jsx)("div",{className:"form-section",children:(0,Be.jsxs)("div",{className:"container",children:[(0,Be.jsx)("div",{className:"mobile-logo",children:(0,Be.jsxs)("div",{className:"logo-text",children:["SEED",(0,Be.jsx)("span",{className:"dot"})]})}),(0,Be.jsx)("h1",{children:"Welcome back!"}),(0,Be.jsx)("p",{style:{textAlign:"center",color:"#64748b",marginBottom:"2rem"},children:"Login to your account"}),(0,Be.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r&&a){if("student"===e){if(!s)return void(b.trim()?d("Please select a college from the dropdown"):d("Please select a college"));if(!c)return void d("Please select your batch year")}try{y(!0);const t=await Qd.validateCredentials(r,a,e,s,c);if(t){Object.keys(localStorage).forEach(e=>{e.startsWith("college_")&&localStorage.removeItem(e)}),m&&localStorage.setItem("rememberedUser",JSON.stringify(Fe({username:r,password:a,role:e},"student"===e&&{college:s,year:c})));const n=Fe({Email:t.Email,Name:t.Name,Role:t.Role,College:t.College},"student"===e&&{Department:t.Department,Year:t.Year,"Roll Number":t["Roll Number"],"Hackerrank Mail":t["Hackerrank Mail"],"Hackerrank ID":t["Hackerrank ID"]});localStorage.setItem("auth_data",JSON.stringify(n)),localStorage.setItem("role",e),p(!0),setTimeout(()=>{p(!1),D($d[e])},2e3)}else d("Invalid credentials")}catch(h){console.error("Login error:",h),d("Login failed. Please try again.")}finally{y(!1)}}else d("Please fill in username and password")},className:"animate-slide-up",children:[(0,Be.jsxs)("div",{className:"role-selection",children:[(0,Be.jsx)("button",{type:"button",className:"student"===e?"role-btn selected":"role-btn",onClick:()=>j("student"),children:"Student"}),(0,Be.jsx)("button",{type:"button",className:"staff"===e?"role-btn selected":"role-btn",onClick:()=>j("staff"),children:"Staff"})]}),"student"===e&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"input-group animate-fade-in",children:(0,Be.jsxs)("div",{className:"search-container login-search-wrapper",style:{position:"relative",width:"100%",margin:"0"},children:[(0,Be.jsx)("input",{type:"text",className:"login-search-box",placeholder:"Search college name",value:b,onChange:e=>{const t=e.target.value;x(t),S(!0),E(R(t))},onClick:()=>{S(!0),b.trim()||E(Object.entries(Mt))},onFocus:()=>{S(!0),b.trim()||E(Object.entries(Mt))},style:{width:"100%",padding:"0.9rem 1rem",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",paddingRight:"30px",backgroundColor:"#f5f7fa",color:"#333"},required:"student"===e}),(0,Be.jsx)("div",{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #4CAF50",pointerEvents:"none"}}),(0,Be.jsxs)("div",{className:"suggestions",style:{display:w?"block":"none",position:"absolute",width:"100%",zIndex:1e3},children:[_.map(e=>{let[t,n]=e;return(0,Be.jsx)("div",{className:"suggestion-item",onClick:()=>(e=>{l(e),x(Mt[e]),S(!1)})(t),style:{backgroundColor:t===s?"#e8f5e9":"white",color:t===s?"#4CAF50":"#333",fontWeight:t===s?"bold":"normal"},children:n},t)}),0===_.length&&(0,Be.jsx)("div",{style:{padding:"10px",textAlign:"center",color:"#999",fontStyle:"italic"},children:"No matches found"})]})]})}),(0,Be.jsx)("div",{className:"input-group animate-fade-in",children:(0,Be.jsxs)("div",{className:"search-container year-search-container",style:{position:"relative",width:"100%",margin:"0"},children:[(0,Be.jsx)("input",{type:"text",className:"login-search-box",placeholder:"Search batch year",value:C,onChange:e=>{const t=e.target.value;k(t),A(!0),I(P(t))},onClick:()=>{A(!0),C.trim()||I(Object.entries(Lt))},onFocus:()=>{A(!0),C.trim()||I(Object.entries(Lt))},style:{width:"100%",padding:"0.9rem 1rem",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",paddingRight:"30px",backgroundColor:"#f5f7fa",color:"#333"},required:"student"===e}),(0,Be.jsx)("div",{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #4CAF50",pointerEvents:"none"}}),(0,Be.jsxs)("div",{className:"suggestions",style:{display:N?"block":"none",position:"absolute",width:"100%",zIndex:1e3},children:[T.map(e=>{let[t,n]=e;return(0,Be.jsx)("div",{className:"suggestion-item",onClick:()=>(e=>{u(e),k(Lt[e]),A(!1)})(t),style:{backgroundColor:t===c?"#e8f5e9":"white",color:t===c?"#4CAF50":"#333",fontWeight:t===c?"bold":"normal"},children:n},t)}),0===T.length&&(0,Be.jsx)("div",{style:{padding:"10px",textAlign:"center",color:"#999",fontStyle:"italic"},children:"No matches found"})]})]})})]}),(0,Be.jsx)("div",{className:"input-group",children:(0,Be.jsxs)("div",{className:"input-with-icon",children:[(0,Be.jsx)(It,{className:"input-icon"}),(0,Be.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Email",style:{width:"100%",padding:"0.9rem 1rem",paddingLeft:"40px",backgroundColor:"#f5f7fa",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem"},required:!0})]})}),(0,Be.jsx)("div",{className:"input-group",children:(0,Be.jsxs)("div",{className:"input-with-icon",children:[(0,Be.jsx)(bt,{className:"input-icon"}),(0,Be.jsx)("input",{type:"password",value:a,onChange:e=>o(e.target.value),placeholder:"Password",style:{width:"100%",padding:"0.9rem 1rem",paddingLeft:"40px",backgroundColor:"#f5f7fa",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem"},required:!0})]})}),(0,Be.jsxs)("div",{className:"remember-me",children:[(0,Be.jsx)("input",{type:"checkbox",checked:m,onChange:()=>g(!m),id:"remember-me-checkbox"}),(0,Be.jsx)("label",{htmlFor:"remember-me-checkbox",children:"Remember Me"})]}),(0,Be.jsx)("button",{type:"submit",disabled:v,className:"login-button",children:v?"Logging in...":"Login"}),h&&(0,Be.jsx)("div",{className:"error",children:h})]}),(0,Be.jsx)("footer",{className:"footer",children:(0,Be.jsx)("p",{children:"Copyright \xa9 2023-2025. All rights reserved to SEED Innovating Technologies and Educational Services (SEED-IT)."})})]})}),f&&(0,Be.jsx)("div",{className:"modal-overlay",children:(0,Be.jsxs)("div",{className:"success-modal",children:[(0,Be.jsx)(it,{className:"success-icon"}),(0,Be.jsx)("p",{children:"Welcome to SEED!"}),(0,Be.jsx)("p",{className:"redirect-text",children:"Redirecting to dashboard..."})]})})]})};function Zd(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function ef(e,t){if(null==e)return{};var n,r,i=Zd(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tf=n(8139),nf=n.n(tf);const rf=!("undefined"===typeof window||!window.document||!window.document.createElement);var af=!1,of=!1;try{var sf={get passive(){return af=!0},get once(){return of=af=!0}};rf&&(window.addEventListener("test",sf,sf),window.removeEventListener("test",sf,!0))}catch(VD){}const lf=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!of){var i=r.once,a=r.capture,o=n;!of&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,af?r:a)}e.addEventListener(t,n,r)};function cf(e){return e&&e.ownerDocument||document}const uf=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var hf;function df(e){if((!hf&&0!==hf||e)&&rf){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),hf=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return hf}const ff=function(e){const n=(0,t.useRef)(e);return(0,t.useEffect)(()=>{n.current=e},[e]),n};function pf(e){const n=ff(e);return(0,t.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}const mf=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const gf=function(e,n){return(0,t.useMemo)(()=>function(e,t){const n=mf(e),r=mf(t);return e=>{n&&n(e),r&&r(e)}}(e,n),[e,n])};function vf(e){const n=function(e){const n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)(()=>()=>n.current(),[])}function yf(e,t){return function(e){var t=cf(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var bf=/([A-Z])/g;var xf=/^ms-/;function wf(e){return function(e){return e.replace(bf,"-$1").toLowerCase()}(e).replace(xf,"-ms-")}var Sf=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const _f=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(wf(t))||yf(e).getPropertyValue(wf(t));Object.keys(t).forEach(function(i){var a=t[i];a||0===a?!function(e){return!(!e||!Sf.test(e))}(i)?n+=wf(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(wf(i))}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};const Ef=function(e,t,n,r){return lf(e,t,n,r),function(){uf(e,t,n,r)}};function Cf(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout(function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)},t+n),a=Ef(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),a()}}function kf(e,t,n,r){null==n&&(n=function(e){var t=_f(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Cf(e,n,r),a=Ef(e,"transitionend",t);return function(){i(),a()}}function Nf(e){void 0===e&&(e=cf());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(VD){return e.body}}function Af(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Tf(e){const n=function(e){const n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)(()=>()=>n.current(),[])}const If=function(e){const n=(0,t.useRef)(e);return(0,t.useEffect)(()=>{n.current=e},[e]),n};function Df(e){const n=If(e);return(0,t.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}const Rf=(Pf="modal-open","".concat("data-rr-ui-").concat(Pf));var Pf;const jf=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(_f(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(Rf,""),_f(r,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Rf),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},Lf=(0,t.createContext)(rf?window:void 0);Lf.Provider;function Of(){return(0,t.useContext)(Lf)}const Mf=(e,t)=>rf?null==e?(t||cf()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const Ff=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const Bf=function(e,n){return(0,t.useMemo)(()=>function(e,t){const n=Ff(e),r=Ff(t);return e=>{n&&n(e),r&&r(e)}}(e,n),[e,n])},Uf="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,zf="undefined"!==typeof document||Uf?t.useLayoutEffect:t.useEffect;function Wf(e){if(!e||"function"===typeof e)return null;const{major:n}=function(){const e=t.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}();return n>=19?e.props.ref:e.ref}const Vf=function(e){let{children:n,in:r,onExited:i,mountOnEnter:a,unmountOnExit:o}=e;const s=(0,t.useRef)(null),l=(0,t.useRef)(r),c=Df(i);(0,t.useEffect)(()=>{r?l.current=!0:c(s.current)},[r,c]);const u=Bf(s,Wf(n)),h=(0,t.cloneElement)(n,{ref:u});return r?h:o||!l.current&&a?null:h},Hf=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const qf=["component"];const Gf=t.forwardRef((e,n)=>{let{component:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,qf);const a=function(e){let{onEnter:n,onEntering:r,onEntered:i,onExit:a,onExiting:o,onExited:s,addEndListener:l,children:c}=e,u=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Hf);const h=(0,t.useRef)(null),d=Bf(h,Wf(c)),f=e=>t=>{e&&h.current&&e(h.current,t)},p=(0,t.useCallback)(f(n),[n]),m=(0,t.useCallback)(f(r),[r]),g=(0,t.useCallback)(f(i),[i]),v=(0,t.useCallback)(f(a),[a]),y=(0,t.useCallback)(f(o),[o]),b=(0,t.useCallback)(f(s),[s]),x=(0,t.useCallback)(f(l),[l]);return Object.assign({},u,{nodeRef:h},n&&{onEnter:p},r&&{onEntering:m},i&&{onEntered:g},a&&{onExit:v},o&&{onExiting:y},s&&{onExited:b},l&&{addEndListener:x},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:d})):(0,t.cloneElement)(c,{ref:d})})}(i);return(0,Be.jsx)(r,Object.assign({ref:n},a))}),Kf=Gf;function Yf(e){let{children:n,in:r,onExited:i,onEntered:a,transition:o}=e;const[s,l]=(0,t.useState)(!r);r&&s&&l(!1);const c=function(e){let{in:n,onTransition:r}=e;const i=(0,t.useRef)(null),a=(0,t.useRef)(!0),o=Df(r);return zf(()=>{if(!i.current)return;let e=!1;return o({in:n,element:i.current,initial:a.current,isStale:()=>e}),()=>{e=!0}},[n,o]),zf(()=>(a.current=!1,()=>{a.current=!0}),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(o(e)).then(()=>{e.isStale()||(e.in?null==a||a(e.element,e.initial):(l(!0),null==i||i(e.element)))},t=>{throw e.in||l(!0),t})}}),u=Bf(c,Wf(n));return s&&!r?null:(0,t.cloneElement)(n,{ref:u})}function Xf(e,t,n){return e?(0,Be.jsx)(Kf,Object.assign({},n,{component:e})):t?(0,Be.jsx)(Yf,Object.assign({},n,{transition:t})):(0,Be.jsx)(Vf,Object.assign({},n))}const Qf=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let $f;function Jf(e){const n=Of(),r=e||function(e){return $f||($f=new jf({ownerDocument:null==e?void 0:e.document})),$f}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,t.useCallback)(e=>{i.current.dialog=e},[]),setBackdropRef:(0,t.useCallback)(e=>{i.current.backdrop=e},[])})}const Zf=(0,t.forwardRef)((e,n)=>{let{show:r=!1,role:i="dialog",className:a,style:o,children:s,backdrop:l=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:h,transition:d,runTransition:f,backdropTransition:p,runBackdropTransition:m,autoFocus:g=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:b,renderDialog:x,renderBackdrop:w=e=>(0,Be.jsx)("div",Object.assign({},e)),manager:S,container:_,onShow:E,onHide:C=()=>{},onExit:k,onExited:N,onExiting:A,onEnter:T,onEntering:I,onEntered:D}=e,R=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Qf);const P=Of(),j=function(e,n){const r=Of(),[i,a]=(0,t.useState)(()=>Mf(e,null==r?void 0:r.document));if(!i){const t=Mf(e);t&&a(t)}return(0,t.useEffect)(()=>{n&&i&&n(i)},[n,i]),(0,t.useEffect)(()=>{const t=Mf(e);t!==i&&a(t)},[e,i]),i}(_),L=Jf(S),O=function(){const e=(0,t.useRef)(!0),n=(0,t.useRef)(()=>e.current);return(0,t.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),n.current}(),M=function(e){const n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{n.current=e}),n.current}(r),[F,B]=(0,t.useState)(!r),U=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,()=>L,[L]),rf&&!M&&r&&(U.current=Nf(null==P?void 0:P.document)),r&&F&&B(!1);const z=Df(()=>{if(L.add(),K.current=Ef(document,"keydown",q),G.current=Ef(document,"focus",()=>setTimeout(V),!0),E&&E(),g){var e,t;const n=Nf(null!=(e=null==(t=L.dialog)?void 0:t.ownerDocument)?e:null==P?void 0:P.document);L.dialog&&n&&!Af(L.dialog,n)&&(U.current=n,L.dialog.focus())}}),W=Df(()=>{var e;(L.remove(),null==K.current||K.current(),null==G.current||G.current(),y)&&(null==(e=U.current)||null==e.focus||e.focus(b),U.current=null)});(0,t.useEffect)(()=>{r&&j&&z()},[r,j,z]),(0,t.useEffect)(()=>{F&&W()},[F,W]),Tf(()=>{W()});const V=Df(()=>{if(!v||!O()||!L.isTopModal())return;const e=Nf(null==P?void 0:P.document);L.dialog&&e&&!Af(L.dialog,e)&&L.dialog.focus()}),H=Df(e=>{e.target===e.currentTarget&&(null==u||u(e),!0===l&&C())}),q=Df(e=>{c&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&L.isTopModal()&&(null==h||h(e),e.defaultPrevented||C())}),G=(0,t.useRef)(),K=(0,t.useRef)();if(!j)return null;const Y=Object.assign({role:i,ref:L.setDialogRef,"aria-modal":"dialog"===i||void 0},R,{style:o,className:a,tabIndex:-1});let X=x?x(Y):(0,Be.jsx)("div",Object.assign({},Y,{children:t.cloneElement(s,{role:"document"})}));X=Xf(d,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:k,onExiting:A,onExited:function(){B(!0),null==N||N(...arguments)},onEnter:T,onEntering:I,onEntered:D,children:X});let Q=null;return l&&(Q=w({ref:L.setBackdropRef,onClick:H}),Q=Xf(p,m,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Q})),(0,Be.jsx)(Be.Fragment,{children:Se.createPortal((0,Be.jsxs)(Be.Fragment,{children:[Q,X]}),j)})});Zf.displayName="Modal";const ep=Object.assign(Zf,{Manager:jf});var tp=Function.prototype.bind.call(Function.prototype.call,[].slice);function np(e,t){return tp(e.querySelectorAll(t))}function rp(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const ip=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ap=".sticky-top",op=".navbar-toggler";class sp extends jf{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,_f(t,{[e]:"".concat(parseFloat(_f(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],_f(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";np(t,ip).forEach(t=>this.adjustAndStore(i,t,e.scrollBarWidth)),np(t,ap).forEach(t=>this.adjustAndStore(a,t,-e.scrollBarWidth)),np(t,op).forEach(t=>this.adjustAndStore(a,t,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=rp(n.className,r):n.setAttribute("class",rp(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";np(t,ip).forEach(e=>this.restore(i,e)),np(t,ap).forEach(e=>this.restore(a,e)),np(t,op).forEach(e=>this.restore(a,e))}}let lp;function cp(e,t){return cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cp(e,t)}const up=!1,hp=t.createContext(null);var dp="unmounted",fp="exited",pp="entering",mp="entered",gp="exiting",vp=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=fp,r.appearStatus=pp):i=mp:i=t.unmountOnExit||t.mountOnEnter?dp:fp,r.state={status:i},r.nextCallback=null,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,cp(e,t)}(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===dp?{status:fp}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==pp&&n!==mp&&(t=pp):n!==pp&&n!==mp||(t=gp)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===pp){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Se.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===fp&&this.setState({status:dp})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Se.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||up?this.safeSetState({status:mp},function(){t.props.onEntered(a)}):(this.props.onEnter(a,o),this.safeSetState({status:pp},function(){t.props.onEntering(a,o),t.onTransitionEnd(l,function(){t.safeSetState({status:mp},function(){t.props.onEntered(a,o)})})}))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Se.findDOMNode(this);t&&!up?(this.props.onExit(r),this.safeSetState({status:gp},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:fp},function(){e.props.onExited(r)})})})):this.safeSetState({status:fp},function(){e.props.onExited(r)})},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Se.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===dp)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,Zd(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(hp.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function yp(){}vp.contextType=hp,vp.propTypes={},vp.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:yp,onEntering:yp,onEntered:yp,onExit:yp,onExiting:yp,onExited:yp},vp.UNMOUNTED=dp,vp.EXITED=fp,vp.ENTERING=pp,vp.ENTERED=mp,vp.EXITING=gp;const bp=vp;function xp(e,t){const n=_f(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function wp(e,t){const n=xp(e,"transitionDuration"),r=xp(e,"transitionDelay"),i=kf(e,n=>{n.target===e&&(i(),t(n))},n+r)}const Sp=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],_p=t.forwardRef((e,n)=>{let{onEnter:r,onEntering:i,onEntered:a,onExit:o,onExiting:s,onExited:l,addEndListener:c,children:u,childRef:h}=e,d=ef(e,Sp);const f=(0,t.useRef)(null),p=gf(f,h),m=e=>{var t;p((t=e)&&"setState"in t?Se.findDOMNode(t):null!=t?t:null)},g=e=>t=>{e&&f.current&&e(f.current,t)},v=(0,t.useCallback)(g(r),[r]),y=(0,t.useCallback)(g(i),[i]),b=(0,t.useCallback)(g(a),[a]),x=(0,t.useCallback)(g(o),[o]),w=(0,t.useCallback)(g(s),[s]),S=(0,t.useCallback)(g(l),[l]),_=(0,t.useCallback)(g(c),[c]);return(0,Be.jsx)(bp,Fe(Fe({ref:n},d),{},{onEnter:v,onEntered:b,onEntering:y,onExit:x,onExited:S,onExiting:w,addEndListener:_,nodeRef:f,children:"function"===typeof u?(e,t)=>u(e,Fe(Fe({},t),{},{ref:m})):t.cloneElement(u,{ref:m})}))});_p.displayName="TransitionWrapper";const Ep=_p,Cp=["className","children","transitionClasses","onEnter"],kp={[pp]:"show",[mp]:"show"},Np=t.forwardRef((e,n)=>{let{className:r,children:i,transitionClasses:a={},onEnter:o}=e;const s=Fe({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ef(e,Cp)),l=(0,t.useCallback)((e,t)=>{!function(e){e.offsetHeight}(e),null==o||o(e,t)},[o]);return(0,Be.jsx)(Ep,Fe(Fe({ref:n,addEndListener:wp},s),{},{onEnter:l,childRef:Wf(i),children:(e,n)=>t.cloneElement(i,Fe(Fe({},n),{},{className:nf()("fade",r,i.props.className,kp[e],a[e])}))}))});Np.displayName="Fade";const Ap=Np,Tp=["xxl","xl","lg","md","sm","xs"],Ip="xs",Dp=t.createContext({prefixes:{},breakpoints:Tp,minBreakpoint:Ip}),{Consumer:Rp,Provider:Pp}=Dp;function jp(e,n){const{prefixes:r}=(0,t.useContext)(Dp);return e||r[n]||n}const Lp=["className","bsPrefix","as"],Op=t.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:i="div"}=e,a=ef(e,Lp);return r=jp(r,"modal-body"),(0,Be.jsx)(i,Fe({ref:t,className:nf()(n,r)},a))});Op.displayName="ModalBody";const Mp=Op,Fp=t.createContext({onHide(){}}),Bp=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],Up=t.forwardRef((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:a,size:o,fullscreen:s,children:l,scrollable:c}=e,u=ef(e,Bp);n=jp(n,"modal");const h="".concat(n,"-dialog"),d="string"===typeof s?"".concat(n,"-fullscreen-").concat(s):"".concat(n,"-fullscreen");return(0,Be.jsx)("div",Fe(Fe({},u),{},{ref:t,className:nf()(h,r,o&&"".concat(n,"-").concat(o),a&&"".concat(h,"-centered"),c&&"".concat(h,"-scrollable"),s&&d),children:(0,Be.jsx)("div",{className:nf()("".concat(n,"-content"),i),children:l})}))});Up.displayName="ModalDialog";const zp=Up,Wp=["className","bsPrefix","as"],Vp=t.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:i="div"}=e,a=ef(e,Wp);return r=jp(r,"modal-footer"),(0,Be.jsx)(i,Fe({ref:t,className:nf()(n,r)},a))});Vp.displayName="ModalFooter";const Hp=Vp;var qp=n(5173),Gp=n.n(qp);const Kp=["className","variant","aria-label"],Yp={"aria-label":Gp().string,onClick:Gp().func,variant:Gp().oneOf(["white"])},Xp=t.forwardRef((e,t)=>{let{className:n,variant:r,"aria-label":i="Close"}=e,a=ef(e,Kp);return(0,Be.jsx)("button",Fe({ref:t,type:"button",className:nf()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i},a))});Xp.displayName="CloseButton",Xp.propTypes=Yp;const Qp=Xp,$p=["closeLabel","closeVariant","closeButton","onHide","children"],Jp=t.forwardRef((e,n)=>{let{closeLabel:r="Close",closeVariant:i,closeButton:a=!1,onHide:o,children:s}=e,l=ef(e,$p);const c=(0,t.useContext)(Fp),u=pf(()=>{null==c||c.onHide(),null==o||o()});return(0,Be.jsxs)("div",Fe(Fe({ref:n},l),{},{children:[s,a&&(0,Be.jsx)(Qp,{"aria-label":r,variant:i,onClick:u})]}))});Jp.displayName="AbstractModalHeader";const Zp=Jp,em=["bsPrefix","className","closeLabel","closeButton"],tm=t.forwardRef((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:a=!1}=e,o=ef(e,em);return n=jp(n,"modal-header"),(0,Be.jsx)(Zp,Fe(Fe({ref:t},o),{},{className:nf()(r,n),closeLabel:i,closeButton:a}))});tm.displayName="ModalHeader";const nm=tm,rm=["className","bsPrefix","as"],im=(am="h4",t.forwardRef((e,t)=>(0,Be.jsx)("div",Fe(Fe({},e),{},{ref:t,className:nf()(e.className,am)}))));var am;const om=t.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:i=im}=e,a=ef(e,rm);return r=jp(r,"modal-title"),(0,Be.jsx)(i,Fe({ref:t,className:nf()(n,r)},a))});om.displayName="ModalTitle";const sm=om,lm=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function cm(e){return(0,Be.jsx)(Ap,Fe(Fe({},e),{},{timeout:null}))}function um(e){return(0,Be.jsx)(Ap,Fe(Fe({},e),{},{timeout:null}))}const hm=t.forwardRef((e,n)=>{let{bsPrefix:r,className:i,style:a,dialogClassName:o,contentClassName:s,children:l,dialogAs:c=zp,"data-bs-theme":u,"aria-labelledby":h,"aria-describedby":d,"aria-label":f,show:p=!1,animation:m=!0,backdrop:g=!0,keyboard:v=!0,onEscapeKeyDown:y,onShow:b,onHide:x,container:w,autoFocus:S=!0,enforceFocus:_=!0,restoreFocus:E=!0,restoreFocusOptions:C,onEntered:k,onExit:N,onExiting:A,onEnter:T,onEntering:I,onExited:D,backdropClassName:R,manager:P}=e,j=ef(e,lm);const[L,O]=(0,t.useState)({}),[M,F]=(0,t.useState)(!1),B=(0,t.useRef)(!1),U=(0,t.useRef)(!1),z=(0,t.useRef)(null),[W,V]=(0,t.useState)(null),H=gf(n,V),q=pf(x),G=function(){const{dir:e}=(0,t.useContext)(Dp);return"rtl"===e}();r=jp(r,"modal");const K=(0,t.useMemo)(()=>({onHide:q}),[q]);function Y(){return P||function(e){return lp||(lp=new sp(e)),lp}({isRTL:G})}function X(e){if(!rf)return;const t=Y().getScrollbarWidth()>0,n=e.scrollHeight>cf(e).documentElement.clientHeight;O({paddingRight:t&&!n?df():void 0,paddingLeft:!t&&n?df():void 0})}const Q=pf(()=>{W&&X(W.dialog)});vf(()=>{uf(window,"resize",Q),null==z.current||z.current()});const $=()=>{B.current=!0},J=e=>{B.current&&W&&e.target===W.dialog&&(U.current=!0),B.current=!1},Z=()=>{F(!0),z.current=kf(W.dialog,()=>{F(!1)})},ee=e=>{"static"!==g?U.current||e.target!==e.currentTarget?U.current=!1:null==x||x():(e=>{e.target===e.currentTarget&&Z()})(e)},te=(0,t.useCallback)(e=>(0,Be.jsx)("div",Fe(Fe({},e),{},{className:nf()("".concat(r,"-backdrop"),R,!m&&"show")})),[m,R,r]),ne=Fe(Fe({},a),L);ne.display="block";return(0,Be.jsx)(Fp.Provider,{value:K,children:(0,Be.jsx)(ep,{show:p,ref:H,backdrop:g,container:w,keyboard:!0,autoFocus:S,enforceFocus:_,restoreFocus:E,restoreFocusOptions:C,onEscapeKeyDown:e=>{v?null==y||y(e):(e.preventDefault(),"static"===g&&Z())},onShow:b,onHide:x,onEnter:(e,t)=>{e&&X(e),null==T||T(e,t)},onEntering:(e,t)=>{null==I||I(e,t),lf(window,"resize",Q)},onEntered:k,onExit:e=>{null==z.current||z.current(),null==N||N(e)},onExiting:A,onExited:e=>{e&&(e.style.display=""),null==D||D(e),uf(window,"resize",Q)},manager:Y(),transition:m?cm:void 0,backdropTransition:m?um:void 0,renderBackdrop:te,renderDialog:e=>(0,Be.jsx)("div",Fe(Fe({role:"dialog"},e),{},{style:ne,className:nf()(i,r,M&&"".concat(r,"-static"),!m&&"show"),onClick:g?ee:void 0,onMouseUp:J,"data-bs-theme":u,"aria-label":f,"aria-labelledby":h,"aria-describedby":d,children:(0,Be.jsx)(c,Fe(Fe({},j),{},{onMouseDown:$,className:o,contentClassName:s,children:l}))}))})})});hm.displayName="Modal";const dm=Object.assign(hm,{Body:Mp,Header:nm,Title:sm,Footer:Hp,Dialog:zp,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),fm=e=>{let{albumUrl:n,onClose:r,title:i}=e;const[a,o]=(0,t.useState)(0),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0),[h,d]=(0,t.useState)(!1),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(100),[v,y]=(0,t.useState)(!1),[b,x]=(0,t.useState)({}),[w,S]=(0,t.useState)(1),[_,E]=(0,t.useState)(!1),C=(0,t.useRef)(null),k=(0,t.useRef)(null),N=(0,t.useRef)(new Audio("/page-flip.mp3")),[A,T]=(0,t.useState)(0),[I,D]=(0,t.useState)(new Set),[R,P]=(0,t.useState)(null),j=async e=>{try{if(I.has(e))return!1;d(!0);const i=n.replace("github.com","raw.githubusercontent.com").replace("/tree/","/"),a="".concat(i,"/Part_").concat(e),o=((e,t)=>{const n=e.split("/Notes/")[1].split("/")[0];return"".concat(n,"_Part_").concat(t)})(n,e),s=await Xd.getPDF(o);if(s)return console.log("Loading part ".concat(e," from cache")),l(e=>{const t=[...e];return s.forEach(e=>{const n=parseInt(e.match(/Page_(\d+)/)[1]);t[n-1]=e}),t}),D(t=>new Set([...t,e])),d(!1),!1;const c=30*(e-1)+1,u=30*e,h="".concat(a,"/Page_").concat(c,".png");try{if(!(await fetch(h,{method:"HEAD"})).ok){await new Promise(e=>setTimeout(e,1e3));if(!(await fetch(h,{method:"HEAD"})).ok)return d(!1),!0}}catch(t){return d(!1),!0}let f=c,p=u,m=c;for(;f<=p;){const e=Math.floor((f+p)/2),t="".concat(a,"/Page_").concat(e,".png");try{(await fetch(t,{method:"HEAD"})).ok?(m=e,f=e+1):p=e-1}catch(r){p=e-1}}let g=[];for(let e=c;e<=m;e++){const t="".concat(a,"/Page_").concat(e,".png");g.push({url:t,pageNum:e}),g.length%10===0&&l(e=>{const t=[...e];return g.forEach(e=>{t[e.pageNum-1]=e.url}),t})}return g.length>0&&(await Xd.cachePDF(o,g.map(e=>e.url)),l(e=>{const t=[...e];return g.forEach(e=>{t[e.pageNum-1]=e.url}),t}),D(t=>new Set([...t,e]))),d(!1),g.length<30}catch(f){return console.error("Error loading part:",f),d(!1),!0}};(0,t.useEffect)(()=>{n&&(async()=>{try{u(!0),l([]),o(0),D(new Set),E(!1),await j(1)&&E(!0)}catch(f){p("Failed to load images"),console.error("Error initializing viewer:",f)}finally{u(!1)}})()},[n]),(0,t.useEffect)(()=>{(async()=>{if(h||_)return;let e=null;if(a>=20&&!I.has(2)?e=2:a>=50&&!I.has(3)?e=3:a>=80&&!I.has(4)&&(e=4),e){await j(e)&&E(!0)}})()},[a,h,_]);const L=()=>{N.current&&(N.current.currentTime=0,N.current.play().catch(e=>console.log("Audio playback error:",e)))},O=()=>{a<s.length-1&&(L(),o(e=>e+1))},M=()=>{a>0&&(L(),o(e=>e-1))};(0,t.useEffect)(()=>{const e=e=>{"ArrowRight"===e.key?O():"ArrowLeft"===e.key?M():"Escape"===e.key&&v&&y(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,s.length,v]),(0,t.useEffect)(()=>{const e=()=>{y(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]),(0,t.useEffect)(()=>{const e=e=>{const t=e.touches[0];k.current=t.clientX},t=e=>{if(!k.current)return;const t=e.touches[0],n=k.current-t.clientX;Math.abs(n)>50&&(n>0&&a<s.length-1?(L(),O()):n<0&&a>0&&(L(),M()),k.current=null)},n=C.current;return n&&(n.addEventListener("touchstart",e),n.addEventListener("touchmove",t)),()=>{n&&(n.removeEventListener("touchstart",e),n.removeEventListener("touchmove",t))}},[a,s.length]);(0,t.useEffect)(()=>{const e=new Image;e.src="/SEED_Logo.png",e.onload=()=>P(e.src)},[]);return c?(0,Be.jsxs)("div",{className:"loading",children:[(0,Be.jsx)("div",{className:"loading-spinner"}),(0,Be.jsx)("p",{children:"Loading images..."})]}):f?(0,Be.jsx)("div",{className:"error",children:f}):s.length?(0,Be.jsxs)("div",{className:"viewer-container ".concat(v?"fullscreen":""),ref:C,children:[(0,Be.jsxs)("div",{className:"image-slider",style:{transform:"translateX(-".concat(100*a,"%)")},children:[s.map((e,t)=>e?(0,Be.jsxs)("div",{className:"slide",children:[!b[t]&&(0,Be.jsxs)("div",{className:"loading",children:[(0,Be.jsx)("div",{className:"loading-spinner"}),(0,Be.jsx)("p",{children:"Loading..."})]}),"error"===b[t]?(0,Be.jsx)("div",{className:"error",children:"Failed to load image"}):(0,Be.jsxs)("div",{className:"image-container",children:[R&&(0,Be.jsx)("div",{className:"watermark-overlay",children:(0,Be.jsx)("img",{src:R,alt:"SEED IT Logo",className:"watermark-logo"})}),(0,Be.jsx)("img",{src:e,alt:"Page ".concat(t+1),style:{transform:"scale(".concat(m/100,")"),display:b[t]?"block":"none"},draggable:"false",onLoad:()=>(e=>{x(t=>Fe(Fe({},t),{},{[e]:!0}))})(t),onError:()=>(e=>{console.error("Failed to load image at index ".concat(e)),x(t=>Fe(Fe({},t),{},{[e]:"error"}))})(t),onTouchStart:e=>e.preventDefault()})]})]},t):null).filter(Boolean),h&&(0,Be.jsxs)("div",{className:"loading-more",children:[(0,Be.jsx)("div",{className:"loading-spinner"}),(0,Be.jsx)("p",{children:"Loading more pages..."})]})]}),(0,Be.jsxs)("div",{className:"viewer-controls",children:[(0,Be.jsxs)("div",{className:"control-group",children:[(0,Be.jsxs)("button",{onClick:M,disabled:0===a,children:[(0,Be.jsx)(Xe,{})," Previous"]}),(0,Be.jsxs)("span",{className:"page-info",children:[a+1," / ",s.length]}),(0,Be.jsxs)("button",{onClick:O,disabled:a>=s.length-1,children:["Next ",(0,Be.jsx)(Qe,{})]})]}),(0,Be.jsxs)("div",{className:"zoom-controls",children:[(0,Be.jsx)("button",{onClick:()=>{g(e=>Math.max(e-25,50))},disabled:m<=50,children:(0,Be.jsx)(Et,{})}),(0,Be.jsxs)("span",{className:"zoom-level",children:[m,"%"]}),(0,Be.jsx)("button",{onClick:()=>{g(e=>Math.min(e+25,200))},disabled:m>=200,children:(0,Be.jsx)(Ct,{})}),(0,Be.jsx)("button",{onClick:()=>{g(100)},disabled:100===m,children:(0,Be.jsx)(kt,{})})]}),(0,Be.jsx)("button",{onClick:()=>{y(!v)},children:v?(0,Be.jsx)(ct,{}):(0,Be.jsx)(dt,{})})]})]}):(0,Be.jsx)("div",{className:"error",children:"No images found in the album"})},pm=e=>{let{isOpen:n,onClose:r,user:i,isRunningInPyQt:a}=e;const[o,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[d,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(""),[g,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1),[x,w]=(0,t.useState)(null),[S,_]=(0,t.useState)(!1),[E,C]=(0,t.useState)(!1),[k,N]=(0,t.useState)(""),[A,T]=(0,t.useState)(""),[I,D]=(0,t.useState)(!1),[R,P]=(0,t.useState)(!1),[j,L]=(0,t.useState)(0);(0,t.useEffect)(()=>{if(n&&a()){const e=localStorage.getItem("hackerRankAuth"),t=sessionStorage.getItem("hackerRankAuthInProgress");console.log("Initial auth check - localStorage:",e,"sessionStorage:",t);const n="true"===e||"true"===t;console.log("User authentication status:",n?"Authenticated":"Not authenticated"),n?("true"!==e&&localStorage.setItem("hackerRankAuth","true"),"true"!==t&&sessionStorage.setItem("hackerRankAuthInProgress","true"),_(!0),B()):_(!1)}},[n,a]),(0,t.useEffect)(()=>{n&&l&&a()&&(console.log("Both access control data is now available - starting assessment"),s(!0))},[n,l,a]),(0,t.useEffect)(()=>{n&&O()},[n]);const O=()=>{let e=!1;if(l)e=!0;else try{const t=JSON.parse(localStorage.getItem("auth_data")||"{}");t.accessControl?(console.log("Loading access control data from localStorage"),c(t.accessControl),e=!0):console.log("No access control data found in localStorage")}catch(VD){console.error("Error parsing auth_data from localStorage:",VD)}w(null),M(),e&&a()&&(console.log("Access control data found - auto-starting assessment"),h(!1),s(!0))},M=()=>{f(""),m(""),v(null),b(!1),w(null),T(""),D(!1),P(!1)},F=()=>{if(a()){console.log("Checking for HackerRank authentication status...");try{const e=localStorage.getItem("hackerRankAuth");console.log("HackerRank localStorage authentication:",e);const t=sessionStorage.getItem("hackerRankAuthInProgress");console.log("HackerRank sessionStorage authentication:",t);const n="true"===e||"true"===t;return console.log("Combined authentication status:",n),_(n),n&&("true"!==e&&(localStorage.setItem("hackerRankAuth","true"),console.log("Updated localStorage hackerRankAuth to true")),"true"!==t&&(sessionStorage.setItem("hackerRankAuthInProgress","true"),console.log("Updated sessionStorage hackerRankAuthInProgress to true"))),n}catch(x){return console.error("Error checking HackerRank auth status:",x),!1}}return!1},B=async()=>{try{if(h(!0),l)return console.log("Already have access control data in component state"),void setTimeout(()=>{s(!0),h(!1)},800);let e;try{e=JSON.parse(localStorage.getItem("auth_data")||"{}"),console.log("Current auth_data from localStorage:",e)}catch(VD){console.error("Error parsing auth_data from localStorage:",VD),e={}}if(!e.accessControl){console.log("Fetching access control data");try{const t=await Qd.getAccessControl();if(console.log("Received access control data:",t),!t)throw new Error("No access control data found");c(t);const n=Fe(Fe({},e),{},{accessControl:t});localStorage.setItem("auth_data",JSON.stringify(n))}catch(x){throw console.error("Access control fetch error:",x),new Error("Failed to fetch access control data: ".concat(x.message))}}console.log("Assessment data loaded successfully - opening dropdown modal"),s(!0)}catch(x){console.error("Error in loadAssessmentData:",x),w(x.message||"Failed to load assessment data. Please try again."),s(!1)}finally{h(!1)}},U=(e,t)=>{var n,r,a,o,s,c,u;if(console.log("Checking access for section:",e,"moduleKey:",t),console.log("User data:",{College:null===i||void 0===i?void 0:i.College,Department:null===i||void 0===i?void 0:i.Department,Year:null===i||void 0===i?void 0:i.Year}),console.log("Access Control Data:",l),!l||null===i||void 0===i||!i.College||null===i||void 0===i||!i.Department||null===i||void 0===i||!i.Year)return console.log("Missing required data for access check"),!1;const h=null===(n=l.courses[e])||void 0===n||null===(r=n.modules[t])||void 0===r?void 0:r.id;if(console.log("Module ID:",h),!h)return console.log("No module ID found"),!1;const d=null===(a=l.access_control)||void 0===a||null===(o=a.colleges)||void 0===o||null===(s=o[i.College])||void 0===s||null===(c=s[i.Year])||void 0===c?void 0:c[i.Department];if(console.log("Department Access:",d),!d)return console.log("No department access configuration found for:",{college:i.College,year:i.Year,department:i.Department}),!1;const f=new Date,p=new Date(d.batch_start),m=new Date(d.batch_end);if(console.log("Batch dates:",{now:f.toISOString(),start:p.toISOString(),end:m.toISOString()}),f<p)return console.log("Access not yet started"),!1;if(f>m)return console.log("Access has expired"),!1;const g=null===(u=d.allowed_modules)||void 0===u?void 0:u.includes(h);return console.log("Module access:",g,"for moduleId:",h,"in allowed_modules:",d.allowed_modules),g},z=async()=>{if(A.trim())if(g&&p){P(!0),w(null);try{var e,t,n,r;const i=null===l||void 0===l||null===(e=l.courses)||void 0===e||null===(t=e[d])||void 0===t||null===(n=t.modules)||void 0===n||null===(r=n[p])||void 0===r?void 0:r.passkey;if(!i)return w("No passkey required for this module"),void P(!1);A.trim()===i?(D(!0),w(null),console.log("Passkey validated successfully")):(w("Invalid passkey. Please try again."),D(!1))}catch(x){console.error("Error validating passkey:",x),w("Error validating passkey. Please try again."),D(!1)}finally{P(!1)}}else w("Please select a module first");else w("Please enter a passkey")},W=e=>{if(null===e||void 0===e||!e.schedule)return{allowed:!0,reason:"No schedule restrictions"};const t=e.schedule,n=new Date,r=(t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,new Date(t.startDate+"T"+t.startTime)),i=new Date(t.endDate+"T"+t.endTime);if(n<r)return{allowed:!1,reason:"Assessment starts on ".concat(r.toLocaleDateString()," at ").concat(r.toLocaleTimeString())};if(n>i)return{allowed:!1,reason:"Assessment ended on ".concat(i.toLocaleDateString()," at ").concat(i.toLocaleTimeString())};switch(t.type){case"one_time":return n>=r&&n<=i?{allowed:!0,reason:"Assessment is currently available"}:{allowed:!1,reason:"Assessment is only available from ".concat(r.toLocaleString()," to ").concat(i.toLocaleString())};case"daily":const e=60*n.getHours()+n.getMinutes(),a=60*parseInt(t.startTime.split(":")[0])+parseInt(t.startTime.split(":")[1]),o=60*parseInt(t.endTime.split(":")[0])+parseInt(t.endTime.split(":")[1]);return e>=a&&e<=o?{allowed:!0,reason:"Assessment is currently available"}:{allowed:!1,reason:"Assessment is available daily from ".concat(t.startTime," to ").concat(t.endTime)};case"weekly":const s=n.getDay(),l=t.daysOfWeek||[];if(!l.includes(s)){const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=l.map(t=>e[t]).join(", ");return{allowed:!1,reason:"Assessment is only available on: ".concat(t)}}const c=60*n.getHours()+n.getMinutes(),u=60*parseInt(t.startTime.split(":")[0])+parseInt(t.startTime.split(":")[1]),h=60*parseInt(t.endTime.split(":")[0])+parseInt(t.endTime.split(":")[1]);return c>=u&&c<=h?{allowed:!0,reason:"Assessment is currently available"}:{allowed:!1,reason:"Assessment is available on ".concat(dayNames[s]," from ").concat(t.startTime," to ").concat(t.endTime)};default:return{allowed:!0,reason:"No schedule restrictions"}}},V=()=>"assessments"===d,H=()=>{var e,t;if(!d||null===l||void 0===l||null===(e=l.courses)||void 0===e||null===(t=e[d])||void 0===t||!t.modules)return console.log("No modules available for section:",d),[];const n=Object.entries(l.courses[d].modules).sort((e,t)=>e[1].display_order-t[1].display_order).map(e=>{let[t,n]=e;const r=U(d,t),i=(e=>{if(null===e||void 0===e||!e.schedule)return{allowed:!0};const{startDate:t,endDate:n}=e.schedule;if(!t||!n)return{allowed:!0};const r=new Date,i=new Date(t+"T00:00:00"),a=new Date(n+"T23:59:59");return{allowed:r>=i&&r<=a}})(n),a=W(n),o=r&&i.allowed;return{value:t,label:n.name||t,enabled:o,scheduleInfo:a.reason,moduleData:n}}).filter(e=>e.enabled);return console.log("Available modules (enabled only):",n),n};return window.onHackerRankAuthComplete=()=>{console.log("HackerRank authentication completed - called from PyQt"),a()&&(localStorage.setItem("hackerRankAuth","true"),sessionStorage.setItem("hackerRankAuthInProgress","true"),_(!0),console.log("Authentication flags set to true, PyQt should redirect back to dashboard"))},window.setHackerRankAuthStatus=e=>{if(console.log("Setting HackerRank auth status:",e),a()){const t=!!e;_(t),localStorage.setItem("hackerRankAuth",t?"true":"false"),sessionStorage.setItem("hackerRankAuthInProgress",t?"true":"false"),console.log("Authentication status updated to:",t?"true":"false","in both storage mechanisms")}},window.isInAssessment=()=>o,window.checkAndUpdateHackerRankAuth=()=>{if(console.log("checkAndUpdateHackerRankAuth called by PyQt"),a()){const e=localStorage.getItem("hackerRankAuth"),t=sessionStorage.getItem("hackerRankAuthInProgress");console.log("Manual auth check - localStorage:",e,"sessionStorage:",t);return!!("true"===e||"true"===t)&&(console.log("Manual check found authenticated status, updating component"),_(!0),l||B(),!0)}return!1},window.updateAuthUI=e=>{console.log("updateAuthUI called with:",e);const t=!!e;return console.log("Setting UI authentication state to:",t),_(t),localStorage.setItem("hackerRankAuth",t?"true":"false"),sessionStorage.setItem("hackerRankAuthInProgress",t?"true":"false"),t&&!l&&(console.log("Loading assessment data after UI update"),B()),!0},window.getCurrentHackerRankAssessmentUrl=()=>{if(window.currentHackerRankAssessmentUrl)return console.log("Returning assessment URL from window object:",window.currentHackerRankAssessmentUrl),window.currentHackerRankAssessmentUrl;try{const e=sessionStorage.getItem("currentHackerRankAssessmentUrl");if(e)return console.log("Returning assessment URL from sessionStorage:",e),e}catch(x){console.error("Error getting URL from sessionStorage:",x)}return console.log("No stored assessment URL found"),null},(0,t.useEffect)(()=>{window.checkHackerRankAuthentication=F,window.checkAndUpdateHackerRankAuth=window.checkAndUpdateHackerRankAuth||(()=>{}),window.updateAuthUI=window.updateAuthUI||(()=>{}),window.getCurrentHackerRankAssessmentUrl=window.getCurrentHackerRankAssessmentUrl||(()=>null),window.clearHackerRankAuth=()=>(console.log("Explicitly clearing HackerRank auth flags (called from PyQt)"),localStorage.removeItem("hackerRankAuth"),sessionStorage.removeItem("hackerRankAuthInProgress"),!0);try{const e=sessionStorage.getItem("currentHackerRankAssessmentUrl");e&&(console.log("Restored assessment URL from sessionStorage:",e),window.currentHackerRankAssessmentUrl=e)}catch(x){console.error("Error restoring URL from sessionStorage:",x)}return()=>{delete window.onHackerRankAuthComplete,delete window.setHackerRankAuthStatus,delete window.isInAssessment,delete window.checkHackerRankAuthentication,delete window.checkAndUpdateHackerRankAuth,delete window.updateAuthUI,delete window.getCurrentHackerRankAssessmentUrl,delete window.currentHackerRankAssessmentUrl,delete window.clearHackerRankAuth,o||(console.log("Assessment closed without completion, cleaning up auth status"),localStorage.removeItem("hackerRankAuth"),sessionStorage.removeItem("hackerRankAuthInProgress"),console.log("Removed HackerRank auth flags from both localStorage and sessionStorage"))}},[n,a,o]),(0,t.useEffect)(()=>{const e=e=>{if("hackerRankAuth"===e.key||"hackerRankAuthInProgress"===e.key){console.log("Storage changed: ".concat(e.key," = ").concat(e.newValue));const t="true"===localStorage.getItem("hackerRankAuth")||"true"===sessionStorage.getItem("hackerRankAuthInProgress");console.log("Authentication status after storage change:",t),t&&(_(!0),l||B())}};window.addEventListener("storage",e);const t=setTimeout(()=>{const e=localStorage.getItem("hackerRankAuth"),t=sessionStorage.getItem("hackerRankAuthInProgress");console.log("Delayed auth check - localStorage:",e,"sessionStorage:",t);("true"===e||"true"===t)&&!S&&(console.log("Detected auth flags set after initial check, updating state"),_(!0),l||B())},500);return()=>{window.removeEventListener("storage",e),clearTimeout(t)}},[n,S,l]),n?a()?(0,Be.jsxs)("div",{className:"assessment-modal",children:[(0,Be.jsx)("style",{children:"\n    @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n    }\n"}),(0,Be.jsxs)("div",{className:"assessment-modal-content",children:[(0,Be.jsxs)("div",{className:"assessment-modal-header",children:[(0,Be.jsx)("h3",{children:"Assessment Platform"}),(0,Be.jsx)("button",{className:"modal-close",onClick:r,children:(0,Be.jsx)(At,{})})]}),(0,Be.jsx)("div",{className:"assessment-modal-body",children:o||l?(0,Be.jsxs)("div",{className:"assessment-content",children:[(0,Be.jsx)("div",{className:"assessment-header",children:(0,Be.jsx)("h3",{children:"Assessment in Progress"})}),l?(0,Be.jsxs)("div",{className:"side-by-side-selection",children:[(0,Be.jsxs)("div",{className:"selection-container",children:[(0,Be.jsxs)("div",{className:"selection-box",children:[(0,Be.jsx)("h3",{children:"Sections"}),(0,Be.jsx)("ul",{className:"selection-list",id:"sectionList",children:(()=>{if(null===l||void 0===l||!l.courses)return console.log("No courses data available"),[];const e=Object.entries(l.courses).sort((e,t)=>e[1].display_order-t[1].display_order).map(e=>{let[t,n]=e;return{value:t,label:n.title||t}});return console.log("Available sections:",e),e})().map(e=>(0,Be.jsx)("li",{className:d===e.value?"section-selected":"",onClick:()=>{f(e.value),m(""),v(null)},children:e.label},e.value))})]}),(0,Be.jsxs)("div",{className:"selection-box",children:[(0,Be.jsx)("h3",{children:"Modules"}),d&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("input",{type:"text",className:"search-box",placeholder:"Search modules...",onChange:e=>{N(e.target.value.toLowerCase())},id:"moduleSearch"}),(0,Be.jsxs)("ul",{className:"selection-list",id:"modulesList",children:[H().filter(e=>e.label.toLowerCase().includes(k)).map(e=>{var t;return(0,Be.jsx)("li",{className:p===e.value?"module-selected":"",onClick:()=>{m(e.value);const t=l.courses[d].modules[e.value];v(t),T(""),D(!1),P(!1),L(e=>e+1)},children:(0,Be.jsxs)("div",{className:"module-item",children:[(0,Be.jsx)("span",{className:"module-name",children:e.label}),(null===(t=e.moduleData)||void 0===t?void 0:t.schedule)&&(0,Be.jsx)("span",{className:"schedule-indicator",title:e.scheduleInfo,children:"\ud83d\udcc5"})]})},e.value)}),0===H().filter(e=>e.label.toLowerCase().includes(k)).length&&(0,Be.jsx)("li",{className:"no-results",children:"No matching modules found"})]})]}),!d&&(0,Be.jsx)("div",{className:"no-selection-message",children:"Please select a section first"})]})]}),(0,Be.jsxs)("div",{className:"button-container",children:[g&&V()&&(()=>{const e=W(g);return!e.allowed&&/starts|only available|available daily|available on/.test(e.reason||"")?(0,Be.jsx)("div",{className:"passkey-section",children:(0,Be.jsxs)("div",{className:"passkey-message passkey-error",children:[e.reason,(0,Be.jsx)("button",{className:"validate-btn",style:{marginLeft:8},onClick:()=>L(e=>e+1),children:"Refresh"})]})}):(0,Be.jsxs)("div",{className:"passkey-section",children:[(0,Be.jsxs)("div",{className:"passkey-input-container",children:[(0,Be.jsx)("input",{type:"password",className:"passkey-input",placeholder:"Enter passkey",value:A,onChange:e=>T(e.target.value),disabled:I}),(0,Be.jsx)("button",{className:"validate-btn ".concat(R?"loading":""," ").concat(I?"validated":""),onClick:z,disabled:R||I,children:R?(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"loading-spinner"}),"Validating..."]}):I?"\u2713 Validated":"Validate"})]}),(I||x)&&(0,Be.jsx)("div",{className:"passkey-message ".concat(I?"passkey-success":"passkey-error"),children:I?"\u2713 Passkey validated successfully":x})]})})(),g&&(!V()||I&&W(g).allowed)&&(0,Be.jsx)("button",{className:"begin-btn ".concat(E?"loading":""),onClick:()=>{if(console.log("Begin button clicked with selectedModule:",g,"selectedTitle:",p),!g||!p)return console.log("No module or title selected"),void w("Please select a module to begin");if(!V()||I)try{C(!0),w(null);const t=U(d,p);if(console.log("Has access to module:",t),!t)return w("You do not have access to this module. Please check your permissions."),alert("You do not have access to this module. Please check your permissions."),void C(!1);const n=W(g);if(!n.allowed)return w("Schedule restriction: ".concat(n.reason)),void C(!1);if(g.url&&g.url.includes("hackerrank.com")){console.log("Storing hackerrank assessment URL:",g.url),window.currentHackerRankAssessmentUrl=g.url;try{sessionStorage.setItem("currentHackerRankAssessmentUrl",g.url),console.log("Stored assessment URL in sessionStorage")}catch(e){console.error("Error storing URL in sessionStorage:",e)}}if(S&&(console.log("User is authenticated with HackerRank"),a()))return console.log("Opening URL in PyQt environment:",g.url),void setTimeout(()=>{window.location.href=g.url},1e3);console.log("Opening modal with URL:",g.url),b(!0),C(!1)}catch(x){console.error("Error in handleBegin:",x),w("Error: ".concat(x.message||"An unknown error occurred")),C(!1)}else w("Please validate the passkey before beginning the assessment")},disabled:E,children:E?(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"loading-spinner"}),"Connecting..."]}):"Begin"})]})]}):(0,Be.jsxs)("div",{className:"loading-container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"150px",flexDirection:"column"},children:[(0,Be.jsx)("div",{className:"loading-spinner",style:{width:"40px",height:"40px",border:"5px solid rgba(0,0,0,0.1)",borderRadius:"50%",borderTopColor:"#4CAF50",animation:"spin 1s ease-in-out infinite",marginBottom:"15px"}}),(0,Be.jsx)("p",{children:"Loading assessment options..."})]})]}):(0,Be.jsxs)("div",{className:"assessment-start",children:[S?(0,Be.jsx)("h3",{children:"You're connected to HackerRank!"}):(0,Be.jsx)("h3",{children:"Connect to HackerRank to start an assessment"}),(0,Be.jsx)("p",{style:{marginBottom:"20px",padding:"10px",backgroundColor:S?"#e8f5e9":"#fff3e0",borderRadius:"4px",border:"1px solid ".concat(S?"#a5d6a7":"#ffe0b2")},children:S?"You can now access assessments. Click the button below to load assessment data.":"You need to connect to HackerRank before you can access assessments. Click the button below to continue."}),x&&(0,Be.jsx)("div",{className:"error-message",children:(0,Be.jsx)("p",{children:x})}),(0,Be.jsx)("button",{className:"start-btn",onClick:async()=>{try{if(h(!0),w(null),console.log("\ud83d\udc49 STARTING ASSESSMENT PROCESS - DEBUGGING INFO:"),console.log("User object:",i),console.log("\ud83d\udc49 Checking PyQt environment..."),console.log("isRunningInPyQt function returns:",a()),console.log("window.pyqtFlag =",window.pyqtFlag),console.log("navigator.userAgent =",navigator.userAgent),!a())throw console.warn("Assessment was designed for PyQt environment, but continuing for development purposes"),console.error("Assessment can only be started in the desktop app"),new Error("The assessment platform is only available in our desktop application.");if(console.log("\ud83d\udc49 PyQt environment detected, proceeding normally"),console.log("Starting assessment with user:",i),console.log("User details - Email:",null===i||void 0===i?void 0:i.Email,"College:",null===i||void 0===i?void 0:i.College),null===i||void 0===i||!i.Email||null===i||void 0===i||!i.College)throw console.error("Missing user data - Email:",null===i||void 0===i?void 0:i.Email,"College:",null===i||void 0===i?void 0:i.College),new Error("User email or college information is missing");console.log("\ud83d\udc49 Checking HackerRank authentication status...");const t=F();if(console.log("Authentication check result:",t),t)return console.log("\ud83d\udc49 HackerRank authentication is complete, loading assessment data"),_(!0),void await B();console.log("\ud83d\udc49 HackerRank authentication not complete, preparing to redirect to login");const n="https://www.hackerrank.com/auth/login";console.log("HackerRank auth URL:",n),console.log("\ud83d\udc49 Clearing existing authentication flags before redirect"),localStorage.removeItem("hackerRankAuth"),sessionStorage.removeItem("hackerRankAuthInProgress"),_(!1),console.log("\ud83d\udc49 Redirecting to HackerRank auth in PyQt environment");try{console.log("\ud83d\udc49 Setting up redirect to:",n);const e=setTimeout(()=>{console.log("\ud83d\udc49 EXECUTING REDIRECT NOW");try{window.location.replace(n)}catch(VD){console.error("Replace failed, trying direct assignment:",VD),window.location.href=n}setTimeout(()=>{document.location.href!==n&&(console.log("\ud83d\udc49 Primary redirect methods failed, trying window.open"),window.open(n,"_self"))},500)},1500);return setTimeout(()=>{h(!1)},1e4),()=>{clearTimeout(e)}}catch(e){console.error("Error redirecting to HackerRank:",e),w("Failed to connect to HackerRank. Please try again."),h(!1)}}catch(x){console.error("Error in startAssessment:",x),w(x.message||"Failed to start assessment. Please try again."),s(!1),h(!1)}},disabled:u,children:u?(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"loading-spinner"}),(0,Be.jsx)("span",{children:S?"Loading Data...":"Connecting to HackerRank..."})]}):S?"Load Assessment Data":"Connect to HackerRank"}),(0,Be.jsx)("div",{style:{marginTop:"20px",fontSize:"0.9em",color:"#666"},children:(0,Be.jsx)("p",{children:S?"Your HackerRank login credentials are securely managed by the desktop application.":"This will connect you to HackerRank for authentication. Your login credentials will be securely managed by the desktop application."})})]})})]}),y&&g&&(0,Be.jsx)("div",{className:"iframe-modal",children:(0,Be.jsxs)("div",{className:"iframe-modal-content",children:[(0,Be.jsxs)("div",{className:"iframe-modal-header",children:[(0,Be.jsx)("h3",{children:g.name}),(0,Be.jsx)("button",{className:"modal-close",onClick:()=>b(!1),children:(0,Be.jsx)(At,{})})]}),(0,Be.jsx)("div",{className:"iframe-modal-body",children:(0,Be.jsx)("iframe",{src:g.url,title:g.name,width:"100%",height:"600px",frameBorder:"0"})})]})})]}):(0,Be.jsx)("div",{className:"assessment-modal",children:(0,Be.jsxs)("div",{className:"assessment-modal-content",children:[(0,Be.jsxs)("div",{className:"assessment-modal-header",children:[(0,Be.jsx)("h3",{children:"Assessment Platform"}),(0,Be.jsx)("button",{className:"modal-close",onClick:r,children:(0,Be.jsx)(At,{})})]}),(0,Be.jsxs)("div",{className:"platform-message",children:[(0,Be.jsx)("p",{children:"The Assessment platform is exclusively available on our Windows desktop app for an optimal learning experience."}),(0,Be.jsxs)("div",{className:"download-prompt",children:[(0,Be.jsx)("p",{children:"Download our Windows app to access:"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Interactive coding assessments"}),(0,Be.jsx)("li",{children:"Real-time feedback and evaluation"}),(0,Be.jsx)("li",{children:"Progress tracking and analytics"}),(0,Be.jsx)("li",{children:"Offline access to learning materials"})]}),(0,Be.jsxs)("button",{className:"download-btn",onClick:()=>window.open("https://drive.google.com/drive/folders/1vRGFtWmpnpoNcimkfoo_w41W6_k8slno?usp=drive_link","_blank"),children:[(0,Be.jsx)(ut,{})," Download Windows App"]})]})]})]})}):null},mm="Z2l0aHViX3Bh",gm="dF8xMUJDT1FG",vm="Q0EwYU1RcHVi",ym="SmZ0dk9xX3Nv",bm="S0lDWlVyNVY4",xm="ZHN5ckZsTDVa",wm="SW5IZWNXYjYw",Sm="d1ZEdEpsR1dY",_m="dG56bWZDUUZK",Em="UU9KTjJBZDhocEZO",Cm=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(0),[a,o]=(0,t.useState)({}),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[h,d]=(0,t.useState)("quantitative"),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),[b,x]=(0,t.useState)(""),[w,S]=(0,t.useState)(""),[_,E]=(0,t.useState)(""),[C,k]=(0,t.useState)([]),[N,A]=(0,t.useState)([]),[T,I]=(0,t.useState)(!1),[D,R]=(0,t.useState)(!1),[P,j]=(0,t.useState)({}),[L,O]=(0,t.useState)([]),[M,F]=(0,t.useState)(0),[B,U]=(0,t.useState)(!1),z={quantitative:["time-and-work","time-speed-distance","averages","ratios-proportions","sequence-series-progressions","co-ordinate-geometry","statistics","combinatorics","linear-algebra","probability","percentages","permutations-combinations","numbers","functions","mensuration","sudoku","trigonometry","set-theory","theory-of-equation","logarithm","functions-and-graph","data-interpretation-multiple-charts","profit-and-loss","simple-equation","algebra","geometry","data-interpretation","alligations-and-mixtures","simple-compound-interest","pipes-and-cisterns","problems-on-hcf-lcm","areas-shapes-perimeter","height-and-distance","partnership","races-and-games","simplification","clocks-calendars","problems-on-ages","surds-indices","data-sufficiency","problems-on-trains","cryptarithmetic","divisibility","numbers-and-decimal-fractions","spatial-ability","chain-rule"],reasoning:["data-arrangements","number-series","lr-arrangements","lr-ranking","assertion-and-reason","team-formations","conditional-syllogisms","statement-and-conclusions","statement-courses-of-action","syllogism","statement-and-assumptions","critical-reasoning","coding-decoding","odd-man-out","direction-sense","image-based-problems","blood-relationship","seating-arrangements","logical-deduction","character-puzzles","clock-puzzles","dot-situation","embedded-images","figure-matrix","grouping-of-images","image-analysis","logical-puzzles","mirror-water-images","missing-letters-puzzles","number-puzzles","paper-cutting","paper-folding","pattern-completion","playing-cards-puzzles","rule-detection","shape-construction","attention-to-details","flowcharts","puzzles","cubes","sequence-and-series","statements","venn-diagrams","analogies","data-sufficiency","inferred-meaning","logical-order","mathematical-operations","logical-choice","analytical-reasoning"],verbal:["paragraph-formation","sentence-completion","reading-comprehensions","sentence-correction","spotting-errors","sentence-selection","antonyms","synonyms","jumbled-sentences","selecting-words","sentence-improvement","odd-words","sentence-formation","fact-inference-judgement","fill-in-the-blanks","one-word-substitution","theme-detection","parts-of-speech","idioms-and-phrases","spellings"],"company-specific":["tcs","infosys","wipro","hcl","accenture","capgemini","tata-consultancy-services","cognizant","deloitte","kpmg","ey","pwc"],"practice-tests":["set-1","set-2","set-3","set-4","set-5","set-6","set-7","set-8","set-9","set-10"]},W={"time-and-work":"Time and Work","time-speed-distance":"Time, Speed, Distance",averages:"Averages","ratios-proportions":"Ratios & Proportions","sequence-series-progressions":"Sequence, Series, Progressions","co-ordinate-geometry":"Co-ordinate Geometry",statistics:"Statistics",combinatorics:"Combinatorics","linear-algebra":"Linear Algebra",probability:"Probability",percentages:"Percentages","permutations-combinations":"Permutations & Combinations",numbers:"Numbers",functions:"Functions",mensuration:"Mensuration",sudoku:"Sudoku",trigonometry:"Trigonometry","set-theory":"Set Theory","theory-of-equation":"Theory of Equation",logarithm:"Logarithm","functions-and-graph":"Functions and Graph","data-interpretation-multiple-charts":"Data Interpretation (Multiple Charts)","profit-and-loss":"Profit and Loss","simple-equation":"Simple Equation",algebra:"Algebra",geometry:"Geometry","data-interpretation":"Data Interpretation","alligations-and-mixtures":"Alligations and Mixtures","simple-compound-interest":"Simple & Compound Interest","pipes-and-cisterns":"Pipes and Cisterns","problems-on-hcf-lcm":"Problems on HCF & LCM","areas-shapes-perimeter":"Areas, Shapes, Perimeter","height-and-distance":"Height and Distance",partnership:"Partnership","races-and-games":"Races and Games",simplification:"Simplification","clocks-calendars":"Clocks & Calendars","problems-on-ages":"Problems on Ages","surds-indices":"Surds & Indices","data-sufficiency":"Data Sufficiency","problems-on-trains":"Problems on Trains",cryptarithmetic:"Cryptarithmetic",divisibility:"Divisibility","numbers-and-decimal-fractions":"Numbers and Decimal Fractions","spatial-ability":"Spatial Ability","chain-rule":"Chain Rule","data-arrangements":"Data Arrangements","number-series":"Number Series","lr-arrangements":"LR Arrangements","lr-ranking":"LR Ranking","assertion-and-reason":"Assertion and Reason","team-formations":"Team Formations","conditional-syllogisms":"Conditional Syllogisms","statement-and-conclusions":"Statement and Conclusions","statement-courses-of-action":"Statement Courses of Action",syllogism:"Syllogism","statement-and-assumptions":"Statement and Assumptions","critical-reasoning":"Critical Reasoning","coding-decoding":"Coding Decoding","odd-man-out":"Odd Man Out","direction-sense":"Direction Sense","image-based-problems":"Image Based Problems","blood-relationship":"Blood Relationship","seating-arrangements":"Seating Arrangements","logical-deduction":"Logical Deduction","character-puzzles":"Character Puzzles","clock-puzzles":"Clock Puzzles","dot-situation":"Dot Situation","embedded-images":"Embedded Images","figure-matrix":"Figure Matrix","grouping-of-images":"Grouping of Images","image-analysis":"Image Analysis","logical-puzzles":"Logical Puzzles","mirror-water-images":"Mirror & Water Images","missing-letters-puzzles":"Missing Letters Puzzles","number-puzzles":"Number Puzzles","paper-cutting":"Paper Cutting","paper-folding":"Paper Folding","pattern-completion":"Pattern Completion","playing-cards-puzzles":"Playing Cards Puzzles","rule-detection":"Rule Detection","shape-construction":"Shape Construction","attention-to-details":"Attention to Details",flowcharts:"Flowcharts",puzzles:"Puzzles",cubes:"Cubes","sequence-and-series":"Sequence and Series",statements:"Statements","venn-diagrams":"Venn Diagrams",analogies:"Analogies","inferred-meaning":"Inferred Meaning","logical-order":"Logical Order","mathematical-operations":"Mathematical Operations","logical-choice":"Logical Choice","analytical-reasoning":"Analytical Reasoning","paragraph-formation":"Paragraph Formation","sentence-completion":"Sentence Completion","reading-comprehensions":"Reading Comprehensions","sentence-correction":"Sentence Correction","spotting-errors":"Spotting Errors","sentence-selection":"Sentence Selection",antonyms:"Antonyms",synonyms:"Synonyms","jumbled-sentences":"Jumbled Sentences","selecting-words":"Selecting Words","sentence-improvement":"Sentence Improvement","odd-words":"Odd Words","sentence-formation":"Sentence Formation","fact-inference-judgement":"Fact, Inference, Judgement","fill-in-the-blanks":"Fill in the Blanks","one-word-substitution":"One Word Substitution","theme-detection":"Theme Detection","parts-of-speech":"Parts of Speech","idioms-and-phrases":"Idioms and Phrases",spellings:"Spellings",tcs:"TCS",infosys:"Infosys",wipro:"Wipro",hcl:"HCL",accenture:"Accenture",capgemini:"Capgemini","tata-consultancy-services":"Tata Consultancy Services",cognizant:"Cognizant",deloitte:"Deloitte",kpmg:"KPMG",ey:"EY",pwc:"PwC","set-1":"Practice Set 1","set-2":"Practice Set 2","set-3":"Practice Set 3","set-4":"Practice Set 4","set-5":"Practice Set 5","set-6":"Practice Set 6","set-7":"Practice Set 7","set-8":"Practice Set 8","set-9":"Practice Set 9","set-10":"Practice Set 10"};(0,t.useEffect)(()=>{d("quantitative")},[]);const V=async e=>{E(e),l(!0),u(null);try{const t=e.split(" ")[1],r=await(async e=>{try{const n="".concat("/seed-contents","/").concat(h,"/").concat(w,"/test").concat(e,".json");console.log("[AptitudeTest] Trying local fetch from:",n);try{const e=await fetch(n);if(e.ok)return console.log("[AptitudeTest] Local fetch successful"),await e.json();console.log("[AptitudeTest] Local fetch failed, falling back to GitHub")}catch(t){console.log("[AptitudeTest] Local fetch error:",t),console.log("[AptitudeTest] Falling back to GitHub")}console.log("[AptitudeTest] Attempting GitHub fetch");const r=[mm,gm,vm,ym,bm,xm,wm,Sm,_m,Em].join(""),i=atob(r),a="".concat("https://api.github.com/repos/seeditDev/seed-contents/contents","/").concat(h,"/").concat(w,"/test").concat(e,".json");console.log("[AptitudeTest] Trying GitHub API:",a);const o=await fetch(a,{headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(i)}});if(o.ok){const e=await o.json();console.log("[AptitudeTest] GitHub API fetch successful");const t=atob(e.content);return JSON.parse(t)}console.log("[AptitudeTest] GitHub API failed, trying raw URL");const s="".concat("https://raw.githubusercontent.com/seeditDev/seed-contents/main","/").concat(h,"/").concat(w,"/test").concat(e,".json");console.log("[AptitudeTest] Trying raw GitHub URL:",s);const l=await fetch(s);if(!l.ok)throw new Error("Failed to fetch test data: ".concat(l.status));return console.log("[AptitudeTest] Raw GitHub fetch successful"),await l.json()}catch(c){throw console.error("[AptitudeTest] All fetch attempts failed:",c),console.error("[AptitudeTest] Error details:",{message:c.message,stack:c.stack,type:c.name}),c}})(t);n(r),i(0),o({}),p(Date.now()),l(!1)}catch(c){console.error("Error loading test:",c),u("Error loading test. Please check your connection and try again."),l(!1)}},H=t=>{var n;"prev"===t&&r>0?i(r-1):"next"===t&&r<(null===e||void 0===e||null===(n=e.questions)||void 0===n?void 0:n.length)-1&&i(r+1)};(0,t.useEffect)(()=>{e&&void 0!==r&&j(e=>Fe(Fe({},e),{},{[r]:e[r]||Date.now()}))},[r,e]);const q=e=>{A(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},G=e=>{const t=P[e];return t?Math.round((Date.now()-t)/1e3):0},K=()=>{if(D||T){if(T)return R(!0),void I(!1);if(D){const t=Q(),r=Math.round((Date.now()-f)/1e3);O(n=>[...n,{testId:e.id,score:t,timeTaken:r,answers:a,questionTimes:P,date:(new Date).toISOString()}]),n(e=>Fe(Fe({},e),{},{score:t,timeTaken:r,submitted:!0})),I(!1),R(!1)}}else I(!0)},Y=()=>{R(!0),I(!1)},X=()=>{R(!1)},Q=()=>{if(null===e||void 0===e||!e.questions)return 0;let t=0;return e.questions.forEach((e,n)=>{void 0!==a[n]&&e.options[a[n]]===e.correctAnswer&&t++}),Math.floor(t/e.questions.length*100)},$=()=>{n(null),i(0),o({}),p(null),I(!1),R(!1)};(0,t.useEffect)(()=>{let t;return e&&(t=setInterval(()=>{F(e=>e+1)},1e3)),()=>clearInterval(t)},[e]);const J=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))},Z=()=>{if(!e)return null;const t=Object.keys(a).length,n=N.length;return(0,Be.jsxs)("div",{className:"aptitude-status-summary",children:[(0,Be.jsxs)("div",{className:"aptitude-timer",children:[(0,Be.jsx)(ot,{})," ",J(M)]}),(0,Be.jsxs)("div",{className:"aptitude-counts",children:[(0,Be.jsxs)("span",{children:["Attempted: ",t,"/30"]}),(0,Be.jsxs)("span",{children:["Bookmarked: ",n]})]})]})};return(0,Be.jsx)("div",{className:"aptitude-container",children:s?(0,Be.jsx)("div",{className:"aptitude-loading",children:"Loading..."}):c?(0,Be.jsx)("div",{className:"aptitude-error",children:c}):null!==e&&void 0!==e&&e.submitted?(()=>{if(null===e||void 0===e||!e.submitted)return null;const t=e.score,n=e.timeTaken,r=e.questions.length,i=Math.floor(t*r/100),o=r-i;return(0,Be.jsxs)("div",{className:"aptitude-results-container",children:[(0,Be.jsxs)("div",{className:"aptitude-results-header",children:[(0,Be.jsx)("h2",{children:"Test Results"}),(0,Be.jsxs)("button",{className:"aptitude-back-button",onClick:$,children:[(0,Be.jsx)(Xe,{})," Back to Selection"]})]}),(0,Be.jsx)("div",{className:"aptitude-results-summary",children:(0,Be.jsxs)("div",{className:"aptitude-score-card",children:[(0,Be.jsx)("div",{className:"aptitude-score-circle",children:(0,Be.jsxs)("div",{className:"aptitude-score-value",children:[t,"%"]})}),(0,Be.jsxs)("div",{className:"aptitude-score-details",children:[(0,Be.jsxs)("div",{className:"aptitude-score-item",children:[(0,Be.jsx)(at,{className:"aptitude-icon correct"}),(0,Be.jsxs)("span",{children:["Correct: ",i]})]}),(0,Be.jsxs)("div",{className:"aptitude-score-item",children:[(0,Be.jsx)(At,{className:"aptitude-icon incorrect"}),(0,Be.jsxs)("span",{children:["Incorrect: ",o]})]}),(0,Be.jsxs)("div",{className:"aptitude-score-item",children:[(0,Be.jsx)(ot,{className:"aptitude-icon"}),(0,Be.jsxs)("span",{children:["Time: ",J(n)]})]})]})]})}),(0,Be.jsx)("div",{className:"aptitude-results-actions",children:(0,Be.jsx)("button",{className:"aptitude-see-answers-button",onClick:()=>U(!B),children:B?"Hide Answers":"See Answers with Explanations"})}),B&&(0,Be.jsxs)("div",{className:"aptitude-results-breakdown",children:[(0,Be.jsx)("h3",{children:"Question-wise Breakdown"}),(0,Be.jsx)("div",{className:"aptitude-results-list",children:e.questions.map((e,t)=>{const n=void 0!==a[t]&&e.options[a[t]]===e.correctAnswer,r=G(t);return(0,Be.jsxs)("div",{className:"aptitude-result-item ".concat(n?"correct":"incorrect"),children:[(0,Be.jsxs)("div",{className:"aptitude-result-header",children:[(0,Be.jsxs)("div",{className:"aptitude-result-status",children:[(0,Be.jsxs)("span",{className:"aptitude-question-number",children:["Question ",t+1]}),n?(0,Be.jsx)(at,{className:"aptitude-icon correct"}):(0,Be.jsx)(At,{className:"aptitude-icon incorrect"})]}),(0,Be.jsx)("span",{className:"aptitude-time-spent",children:J(r)})]}),(0,Be.jsxs)("div",{className:"aptitude-question-content",children:[(0,Be.jsx)("p",{className:"aptitude-question-text",children:e.question}),(0,Be.jsxs)("div",{className:"aptitude-answer-details",children:[(0,Be.jsxs)("div",{className:"aptitude-answer-row",children:[(0,Be.jsx)("span",{className:"aptitude-answer-label",children:"Your answer:"}),(0,Be.jsx)("span",{className:"aptitude-answer-value ".concat(n?"correct":"incorrect"),children:void 0!==a[t]?e.options[a[t]]:"Not answered"})]}),(0,Be.jsxs)("div",{className:"aptitude-answer-row",children:[(0,Be.jsx)("span",{className:"aptitude-answer-label",children:"Correct answer:"}),(0,Be.jsx)("span",{className:"aptitude-answer-value correct",children:e.correctAnswer})]}),e.explanation&&(0,Be.jsxs)("div",{className:"aptitude-explanation",children:[(0,Be.jsx)("span",{className:"aptitude-explanation-label",children:"Explanation:"}),(0,Be.jsx)("p",{className:"aptitude-explanation-text",children:e.explanation})]})]})]})]},t)})})]})]})})():e?e?(0,Be.jsxs)("div",{className:"aptitude-test-content",children:[(0,Be.jsxs)("div",{className:"aptitude-test-header",children:[(0,Be.jsxs)("div",{className:"aptitude-test-info",children:[(0,Be.jsx)("h1",{children:e.name}),Z()]}),(0,Be.jsxs)("button",{className:"aptitude-back-button",onClick:$,children:[(0,Be.jsx)(Xe,{})," End Test"]})]}),null!==e&&void 0!==e&&e.questions?(0,Be.jsxs)("div",{className:"aptitude-question-nav",children:[(0,Be.jsx)("div",{className:"aptitude-question-nav-grid",children:e.questions.map((e,t)=>(0,Be.jsx)("button",{className:"aptitude-question-nav-item ".concat(void 0!==a[t]?"attempted":"not-attempted"," ").concat(r===t?"current":""," ").concat(N.includes(t)?"bookmarked":""),onClick:()=>i(t),children:t+1},t))}),(0,Be.jsxs)("div",{className:"aptitude-nav-legend",children:[(0,Be.jsxs)("div",{className:"aptitude-nav-legend-item",children:[(0,Be.jsx)("div",{className:"aptitude-nav-legend-color attempted"}),(0,Be.jsx)("span",{children:"Attempted"})]}),(0,Be.jsxs)("div",{className:"aptitude-nav-legend-item",children:[(0,Be.jsx)("div",{className:"aptitude-nav-legend-color not-attempted"}),(0,Be.jsx)("span",{children:"Not Attempted"})]}),(0,Be.jsxs)("div",{className:"aptitude-nav-legend-item",children:[(0,Be.jsx)("div",{className:"aptitude-nav-legend-color current"}),(0,Be.jsx)("span",{children:"Current Question"})]}),(0,Be.jsxs)("div",{className:"aptitude-nav-legend-item",children:[(0,Be.jsx)("div",{className:"aptitude-nav-legend-color bookmarked"}),(0,Be.jsx)("span",{children:"Bookmarked"})]})]})]}):null,T?(0,Be.jsx)("div",{className:"aptitude-confirm-dialog",children:(0,Be.jsxs)("div",{className:"aptitude-confirm-content",children:[(0,Be.jsx)("h3",{children:"Submit Test?"}),(0,Be.jsx)("p",{children:"Are you sure you want to submit your test? You can review your answers before final submission."}),(0,Be.jsxs)("div",{className:"aptitude-confirm-buttons",children:[(0,Be.jsx)("button",{onClick:()=>I(!1),children:"Cancel"}),(0,Be.jsx)("button",{onClick:Y,children:"Review Answers"})]})]})}):null,D?(0,Be.jsxs)("div",{className:"aptitude-review-container",children:[(0,Be.jsx)("h3",{children:"Review Your Answers"}),(0,Be.jsx)("div",{className:"aptitude-review-list",children:e.questions.map((e,t)=>(0,Be.jsxs)("div",{className:"aptitude-review-item",children:[(0,Be.jsxs)("div",{className:"aptitude-review-header",children:[(0,Be.jsxs)("span",{children:["Question ",t+1]}),(0,Be.jsxs)("span",{children:[G(t),"s"]})]}),(0,Be.jsx)("p",{children:e.question}),(0,Be.jsxs)("div",{className:"aptitude-review-answer",children:["Your answer: ",void 0!==a[t]?e.options[a[t]]:"Not answered"]}),(0,Be.jsxs)("div",{className:"aptitude-review-actions",children:[(0,Be.jsx)("button",{onClick:()=>{i(t),R(!1)},children:"Go to Question"}),(0,Be.jsxs)("button",{className:N.includes(t)?"bookmarked":"",onClick:()=>q(t),children:[(0,Be.jsx)(Je,{})," ",N.includes(t)?"Bookmarked":"Bookmark"]})]})]},t))}),(0,Be.jsxs)("div",{className:"aptitude-review-actions",children:[(0,Be.jsx)("button",{onClick:X,children:"Back to Test"}),(0,Be.jsx)("button",{onClick:K,children:"Submit Test"})]})]}):null,!D&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsxs)("div",{className:"aptitude-question-container",children:[(0,Be.jsxs)("div",{className:"aptitude-question-header",children:[(0,Be.jsxs)("span",{className:"aptitude-question-number",children:["Question ",r+1]}),(0,Be.jsx)("button",{className:"aptitude-bookmark-button ".concat(N.includes(r)?"bookmarked":""),onClick:()=>q(r),children:(0,Be.jsx)(Je,{})})]}),(0,Be.jsx)("p",{className:"aptitude-question-text",children:e.questions[r].question}),(0,Be.jsx)("div",{className:"aptitude-options",children:e.questions[r].options.map((e,t)=>(0,Be.jsx)("button",{className:"aptitude-option ".concat(a[r]===t?"selected":""),onClick:()=>(e=>{o(Fe(Fe({},a),{},{[r]:e}))})(t),children:e},t))})]}),(0,Be.jsxs)("div",{className:"aptitude-navigation",children:[(0,Be.jsx)("button",{className:"aptitude-nav-button",onClick:()=>H("prev"),disabled:0===r,children:"Previous"}),Object.keys(a).length===e.questions.length&&(0,Be.jsx)("button",{className:"aptitude-submit-button",onClick:K,children:"Submit Test"}),(0,Be.jsx)("button",{className:"aptitude-nav-button",onClick:()=>H("next"),disabled:r===e.questions.length-1,children:"Next"})]})]})]}):null:(0,Be.jsxs)("div",{className:"aptitude-test-selection",children:[(0,Be.jsx)("h2",{children:"Aptitude Test Selection"}),(0,Be.jsx)("div",{className:"aptitude-side-by-side",children:(0,Be.jsxs)("div",{className:"aptitude-selection-container",children:[(0,Be.jsxs)("div",{className:"aptitude-selection-box",children:[(0,Be.jsx)("h3",{children:"Sections"}),(0,Be.jsxs)("div",{className:"aptitude-search-box",children:[(0,Be.jsx)(kt,{className:"search-icon"}),(0,Be.jsx)("input",{type:"text",placeholder:"Search sections...",value:v,onChange:e=>y(e.target.value)})]}),(0,Be.jsx)("ul",{className:"aptitude-selection-list",children:Object.entries(z).map(e=>{let[t,n]=e;return(0,Be.jsx)("li",{className:"aptitude-selection-item ".concat(h===t?"aptitude-selected":""),onClick:()=>(d(t),S(""),E(""),void k([])),children:(0,Be.jsx)("span",{className:"aptitude-item-title",children:t.charAt(0).toUpperCase()+t.slice(1).replace("-"," ")})},t)})})]}),(0,Be.jsxs)("div",{className:"aptitude-selection-box",children:[(0,Be.jsx)("h3",{children:"Topics"}),(0,Be.jsxs)("div",{className:"aptitude-search-box",children:[(0,Be.jsx)(kt,{className:"search-icon"}),(0,Be.jsx)("input",{type:"text",placeholder:"Search topics...",value:v,onChange:e=>y(e.target.value)})]}),(0,Be.jsx)("ul",{className:"aptitude-selection-list",children:(v?z[h].filter(e=>{var t;return(null===(t=W[e])||void 0===t?void 0:t.toLowerCase().includes(v.toLowerCase()))||e.toLowerCase().includes(v.toLowerCase())}):z[h]).map(e=>(0,Be.jsx)("li",{className:"aptitude-selection-item ".concat(w===e?"aptitude-selected":""),onClick:()=>(e=>{S(e),E("");const t=Array.from({length:10},(e,t)=>"Test ".concat(t+1));k(t)})(e),children:(0,Be.jsx)("span",{className:"aptitude-item-title",children:W[e]||e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())})},e))})]}),(0,Be.jsxs)("div",{className:"aptitude-selection-box",children:[(0,Be.jsx)("h3",{children:"Tests"}),(0,Be.jsxs)("div",{className:"aptitude-search-box",children:[(0,Be.jsx)(kt,{className:"search-icon"}),(0,Be.jsx)("input",{type:"text",placeholder:"Search tests...",value:v,onChange:e=>y(e.target.value)})]}),(0,Be.jsxs)("ul",{className:"aptitude-selection-list",children:[C.map(e=>(0,Be.jsx)("li",{className:"aptitude-selection-item ".concat(_===e?"aptitude-selected":""),onClick:()=>V(e),children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)("span",{className:"aptitude-item-title",children:e}),(0,Be.jsxs)("div",{className:"aptitude-test-details",children:[(0,Be.jsx)("span",{children:"30 questions"}),(0,Be.jsx)("span",{children:"No time limit"})]})]})},e)),0===C.length&&(0,Be.jsx)("li",{className:"aptitude-selection-item",children:(0,Be.jsx)("span",{className:"aptitude-item-title",children:"Select a topic first"})})]})]})]})})]})})},km=JSON.parse('[{"id":"TCS-NQE-2026-SEP","company":{"name":"TCS","logoUrl":"https://cdn.example.com/logos/tcs.png","website":"https://www.tcs.com"},"role":{"title":"Software Engineer","level":"Entry","type":"Full-time","category":"Software Development","domain":["Backend","Cloud"]},"locations":["Bengaluru","Hyderabad","Pune"],"workMode":"Hybrid","compensation":{"ctc":"\u20b97.0 LPA","stipend":null,"salaryNotes":"Performance bonus up to 10%"},"eligibility":{"batches":["2025","2026"],"collegesAllowed":["SEED-IT","KPRIET","KITE"],"departmentsAllowed":["CSE","IT","ECE","CSBS","AIDS"],"minCGPA":7,"backlogPolicy":"No active backlogs","experience":"0-1 years"},"skills":{"required":["DSA","Java","SQL"],"preferred":["Spring Boot","Docker","AWS"]},"application":{"applyUrl":"https://careers.example.com/apply/abc123","jdUrl":"https://careers.example.com/jd/abc123.pdf","referral":{"enabled":false,"instructions":null,"contactEmail":null},"test":{"required":true,"platform":"HackerRank","durationMins":120,"sections":["MCQ","Coding"]},"rounds":[{"name":"Online Test","notes":"DSA + MCQ"},{"name":"Technical Interview","notes":"2 rounds"},{"name":"HR Interview","notes":"Final"}],"lastDate":"2025-11-25T18:30:00.000Z","startDate":"2025-12-10T00:00:00.000Z"},"posting":{"postedAt":"2025-11-10T08:00:00.000Z","source":"Company","contactEmail":"campus@tcs.com","attachments":[{"name":"JD.pdf","url":"https://careers.example.com/jd/abc123.pdf"}]},"quotas":{"numPositions":120,"collegeCap":{"SEED-IT":20}},"metadata":{"priority":"High","status":"Open","tags":["On-campus","Product","Java"],"isRemoteFriendly":true,"notes":"SEED-IT gets priority slots"},"ui":{"tileSubtitle":"Entry \u2022 Hybrid \u2022 India","badges":["Freshers","HackerRank Test"],"highlight":true}},{"id":"ZOHO-INT-2026-OCT","company":{"name":"Zoho","logoUrl":"https://cdn.example.com/logos/zoho.png","website":"https://www.zoho.com"},"role":{"title":"QA Intern","level":"Intern","type":"Internship","category":"Quality Assurance","domain":["Testing"]},"locations":["Chennai"],"workMode":"Onsite","compensation":{"ctc":null,"stipend":"\u20b920,000 / month","salaryNotes":null},"eligibility":{"batches":["2026"],"collegesAllowed":["SEED-IT"],"departmentsAllowed":["CSE","IT","ECE"],"minCGPA":6.5,"backlogPolicy":"Up to 1 allowed","experience":"0 years"},"skills":{"required":["Manual Testing","SQL"],"preferred":["Selenium","JavaScript"]},"application":{"applyUrl":"https://careers.example.com/apply/xyz789","jdUrl":null,"referral":{"enabled":true,"instructions":"Share resume to referral@zoho.com","contactEmail":"referral@zoho.com"},"test":{"required":false},"rounds":[{"name":"Technical Interview","notes":"1 round"},{"name":"HR Interview","notes":"Final"}],"lastDate":"2025-10-20T18:30:00.000Z","startDate":null},"posting":{"postedAt":"2025-10-01T08:00:00.000Z","source":"Campus Team","contactEmail":"placements@seed-it.com","attachments":[]},"quotas":{"numPositions":15,"collegeCap":{"SEED-IT":15}},"metadata":{"priority":"Medium","status":"Open","tags":["On-campus","Internship"],"isRemoteFriendly":false,"notes":null},"ui":{"tileSubtitle":"Internship \u2022 Onsite \u2022 Chennai","badges":["SEED-IT Only"],"highlight":false}}]'),Nm=e=>{var n,r,i,a,o,s,l,c,u,h,d,f,p,m,g,v,y,b,x,w,S,_,E,C,k;let{user:N}=e;const[A,T]=(0,t.useState)("jobs"),[I,D]=(0,t.useState)([]),[R,P]=(0,t.useState)(!0),[j,L]=(0,t.useState)(null),[O,M]=(0,t.useState)(""),[F,B]=(0,t.useState)(""),[U,z]=(0,t.useState)(""),[W,V]=(0,t.useState)(""),[H,q]=(0,t.useState)(""),[G,K]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{P(!0),L(null);const e="".concat("","/placements.json"),t=await(async e=>{try{const t=await fetch(e,{cache:"no-store"});if(!t.ok)throw new Error("HTTP ".concat(t.status));return await t.json()}catch(vR){return null}})(e);if(t&&Array.isArray(t))return D(t),void P(!1);D(km||[]),P(!1)})()},[]);const Y=(0,t.useMemo)(()=>N?{name:N.Name||"-",email:N.Email||"-",college:N.College||"-",department:N.Department||"-",year:N.Year||"-"}:null,[N]),X=(0,t.useMemo)(()=>Array.from(new Set(I.map(e=>{var t;return null===e||void 0===e||null===(t=e.company)||void 0===t?void 0:t.name}).filter(Boolean))).sort(),[I]),Q=(0,t.useMemo)(()=>Array.from(new Set(I.map(e=>{var t;return null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.status}).filter(Boolean))).sort(),[I]),$=(0,t.useMemo)(()=>Array.from(new Set(I.map(e=>null===e||void 0===e?void 0:e.workMode).filter(Boolean))).sort(),[I]),J=(0,t.useMemo)(()=>{const e=I.flatMap(e=>{var t;return(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.tags)||[]});return Array.from(new Set(e.filter(Boolean))).sort()},[I]),Z=(0,t.useMemo)(()=>{const e=(O||"").toLowerCase();return I.filter(t=>{var n,r,i;if(F&&(null===t||void 0===t||null===(n=t.company)||void 0===n?void 0:n.name)!==F)return!1;if(U&&(null===t||void 0===t||null===(r=t.metadata)||void 0===r?void 0:r.status)!==U)return!1;if(W&&(null===t||void 0===t?void 0:t.workMode)!==W)return!1;if(H&&!((null===t||void 0===t||null===(i=t.metadata)||void 0===i?void 0:i.tags)||[]).includes(H))return!1;if(e){var a,o,s,l;if(![null===t||void 0===t||null===(a=t.company)||void 0===a?void 0:a.name,null===t||void 0===t||null===(o=t.role)||void 0===o?void 0:o.title,null===t||void 0===t||null===(s=t.role)||void 0===s?void 0:s.category,...(null===t||void 0===t||null===(l=t.metadata)||void 0===l?void 0:l.tags)||[]].filter(Boolean).join(" ").toLowerCase().includes(e))return!1}return!0})},[I,O,F,U,W,H]),ee=e=>{var t,n,r,i,a,o,s;let{p:l}=e;return(0,Be.jsxs)("div",{className:"placements-card",onClick:()=>K(l),children:[(0,Be.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(null===l||void 0===l||null===(t=l.company)||void 0===t?void 0:t.logoUrl)&&(0,Be.jsx)("img",{src:l.company.logoUrl,alt:null===l||void 0===l||null===(n=l.company)||void 0===n?void 0:n.name,style:{width:40,height:40,objectFit:"contain"}}),(0,Be.jsxs)("div",{children:[(0,Be.jsx)("div",{style:{fontWeight:700},children:(null===l||void 0===l||null===(r=l.company)||void 0===r?void 0:r.name)||"-"}),(0,Be.jsx)("div",{style:{color:"#555"},children:(null===l||void 0===l||null===(i=l.role)||void 0===i?void 0:i.title)||"-"}),(0,Be.jsx)("div",{style:{color:"#777",fontSize:12},children:(null===l||void 0===l||null===(a=l.ui)||void 0===a?void 0:a.tileSubtitle)||""})]})]}),(0,Be.jsxs)("div",{style:{marginTop:8,display:"flex",gap:6,flexWrap:"wrap"},children:[((null===l||void 0===l||null===(o=l.ui)||void 0===o?void 0:o.badges)||[]).map((e,t)=>(0,Be.jsx)("span",{style:{background:"#eef2ff",color:"#3730a3",border:"1px solid #c7d2fe",borderRadius:999,padding:"2px 8px",fontSize:12},children:e},t)),((null===l||void 0===l||null===(s=l.metadata)||void 0===s?void 0:s.tags)||[]).map((e,t)=>(0,Be.jsx)("span",{style:{background:"#f1f5f9",color:"#0f172a",border:"1px solid #e2e8f0",borderRadius:999,padding:"2px 8px",fontSize:12},children:e},"t-".concat(t)))]})]})};return(0,Be.jsxs)("div",{className:"section-content",children:[(0,Be.jsxs)("div",{className:"placements-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Be.jsx)("h2",{style:{margin:0},children:"Placements"}),Y&&(0,Be.jsxs)("div",{style:{fontSize:12,color:"#666"},children:[Y.name," \u2022 ",Y.college," \u2022 ",Y.department," \u2022 ",Y.year]})]}),(0,Be.jsxs)("div",{className:"placements-tabs",children:[(0,Be.jsx)("button",{className:"jobs"===A?"btn-primary":"btn-secondary",onClick:()=>T("jobs"),children:"Jobs"}),(0,Be.jsx)("button",{className:"applications"===A?"btn-primary":"btn-secondary",onClick:()=>T("applications"),children:"Applications"}),(0,Be.jsx)("button",{className:"resources"===A?"btn-primary":"btn-secondary",onClick:()=>T("resources"),children:"Resources"})]}),"jobs"===A&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsxs)("div",{className:"placements-filters",children:[(0,Be.jsx)("input",{type:"text",placeholder:"Search company, role, tag...",value:O,onChange:e=>M(e.target.value)}),(0,Be.jsxs)("select",{value:F,onChange:e=>B(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Companies"}),X.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]}),(0,Be.jsxs)("select",{value:U,onChange:e=>z(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Status"}),Q.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]}),(0,Be.jsxs)("select",{value:W,onChange:e=>V(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Work Modes"}),$.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]}),(0,Be.jsxs)("select",{value:H,onChange:e=>q(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Tags"}),J.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]})]}),R&&(0,Be.jsx)("div",{className:"placements-card",children:"Loading..."}),j&&(0,Be.jsx)("div",{className:"placements-card",style:{color:"#b91c1c"},children:j}),!R&&!j&&(0,Be.jsxs)("div",{className:"placements-grid",children:[Z.map(e=>(0,Be.jsx)(ee,{p:e},e.id)),0===Z.length&&(0,Be.jsx)("div",{className:"placements-card",children:"No postings match your filters."})]})]}),"applications"===A&&(0,Be.jsxs)("div",{className:"placements-card",children:[(0,Be.jsx)("h3",{style:{marginTop:0},children:"Your Applications"}),(0,Be.jsx)("p",{children:"Track your applications and status here. (Coming soon)"})]}),"resources"===A&&(0,Be.jsxs)("div",{className:"placements-card",children:[(0,Be.jsx)("h3",{style:{marginTop:0},children:"Preparation Resources"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Interview preparation guides"}),(0,Be.jsx)("li",{children:"Company-specific questions"}),(0,Be.jsx)("li",{children:"Resume and portfolio tips"})]})]}),G&&(0,Be.jsx)("div",{className:"preview-overlay",onClick:()=>K(null),children:(0,Be.jsxs)("div",{className:"preview-modal",onClick:e=>e.stopPropagation(),children:[(0,Be.jsxs)("div",{className:"preview-header",children:[(0,Be.jsxs)("h3",{style:{margin:0},children:[null===G||void 0===G||null===(n=G.company)||void 0===n?void 0:n.name," \u2022 ",null===G||void 0===G||null===(r=G.role)||void 0===r?void 0:r.title]}),(0,Be.jsxs)("div",{className:"actions",children:[(null===G||void 0===G||null===(i=G.application)||void 0===i?void 0:i.jdUrl)&&(0,Be.jsx)("a",{className:"btn-secondary",href:G.application.jdUrl,target:"_blank",rel:"noreferrer",children:"View JD"}),(null===G||void 0===G||null===(a=G.application)||void 0===a?void 0:a.applyUrl)&&(0,Be.jsx)("a",{className:"btn-primary",href:G.application.applyUrl,target:"_blank",rel:"noreferrer",children:"Apply"}),(0,Be.jsx)("button",{className:"btn-secondary",onClick:()=>K(null),children:"Close"})]})]}),(0,Be.jsxs)("div",{className:"preview-body",children:[(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Company"}),(0,Be.jsxs)("div",{children:[null===G||void 0===G||null===(o=G.company)||void 0===o?void 0:o.name," \u2022 ",(0,Be.jsx)("a",{href:null===G||void 0===G||null===(s=G.company)||void 0===s?void 0:s.website,target:"_blank",rel:"noreferrer",children:"Website"})]})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Role"}),(0,Be.jsxs)("div",{children:[null===G||void 0===G||null===(l=G.role)||void 0===l?void 0:l.title," (",null===G||void 0===G||null===(c=G.role)||void 0===c?void 0:c.level,") \u2022 ",null===G||void 0===G||null===(u=G.role)||void 0===u?void 0:u.type]})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Location / Mode"}),(0,Be.jsxs)("div",{children:[((null===G||void 0===G?void 0:G.locations)||[]).join(", ")," \u2022 ",(null===G||void 0===G?void 0:G.workMode)||"-"]})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Compensation"}),(0,Be.jsxs)("div",{children:[(null===G||void 0===G||null===(h=G.compensation)||void 0===h?void 0:h.ctc)||"-"," ",null!==G&&void 0!==G&&null!==(d=G.compensation)&&void 0!==d&&d.stipend?"\u2022 Stipend ".concat(null===G||void 0===G||null===(f=G.compensation)||void 0===f?void 0:f.stipend):""]})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Eligibility"}),(0,Be.jsxs)("div",{children:["Batches: ",((null===G||void 0===G||null===(p=G.eligibility)||void 0===p?void 0:p.batches)||[]).join(", ")||"-"," \u2022 CGPA \u2265 ",null!==(m=null===G||void 0===G||null===(g=G.eligibility)||void 0===g?void 0:g.minCGPA)&&void 0!==m?m:"-",(0,Be.jsx)("br",{}),"Departments: ",((null===G||void 0===G||null===(v=G.eligibility)||void 0===v?void 0:v.departmentsAllowed)||(null===G||void 0===G||null===(y=G.eligibility)||void 0===y?void 0:y.departments)||(null===G||void 0===G||null===(b=G.eligibility)||void 0===b?void 0:b.departmentsallowed)||[]).join(", ")||"-",(0,Be.jsx)("br",{}),"Backlogs: ",(null===G||void 0===G||null===(x=G.eligibility)||void 0===x?void 0:x.backlogPolicy)||"-"]})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Skills"}),(0,Be.jsxs)("div",{children:[(0,Be.jsx)("strong",{children:"Required:"})," ",((null===G||void 0===G||null===(w=G.skills)||void 0===w?void 0:w.required)||[]).join(", ")||"-",(0,Be.jsx)("br",{}),(0,Be.jsx)("strong",{children:"Preferred:"})," ",((null===G||void 0===G||null===(S=G.skills)||void 0===S?void 0:S.preferred)||[]).join(", ")||"-"]})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Application"}),(0,Be.jsxs)("div",{children:["Status: ",(null===G||void 0===G||null===(_=G.metadata)||void 0===_?void 0:_.status)||"-"," \u2022 Priority: ",(null===G||void 0===G||null===(E=G.metadata)||void 0===E?void 0:E.priority)||"-",(0,Be.jsx)("br",{}),"Last date: ",null!==G&&void 0!==G&&null!==(C=G.application)&&void 0!==C&&C.lastDate?new Date(G.application.lastDate).toLocaleString():"-"]})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Rounds"}),(0,Be.jsx)("div",{children:((null===G||void 0===G||null===(k=G.application)||void 0===k?void 0:k.rounds)||[]).map((e,t)=>(0,Be.jsxs)("div",{children:["\u2022 ",e.name," ",e.notes?"- ".concat(e.notes):""]},t))})]})]})]})})]})},Am={c:{elearning:[{title:"Introduction to C",link:"https://www.youtube.com/embed/bPp_Nr71GxY?si=DTa7XvWqZa6m7k1l"},{title:"Operators",link:"https://www.seedit.tech/sorry-page/"},{title:"Conditional Statements",link:"https://www.seedit.tech/sorry-page/"},{title:"Looping",link:"https://www.seedit.tech/sorry-page/"},{title:"Number Crunching",link:"https://www.seedit.tech/sorry-page/"},{title:"Number Based Problems",link:"https://www.seedit.tech/sorry-page/"},{title:"Arrays",link:"https://www.seedit.tech/sorry-page/"},{title:"Strings and its functions",link:"https://www.seedit.tech/sorry-page/"},{title:"Functions and Pointers",link:"https://www.seedit.tech/sorry-page/"},{title:"Dynamic Memory Allocations",link:"https://www.seedit.tech/sorry-page/"},{title:"Structures",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"C Tutorials",link:"https://www.seedit.tech/tutorial-notes/c"},{title:"C Interview Questions",link:"https://www.seedit.tech/interview-questions/c"},{title:"C Handwritten Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/C",type:"album"},{title:"C DSA Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/C_DSA",type:"album"}]},cpp:{elearning:[{title:"Introduction to C++",link:"https://www.seedit.tech/sorry-page/"},{title:"Object-Oriented Programming",link:"https://www.seedit.tech/sorry-page/"},{title:"STL Basics",link:"https://www.youtube.com/watch?v=example7"},{title:"Operators",link:"https://www.seedit.tech/sorry-page/"},{title:"Conditional Statements",link:"https://www.seedit.tech/sorry-page/"},{title:"Looping",link:"https://www.seedit.tech/sorry-page/"},{title:"Number Crunching",link:"https://www.seedit.tech/sorry-page/"},{title:"Number Based Problems",link:"https://www.seedit.tech/sorry-page/"},{title:"Arrays",link:"https://www.seedit.tech/sorry-page/"},{title:"Strings and its functions",link:"https://www.seedit.tech/sorry-page/"},{title:"Functions and Pointers",link:"https://www.seedit.tech/sorry-page/"},{title:"Dynamic Memory Allocations",link:"https://www.seedit.tech/sorry-page/"},{title:"Structures",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"C++ Tutorials",link:"https://www.seedit.tech/tutorial-notes/cpp"},{title:"C++ Interview Questions",link:"https://www.seedit.tech/interview-questions/cpp"},{title:"C++ Handwritten Notes",link:"https://ibb.co/album/4mhFRY",type:"album"},{title:"C++ DSA Notes",link:"https://ibb.co/album/RkM2s2",type:"album"}]},java:{elearning:[{title:"Introduction to Java",link:"https://www.seedit.tech/sorry-page/"},{title:"Object-Oriented Programming",link:"https://www.seedit.tech/sorry-page/"},{title:"STL Basics",link:"https://www.youtube.com/watch?v=example7"},{title:"Operators",link:"https://www.seedit.tech/sorry-page/"},{title:"Conditional Statements",link:"https://www.seedit.tech/sorry-page/"},{title:"Looping",link:"https://www.seedit.tech/sorry-page/"},{title:"Number Crunching",link:"https://www.seedit.tech/sorry-page/"},{title:"Number Based Problems",link:"https://www.seedit.tech/sorry-page/"},{title:"Arrays",link:"https://www.seedit.tech/sorry-page/"},{title:"Strings and its functions",link:"https://www.seedit.tech/sorry-page/"},{title:"Functions and Pointers",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"Java Tutorials",link:"https://www.seedit.tech/tutorial-notes/java/"},{title:"Java Interview Questions",link:"https://www.seedit.tech/interview-questions/java"},{title:"Java Handwritten Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/Java",type:"album"},{title:"Java DSA Notes",link:"https://ibb.co/album/gdh5pP",type:"album"}]},python:{elearning:[{title:"Introduction to Python",link:"https://www.seedit.tech/sorry-page/"},{title:"Object-Oriented Programming",link:"https://www.seedit.tech/sorry-page/"},{title:"STL Basics",link:"https://www.youtube.com/watch?v=example7"},{title:"Operators",link:"https://www.seedit.tech/sorry-page/"},{title:"Conditional Statements",link:"https://www.seedit.tech/sorry-page/"},{title:"Looping",link:"https://www.seedit.tech/sorry-page/"},{title:"Number Crunching",link:"https://www.seedit.tech/sorry-page/"},{title:"Number Based Problems",link:"https://www.seedit.tech/sorry-page/"},{title:"Arrays",link:"https://www.seedit.tech/sorry-page/"},{title:"Strings and its functions",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"Python Tutorials",link:"https://www.seedit.tech/tutorial-notes/python/"},{title:"Python Interview Questions",link:"https://www.seedit.tech/interview-questions/python"},{title:"Python Handwritten Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/Python",type:"album"},{title:"Python Code Based Interview Questions",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/Python Code Based Interview Questions",type:"code-interview"}]},mongodb:{elearning:[{title:"Introduction to MongoDB",link:"https://www.seedit.tech/sorry-page/"},{title:"CRUD Operations",link:"https://www.seedit.tech/sorry-page/"},{title:"Querying Documents",link:"https://www.seedit.tech/sorry-page/"},{title:"Indexing and Aggregation",link:"https://www.seedit.tech/sorry-page/"},{title:"MongoDB with Node.js",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"MongoDB Tutorials",link:"https://www.seedit.tech/tutorial-notes/mongodb"},{title:"MongoDB Interview Questions",link:"https://www.seedit.tech/interview-questions/mongodb"},{title:"MongoDB Handwritten Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/MongoDB",type:"album"}]},javascript:{elearning:[{title:"Introduction to JavaScript",link:"https://www.seedit.tech/sorry-page/"},{title:"Variables and Data Types",link:"https://www.seedit.tech/sorry-page/"},{title:"Functions and Scope",link:"https://www.seedit.tech/sorry-page/"},{title:"DOM Manipulation",link:"https://www.seedit.tech/sorry-page/"},{title:"Events and Event Handling",link:"https://www.seedit.tech/sorry-page/"},{title:"Arrays and Objects",link:"https://www.seedit.tech/sorry-page/"},{title:"ES6+ Features",link:"https://www.seedit.tech/sorry-page/"},{title:"Async Programming",link:"https://www.seedit.tech/sorry-page/"},{title:"Error Handling",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"JavaScript Tutorials",link:"https://www.seedit.tech/tutorial-notes/javascript"},{title:"JavaScript Interview Questions",link:"https://www.seedit.tech/interview-questions/javascript"},{title:"JavaScript Handwritten Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/JavaScript",type:"album"}]},sql:{elearning:[{title:"Introduction to SQL",link:"https://www.seedit.tech/sorry-page/"},{title:"Basic SQL Queries",link:"https://www.seedit.tech/sorry-page/"},{title:"Advanced SQL Queries",link:"https://www.seedit.tech/sorry-page/"},{title:"Database Design",link:"https://www.seedit.tech/sorry-page/"},{title:"Joins and Relationships",link:"https://www.seedit.tech/sorry-page/"},{title:"Indexes and Performance",link:"https://www.seedit.tech/sorry-page/"},{title:"Stored Procedures",link:"https://www.seedit.tech/sorry-page/"},{title:"Triggers and Functions",link:"https://www.seedit.tech/sorry-page/"},{title:"Transaction Management",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"SQL Tutorials",link:"https://www.seedit.tech/tutorial-notes/sql"},{title:"SQL Interview Questions",link:"https://www.seedit.tech/interview-questions/sql"},{title:"SQL Handwritten Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/SQL",type:"album"}]},"machine-learning":{elearning:[{title:"Introduction to Machine Learning",link:"https://www.seedit.tech/sorry-page/"},{title:"Supervised Learning",link:"https://www.seedit.tech/sorry-page/"},{title:"Unsupervised Learning",link:"https://www.seedit.tech/sorry-page/"},{title:"Deep Learning Basics",link:"https://www.seedit.tech/sorry-page/"},{title:"Neural Networks",link:"https://www.seedit.tech/sorry-page/"},{title:"Model Evaluation",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"Machine Learning Tutorials",link:"https://www.seedit.tech/tutorial-notes/machine-learning"},{title:"Machine Learning Interview Questions",link:"https://www.seedit.tech/interview-questions/machine-learning"},{title:"Machine Learning Handwritten Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/Machine%20Learning",type:"album"}]},reactjs:{elearning:[{title:"Introduction to React",link:"https://www.seedit.tech/sorry-page/"},{title:"Components and Props",link:"https://www.seedit.tech/sorry-page/"},{title:"State and Lifecycle",link:"https://www.seedit.tech/sorry-page/"},{title:"Hooks and Custom Hooks",link:"https://www.seedit.tech/sorry-page/"},{title:"Routing and Navigation",link:"https://www.seedit.tech/sorry-page/"},{title:"State Management",link:"https://www.seedit.tech/sorry-page/"},{title:"Forms and Validation",link:"https://www.seedit.tech/sorry-page/"},{title:"Testing React Applications",link:"https://www.seedit.tech/sorry-page/"}],nonElearning:[{title:"ReactJS Tutorials",link:"https://www.seedit.tech/tutorial-notes/reactjs"},{title:"ReactJS Interview Questions",link:"https://www.seedit.tech/interview-questions/reactjs"},{title:"ReactJS Handwritten Notes",link:"https://github.com/seeditDev/Handwritten-notes/tree/main/Notes/ReactJS",type:"album"}]}},Tm=()=>navigator.userAgent.includes("QtWebEngine")||navigator.userAgent.includes("QtWebKit"),Im=[{hour:9,minute:0},{hour:12,minute:0},{hour:15,minute:0},{hour:18,minute:0}],Dm=()=>{const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(null),[a,o]=(0,t.useState)("home"),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)("interview"),[h,d]=(0,t.useState)([]),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(!1),b=ne(),[x,w]=(0,t.useState)([]),[S,_]=(0,t.useState)(""),[E,C]=(0,t.useState)(!1),[k,N]=(0,t.useState)(null),[A,T]=(0,t.useState)(0),[I,D]=(0,t.useState)("No Streak"),[R,P]=(0,t.useState)(!1),[j,L]=(0,t.useState)(!1),[O,M]=(0,t.useState)(!1),[F,B]=(0,t.useState)(null),[U,z]=(0,t.useState)({day:"",topic:"",code:"",problemId:"",solution:"",notes:""}),[W,V]=(0,t.useState)(!1),[H,q]=(0,t.useState)(!1),[G,K]=(0,t.useState)([]),[Y,X]=(0,t.useState)(!0),[Q,$]=(0,t.useState)(null),[J,Z]=(0,t.useState)({}),[ee,te]=(0,t.useState)(!1),[re,ie]=(0,t.useState)(null),[ae,oe]=(0,t.useState)(!1),[se,le]=(0,t.useState)(navigator.onLine),[ce,ue]=(0,t.useState)("synced"),[he,de]=(0,t.useState)(!1),[fe,pe]=(0,t.useState)(null),[me,ge]=(0,t.useState)(!1),[ve,ye]=(0,t.useState)({title:"",link:""}),[be,xe]=(0,t.useState)(""),[we,Se]=(0,t.useState)(!1),[_e,Ee]=(0,t.useState)(!navigator.onLine),[Ce,ke]=(0,t.useState)(!1),[Ne,Ae]=(0,t.useState)(!1),[Te,Ie]=(0,t.useState)(null),[Re,Pe]=(0,t.useState)("1.0.0"),[je,Le]=(0,t.useState)(!1),[Oe,Me]=(0,t.useState)(null),[Ue,ze]=(0,t.useState)({isCollapsed:!1,showQuickAccess:!0,showHelp:!0}),[We]=(0,t.useState)({courses:[{name:"Basic Datatypes",totalMarks:310,questions:31,completed:0},{name:"Conditional Statements",totalMarks:200,questions:20,completed:0},{name:"Looping",totalMarks:200,questions:20,completed:0},{name:"Patterns",totalMarks:800,questions:80,completed:0},{name:"Number Crunching",totalMarks:300,questions:30,completed:0},{name:"Number Based Problems",totalMarks:200,questions:20,completed:0},{name:"Arrays",totalMarks:500,questions:50,completed:0},{name:"Strings",totalMarks:380,questions:38,completed:0},{name:"Functions",totalMarks:100,questions:10,completed:0},{name:"Structures",totalMarks:100,questions:10,completed:0}]}),[Ve,He]=(0,t.useState)({daily:{target:2,completed:0},weekly:{target:10,completed:0},monthly:{target:40,completed:0}}),[qe,Ge]=(0,t.useState)(!1),[Ke,Ye]=(0,t.useState)(!1),[Xe,Qe]=(0,t.useState)(!1),[Je,Ze]=(0,t.useState)(!1),[et,rt]=(0,t.useState)("default"),[it,at]=(0,t.useState)(!1),[ot,ct]=(0,t.useState)(!1),[ht,dt]=(0,t.useState)(!1),[pt,mt]=(0,t.useState)(null),[gt,yt]=(0,t.useState)(null),[Et,Ct]=(0,t.useState)(!1),[Dt,Rt]=(0,t.useState)(null),[Pt,jt]=(0,t.useState)(!1),[Lt,Ot]=(0,t.useState)(!1),[Mt,Ft]=(0,t.useState)({python:[],java:[],cpp:[]}),[Bt,Ut]=(0,t.useState)(null),[zt,Wt]=(0,t.useState)(!1),[Vt,Ht]=(0,t.useState)(null),[qt,Gt]=(0,t.useState)([]),[Kt,Yt]=(0,t.useState)(!1),[Xt,Qt]=(0,t.useState)([]),$t=async(e,t)=>{if(!e||!t)return null;Wt(!0),Ht(null);try{const r=e.trim().replace(/\s+/g,""),i=t.toString().trim(),a=["".concat("","/SEEDDB/colleges/").concat(r,"/").concat(i,"/scores.json"),"/SEEDDB/colleges/".concat(r,"/").concat(i,"/scores.json"),"https://raw.githubusercontent.com/seeditDev/SEEDDB/main/colleges/".concat(r,"/").concat(i,"/scores.json")];let o=null,s=null;for(const e of a)try{const t=await fetch(e,{cache:"no-store",headers:{Accept:"application/json"}});if(t.ok){o=await t.json(),console.log("Scores data loaded from: ".concat(e));break}}catch(Q){s=Q,console.log("Failed to fetch from ".concat(e,":"),Q.message)}if(o){const e=Jt(o);if(e){const t="scores_".concat(r,"_").concat(i);return sessionStorage.setItem(t,JSON.stringify(e)),Ut(e),console.log("User scores found:",e),e}throw new Error("Your scores not found in the data. Please check your HackerRank ID.")}var n;throw new Error("Failed to fetch scores from all sources. Last error: ".concat((null===(n=s)||void 0===n?void 0:n.message)||"Unknown error"))}catch(Q){return console.error("Error fetching scores:",Q),Ht(Q.message),null}finally{Wt(!1)}},Jt=e=>{const t=(n=r)&&[n.HackerRankID,n.hackerRankID,n.hackerrank_id,n["HackerRank ID"],n["Hackerrank ID"],n["HackerRank ID "],n.HackerrankID].find(Boolean)||null;var n;if(!t||!e)return null;if(console.log("Looking for user with HackerRank ID:",t),console.log("Scores data structure:",e),Array.isArray(e)){const n=e.find(e=>e.HackerRankID===t||e.hackerRankID===t||e.hackerrank_id===t||e["HackerRank ID"]===t||e["HackerRank ID "]===t||e["Hackerrank ID"]===t);if(n)return console.log("Found user record:",n),n}else if("object"===typeof e){if(e[t])return console.log("Found user scores by ID key:",e[t]),e[t];for(const[n,r]of Object.entries(e))if(r&&"object"===typeof r&&(r.HackerRankID===t||r.hackerRankID===t||r.hackerrank_id===t||r["HackerRank ID"]===t||r["HackerRank ID "]===t||r["Hackerrank ID"]===t))return console.log("Found user scores in nested structure:",r),r}return console.log("User scores not found. Available data:",e),null};(0,t.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("auth_data"));if(e){var t,n;i(e);const r="scores_".concat(null===(t=e.College)||void 0===t?void 0:t.trim().replace(/\s+/g,""),"_").concat(null===(n=e.Year)||void 0===n?void 0:n.toString().trim()),a=sessionStorage.getItem(r);if(a)try{const e=JSON.parse(a);Ut(e),console.log("User scores loaded from cache")}catch(Q){console.error("Error parsing cached scores:",Q)}e.College&&e.Year&&$t(e.College,e.Year)}else b("/")},[b]),(0,t.useEffect)(()=>{null!==r&&void 0!==r&&r.Email&&(X(!0),ln().finally(()=>{X(!1)}))},[r]),(0,t.useEffect)(()=>{const e=()=>le(navigator.onLine);return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),(0,t.useEffect)(()=>{Ae(!0),window.deferredInstallPrompt&&Ie(window.deferredInstallPrompt);const e=e=>{e.preventDefault(),Ie(e),window.deferredInstallPrompt=e};return(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,t=window.navigator.standalone;Se(e||t)})(),window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),(0,t.useEffect)(()=>{},[]),(0,t.useEffect)(()=>{const e=()=>{const e=window.matchMedia("(display-mode: standalone)").matches,t=localStorage.getItem("pwaInstalled");Se(e||t||window.navigator.standalone)};e();const t=window.matchMedia("(display-mode: standalone)");return t.addListener(e),()=>t.removeListener(e)},[]),(0,t.useEffect)(()=>{const e=()=>Ee(!1),t=()=>Ee(!0);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);(0,t.useEffect)(()=>{me&&(async()=>{if("caches"in window&&ve.link)try{const e=await caches.open("seed-pdf-cache-v1"),t=await e.match(ve.link);ke(!!t),_e&&!t&&$("This PDF is not available offline")}catch(Q){console.error("Error checking cache:",Q)}})()},[me,ve.link,_e]);const Zt=()=>{Ot(!0),console.log("Starting comprehensive logout process..."),localStorage.removeItem("hackerRankAuth"),sessionStorage.removeItem("hackerRankAuthInProgress"),sessionStorage.removeItem("currentHackerRankAssessmentUrl"),console.log("Cleared all HackerRank authentication flags");try{"undefined"!==typeof window.cacheManager&&window.cacheManager.clearAllCache&&(window.cacheManager.clearAllCache(),console.log("Cleared all caches using cacheManager.clearAllCache()"))}catch(Q){console.error("Error clearing cache:",Q)}try{Object.keys(localStorage).forEach(e=>{(e.startsWith("college_")||e.startsWith("seed-")||e.startsWith("cache_")||e.includes("_cache_"))&&(localStorage.removeItem(e),console.log("Removed cache: ".concat(e)))})}catch(Q){console.error("Error clearing college caches:",Q)}try{const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const n=e[t],r=n.indexOf("="),i=r>-1?n.substr(0,r).trim():n.trim();document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/",document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.seedit.tech",document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.hackerrank.com"}console.log("Cleared all cookies")}catch(Q){console.error("Error clearing cookies:",Q)}try{localStorage.removeItem("auth_data"),localStorage.removeItem("role"),localStorage.removeItem("portal_links"),sessionStorage.clear(),setTimeout(()=>{localStorage.clear(),console.log("Cleared all localStorage and sessionStorage")},100)}catch(Q){console.error("Error clearing storages:",Q)}setTimeout(()=>{Ot(!1),console.log("Logout process complete, redirecting to login page"),b("/login")},1500)},en=()=>{n(!e)},tn=()=>{if(!s)return void alert("Please select a course first.");const e=Am[s.toLowerCase()];if(e)if("elearning"===c){const t=e.elearning||[];d(t)}else{let t=(e.nonElearning||[]).find(e=>{switch(c){case"handwritten":return e.title.includes("Handwritten Notes");case"dsa":return e.title.includes("DSA Notes");case"interview":return e.title.includes("Interview Questions");case"tutorial":return e.title.includes("Tutorials");case"code-interview":return e.title.includes("Code Based Interview Questions");default:return!1}});t?"album"===t.type||"code-interview"===t.type?(ye({title:t.title,link:t.link}),ge(!0)):window.open(t.link,"_blank"):alert("No content found for the selected course and module type.")}else alert("No content found for the selected course.")},nn=()=>{y(!1),g(null)},rn=()=>((0,t.useEffect)(()=>{null!==r&&void 0!==r&&r.Email&&(X(!0),ln().finally(()=>{X(!1)}))},[]),(0,Be.jsx)("div",{className:"section-content",children:(0,Be.jsxs)("div",{className:"daily-tracker-container",children:[(0,Be.jsx)("h2",{children:"Daily Progress Tracker"}),(0,Be.jsxs)("h2",{children:["Days: ",A," Title: ",I]})]})})),an=e=>{try{const t=r.Email;localStorage.setItem("userRecords_".concat(t),JSON.stringify({data:e}))}catch(Q){console.error("Error saving records to local:",Q)}},on=async()=>{try{const e=Jh(fh(Kd,"users",r.Email,"learningRecords")),t=(await fd(e)).docs.map(e=>Fe(Fe({},e.data()),{},{id:e.id,firebaseId:e.id})),n=r.Email,i=localStorage.getItem("userRecords_".concat(n));let a=t;if(i){const{data:e}=JSON.parse(i);a=[...t],e.forEach(e=>{const t=a.findIndex(t=>t.firebaseId===e.firebaseId);t>=0?a[t]=e:a.push(e)})}an(a),w(a);const{count:o,id:s}=Sn(),l=cn(o);sn({id:s,count:o,title:l}),T(o),D(l)}catch(e){$("Failed to load records. Please try again.")}},sn=e=>{try{const t=r.Email,n="".concat(t,"_").concat(Date.now());localStorage.setItem("userStreak_".concat(t),JSON.stringify({id:n,data:e}))}catch(Q){console.error("Error saving streak to local:",Q)}},ln=async()=>{try{const e=ph(Kd,"users",r.Email,"streakRecord","currentStreak"),t=await hd(e);if(t.exists()){const e=t.data();T(e.count||0),D(e.streakTitle||"Beginner")}else T(0),D("Beginner")}catch(e){$("Failed to load streak data.")}},cn=e=>0===e?"Beginner":e<=7?"Novice":e<=14?"Apprentice":e<=30?"Explorer":e<=60?"Adventurer":e<=90?"Challenger":e<=150?"Warrior":e<=210?"Veteran":e<=270?"Elite":e<=330?"Master":e<=390?"Grandmaster":e<=450?"Legend":e<=510?"Mythic":e<=570?"Immortal":e<=630?"Divine":"God",un=async e=>{e.preventDefault();const t=bn(U);if(Object.keys(t).length>0)return Z(t),void(t.general&&kn(t.general));try{oe(!0);const e=(()=>{const e=new Date("2025-01-01"),t=new Date;return Math.floor((t-e)/864e5)+1})(),t=Fe(Fe({},U),{},{day:"Day ".concat(e),timestamp:(new Date).toISOString(),email:r.Email,name:r.Name,college:r.College,year:r.Year}),n=ph(fh(Kd,"users",r.Email,"learningRecords"));if(await pd(n,t),await(async()=>{try{const e=ph(Kd,"users",r.Email,"streakRecord","currentStreak"),t=await hd(e),n=(new Date).toLocaleDateString();let i=1;if(t.exists()){if(t.data().lastUpdated.toDate().toLocaleDateString()===n)return;1===Math.floor((new Date-t.data().lastUpdated.toDate())/864e5)&&(i=t.data().count+1)}const a=cn(i);await pd(e,{name:r.Name,email:r.Email,count:i,streakTitle:a,lastUpdated:bd()}),T(i),D(a),dn(i)}catch(e){$("Failed to update streak. Please refresh the page."),console.error(e)}})(),ee){const e=Fe(Fe({},t),{},{id:n.id,firebaseId:n.id});w(t=>[...t,e])}Cn()}catch(n){$("Failed to save record. Please try again."),console.error(n)}finally{oe(!1)}},hn=async e=>{if(window.confirm("Are you sure you want to delete this record?"))try{var t;const n=r.Email,i=(null===(t=JSON.parse(localStorage.getItem("userRecords_".concat(n))))||void 0===t?void 0:t.data)||[],a=i.find(t=>t.id===e);null!==a&&void 0!==a&&a.firebaseId&&await function(e){return md(sh(e.firestore,gh),[new ys(e._key,as.none())])}(ph(Kd,"users",n,"learningRecords",a.firebaseId));const o=i.filter(t=>t.id!==e);an(o),w(o),kn("Record deleted successfully!")}catch(n){console.error("Delete error:",n),$("Failed to delete record. Please try again.")}},dn=e=>{const t={30:"Noob I",60:"Noob II",90:"Noob III",150:"Pro I",210:"Pro II",270:"Pro III",330:"Master I",390:"Master II",450:"Master III",510:"Epic I",570:"Epic II",630:"Epic III",730:"God"};t[e]&&alert("\ud83c\udf89 Congratulations! You've reached ".concat(t[e]," status! Keep going! \ud83d\ude80"))},fn=e=>{const{name:t,value:n}=e.target;z(e=>Fe(Fe({},e),{},{[t]:n}))},pn=e=>{N(e),z({id:e.id,day:e.day,topic:e.topic||"",code:e.code||"",problemId:e.problemId||"",solution:e.solution||"",notes:e.notes||""}),C(!0)},mn=e=>{B(e),P(!0)},gn=()=>{if(!S.trim())return void on();const e=x.filter(e=>{var t,n,r;return(null===(t=e.topic)||void 0===t?void 0:t.toLowerCase().includes(S.toLowerCase()))||(null===(n=e.notes)||void 0===n?void 0:n.toLowerCase().includes(S.toLowerCase()))||(null===(r=e.problemId)||void 0===r?void 0:r.toString().includes(S))});w(e)},vn=()=>{_(""),on()},yn=()=>(0,Be.jsxs)(dm,{show:R,onHide:()=>P(!1),className:"record-modal",size:"lg",children:[(0,Be.jsx)(dm.Header,{closeButton:!0,children:(0,Be.jsx)(dm.Title,{children:"Record Details"})}),(0,Be.jsx)(dm.Body,{children:F&&(0,Be.jsxs)("div",{className:"record-details",children:[(0,Be.jsxs)("div",{className:"record-detail",children:[(0,Be.jsx)("strong",{children:"Day:"})," ",F.day]}),F.topic&&(0,Be.jsxs)("div",{className:"record-detail",children:[(0,Be.jsx)("strong",{children:"Topic:"})," ",F.topic]}),F.code&&(0,Be.jsxs)("div",{className:"record-detail code-section",children:[(0,Be.jsx)("strong",{children:"Code:"}),(0,Be.jsx)("div",{className:"code-container",children:(0,Be.jsx)("pre",{children:F.code})})]}),F.problemId&&(0,Be.jsxs)("div",{className:"record-detail",children:[(0,Be.jsx)("strong",{children:"LeetCode Problem ID:"})," ",F.problemId]}),F.solution&&(0,Be.jsxs)("div",{className:"record-detail code-section",children:[(0,Be.jsx)("strong",{children:"Solution:"}),(0,Be.jsx)("div",{className:"code-container",children:(0,Be.jsx)("pre",{children:F.solution})})]}),F.notes&&(0,Be.jsxs)("div",{className:"record-detail notes-section",children:[(0,Be.jsx)("strong",{children:"Notes:"}),(0,Be.jsx)("div",{className:"notes-container",children:(0,Be.jsx)("pre",{children:F.notes})})]})]})})]}),bn=e=>{const t={},n=e.topic&&e.code,r=e.problemId&&e.solution;return n||r||(t.general="Please fill either Concept (Topic + Code) or LeetCode (Problem ID + Solution)"),(e.topic||e.code)&&(e.topic||(t.topic="Topic is required with code"),e.code||(t.code="Code is required with topic"),e.code&&e.code.length<30&&(t.code="Code must be at least ".concat(30," characters"))),(e.problemId||e.solution)&&(e.problemId||(t.problemId="Problem ID is required with solution"),e.solution||(t.solution="Solution is required with Problem ID"),e.solution&&e.solution.length<30&&(t.solution="Solution must be at least ".concat(30," characters"))),e.topic&&e.topic.length>70&&(t.topic="Topic is too long"),e.code&&e.code.length>5e4&&(t.code="Code is too long"),e.solution&&e.solution.length>5e4&&(t.solution="Solution is too long"),e.problemId&&!/^\d+$/.test(e.problemId)&&(t.problemId="Problem ID must be a number"),t},xn=async()=>{X(!0);try{await on(),te(!0)}catch(Q){$("Failed to load records. Please try again.")}finally{X(!1)}},wn=async()=>{X(!0);try{await(async()=>{try{const e=fh(Kd,"users"),t=await fd(e),n=[];for(const r of t.docs){const e=r.id,t=ph(Kd,"users",e,"streakRecord","currentStreak"),i=await hd(t);if(i.exists()){const e=i.data();n.push({name:e.name||"Unknown",count:e.count||0,streakTitle:e.streakTitle||"No Streak"})}}n.sort((e,t)=>t.count-e.count),K(n)}catch(e){$("Failed to load leaderboard data."),console.error(e)}})(),M(!0)}catch(Q){$("Failed to load leaderboard. Please try again later.")}finally{X(!1)}},Sn=()=>{try{var e;const t=r.Email,n=localStorage.getItem("offlineStreak_".concat(t)),i=new Date;i.setHours(0,0,0,0);const a="".concat(t,"_").concat(Date.now()),o=((null===(e=JSON.parse(localStorage.getItem("userRecords_".concat(t))))||void 0===e?void 0:e.data)||[]).some(e=>{const t=new Date(e.timestamp);return t.setHours(0,0,0,0),t.getTime()===i.getTime()});if(n){const{count:e,lastUpdated:r,id:s}=JSON.parse(n),l=new Date(r);if(l.setHours(0,0,0,0),l.getTime()===i.getTime())return{count:e,id:s};const c=Math.floor((i-l)/864e5);let u;return u=1===c&&o?e+1:c<=2&&o?e:c>2?o?1:0:e,o&&localStorage.setItem("offlineStreak_".concat(t),JSON.stringify({id:a,count:u,lastUpdated:i.toISOString()})),{count:u,id:a}}return o?(localStorage.setItem("offlineStreak_".concat(t),JSON.stringify({id:a,count:1,lastUpdated:i.toISOString()})),{count:1,id:a}):{count:0,id:a}}catch(Q){return console.error("Error calculating offline streak:",Q),{count:0,id:null}}},_n=async e=>{ue("pending");try{const t=function(e){return vh(e=sh(e,gh)),new vd(e,t=>md(e,t))}(Kd);for(const n of e){let e;n.firebaseId?e=ph(Kd,"users",r.Email,"learningRecords",n.firebaseId):(e=ph(fh(Kd,"users",r.Email,"learningRecords")),n.firebaseId=e.id),t.set(e,n)}await t.commit(),an(e),localStorage.removeItem("pendingSync_".concat(r.Email)),ue("synced")}catch(Q){ue("error"),console.error("Sync failed:",Q)}};(0,t.useEffect)(()=>{const e=async()=>{const e=r.Email,t=JSON.parse(localStorage.getItem("pendingSync_".concat(e))),n=JSON.parse(localStorage.getItem("pendingStreakSync_".concat(e)));t&&await _n(t),n&&await En(n)};return window.addEventListener("online",e),()=>window.removeEventListener("online",e)},[null===r||void 0===r?void 0:r.Email]);const En=async e=>{if(navigator.onLine)try{await pd(ph(Kd,"users",r.Email,"streakRecord","currentStreak"),Fe(Fe({},e),{},{lastUpdated:bd()})),localStorage.removeItem("pendingStreakSync_".concat(r.Email))}catch(Q){console.error("Streak sync failed:",Q)}},Cn=()=>{z({day:"",topic:"",code:"",problemId:"",solution:"",notes:""}),N(null),C(!1),Z({})},kn=e=>{$(e),re&&clearTimeout(re);const t=setTimeout(()=>$(null),5e3);ie(t)};(0,t.useEffect)(()=>()=>{re&&clearTimeout(re)},[re]);(0,t.useEffect)(()=>{null!==r&&void 0!==r&&r.Email&&(()=>{const e=r.Email,t=6048e5;try{const n=JSON.parse(localStorage.getItem("pendingSync_".concat(e))),r=JSON.parse(localStorage.getItem("pendingStreakSync_".concat(e)));if(n){const r=n.filter(e=>Date.now()-new Date(e.timestamp).getTime()<t);r.length!==n.length&&localStorage.setItem("pendingSync_".concat(e),JSON.stringify(r))}r&&Date.now()-new Date(r.lastUpdated).getTime()>t&&localStorage.removeItem("pendingStreakSync_".concat(e))}catch(Q){console.error("Error cleaning up queues:",Q)}})()},[null===r||void 0===r?void 0:r.Email]);const Nn=async()=>{try{X(!0);const e=r.Email,t=Jh(fh(Kd,"users",e,"learningRecords")),n=(await fd(t)).docs.map(e=>Fe({id:e.id},e.data()));an(n),w(n),kn("Data recovered successfully!")}catch(Q){kn("Failed to recover data. Please try again.")}finally{X(!1)}},An=async()=>{const e=Te||window.deferredInstallPrompt;if(!e)return $("Installation is not available at the moment. Please use Chrome or Edge browser."),void setTimeout(()=>$(null),3e3);try{const{outcome:t}=await e.prompt();"accepted"===t&&(Se(!0),Ae(!1),Ie(null),window.deferredInstallPrompt=null)}catch(Q){console.error("Error installing PWA:",Q),$("Failed to install app. Please try again."),setTimeout(()=>$(null),3e3)}},Tn=()=>(0,Be.jsxs)(dm,{show:me,onHide:()=>ge(!1),size:"lg",fullscreen:!0,backdrop:"static",keyboard:!1,className:"handwritten-modal",children:[(0,Be.jsxs)(dm.Header,{closeButton:!0,children:[(0,Be.jsx)(dm.Title,{children:ve.title}),we&&(0,Be.jsxs)("div",{className:"offline-toggle",children:[(0,Be.jsxs)("label",{className:"switch",children:[(0,Be.jsx)("input",{type:"checkbox",checked:Ce,onChange:()=>Ce?In():(async()=>{try{if("caches"in window){const e=await caches.open("seed-pdf-cache-v1");await e.add(ve.link),ke(!0),$("PDF is now available offline"),setTimeout(()=>$(null),3e3)}}catch(Q){console.error("Failed to cache PDF:",Q),$("Failed to make PDF available offline"),setTimeout(()=>$(null),3e3)}})(),disabled:_e}),(0,Be.jsx)("span",{className:"slider"})]}),(0,Be.jsx)("span",{className:"toggle-label",children:Ce?"Available offline":"Make available offline"})]})]}),(0,Be.jsx)(dm.Body,{children:(0,Be.jsx)(fm,{albumUrl:ve.link,title:ve.title,isOffline:_e,isAvailableOffline:Ce})})]}),In=async()=>{try{if("caches"in window){const e=await caches.open("seed-pdf-cache-v1");await e.delete(ve.link),ke(!1),$("PDF removed from offline storage"),setTimeout(()=>$(null),3e3);const t=await e.keys();for(const n of t)n.url===ve.link&&await e.delete(n)}}catch(Q){console.error("Failed to remove PDF from cache:",Q),$("Failed to remove PDF from offline storage"),setTimeout(()=>$(null),3e3)}};(0,t.useEffect)(()=>{const e=async()=>{try{const e=localStorage.getItem("app_version"),t=kY;e!==t&&($("New version available. Updating..."),localStorage.setItem("app_version",t),setTimeout(()=>{window.location.reload()},1e3))}catch(Q){console.error("Error checking version:",Q)}};e();const t=setInterval(e,36e5);return()=>{clearInterval(t)}},[]),(0,t.useEffect)(()=>{},[null===r||void 0===r?void 0:r.Email]);const Dn=()=>{const e={F001:310,F002:200,F003:200,F004:800,F005:300,F006:200,F007:500,F008:380,F009:100,F010:100};return(0,Be.jsxs)("div",{className:"performance-section",children:[(0,Be.jsx)("h2",{children:"Performance Tracking"}),zt&&(0,Be.jsxs)("div",{className:"scores-loading",children:[(0,Be.jsx)("div",{className:"loading-spinner"}),(0,Be.jsx)("p",{children:"Loading your performance data..."})]}),Vt&&(0,Be.jsxs)("div",{className:"scores-error",children:[(0,Be.jsxs)("p",{children:["\u26a0\ufe0f Unable to load performance data: ",Vt]}),(0,Be.jsx)("button",{className:"retry-btn",onClick:()=>(null===r||void 0===r?void 0:r.College)&&(null===r||void 0===r?void 0:r.Year)&&$t(r.College,r.Year),children:"Retry"})]}),Kt&&(0,Be.jsxs)("div",{className:"scores-loading",children:[(0,Be.jsx)("div",{className:"loading-spinner"}),(0,Be.jsx)("p",{children:"Loading modules..."})]}),(0,Be.jsx)("div",{className:"course-progress-grid",children:qt.map(t=>{var n;const r=t.id,i=t.name,a=null!==(n=e[r])&&void 0!==n?n:100,o=Math.min(a,Number((null===Bt||void 0===Bt?void 0:Bt[r])||0)),s=Math.min(100,o/a*100);return(0,Be.jsxs)("div",{className:"course-progress-card",children:[(0,Be.jsx)("h3",{children:i}),(0,Be.jsx)("div",{className:"progress-bar-container",children:(0,Be.jsx)("div",{className:"progress-bar",style:{width:"".concat(s,"%")}})}),(0,Be.jsxs)("div",{className:"progress-details",children:[(0,Be.jsxs)("p",{children:["Completed: ",o,"/",a," marks"]}),!1,(0,Be.jsxs)("p",{children:["Progress: ",s.toFixed(1),"%"]})]})]},r)})}),(0,Be.jsxs)("div",{className:"goals-section",children:[(0,Be.jsx)("h3",{children:"Learning Goals"}),(0,Be.jsx)("div",{className:"goals-grid",children:Object.entries(Ve).map(e=>{let[t,n]=e;return(0,Be.jsxs)("div",{className:"goal-card",children:[(0,Be.jsxs)("h4",{children:[t.charAt(0).toUpperCase()+t.slice(1)," Goal"]}),(0,Be.jsxs)("div",{className:"goal-input",children:[(0,Be.jsx)("label",{children:"Target Questions:"}),(0,Be.jsx)("input",{type:"number",value:n.target,onChange:e=>((e,t)=>{He(n=>Fe(Fe({},n),{},{[e]:Fe(Fe({},n[e]),{},{target:parseInt(t)})}))})(t,e.target.value),min:"1"})]}),(0,Be.jsxs)("div",{className:"goal-progress",children:[(0,Be.jsx)("div",{className:"progress-bar-container",children:(0,Be.jsx)("div",{className:"progress-bar",style:{width:"".concat(n.completed/n.target*100,"%")}})}),(0,Be.jsxs)("p",{children:[n.completed,"/",n.target," completed"]})]})]},t)})})]})]})},Rn=()=>(0,Be.jsx)("div",{className:"help-section",children:(0,Be.jsxs)("div",{className:"help-grid",children:[(0,Be.jsxs)("div",{className:"help-card",children:[(0,Be.jsx)("h3",{children:"\ud83d\ude80 Getting Started"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Platform Overview"}),(0,Be.jsx)("li",{children:"Navigation Guide"}),(0,Be.jsx)("li",{children:"Setting Up Your Profile"}),(0,Be.jsx)("li",{children:"Choosing Programming Languages"}),(0,Be.jsx)("li",{children:"Setting Learning Goals"}),(0,Be.jsx)("li",{children:"Tracking Daily Progress"}),(0,Be.jsx)("li",{children:"Joining the SEED-IT Community"})]})]}),(0,Be.jsxs)("div",{className:"help-card",children:[(0,Be.jsx)("h3",{children:"\u2728 Platform Features"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"E-Learning Videos"}),(0,Be.jsx)("li",{children:"Interactive Code Editor"}),(0,Be.jsx)("li",{children:"Progress Tracking"}),(0,Be.jsx)("li",{children:"Daily Coding Challenges"}),(0,Be.jsx)("li",{children:"Handwritten Notes"}),(0,Be.jsx)("li",{children:"Offline Access"}),(0,Be.jsx)("li",{children:"Performance Analytics"}),(0,Be.jsx)("li",{children:"App Updates & Features"})]})]}),(0,Be.jsxs)("div",{className:"help-card",children:[(0,Be.jsx)("h3",{children:"\ud83d\udd12 Security & Privacy"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Account Security Best Practices"}),(0,Be.jsx)("li",{children:"Password Management"}),(0,Be.jsx)("li",{children:"Data Protection Measures"}),(0,Be.jsx)("li",{children:"Privacy Settings"}),(0,Be.jsx)("li",{children:"Two-Factor Authentication"}),(0,Be.jsx)("li",{children:"Device Authorization"}),(0,Be.jsx)("li",{children:"Safe Browsing Tips"}),(0,Be.jsx)("li",{children:"Report Security Concerns"})]})]}),(0,Be.jsxs)("div",{className:"help-card",children:[(0,Be.jsx)("h3",{children:"\ud83d\udcde Support & Contact"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Technical Support"}),(0,Be.jsx)("li",{children:"Academic Support"}),(0,Be.jsx)("li",{children:"Feedback & Suggestions"}),(0,Be.jsx)("li",{children:"Report Issues"}),(0,Be.jsx)("li",{children:"Contact Information"}),(0,Be.jsx)("li",{children:"Response Times"}),(0,Be.jsx)("li",{children:"Emergency Support"}),(0,Be.jsx)("li",{children:"FAQs"})]})]})]})}),Pn=()=>(0,Be.jsx)("div",{className:"settings-section",children:(0,Be.jsxs)("div",{className:"settings-grid",children:[(0,Be.jsxs)("div",{className:"settings-card",children:[(0,Be.jsx)("h3",{children:"\ud83d\udd14 Notification Preferences"}),(0,Be.jsxs)("div",{className:"settings-card-content",children:[(0,Be.jsx)("p",{children:"Enable daily reminders to stay consistent with your learning journey."}),(0,Be.jsxs)("div",{className:"notification-schedule",children:[(0,Be.jsx)("h4",{children:"Daily Reminder Schedule:"}),(0,Be.jsx)("ul",{children:Im.map((e,t)=>(0,Be.jsxs)("li",{children:[(0,Be.jsx)("span",{className:"time-icon",children:"\u23f0"})," ",e.hour,":",e.minute.toString().padStart(2,"0")," - ",e.message]},t))})]}),(0,Be.jsx)("button",{onClick:Fn,className:"notification-toggle ".concat("granted"===et?"enabled":""),children:"granted"===et?"\u2713 Notifications Enabled":"Enable Daily Reminders"})]})]}),(0,Be.jsxs)("div",{className:"settings-card",children:[(0,Be.jsx)("h3",{children:"\ud83d\udcbe Storage Management"}),(0,Be.jsxs)("div",{className:"settings-card-content",children:[(0,Be.jsx)("p",{children:"Manage your offline data and storage preferences."}),(0,Be.jsxs)("div",{className:"storage-actions",children:[(0,Be.jsxs)("button",{onClick:Nn,className:"storage-button",children:[(0,Be.jsx)("span",{children:"\ud83d\udd04"})," Recover Data"]}),(0,Be.jsxs)("button",{onClick:In,className:"storage-button warning",children:[(0,Be.jsx)("span",{children:"\ud83d\uddd1\ufe0f"})," Clear Offline Data"]})]}),(0,Be.jsx)("p",{className:"storage-warning",children:"\u26a0\ufe0f Clearing offline data will remove all cached content. Make sure to sync before clearing."})]})]}),(0,Be.jsxs)("div",{className:"settings-card",children:[(0,Be.jsx)("h3",{children:"\ud83d\udc64 Account Settings"}),(0,Be.jsxs)("div",{className:"settings-card-content",children:[(0,Be.jsx)("p",{children:"Manage your account preferences and application settings."}),(0,Be.jsxs)("div",{className:"account-actions",children:[Te&&!we&&(0,Be.jsxs)("button",{onClick:An,className:"account-button",children:[(0,Be.jsx)("span",{children:"\ud83d\udcf1"})," Install as App"]}),(0,Be.jsxs)("button",{onClick:Zt,className:"account-button warning",children:[(0,Be.jsx)("span",{children:"\ud83d\udeaa"})," Logout"]})]})]})]}),(0,Be.jsxs)("div",{className:"settings-card",children:[(0,Be.jsx)("h3",{children:"\ud83c\udfa8 Display Settings"}),(0,Be.jsxs)("div",{className:"settings-card-content",children:[(0,Be.jsx)("p",{children:"Customize your dashboard appearance and layout preferences."}),(0,Be.jsx)("div",{className:"display-options",children:(0,Be.jsxs)("label",{className:"display-option",children:[(0,Be.jsx)("input",{type:"checkbox",checked:!e,onChange:en}),"Show Sidebar"]})})]})]})]})}),jn=async()=>{try{Ct(!0);const[e,t]=await Promise.all([Qd.getUserAccess(r.Email,r.College),Qd.getPortalLinks()]);mt(e),yt(t),e&&(dt(!0),document.querySelectorAll(".sidebar a").forEach(e=>{e.textContent.includes("Logout")||e.textContent.includes("Assessment")||e.classList.add("disabled")}))}catch(Q){console.error("Error fetching assessment data:",Q)}finally{Ct(!1)}},Ln=()=>{dt(!1),mt(null),yt(null),jt(!1),Rt(null),document.querySelectorAll(".sidebar a").forEach(e=>{e.classList.remove("disabled")})},On=e=>{Rt(e),jt(!0)},Mn=async e=>{try{if("granted"===Notification.permission){const t={body:"Time for your scheduled learning session! \ud83d\udcda",icon:"/SEED_Logo.png",badge:"/favicon.ico",tag:"daily-reminder-".concat(e.hour,":").concat(e.minute),requireInteraction:!0,timestamp:(new Date).getTime()},n=new Audio("/tone.mp3");await n.play().catch(console.error),new Notification("SEED-IT Learning Reminder",t),console.log("Notification shown for time slot: ".concat(e.hour,":").concat(e.minute))}}catch(Q){console.error("Error showing notification:",Q),kn("Failed to show notification. Please try again.")}},Fn=async()=>{try{if("granted"!==Notification.permission)await(async()=>{try{if("granted"!==Notification.permission&&"granted"===await Notification.requestPermission()){const e=new Audio("/tone.mp3");await e.play().catch(console.error),await Mn({hour:(new Date).getHours(),minute:(new Date).getMinutes()}),at(!0)}}catch(Q){console.error("Error in requestPermissions:",Q),kn("Failed to set up notifications. Please try again.")}})();else if(at(!it),!it){for(const e of Im)await Mn(e);kn("Notifications enabled successfully!")}}catch(Q){console.error("Error toggling notifications:",Q),kn("Failed to toggle notifications. Please try again.")}};(0,t.useEffect)(()=>{"granted"===Notification.permission&&at(!0)},[]);const Bn=e=>{const t=[{id:"c",name:"C Programming"},{id:"cpp",name:"C++"},{id:"java",name:"Java"},{id:"python",name:"Python"},{id:"c-sharp",name:"C Sharp"},{id:"mongodb",name:"MongoDB"},{id:"javascript",name:"JavaScript"},{id:"sql",name:"SQL"},{id:"machine-learning",name:"Machine Learning"},{id:"reactjs",name:"ReactJS"}];return e?t.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())):t},Un=e=>{const t=[{id:"interview",name:"Interview Questions"},{id:"elearning",name:"E-Learning"},{id:"tutorial",name:"Tutorial Notes"},{id:"handwritten",name:"Handwritten Notes"},{id:"dsa",name:"DSA Notes"},{id:"code-interview",name:"Code-based Interview Questions"}];return e?t.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())):t},[zn,Wn]=(0,t.useState)(""),[Vn,Hn]=(0,t.useState)(""),[qn,Gn]=(0,t.useState)([]),[Kn,Yn]=(0,t.useState)([]),[Xn,Qn]=(0,t.useState)(!1),$n=()=>{Qn(!Xn)};return(0,t.useEffect)(()=>{const e=e=>{e.target.closest(".profile-dropdown-container")||Qn(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,t.useEffect)(()=>{(async()=>{if(null!==r&&void 0!==r&&r.College&&null!==r&&void 0!==r&&r.Email)try{var e,t,n,i;Yt(!0);const[a,o]=await Promise.all([Qd.getAccessControl(),Qd.getUserAccess(r.Email,r.College)]),s=(null===o||void 0===o?void 0:o.allowed_modules)||[],l=(null===a||void 0===a||null===(e=a.courses)||void 0===e||null===(t=e.fundamentals)||void 0===t?void 0:t.modules)||{},c=(null===a||void 0===a||null===(n=a.courses)||void 0===n||null===(i=n.assessments)||void 0===i?void 0:i.modules)||{},u=Object.values(l).sort((e,t)=>(e.display_order||0)-(t.display_order||0)).filter(e=>s.includes(e.id)),h=Object.values(c).sort((e,t)=>(e.display_order||0)-(t.display_order||0)).filter(e=>s.includes(e.id)),d=u.length>0?u:Object.values(l).sort((e,t)=>(e.display_order||0)-(t.display_order||0));Gt(d);const f=u.length>0?u:Object.values(l).sort((e,t)=>(e.display_order||0)-(t.display_order||0)),p=h.length>0?h:Object.values(c).sort((e,t)=>(e.display_order||0)-(t.display_order||0));Qt([...f,...p])}catch(VD){console.error("Failed to load access control for performance modules:",VD),Gt([]),Qt([])}finally{Yt(!1)}})()},[null===r||void 0===r?void 0:r.College,null===r||void 0===r?void 0:r.Email]),(0,Be.jsxs)("div",{className:"student-dashboard",children:[!se&&(0,Be.jsxs)("div",{className:"offline-banner",style:{position:"fixed",top:0,width:"100%",backgroundColor:"#ff9800",color:"white",textAlign:"center",padding:"5px",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,Be.jsx)("span",{children:"You're offline."}),me&&(0,Be.jsx)("span",{style:{backgroundColor:Ce?"#4caf50":"#f44336",padding:"2px 8px",borderRadius:"4px",fontSize:"0.9em"},children:Ce?"\u2713 PDF Available Offline":"\u2715 PDF Not Available Offline"})]}),Y?(0,Be.jsxs)("div",{className:"loading-overlay",children:[(0,Be.jsx)("div",{className:"loading-spinner"}),(0,Be.jsx)("p",{children:"Loading your dashboard..."})]}):(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"sidebar ".concat(window.innerWidth<=768?he?"active":"":ot?"collapsed":""),id:"sidebar",children:Tm()?(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"sidebar-category",children:"Assessment"}),(0,Be.jsxs)(De,{to:"#",className:"assessment"===a?"active":"",onClick:()=>{o("assessment"),ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"Assessment",children:[(0,Be.jsx)(wt,{}),(0,Be.jsx)("span",{className:"link-text",children:"Assessment"})]}),(0,Be.jsxs)(De,{to:"/student/mcq",className:"/student/mcq"===window.location.pathname?"active":"",onClick:()=>{ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"MCQ's",children:[(0,Be.jsx)(St,{}),(0,Be.jsx)("span",{className:"link-text",children:"MCQ's"})]})]}):(0,Be.jsxs)(Be.Fragment,{children:[window.innerWidth>768&&(0,Be.jsx)("button",{className:"sidebar-toggle-btn",onClick:()=>ct(!ot),"aria-label":"Toggle Sidebar",children:(0,Be.jsx)($e,{})}),(0,Be.jsx)("div",{className:"sidebar-category",children:"Analytics"}),(0,Be.jsxs)(De,{to:"#performance",className:"performance"===a?"active":"",onClick:()=>{o("performance"),ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"Performance",children:[(0,Be.jsx)(nt,{})," ",(0,Be.jsx)("span",{className:"link-text",children:"Performance"})]}),(0,Be.jsx)("div",{className:"sidebar-category",children:"Learning"}),(0,Be.jsxs)(De,{to:"#skill-search",className:"skill-search"===a?"active":"",onClick:()=>{o("skill-search"),ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"Skill Search",children:[(0,Be.jsx)(kt,{})," ",(0,Be.jsx)("span",{className:"link-text",children:"Skill Search"})]}),(0,Be.jsxs)(De,{to:"#advanced-learning",className:"advanced-learning"===a?"active":"",onClick:()=>{o("advanced-learning"),ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"Advanced Learning",children:[(0,Be.jsx)(vt,{})," ",(0,Be.jsx)("span",{className:"link-text",children:"Advanced Learning"})]}),(0,Be.jsxs)(De,{to:"#editor",className:"".concat("editor"===a?"active":""," ").concat(Tm()?"disabled-link":""),onClick:e=>{Tm()?e.preventDefault():(o("editor"),ct(!0),window.innerWidth<=768&&de(!1))},"data-tooltip":"Code Editor",children:[(0,Be.jsx)(st,{}),(0,Be.jsx)("span",{className:"link-text",children:"Code Editor"}),Tm()&&(0,Be.jsx)(bt,{className:"lock-indicator"})]}),(0,Be.jsx)("div",{className:"sidebar-category",children:"Assessment"}),(0,Be.jsxs)(De,{to:"#",className:"assessment"===a?"active":"",onClick:()=>{o("assessment"),ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"Assessment",children:[(0,Be.jsx)(wt,{}),(0,Be.jsx)("span",{className:"link-text",children:"Assessment"}),!Tm()&&(0,Be.jsx)(bt,{className:"lock-indicator"})]}),(0,Be.jsxs)(De,{to:"#aptitude",className:"aptitude"===a?"active":"",onClick:()=>{o("aptitude"),ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"Aptitude Tests",children:[(0,Be.jsx)(tt,{}),(0,Be.jsx)("span",{className:"link-text",children:"Aptitude Tests"}),!Tm()&&(0,Be.jsx)(bt,{className:"lock-indicator"})]}),(0,Be.jsx)("div",{className:"sidebar-category",children:"Resources"}),(0,Be.jsxs)(De,{to:"#downloads",className:"downloads"===a?"active":"",onClick:()=>{o("downloads"),ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"Downloads",children:[(0,Be.jsx)(ut,{})," ",(0,Be.jsx)("span",{className:"link-text",children:"Downloads"})]}),(0,Be.jsxs)(De,{to:"#help",className:"help"===a?"active":"",onClick:()=>{o("help"),ct(!0),window.innerWidth<=768&&de(!1)},"data-tooltip":"Help",children:[(0,Be.jsx)(_t,{})," ",(0,Be.jsx)("span",{className:"link-text",children:"Help"})]})]})}),(0,Be.jsxs)("div",{className:"main-container",children:[(0,Be.jsx)("div",{className:"dashboard-header",children:(0,Be.jsx)("div",{className:"header-content",children:window.innerWidth<=768?(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("button",{className:"menu-toggle",onClick:()=>{de(!he),he&&ct(!0)},"aria-label":"Toggle menu",children:(0,Be.jsx)($e,{})}),(0,Be.jsx)("div",{className:"header-center",children:(0,Be.jsx)("div",{className:"header-title",children:(0,Be.jsx)("img",{src:"https://raw.githubusercontent.com/seeditDev/SEED-Website/f3cee9002410a00df4da7bea636ac9fbc4c312ca/Plugins/SEED_Logo.webp",alt:"SEED Logo",className:"header-logo"})})}),(0,Be.jsxs)("div",{className:"header-buttons",children:[Te&&!we&&(0,Be.jsx)("button",{className:"install-icon-button",onClick:An,"aria-label":"Install app",children:(0,Be.jsx)(ut,{})}),(0,Be.jsxs)("div",{className:"profile-dropdown-container",children:[(0,Be.jsx)("button",{className:"profile-button",onClick:$n,"aria-label":"Profile menu",children:(0,Be.jsx)(It,{})}),Xn&&(0,Be.jsxs)("div",{className:"profile-dropdown-menu",children:[(0,Be.jsxs)("button",{onClick:()=>{o("profile"),Qn(!1)},children:[(0,Be.jsx)(It,{})," Profile"]}),(0,Be.jsxs)("button",{onClick:()=>{o("scores"),Qn(!1)},children:[(0,Be.jsx)(tt,{})," Scores"]}),(0,Be.jsxs)("button",{onClick:()=>{o("settings"),Qn(!1)},children:[(0,Be.jsx)(lt,{})," Settings"]})]})]}),(0,Be.jsx)("button",{className:"logout-button",onClick:Zt,"aria-label":"Logout",children:(0,Be.jsx)(Nt,{})})]})]}):(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"header-center",children:(0,Be.jsxs)("div",{className:"header-title",children:[(0,Be.jsx)("img",{src:"https://raw.githubusercontent.com/seeditDev/SEED-Website/f3cee9002410a00df4da7bea636ac9fbc4c312ca/Plugins/SEED_Logo.webp",alt:"SEED Logo",className:"header-logo"}),(0,Be.jsx)("span",{children:"SEED-IT"})]})}),(0,Be.jsxs)("div",{className:"header-buttons",children:[Te&&!we&&(0,Be.jsx)("button",{className:"install-icon-button",onClick:An,"aria-label":"Install app",children:(0,Be.jsx)(ut,{})}),(0,Be.jsxs)("div",{className:"profile-dropdown-container",children:[(0,Be.jsx)("button",{className:"profile-button",onClick:$n,"aria-label":"Profile menu",children:null!==r&&void 0!==r&&r.Name?r.Name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):(0,Be.jsx)(It,{})}),Xn&&(0,Be.jsxs)("div",{className:"profile-dropdown-menu",children:[(0,Be.jsxs)("div",{className:"profile-dropdown-header",children:[(0,Be.jsx)("h4",{children:(null===r||void 0===r?void 0:r.Name)||"User"}),(0,Be.jsx)("p",{children:(null===r||void 0===r?void 0:r.Email)||""})]}),(0,Be.jsxs)("button",{onClick:()=>{o("profile"),Qn(!1)},children:[(0,Be.jsx)(It,{})," Profile"]}),(0,Be.jsxs)("button",{onClick:()=>{o("scores"),Qn(!1)},children:[(0,Be.jsx)(tt,{})," Scores"]}),(0,Be.jsx)("div",{className:"profile-dropdown-divider"}),(0,Be.jsxs)("button",{onClick:()=>{o("settings"),Qn(!1)},children:[(0,Be.jsx)(lt,{})," Settings"]})]})]}),(0,Be.jsx)("button",{className:"logout-button",onClick:Zt,"aria-label":"Logout",children:(0,Be.jsx)(Nt,{})})]})]})})}),(0,Be.jsx)("div",{className:"main-content",children:(0,Be.jsx)("main",{children:r&&(()=>{switch(a){case"daily-tracker":return(0,Be.jsx)(rn,{});case"scores":return(0,Be.jsx)("div",{className:"section-content",children:(0,Be.jsxs)("div",{id:"scoresDetails",className:"scores-card",children:[(0,Be.jsx)("h3",{children:"Scores"}),0===Xt.length&&(0,Be.jsx)("p",{children:"No modules available."}),Xt.map(e=>{var t;return(0,Be.jsxs)("p",{children:[(0,Be.jsxs)("strong",{children:[e.name,":"]})," ",null!==(t=null===Bt||void 0===Bt?void 0:Bt[e.id])&&void 0!==t?t:"N/A"]},e.id)})]})});case"performance":case"performance":return Dn();case"home":return(0,Be.jsx)("div",{className:"section-content",children:(0,Be.jsx)("div",{id:"welcomeSection",className:"welcome-container",children:(0,Be.jsxs)("div",{className:"welcome-grid",children:[(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"Welcome to SEED IT!"}),(0,Be.jsx)("p",{children:"SEED IT helps you learn, practice, and track your coding journey."})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udcf1 Install App"}),Te&&!we&&(0,Be.jsxs)("button",{onClick:An,className:"install-button",children:[(0,Be.jsx)(ut,{})," Install SEED-IT App"]}),(0,Be.jsx)("p",{children:"Install SEED-IT for a better experience!"})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udd0d Skill Search"}),(0,Be.jsx)("p",{children:"Find trending tech skills and resources to upskill yourself."})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udcd8 SEED Tracker"}),(0,Be.jsx)("p",{children:"Log your daily learning progress and maintain your streak."})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udc68\u200d\ud83d\udcbb Instructor Sessions"}),(0,Be.jsx)("p",{children:"Join live classes daily to interact with instructors and peers."})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udcbb Code Editor"}),(0,Be.jsx)("p",{children:"Write, test, and debug code in real-time."})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83c\udfc6 Challenge Mode"}),(0,Be.jsx)("p",{children:"Compete with peers and solve coding challenges."})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udce5 Download SEED IT"}),(0,Be.jsx)("p",{children:"Get our app to compete and earn badges!"})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udcca Top Skills"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"1\ufe0f\u20e3 Data Structures & Algorithms"}),(0,Be.jsx)("li",{children:"2\ufe0f\u20e3 SQL Query Optimization"}),(0,Be.jsx)("li",{children:"3\ufe0f\u20e3 Python for AI & ML"})]})]}),(0,Be.jsxs)("div",{className:"box",children:[(0,Be.jsx)("h3",{children:"\ud83d\udd25 Your Streak"}),(0,Be.jsxs)("p",{children:["Current Streak: ",(0,Be.jsxs)("strong",{children:[A," Days"]})]}),(0,Be.jsxs)("p",{children:["Title: ",(0,Be.jsx)("strong",{children:I})]})]})]})})});case"profile":return(0,Be.jsx)("div",{className:"section-content",children:(0,Be.jsxs)("div",{className:"profile-card",children:[(0,Be.jsx)("h3",{children:"Profile Information"}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Name:"})," ",(null===r||void 0===r?void 0:r.Name)||"N/A"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Email:"})," ",(null===r||void 0===r?void 0:r.Email)||"N/A"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"College:"})," ",(null===r||void 0===r?void 0:r.College)||"N/A"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Department:"})," ",(null===r||void 0===r?void 0:r.Department)||"N/A"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Year:"})," ",(null===r||void 0===r?void 0:r.Year)||"N/A"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Roll Number:"})," ",(null===r||void 0===r?void 0:r["Roll Number"])||"N/A"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Hackerrank Mail:"})," ",(null===r||void 0===r?void 0:r["Hackerrank Mail"])||"N/A"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Hackerrank ID:"})," ",(null===r||void 0===r?void 0:r["Hackerrank ID"])||"N/A"]})]})});case"skill-search":return(0,Be.jsxs)("div",{className:"section-content",children:[(0,Be.jsx)("h3",{children:"Skill Search"}),(0,Be.jsxs)("div",{className:"side-by-side-selection",children:[(0,Be.jsxs)("div",{className:"selection-container",children:[(0,Be.jsxs)("div",{className:"selection-box",children:[(0,Be.jsx)("h3",{children:"Course"}),(0,Be.jsx)("input",{type:"text",className:"search-box",placeholder:"Search courses...",value:zn,onChange:e=>{Wn(e.target.value),Gn(Bn(e.target.value))}}),(0,Be.jsxs)("ul",{className:"selection-list",children:[(qn.length>0?qn:Bn("")).map(e=>(0,Be.jsx)("li",{onClick:()=>(e=>{var t;if(l(e),"elearning"===c){var n;const t=(null===(n=Am[e.toLowerCase()])||void 0===n?void 0:n.elearning)||[];d(Array.isArray(t)?t:[])}const r=(null===(t=Am[e.toLowerCase()])||void 0===t?void 0:t.elearning)||[];Ft(t=>Fe(Fe({},t),{},{[e.toLowerCase()]:Array.isArray(r)?r:[]}))})(e.id),className:s===e.id?"section-selected":"",children:e.name},e.id)),0===qn.length&&(0,Be.jsx)("li",{className:"no-results",children:"No matching courses found"})]})]}),(0,Be.jsxs)("div",{className:"selection-box",children:[(0,Be.jsx)("h3",{children:"Module Type"}),(0,Be.jsx)("input",{type:"text",className:"search-box",placeholder:"Search modules...",value:Vn,onChange:e=>{Hn(e.target.value),Yn(Un(e.target.value))}}),(0,Be.jsxs)("ul",{className:"selection-list",children:[(Kn.length>0?Kn:Un("")).map(e=>(0,Be.jsx)("li",{onClick:()=>(e=>{if(u(e),"elearning"===e&&s){var t;const e=(null===(t=Am[s.toLowerCase()])||void 0===t?void 0:t.elearning)||[];d(Array.isArray(e)?e:[])}else d([])})(e.id),className:c===e.id?"module-selected":"",children:e.name},e.id)),0===Kn.length&&(0,Be.jsx)("li",{className:"no-results",children:"No matching modules found"})]})]}),"elearning"===c&&(0,Be.jsxs)("div",{className:"selection-box",children:[(0,Be.jsx)("h3",{children:"Topics"}),(0,Be.jsx)("input",{type:"text",className:"search-box",placeholder:"Search topics...",onChange:e=>{const t=e.target.value.toLowerCase(),n=(Mt[s]||[]).filter(e=>e.title.toLowerCase().includes(t));d(n)}}),(0,Be.jsxs)("ul",{className:"selection-list",children:[h.map((e,t)=>(0,Be.jsxs)("li",{onClick:()=>p(e.link),className:f===e.link?"module-selected":"",children:[e.title,(0,Be.jsx)("button",{className:"play-btn-inline",onClick:t=>{var n;t.stopPropagation(),n=e.link,g(n),y(!0)},children:"\u25b6 Play"})]},t)),0===h.length&&(0,Be.jsx)("li",{className:"no-results",children:s?"No topics available for this course":"Please select a course first"})]})]})]}),(0,Be.jsx)("div",{className:"button-container",children:"elearning"!==c&&(0,Be.jsx)("button",{className:"begin-btn",onClick:tn,children:"Search"})})]}),v&&(0,Be.jsxs)("div",{className:"iframe-popup",children:[(0,Be.jsx)("div",{className:"iframe-overlay",onClick:nn}),(0,Be.jsx)("button",{className:"close-button",onClick:nn,children:"CLICK TO CLOSE----\u2716"}),(0,Be.jsx)("div",{className:"iframe-container",children:(0,Be.jsx)("iframe",{src:"".concat(m,"?controls=1&modestbranding=1&rel=0&showinfo=0&enablejsapi=1"),width:"100%",height:"100%",title:"Topic Content",style:{border:"none"},allowFullScreen:!0})})]})]});case"advanced-learning":return(0,Be.jsxs)("div",{className:"section-content",children:[(0,Be.jsx)("div",{className:"red-container"}),(0,Be.jsx)("div",{id:"advancedLearning",style:{width:"100vw",height:"100vh",border:"1px solid #ccc"},children:(0,Be.jsx)("iframe",{id:"advancedLearningFrame",src:"https://andreasbm.github.io/web-skills/",width:"100%",height:"100%",scrolling:"yes",style:{border:"none"}})})]});case"editor":return Tm()?null:(0,Be.jsx)("div",{className:"section-content",id:"editorContainer",children:(0,Be.jsx)("div",{id:"editorFrame",style:{width:"100%",height:"80vh",border:"1px solid #ccc"},children:(0,Be.jsx)("iframe",{src:"https://onecompiler.com/embed/c/",width:"100%",height:"100%",frameBorder:"0",title:"Code Editor"})})});case"daily-sessions":return(0,Be.jsx)("div",{className:"section-content",children:(0,Be.jsxs)("div",{className:"daily-sessions-container",children:[(0,Be.jsxs)("div",{className:"progress-card",children:[(0,Be.jsx)("h3",{children:"Today's Progress"}),(0,Be.jsxs)("div",{className:"progress-stats",children:[(0,Be.jsxs)("div",{className:"stat-item",children:[(0,Be.jsx)("span",{className:"stat-value",children:"2"}),(0,Be.jsx)("span",{className:"stat-label",children:"Hours Studied"})]}),(0,Be.jsxs)("div",{className:"stat-item",children:[(0,Be.jsx)("span",{className:"stat-value",children:"3"}),(0,Be.jsx)("span",{className:"stat-label",children:"Tasks Completed"})]}),(0,Be.jsxs)("div",{className:"stat-item",children:[(0,Be.jsx)("span",{className:"stat-value",children:"85%"}),(0,Be.jsx)("span",{className:"stat-label",children:"Daily Goal"})]})]})]}),(0,Be.jsxs)("div",{className:"timer-card",children:[(0,Be.jsx)("h3",{children:"Study Timer"}),(0,Be.jsx)("div",{className:"timer-display",children:"25:00"}),(0,Be.jsxs)("div",{className:"timer-controls",children:[(0,Be.jsx)("button",{className:"timer-btn start",children:"Start"}),(0,Be.jsx)("button",{className:"timer-btn pause",children:"Pause"}),(0,Be.jsx)("button",{className:"timer-btn reset",children:"Reset"})]})]}),(0,Be.jsxs)("div",{className:"tasks-card",children:[(0,Be.jsx)("h3",{children:"Today's Tasks"}),(0,Be.jsxs)("div",{className:"task-list",children:[(0,Be.jsxs)("div",{className:"task-item",children:[(0,Be.jsx)("input",{type:"checkbox",id:"task1"}),(0,Be.jsx)("label",{htmlFor:"task1",children:"Complete C++ Tutorial"})]}),(0,Be.jsxs)("div",{className:"task-item",children:[(0,Be.jsx)("input",{type:"checkbox",id:"task2"}),(0,Be.jsx)("label",{htmlFor:"task2",children:"Solve LeetCode Problem"})]}),(0,Be.jsxs)("div",{className:"task-item",children:[(0,Be.jsx)("input",{type:"checkbox",id:"task3"}),(0,Be.jsx)("label",{htmlFor:"task3",children:"Practice Data Structures"})]})]}),(0,Be.jsx)("button",{className:"add-task-btn",children:"Add New Task"})]})]})});case"assessment":return(0,Be.jsxs)("div",{className:"section-content",children:[(0,Be.jsx)("h2",{children:"Assessment"}),(0,Be.jsx)("div",{className:"assessment-container",children:ht?(0,Be.jsxs)("div",{className:"assessment-content",children:[(0,Be.jsxs)("div",{className:"assessment-header",children:[(0,Be.jsx)("h3",{children:"Assessment in Progress"}),(0,Be.jsx)("button",{className:"end-btn",onClick:Ln,children:"End Assessment"})]}),gt&&(0,Be.jsxs)("div",{className:"portal-links",children:[(0,Be.jsx)("h4",{children:"Assessment Portals:"}),(0,Be.jsx)("div",{className:"links-grid",children:Object.entries(gt).map(e=>{let[t,n]=e;return(0,Be.jsxs)("div",{className:"portal-link-item",children:[(0,Be.jsx)("h5",{children:t}),(0,Be.jsx)("button",{className:"portal-btn ".concat(null!==pt&&void 0!==pt&&pt[t]?"":"disabled"),onClick:()=>(null===pt||void 0===pt?void 0:pt[t])&&On(n),disabled:!(null!==pt&&void 0!==pt&&pt[t]),children:null!==pt&&void 0!==pt&&pt[t]?"Open Portal":"Access Disabled"})]},t)})})]})]}):(0,Be.jsxs)("div",{className:"assessment-start",children:[(0,Be.jsx)("h3",{children:"Assessment Platform"}),(0,Be.jsx)("p",{children:"To start Assessment, click the button below:"}),(0,Be.jsx)("button",{className:"start-btn",onClick:jn,disabled:Et,children:Et?"Loading...":"Start Assessment"})]})}),Pt&&(0,Be.jsx)("div",{className:"portal-modal",children:(0,Be.jsxs)("div",{className:"portal-modal-content",children:[(0,Be.jsxs)("div",{className:"portal-modal-header",children:[(0,Be.jsx)("h3",{children:"Assessment Portal"}),(0,Be.jsx)("button",{className:"modal-close",onClick:()=>jt(!1),children:(0,Be.jsx)(At,{})})]}),(0,Be.jsx)("div",{className:"portal-modal-body",children:(0,Be.jsx)("iframe",{src:Dt,title:"Assessment Portal",width:"100%",height:"600px",frameBorder:"0"})})]})})]});case"downloads":return(0,Be.jsxs)("div",{className:"section-content",style:{display:"flex",justifyContent:"space-between"},children:[(0,Be.jsxs)("div",{id:"downloadContainer",className:"download-section",style:{width:"48%",padding:"20px",border:"1px solid #ccc"},children:[(0,Be.jsx)("h3",{children:"SEED-IT-DEV Portal (Only for Windows)"}),(0,Be.jsx)("p",{children:"College Network"}),(0,Be.jsxs)("button",{className:"download-btn",onClick:()=>{window.open("https://drive.google.com/drive/folders/1vRGFtWmpnpoNcimkfoo_w41W6_k8slno?usp=drive_link","_blank")},children:[(0,Be.jsx)("i",{className:"fas fa-download"})," Download"]}),(0,Be.jsx)("p",{children:"Personal Network"}),(0,Be.jsxs)("button",{className:"download-btn",onClick:()=>{window.open("https://drive.google.com/drive/folders/1vRGFtWmpnpoNcimkfoo_w41W6_k8slno?usp=drive_link","_blank")},children:[(0,Be.jsx)("i",{className:"fas fa-download"})," Download"]})]}),(0,Be.jsxs)("div",{id:"downloadInstructions",style:{width:"48%",padding:"20px",border:"1px solid #ccc",overflowY:"auto",maxHeight:"80vh"},children:[(0,Be.jsx)("h2",{children:"Download Instructions"}),(0,Be.jsx)("p",{children:"Follow these steps to download and set up the application:"}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 1: Download the File"}),(0,Be.jsx)("br",{}),"- Click the ",(0,Be.jsx)("strong",{children:"Download"})," button.",(0,Be.jsx)("br",{}),"- The file will start downloading automatically."]}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 2: Open the Application"}),(0,Be.jsx)("br",{}),"- Go to your ",(0,Be.jsx)("strong",{children:"Downloads"})," folder.",(0,Be.jsx)("br",{}),"- ",(0,Be.jsx)("strong",{children:"Double-click"})," on the downloaded file to open it."]}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 3: Ensure a Stable Network"}),(0,Be.jsx)("br",{}),"- A ",(0,Be.jsx)("strong",{children:"stable internet connection"})," is required for proper functionality.",(0,Be.jsx)("br",{}),"- If the internet is slow, wait for the application to fully load."]}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 4: Wait for the Application to Load"}),(0,Be.jsx)("br",{}),"- The application may take ",(0,Be.jsx)("strong",{children:"up to 30 seconds"})," to open.",(0,Be.jsx)("br",{}),"- Be patient and do not click multiple times."]}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 5: Handle Windows Defender Pop-up (If Displayed)"}),(0,Be.jsx)("br",{}),"- If a ",(0,Be.jsx)("strong",{children:"Windows Defender SmartScreen"})," pop-up appears:",(0,Be.jsx)("br",{}),"- Click ",(0,Be.jsx)("strong",{children:"More info"})," \u2192 Select ",(0,Be.jsx)("strong",{children:"Run anyway"}),"."]}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 6: Login Process"}),(0,Be.jsx)("br",{}),"- Use your ",(0,Be.jsx)("strong",{children:"SEED_IT credentials"})," to log in.",(0,Be.jsx)("br",{}),"- Log in to ",(0,Be.jsx)("strong",{children:"HackerRank"})," using your ",(0,Be.jsx)("strong",{children:"email and password"}),"."]}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 7: Important Note for Shared Systems"}),(0,Be.jsx)("br",{}),"- ",(0,Be.jsx)("strong",{children:'Uncheck "Remember Me"'})," before signing in on shared systems.",(0,Be.jsx)("br",{}),"- This prevents unauthorized access to your account."]}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 8: Password Recovery"}),(0,Be.jsx)("br",{}),"- If you ",(0,Be.jsx)("strong",{children:"forgot your password"}),", click ",(0,Be.jsx)("strong",{children:"Reset Password"})," and follow the steps."]}),(0,Be.jsxs)("div",{className:"step-box",children:[(0,Be.jsx)("strong",{children:"Step 9: Important Usage Warning \ud83d\udea8"}),(0,Be.jsx)("br",{}),"- ",(0,Be.jsx)("strong",{children:"Do NOT attempt to upload code within the application."}),(0,Be.jsx)("br",{}),"- Uploading code will cause the application to ",(0,Be.jsx)("strong",{children:"automatically close"}),"."]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Happy Coding! \ud83d\ude80"})," If you face any issues, contact support."]})]})]});case"seed-tracker":return(0,Be.jsxs)("div",{className:"section-content",children:[(0,Be.jsx)("div",{className:"streak-info",children:(0,Be.jsxs)("h2",{children:["Days: ",A," Title: ",I]})}),(0,Be.jsxs)("div",{className:"sync-status",style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[(0,Be.jsx)("span",{children:"Status: "}),"synced"===ce&&(0,Be.jsx)("span",{style:{color:"green"},children:"\u2713 All changes saved"}),"pending"===ce&&(0,Be.jsx)("span",{style:{color:"orange"},children:"\u27f3 Syncing..."}),"error"===ce&&(0,Be.jsx)("span",{style:{color:"red"},children:"\u26a0 Sync failed"})]}),(0,Be.jsxs)("div",{className:"button-group",children:[(0,Be.jsxs)("button",{className:"tracker-btn",onClick:()=>L(!0),children:[(0,Be.jsx)(Tt,{})," Trophy"]}),(0,Be.jsxs)("button",{className:"tracker-btn",onClick:wn,children:[(0,Be.jsx)(xt,{})," Leaderboard"]})]}),(0,Be.jsxs)("div",{className:"search-section",children:[(0,Be.jsx)("input",{type:"text",className:"tracker-search",placeholder:"Search by Topic, Notes, or LeetCode Problem ID",value:S,onChange:e=>_(e.target.value)}),(0,Be.jsxs)("div",{className:"button-group",children:[(0,Be.jsxs)("button",{className:"search-btn",onClick:gn,children:[(0,Be.jsx)(kt,{})," Search"]}),(0,Be.jsx)("button",{className:"reset-btn",onClick:vn,children:"Reset"})]})]}),(0,Be.jsxs)("div",{className:"button-group",style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[(0,Be.jsx)("button",{className:"add-record-btn ".concat(W?"active":""),onClick:()=>{q(!1),V(!0),C(!0)},children:"Add Concept"}),(0,Be.jsx)("button",{className:"add-record-btn ".concat(H?"active":""),onClick:()=>{V(!1),q(!0),C(!0)},children:"Add LeetCode"}),(0,Be.jsx)("button",{className:"add-record-btn",onClick:xn,children:"View Records"})]}),E&&(0,Be.jsxs)("form",{onSubmit:un,className:"entry-form mb-4 border p-4 rounded shadow-sm bg-light",children:[(0,Be.jsxs)("div",{className:"form-type-indicator mb-4",children:[(0,Be.jsx)("h3",{children:W?"Add New Concept":"Add LeetCode Solution"}),(0,Be.jsx)("p",{className:"text-muted",children:W?"Record a new concept you learned today":"Record your LeetCode problem solution"})]}),W&&(0,Be.jsxs)("div",{className:"concept-fields",children:[(0,Be.jsxs)("div",{className:"mb-3",children:[(0,Be.jsx)("label",{className:"form-label",children:"Topic Name (Concept Learned)"}),(0,Be.jsx)("textarea",{name:"topic",className:"form-control ".concat(J.topic?"is-invalid":""),value:U.topic,onChange:fn,rows:"3",placeholder:"Enter the name of the concept you learned..."}),J.topic&&(0,Be.jsx)("div",{className:"invalid-feedback",children:J.topic})]}),(0,Be.jsxs)("div",{className:"mb-3",children:[(0,Be.jsx)("label",{className:"form-label",children:"Code with Explanation"}),(0,Be.jsx)("textarea",{name:"code",className:"form-control ".concat(J.code?"is-invalid":""),value:U.code,onChange:fn,rows:"4",placeholder:"Enter your code and explanation..."}),J.code&&(0,Be.jsx)("div",{className:"invalid-feedback",children:J.code})]})]}),H&&(0,Be.jsxs)("div",{className:"leetcode-fields",children:[(0,Be.jsxs)("div",{className:"mb-3",children:[(0,Be.jsx)("label",{className:"form-label",children:"LeetCode Problem ID"}),(0,Be.jsx)("input",{type:"text",name:"problemId",className:"form-control ".concat(J.problemId?"is-invalid":""),value:U.problemId,onChange:fn,placeholder:"e.g., 1, 2, 3"}),J.problemId&&(0,Be.jsx)("div",{className:"invalid-feedback",children:J.problemId})]}),(0,Be.jsxs)("div",{className:"mb-3",children:[(0,Be.jsx)("label",{className:"form-label",children:"LeetCode Solution"}),(0,Be.jsx)("textarea",{name:"solution",className:"form-control ".concat(J.solution?"is-invalid":""),value:U.solution,onChange:fn,rows:"4",placeholder:"Enter your solution with explanation..."}),J.solution&&(0,Be.jsx)("div",{className:"invalid-feedback",children:J.solution})]})]}),(0,Be.jsxs)("div",{className:"mb-3",children:[(0,Be.jsx)("label",{className:"form-label",children:"Additional Notes (Optional)"}),(0,Be.jsx)("textarea",{name:"notes",className:"form-control",value:U.notes,onChange:fn,rows:"3",placeholder:"Add any additional notes or comments..."})]}),(0,Be.jsxs)("div",{className:"form-actions",style:{display:"flex",gap:"10px",justifyContent:"center"},children:[(0,Be.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{C(!1),V(!1),q(!1),Cn()},children:"Cancel"}),(0,Be.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:ae,children:ae?"Saving...":k?"Update Record":"Save Record"})]})]}),ee&&(0,Be.jsx)("div",{className:"table-responsive",children:(0,Be.jsxs)("table",{className:"table table-striped",children:[(0,Be.jsx)("thead",{children:(0,Be.jsxs)("tr",{children:[(0,Be.jsx)("th",{children:"Day"}),(0,Be.jsx)("th",{children:"Topic"}),(0,Be.jsx)("th",{children:"LeetCode ID"}),(0,Be.jsx)("th",{children:"Notes"}),(0,Be.jsx)("th",{children:"Actions"})]})}),(0,Be.jsx)("tbody",{children:x.map(e=>(0,Be.jsxs)("tr",{children:[(0,Be.jsx)("td",{children:e.day}),(0,Be.jsx)("td",{children:e.topic||"-"}),(0,Be.jsx)("td",{children:e.problemId||"-"}),(0,Be.jsx)("td",{children:e.notes||"-"}),(0,Be.jsx)("td",{children:(0,Be.jsxs)("div",{className:"action-buttons",children:[(0,Be.jsx)("button",{className:"btn btn-info btn-sm",onClick:()=>mn(e),title:"View",children:(0,Be.jsx)(ft,{})}),(0,Be.jsx)("button",{className:"btn btn-warning btn-sm",onClick:()=>pn(e),title:"Edit",children:(0,Be.jsx)(wt,{})}),(0,Be.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>hn(e.id),title:"Delete",children:(0,Be.jsx)(At,{})})]})})]},e.id))})]})})]});case"help":return Rn();case"settings":return Pn();case"code-editor":return Tm()?null:(0,Be.jsx)("div",{className:"section-content",id:"editorContainer",children:(0,Be.jsx)("div",{id:"editorFrame",style:{width:"100%",height:"80vh",border:"1px solid #ccc"},children:(0,Be.jsx)("iframe",{src:"https://onecompiler.com/embed/c/",width:"100%",height:"100%",frameBorder:"0",allow:"clipboard-read; clipboard-write",title:"Code Editor"})})});case"aptitude":return(0,Be.jsx)("div",{className:"section-content",children:(0,Be.jsx)(Cm,{user:r})});case"placements":return(0,Be.jsx)("div",{className:"section-content",children:(0,Be.jsx)(Nm,{user:r})});default:return null}})()})})]}),(0,Be.jsx)(yn,{}),(0,Be.jsx)(Tn,{}),(0,Be.jsxs)(dm,{show:j,onHide:()=>L(!1),children:[(0,Be.jsx)(dm.Header,{closeButton:!0,children:(0,Be.jsx)(dm.Title,{children:"Streak Levels"})}),(0,Be.jsx)(dm.Body,{children:(0,Be.jsxs)("ul",{children:[(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Beginner:"})," 0 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Novice:"})," 1 - 7 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Apprentice:"})," 8 - 14 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Explorer:"})," 15 - 30 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Adventurer:"})," 31 - 60 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Challenger:"})," 61 - 90 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Warrior:"})," 91 - 150 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Veteran:"})," 151 - 210 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Elite:"})," 211 - 270 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Master:"})," 271 - 330 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Grandmaster:"})," 331 - 390 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Legend:"})," 391 - 450 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Mythic:"})," 451 - 510 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Immortal:"})," 511 - 570 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"Divine:"})," 571 - 630 days"]}),(0,Be.jsxs)("li",{children:[(0,Be.jsx)("strong",{children:"God:"})," 631+ days"]})]})})]}),(0,Be.jsxs)(dm,{show:O,onHide:()=>M(!1),children:[(0,Be.jsx)(dm.Header,{closeButton:!0,children:(0,Be.jsx)(dm.Title,{children:"Top 10 Leaderboard"})}),(0,Be.jsx)(dm.Body,{children:(0,Be.jsxs)("table",{className:"table table-striped",children:[(0,Be.jsx)("thead",{children:(0,Be.jsxs)("tr",{children:[(0,Be.jsx)("th",{children:"Rank"}),(0,Be.jsx)("th",{children:"Name"}),(0,Be.jsx)("th",{children:"Streak Count"}),(0,Be.jsx)("th",{children:"Title"})]})}),(0,Be.jsx)("tbody",{children:G.slice(0,10).map((e,t)=>(0,Be.jsxs)("tr",{className:e.name===(null===r||void 0===r?void 0:r.Name)?"table-primary":"",children:[(0,Be.jsx)("td",{children:t+1}),(0,Be.jsx)("td",{children:e.name}),(0,Be.jsx)("td",{children:e.count}),(0,Be.jsx)("td",{children:e.streakTitle})]},t))})]})})]}),he&&(0,Be.jsx)("div",{className:"sidebar-overlay active",onClick:()=>de(!1)})]}),Q&&(0,Be.jsxs)("div",{className:"error-message",style:{position:"fixed",bottom:"20px",right:"20px",backgroundColor:je?"#4CAF50":"#ff5252",color:"white",padding:"10px 20px",borderRadius:"4px",boxShadow:"0 2px 5px rgba(0,0,0,0.2)",zIndex:1e3,cursor:je?"pointer":"default"},onClick:()=>{je&&window.location.reload()},children:[Q,!je&&(0,Be.jsx)("button",{onClick:e=>{e.stopPropagation(),$(null)},style:{marginLeft:"10px",background:"none",border:"none",color:"white",cursor:"pointer"},children:"\u2715"})]}),(0,Be.jsx)("footer",{className:"footer",children:(0,Be.jsxs)("div",{className:"footer-content",children:[(0,Be.jsxs)("div",{className:"footer-links",children:[(0,Be.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),Ye(!0)},children:"Privacy Policy"}),(0,Be.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),Qe(!0)},children:"Contact"}),(0,Be.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),Ze(!0)},children:"Terms of Use"})]}),(0,Be.jsx)("p",{children:"\xa9 2023-2025 SEED Innovating Technologies and Educational Services (SEED-IT). All Rights Reserved."}),(0,Be.jsxs)("p",{style:{fontSize:"0.8rem",color:"#999",marginTop:"5px"},children:["Version ",kY]})]})}),Ke&&(0,Be.jsx)("div",{className:"modal",style:{display:"block"},children:(0,Be.jsx)("div",{className:"modal-dialog",children:(0,Be.jsxs)("div",{className:"modal-content",children:[(0,Be.jsxs)("div",{className:"modal-header",children:[(0,Be.jsx)("h5",{className:"modal-title",children:"Privacy Policy"}),(0,Be.jsx)("button",{type:"button",className:"close",onClick:()=>Ye(!1),children:"\xd7"})]}),(0,Be.jsxs)("div",{className:"modal-body",children:[(0,Be.jsx)("p",{children:(0,Be.jsx)("strong",{children:"Last Updated: January 2024"})}),(0,Be.jsx)("h4",{children:"1. Introduction"}),(0,Be.jsx)("p",{children:'SEED Innovating Technologies and Educational Services (SEED-IT) ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our platform.'}),(0,Be.jsx)("h4",{children:"2. Information We Collect"}),(0,Be.jsx)("h5",{children:"2.1 Personal Information"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Name and contact information"}),(0,Be.jsx)("li",{children:"Email address and password"}),(0,Be.jsx)("li",{children:"Educational background and qualifications"}),(0,Be.jsx)("li",{children:"Profile information and preferences"}),(0,Be.jsx)("li",{children:"Payment information (processed securely through third-party providers)"}),(0,Be.jsx)("li",{children:"Government-issued identification (when required for certification)"}),(0,Be.jsx)("li",{children:"Professional experience and certifications"}),(0,Be.jsx)("li",{children:"Profile pictures and biographical information"})]}),(0,Be.jsx)("h5",{children:"2.2 Usage Data"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Learning progress and activity logs"}),(0,Be.jsx)("li",{children:"Course completion and certification data"}),(0,Be.jsx)("li",{children:"Assessment results and performance metrics"}),(0,Be.jsx)("li",{children:"Platform interaction and behavior data"}),(0,Be.jsx)("li",{children:"Device and browser information"}),(0,Be.jsx)("li",{children:"IP address and geolocation data"}),(0,Be.jsx)("li",{children:"Time spent on platform and features used"}),(0,Be.jsx)("li",{children:"Technical logs and error reports"})]}),(0,Be.jsx)("h4",{children:"3. How We Use Your Information"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Provide and improve our educational services"}),(0,Be.jsx)("li",{children:"Personalize your learning experience and content"}),(0,Be.jsx)("li",{children:"Process payments and maintain financial records"}),(0,Be.jsx)("li",{children:"Send important notifications and updates"}),(0,Be.jsx)("li",{children:"Analyze usage patterns to enhance our platform"}),(0,Be.jsx)("li",{children:"Provide technical support and assistance"}),(0,Be.jsx)("li",{children:"Generate analytics and performance reports"}),(0,Be.jsx)("li",{children:"Prevent fraud and ensure platform security"}),(0,Be.jsx)("li",{children:"Comply with legal obligations and requirements"})]}),(0,Be.jsx)("h4",{children:"4. Data Protection"}),(0,Be.jsx)("p",{children:"We implement industry-standard security measures including:"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"SSL/TLS encryption for data transmission"}),(0,Be.jsx)("li",{children:"Secure data storage with encryption at rest"}),(0,Be.jsx)("li",{children:"Regular security audits and vulnerability assessments"}),(0,Be.jsx)("li",{children:"Access controls and multi-factor authentication"}),(0,Be.jsx)("li",{children:"Employee training on data protection and security"}),(0,Be.jsx)("li",{children:"Incident response and recovery procedures"}),(0,Be.jsx)("li",{children:"Regular backup and disaster recovery planning"}),(0,Be.jsx)("li",{children:"Third-party security assessments"})]}),(0,Be.jsx)("h4",{children:"5. Data Retention"}),(0,Be.jsx)("p",{children:"We retain your information for as long as necessary to:"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Maintain your active account and provide services"}),(0,Be.jsx)("li",{children:"Comply with legal and regulatory requirements"}),(0,Be.jsx)("li",{children:"Resolve disputes and enforce agreements"}),(0,Be.jsx)("li",{children:"Protect our legal interests and rights"})]}),(0,Be.jsx)("p",{children:"After account closure, we may retain certain data for up to 7 years or as required by law."}),(0,Be.jsx)("h4",{children:"6. International Data Transfers"}),(0,Be.jsx)("p",{children:"Your information may be transferred and processed in countries outside India. We ensure appropriate safeguards are in place, including:"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Standard contractual clauses"}),(0,Be.jsx)("li",{children:"Data processing agreements"}),(0,Be.jsx)("li",{children:"Privacy Shield certification (where applicable)"}),(0,Be.jsx)("li",{children:"Compliance with local data protection laws"})]}),(0,Be.jsx)("h4",{children:"7. Your Rights"}),(0,Be.jsx)("p",{children:"Under applicable data protection laws, you have the right to:"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Access your personal data and request copies"}),(0,Be.jsx)("li",{children:"Correct inaccurate or incomplete data"}),(0,Be.jsx)("li",{children:"Request deletion of your data (right to be forgotten)"}),(0,Be.jsx)("li",{children:"Restrict or object to data processing"}),(0,Be.jsx)("li",{children:"Data portability (receive and transfer your data)"}),(0,Be.jsx)("li",{children:"Withdraw consent at any time"}),(0,Be.jsx)("li",{children:"Lodge complaints with supervisory authorities"}),(0,Be.jsx)("li",{children:"Opt-out of marketing communications"})]}),(0,Be.jsx)("h4",{children:"8. Children's Privacy"}),(0,Be.jsx)("p",{children:"Our services are not intended for children under 13 years of age. We do not knowingly collect personal information from children. If you are a parent/guardian and believe your child has provided personal information, please contact us for removal."}),(0,Be.jsx)("h4",{children:"9. Cookies and Tracking"}),(0,Be.jsx)("h5",{children:"9.1 Types of Cookies We Use"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Essential cookies for platform functionality"}),(0,Be.jsx)("li",{children:"Analytics cookies to improve user experience"}),(0,Be.jsx)("li",{children:"Preference cookies to remember settings"}),(0,Be.jsx)("li",{children:"Authentication cookies for secure access"})]}),(0,Be.jsx)("h5",{children:"9.2 Cookie Management"}),(0,Be.jsx)("p",{children:"You can control cookies through your browser settings. Disabling certain cookies may limit platform functionality."}),(0,Be.jsx)("h4",{children:"10. Third-Party Services"}),(0,Be.jsx)("p",{children:"We may use third-party services for:"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Payment processing and financial transactions"}),(0,Be.jsx)("li",{children:"Analytics and usage tracking"}),(0,Be.jsx)("li",{children:"Content delivery and hosting"}),(0,Be.jsx)("li",{children:"Email and communication services"}),(0,Be.jsx)("li",{children:"Authentication and security services"})]}),(0,Be.jsx)("p",{children:"These services have their own privacy policies and data practices."}),(0,Be.jsx)("h4",{children:"11. Changes to Privacy Policy"}),(0,Be.jsx)("p",{children:"We may update this policy periodically. Significant changes will be notified through:"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Email notifications to registered users"}),(0,Be.jsx)("li",{children:"Platform announcements and notifications"}),(0,Be.jsx)("li",{children:'Updates to the "Last Updated" date'})]}),(0,Be.jsx)("p",{children:"Continued use of our services after changes constitutes acceptance of the updated policy."}),(0,Be.jsx)("h4",{children:"12. Contact Information"}),(0,Be.jsx)("p",{children:"For privacy-related inquiries or to exercise your rights, contact our Data Protection Officer:"}),(0,Be.jsxs)("p",{children:["Email: privacy@seedit.com",(0,Be.jsx)("br",{}),"Data Protection Officer",(0,Be.jsx)("br",{}),"SEED Innovating Technologies and Educational Services (SEED-IT)",(0,Be.jsx)("br",{}),"CHIL SEZ IT Park, Saravanampatti",(0,Be.jsx)("br",{}),"Coimbatore - 641035",(0,Be.jsx)("br",{}),"Phone: +91-422-123-4567"]}),(0,Be.jsx)("p",{children:"Response Time: We aim to respond to privacy-related requests within 30 days."})]})]})})}),Xe&&(0,Be.jsx)("div",{className:"modal",style:{display:"block"},children:(0,Be.jsx)("div",{className:"modal-dialog",children:(0,Be.jsxs)("div",{className:"modal-content",children:[(0,Be.jsxs)("div",{className:"modal-header",children:[(0,Be.jsx)("h5",{className:"modal-title",children:"Contact Us"}),(0,Be.jsx)("button",{type:"button",className:"close",onClick:()=>Qe(!1),children:"\xd7"})]}),(0,Be.jsxs)("div",{className:"modal-body",children:[(0,Be.jsx)("h4",{children:"SEED Innovating Technologies and Educational Services (SEED-IT)"}),(0,Be.jsxs)("div",{className:"contact-section",children:[(0,Be.jsx)("h5",{children:"Main Office - Coimbatore"}),(0,Be.jsxs)("p",{children:["CHIL SEZ IT Park (Special Economic Zone),",(0,Be.jsx)("br",{}),"Saravanampatti, Coimbatore - 641035"]})]}),(0,Be.jsxs)("div",{className:"contact-section",children:[(0,Be.jsx)("h5",{children:"Contact Information"}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Phone:"})," +91-94427 30135"]}),(0,Be.jsxs)("p",{children:[(0,Be.jsx)("strong",{children:"Email:"})," seed.skillup@gmail.com"]})]}),(0,Be.jsxs)("div",{className:"contact-section",children:[(0,Be.jsx)("h5",{children:"Office Hours"}),(0,Be.jsxs)("p",{children:["Monday - Friday: 9:00 AM - 6:00 PM",(0,Be.jsx)("br",{}),"Saturday: 9:00 AM - 1:00 PM",(0,Be.jsx)("br",{}),"Sunday: Closed"]})]}),(0,Be.jsxs)("div",{className:"contact-section",children:[(0,Be.jsx)("h5",{children:"Support Hours"}),(0,Be.jsxs)("p",{children:["Technical Support: 24/7",(0,Be.jsx)("br",{}),"General Inquiries: Office Hours"]})]}),(0,Be.jsxs)("div",{className:"contact-section",children:[(0,Be.jsx)("h5",{children:"Social Media"}),(0,Be.jsxs)("div",{className:"social-links",children:[(0,Be.jsx)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",children:(0,Be.jsx)("span",{children:"Facebook"})}),(0,Be.jsx)("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",children:(0,Be.jsx)("span",{children:"LinkedIn"})}),(0,Be.jsx)("a",{href:"https://instagram.com/seed_skillup",target:"_blank",rel:"noopener noreferrer",children:(0,Be.jsx)("span",{children:"Instagram"})}),(0,Be.jsx)("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",children:(0,Be.jsx)("span",{children:"Twitter"})})]})]})]})]})})}),Je&&(0,Be.jsx)("div",{className:"modal",style:{display:"block"},children:(0,Be.jsx)("div",{className:"modal-dialog",children:(0,Be.jsxs)("div",{className:"modal-content",children:[(0,Be.jsxs)("div",{className:"modal-header",children:[(0,Be.jsx)("h5",{className:"modal-title",children:"Terms of Use"}),(0,Be.jsx)("button",{type:"button",className:"close",onClick:()=>Ze(!1),children:"\xd7"})]}),(0,Be.jsxs)("div",{className:"modal-body",children:[(0,Be.jsx)("p",{children:(0,Be.jsx)("strong",{children:"Last Updated: January 2024"})}),(0,Be.jsx)("h4",{children:"1. Agreement to Terms"}),(0,Be.jsx)("p",{children:'By accessing or using SEED Innovating Technologies and Educational Services (SEED-IT)\'s ("SEED-IT", "we", "us", "our") platform, you agree to be bound by these Terms of Use ("Terms"). If you disagree with any part of these terms, you may not access our services.'}),(0,Be.jsx)("h4",{children:"2. Definitions"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:'"Platform" refers to our website, mobile applications, and related services'}),(0,Be.jsx)("li",{children:'"Content" includes text, images, audio, video, software, data compilations, and code'}),(0,Be.jsx)("li",{children:'"User" means any individual or entity that accesses or uses our Platform'}),(0,Be.jsx)("li",{children:'"Subscription" refers to paid access to premium features and content'}),(0,Be.jsx)("li",{children:'"Course Materials" includes all educational content, assignments, and resources'})]}),(0,Be.jsx)("h4",{children:"3. User Accounts and Registration"}),(0,Be.jsx)("h5",{children:"3.1 Account Creation"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Users must provide accurate and complete registration information"}),(0,Be.jsx)("li",{children:"Users must be at least 13 years old to create an account"}),(0,Be.jsx)("li",{children:"One account per user; sharing accounts is prohibited"}),(0,Be.jsx)("li",{children:"Users are responsible for maintaining account security"})]}),(0,Be.jsx)("h5",{children:"3.2 Account Termination"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"We reserve the right to suspend or terminate accounts for violations"}),(0,Be.jsx)("li",{children:"Users may request account deletion subject to data retention policies"}),(0,Be.jsx)("li",{children:"Termination may result in loss of access to content and data"}),(0,Be.jsx)("li",{children:"Paid subscriptions may be subject to refund policies"})]}),(0,Be.jsx)("h4",{children:"4. Intellectual Property Rights"}),(0,Be.jsx)("h5",{children:"4.1 Our Rights"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"All platform content is protected by copyright and intellectual property laws"}),(0,Be.jsx)("li",{children:"SEED-IT name, logo, and trademarks are our exclusive property"}),(0,Be.jsx)("li",{children:"Course materials are licensed, not sold, to users"}),(0,Be.jsx)("li",{children:"Unauthorized use or reproduction is strictly prohibited"})]}),(0,Be.jsx)("h5",{children:"4.2 License Grant"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Limited, non-exclusive, non-transferable license to access content"}),(0,Be.jsx)("li",{children:"Personal, non-commercial use only"}),(0,Be.jsx)("li",{children:"No right to modify, distribute, or create derivative works"}),(0,Be.jsx)("li",{children:"License terminates upon account closure or violation"})]}),(0,Be.jsx)("h4",{children:"5. Acceptable Use Policy"}),(0,Be.jsx)("h5",{children:"5.1 Prohibited Activities"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Sharing account credentials or access"}),(0,Be.jsx)("li",{children:"Uploading malicious content or malware"}),(0,Be.jsx)("li",{children:"Attempting to breach platform security"}),(0,Be.jsx)("li",{children:"Engaging in unauthorized automated access"}),(0,Be.jsx)("li",{children:"Harassing users or staff"}),(0,Be.jsx)("li",{children:"Violating intellectual property rights"}),(0,Be.jsx)("li",{children:"Interfering with platform operation"}),(0,Be.jsx)("li",{children:"Creating multiple accounts"})]}),(0,Be.jsx)("h5",{children:"5.2 Content Guidelines"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"User-generated content must be original or properly licensed"}),(0,Be.jsx)("li",{children:"No inappropriate, offensive, or illegal content"}),(0,Be.jsx)("li",{children:"No spam, phishing, or commercial solicitation"}),(0,Be.jsx)("li",{children:"No false or misleading information"})]}),(0,Be.jsx)("h4",{children:"6. Payment and Subscription Terms"}),(0,Be.jsx)("h5",{children:"6.1 Fees and Payments"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"All fees are in Indian Rupees (INR)"}),(0,Be.jsx)("li",{children:"Prices are subject to change with notice"}),(0,Be.jsx)("li",{children:"Payment required before accessing premium content"}),(0,Be.jsx)("li",{children:"Valid payment method required for subscriptions"})]}),(0,Be.jsx)("h5",{children:"6.2 Refund Policy"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"7-day refund window for course purchases"}),(0,Be.jsx)("li",{children:"No refunds for partially completed courses"}),(0,Be.jsx)("li",{children:"Refund requests must be submitted in writing"}),(0,Be.jsx)("li",{children:"Processing fees may be non-refundable"})]}),(0,Be.jsx)("h4",{children:"7. Privacy and Data Protection"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Data collection and use governed by Privacy Policy"}),(0,Be.jsx)("li",{children:"Users retain ownership of their personal data"}),(0,Be.jsx)("li",{children:"We implement industry-standard security measures"}),(0,Be.jsx)("li",{children:"Third-party service providers may access data"})]}),(0,Be.jsx)("h4",{children:"8. Warranties and Disclaimers"}),(0,Be.jsx)("h5",{children:"8.1 Platform Warranty"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:'Platform provided "as is" without warranties'}),(0,Be.jsx)("li",{children:"No guarantee of uninterrupted or error-free service"}),(0,Be.jsx)("li",{children:"No warranty of fitness for particular purpose"}),(0,Be.jsx)("li",{children:"Educational outcomes not guaranteed"})]}),(0,Be.jsx)("h5",{children:"8.2 Content Accuracy"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Reasonable efforts to ensure content accuracy"}),(0,Be.jsx)("li",{children:"No warranty for third-party content"}),(0,Be.jsx)("li",{children:"Users responsible for evaluating content suitability"}),(0,Be.jsx)("li",{children:"Technical information may become outdated"})]}),(0,Be.jsx)("h4",{children:"9. Limitation of Liability"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Not liable for indirect or consequential damages"}),(0,Be.jsx)("li",{children:"Maximum liability limited to fees paid"}),(0,Be.jsx)("li",{children:"No liability for user-generated content"}),(0,Be.jsx)("li",{children:"Force majeure events excluded from liability"}),(0,Be.jsx)("li",{children:"Technical issues and maintenance downtimes"}),(0,Be.jsx)("li",{children:"Loss of data or business interruption"})]}),(0,Be.jsx)("h4",{children:"10. Dispute Resolution"}),(0,Be.jsx)("h5",{children:"10.1 Governing Law"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Terms governed by Indian laws"}),(0,Be.jsx)("li",{children:"Exclusive jurisdiction of Coimbatore courts"}),(0,Be.jsx)("li",{children:"Choice of law provisions apply"})]}),(0,Be.jsx)("h5",{children:"10.2 Resolution Process"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"30-day informal resolution period"}),(0,Be.jsx)("li",{children:"Mandatory mediation before litigation"}),(0,Be.jsx)("li",{children:"Written notice of disputes required"}),(0,Be.jsx)("li",{children:"Class action waiver applies"})]}),(0,Be.jsx)("h4",{children:"11. Platform Security"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Users must not circumvent security measures"}),(0,Be.jsx)("li",{children:"No unauthorized access attempts"}),(0,Be.jsx)("li",{children:"Report security vulnerabilities promptly"}),(0,Be.jsx)("li",{children:"Maintain anti-virus and security software"})]}),(0,Be.jsx)("h4",{children:"12. Content Ownership and Licensing"}),(0,Be.jsx)("h5",{children:"12.1 User Content"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Users retain ownership of original content"}),(0,Be.jsx)("li",{children:"Grant us license to use and display content"}),(0,Be.jsx)("li",{children:"Right to remove content at our discretion"}),(0,Be.jsx)("li",{children:"No compensation for user content"})]}),(0,Be.jsx)("h5",{children:"12.2 Platform Content"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"All rights reserved by SEED-IT"}),(0,Be.jsx)("li",{children:"Limited license for personal use"}),(0,Be.jsx)("li",{children:"No commercial exploitation permitted"}),(0,Be.jsx)("li",{children:"Attribution requirements apply"})]}),(0,Be.jsx)("h4",{children:"13. Termination and Suspension"}),(0,Be.jsx)("h5",{children:"13.1 By Us"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Right to terminate without notice for violations"}),(0,Be.jsx)("li",{children:"Suspension for investigation of violations"}),(0,Be.jsx)("li",{children:"Account recovery may be limited"}),(0,Be.jsx)("li",{children:"No refund obligation upon termination"})]}),(0,Be.jsx)("h5",{children:"13.2 By User"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Right to terminate account at any time"}),(0,Be.jsx)("li",{children:"Obligations survive termination"}),(0,Be.jsx)("li",{children:"Content removal upon termination"}),(0,Be.jsx)("li",{children:"Data retention policies apply"})]}),(0,Be.jsx)("h4",{children:"14. Changes to Terms"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Right to modify terms at any time"}),(0,Be.jsx)("li",{children:"Notice of significant changes provided"}),(0,Be.jsx)("li",{children:"Continued use constitutes acceptance"}),(0,Be.jsx)("li",{children:"Regular review of terms recommended"})]}),(0,Be.jsx)("h4",{children:"15. Additional Terms"}),(0,Be.jsx)("h5",{children:"15.1 Assignment"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"We may assign rights and obligations"}),(0,Be.jsx)("li",{children:"Users may not assign without consent"}),(0,Be.jsx)("li",{children:"Mergers and acquisitions permitted"})]}),(0,Be.jsx)("h5",{children:"15.2 Severability"}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Invalid provisions severable"}),(0,Be.jsx)("li",{children:"Remaining terms remain in effect"}),(0,Be.jsx)("li",{children:"Replacement provisions may be added"})]}),(0,Be.jsx)("h4",{children:"16. Contact Information"}),(0,Be.jsx)("p",{children:"For legal inquiries and notices:"}),(0,Be.jsxs)("p",{children:["Legal Department",(0,Be.jsx)("br",{}),"SEED Innovating Technologies and Educational Services (SEED-IT)",(0,Be.jsx)("br",{}),"CHIL SEZ IT Park, Saravanampatti",(0,Be.jsx)("br",{}),"Coimbatore - 641035",(0,Be.jsx)("br",{}),"Email: legal@seedit.com",(0,Be.jsx)("br",{}),"Phone: +91-422-123-4567"]}),(0,Be.jsx)("p",{children:"Response Time: Legal inquiries will be addressed within 5-7 business days."}),(0,Be.jsx)("p",{children:(0,Be.jsx)("strong",{children:"By using our platform, you acknowledge that you have read, understood, and agree to be bound by these Terms of Use."})})]})]})})}),"assessment"===a&&(0,Be.jsx)(pm,{isOpen:"assessment"===a,onClose:()=>o("dashboard"),user:r,isRunningInPyQt:Tm}),Lt&&(0,Be.jsx)("div",{className:"modal-overlay",children:(0,Be.jsxs)("div",{className:"logout-modal",children:[(0,Be.jsx)("div",{className:"logout-icon-container",children:(0,Be.jsx)(Nt,{className:"logout-icon"})}),(0,Be.jsxs)("p",{children:["Goodbye, ",null===r||void 0===r?void 0:r.Name,"!"]}),(0,Be.jsx)("p",{className:"redirect-text",children:"Logging you out..."})]})})]})};var Rm={version:"0.18.5"},Pm=1200,jm=1252,Lm=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Om={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Mm=function(e){-1!=Lm.indexOf(e)&&(jm=Om[0]=e)};var Fm=function(e){Pm=e,Mm(e)};function Bm(){Fm(1200),Mm(1252)}function Um(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var zm,Wm=function(e){return String.fromCharCode(e)},Vm=function(e){return String.fromCharCode(e)};var Hm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function qm(e){for(var t="",n=0,r=0,i=0,a=0,o=0,s=0,l=0,c=0;c<e.length;)a=(n=e.charCodeAt(c++))>>2,o=(3&n)<<4|(r=e.charCodeAt(c++))>>4,s=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),t+=Hm.charAt(a)+Hm.charAt(o)+Hm.charAt(s)+Hm.charAt(l);return t}function Gm(e){var t="",n=0,r=0,i=0,a=0,o=0,s=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=Hm.indexOf(e.charAt(l++))<<2|(a=Hm.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&a)<<4|(o=Hm.indexOf(e.charAt(l++)))>>2,64!==o&&(t+=String.fromCharCode(r)),i=(3&o)<<6|(s=Hm.indexOf(e.charAt(l++))),64!==s&&(t+=String.fromCharCode(i));return t}var Km=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),Ym=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(VD){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Xm(e){return Km?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function Qm(e){return Km?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var $m=function(e){return Km?Ym(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function Jm(e){if("undefined"===typeof ArrayBuffer)return $m(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function Zm(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var eg=Km?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:Ym(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var tg=/\u0000/g,ng=/[\u0001-\u0006]/g;function rg(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function ig(e,t){var n=""+e;return n.length>=t?n:gv("0",t-n.length)+n}function ag(e,t){var n=""+e;return n.length>=t?n:gv(" ",t-n.length)+n}function og(e,t){var n=""+e;return n.length>=t?n:n+gv(" ",t-n.length)}var sg=Math.pow(2,32);function lg(e,t){return e>sg||e<-sg?function(e,t){var n=""+Math.round(e);return n.length>=t?n:gv("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:gv("0",t-n.length)+n}(Math.round(e),t)}function cg(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var ug=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],hg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var dg={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},fg={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},pg={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function mg(e,t,n){for(var r=e<0?-1:1,i=e*r,a=0,o=1,s=0,l=1,c=0,u=0,h=Math.floor(i);c<t&&(s=(h=Math.floor(i))*o+a,u=h*c+l,!(i-h<5e-8));)i=1/(i-h),a=o,o=s,l=c,c=u;if(u>t&&(c>t?(u=l,s=a):(u=c,s=o)),!n)return[0,r*s,u];var d=Math.floor(r*s/u);return[d,r*s-d*u,u]}function gg(e,t,n){if(e>2958465||e<0)return null;var r=0|e,i=Math.floor(86400*(e-r)),a=0,o=[],s={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),t&&t.date1904&&(r+=1462),s.u>.9999&&(s.u=0,86400==++i&&(s.T=i=0,++r,++s.D)),60===r)o=n?[1317,10,29]:[1900,2,29],a=3;else if(0===r)o=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,o))}return s.y=o[0],s.m=o[1],s.d=o[2],s.S=i%60,i=Math.floor(i/60),s.M=i%60,i=Math.floor(i/60),s.H=i,s.q=a,s}var vg=new Date(1899,11,31,0,0,0),yg=vg.getTime(),bg=new Date(1900,2,1,0,0,0);function xg(e,t){var n=e.getTime();return t?n-=1262304e5:e>=bg&&(n+=864e5),(n-(yg+6e4*(e.getTimezoneOffset()-vg.getTimezoneOffset())))/864e5}function wg(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Sg(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=wg(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=wg(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),wg(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function _g(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Sg(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return Hg(14,xg(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Eg(e,t,n,r){var i,a="",o=0,s=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:i=l%100,c=2;break;default:i=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=n.m,c=t.length;break;case 3:return hg[n.m-1][1];case 5:return hg[n.m-1][0];default:return hg[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=n.d,c=t.length;break;case 3:return ug[n.q][0];default:return ug[n.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(s=r>=2?3===r?1e3:100:1===r?10:1,(o=Math.round(s*(n.S+n.u)))>=60*s&&(o=0),"s"===t?0===o?"0":""+o/s:(a=ig(o,2+r),"ss"===t?a.substr(0,2):"."+a.substr(2,t.length-1))):ig(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*n.D+n.H;break;case"[m]":case"[mm]":i=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":i=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=l,c=1}return c>0?ig(i,c):""}function Cg(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var kg=/%/g;function Ng(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Ng(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),-1===(n=(t/Math.pow(10,a)).toPrecision(r+1+(i+a)%i)).indexOf("e")){var o=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+a):n+="E+"+(o-a);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+a)%i)+"."+r.substr(a)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var Ag=/# (\?+)( ?)\/( ?)(\d+)/;var Tg=/^#*0*\.([0#]+)/,Ig=/\).*[0#]/,Dg=/\(###\) ###\\?-####/;function Rg(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function Pg(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function jg(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function Lg(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Ig)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Lg("n",r,n):"("+Lg("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return Fg(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(kg,""),i=t.length-r.length;return Fg(e,r,n*Math.pow(10,2*i))+gv("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return Ng(t,n);if(36===t.charCodeAt(0))return"$"+Lg(e,t.substr(" "==t.charAt(1)?2:1),n);var i,a,o,s,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+lg(l,t.length);if(t.match(/^[#?]+$/))return"0"===(i=lg(n,0))&&(i=""),i.length>t.length?i:Rg(t.substr(0,t.length-i.length))+i;if(a=t.match(Ag))return function(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),a=Math.floor(i/r),o=i-a*r,s=r;return n+(0===a?"":""+a)+" "+(0===o?gv(" ",e[1].length+1+e[4].length):ag(o,e[1].length)+e[2]+"/"+e[3]+ig(s,e[4].length))}(a,l,c);if(t.match(/^#+0+$/))return c+lg(l,t.length-t.indexOf("0"));if(a=t.match(Tg))return i=Pg(n,a[1].length).replace(/^([^\.]+)$/,"$1."+Rg(a[1])).replace(/\.$/,"."+Rg(a[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+gv("0",Rg(a[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+Pg(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+Cg(lg(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Lg(e,t,-n):Cg(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,a[1].length)))+"."+ig(jg(n,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return Lg(e,t.replace(/^#,#*,/,""),n);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=rg(Lg(e,t.replace(/[\\-]/g,""),n)),o=0,rg(rg(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return o<i.length?i.charAt(o++):"0"===e?"0":""}));if(t.match(Dg))return"("+(i=Lg(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),s=mg(l,Math.pow(10,o)-1,!1),i=""+c," "==(u=Fg("n",a[1],s[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+a[2]+"/"+a[3],(u=og(s[2],o)).length<a[4].length&&(u=Rg(a[4].substr(a[4].length-u.length))+u),i+=u;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),c+((s=mg(l,Math.pow(10,o)-1,!0))[0]||(s[1]?"":"0"))+" "+(s[1]?ag(s[1],o)+a[2]+"/"+a[3]+og(s[2],o):gv(" ",2*o+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=lg(n,0),t.length<=i.length?i:Rg(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=t.indexOf(".")-o,d=t.length-i.length-h;return Rg(t.substr(0,h)+i+t.substr(t.length-d))}if(a=t.match(/^00,000\.([#0]*0)$/))return o=jg(n,a[1].length),n<0?"-"+Lg(e,t,-n):Cg(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?ig(0,3-e.length):"")+e})+"."+ig(o,a[1].length);switch(t){case"###,##0.00":return Lg(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=Cg(lg(l,0));return"0"!==f?c+f:"";case"###,###.00":return Lg(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Lg(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Og(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Og(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),!(n=(t/Math.pow(10,a)).toPrecision(r+1+(i+a)%i)).match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+a):n+="E+"+(o-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+a)%i)+"."+r.substr(a)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Mg(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Ig)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Mg("n",r,n):"("+Mg("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return Fg(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(kg,""),i=t.length-r.length;return Fg(e,r,n*Math.pow(10,2*i))+gv("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return Og(t,n);if(36===t.charCodeAt(0))return"$"+Mg(e,t.substr(" "==t.charAt(1)?2:1),n);var i,a,o,s,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+ig(l,t.length);if(t.match(/^[#?]+$/))return i=""+n,0===n&&(i=""),i.length>t.length?i:Rg(t.substr(0,t.length-i.length))+i;if(a=t.match(Ag))return function(e,t,n){return n+(0===t?"":""+t)+gv(" ",e[1].length+2+e[4].length)}(a,l,c);if(t.match(/^#+0+$/))return c+ig(l,t.length-t.indexOf("0"));if(a=t.match(Tg))return i=(i=(""+n).replace(/^([^\.]+)$/,"$1."+Rg(a[1])).replace(/\.$/,"."+Rg(a[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+gv("0",Rg(a[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+Cg(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Mg(e,t,-n):Cg(""+n)+"."+gv("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Mg(e,t.replace(/^#,#*,/,""),n);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=rg(Mg(e,t.replace(/[\\-]/g,""),n)),o=0,rg(rg(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return o<i.length?i.charAt(o++):"0"===e?"0":""}));if(t.match(Dg))return"("+(i=Mg(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),s=mg(l,Math.pow(10,o)-1,!1),i=""+c," "==(u=Fg("n",a[1],s[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+a[2]+"/"+a[3],(u=og(s[2],o)).length<a[4].length&&(u=Rg(a[4].substr(a[4].length-u.length))+u),i+=u;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),c+((s=mg(l,Math.pow(10,o)-1,!0))[0]||(s[1]?"":"0"))+" "+(s[1]?ag(s[1],o)+a[2]+"/"+a[3]+og(s[2],o):gv(" ",2*o+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:Rg(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=t.indexOf(".")-o,d=t.length-i.length-h;return Rg(t.substr(0,h)+i+t.substr(t.length-d))}if(a=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Mg(e,t,-n):Cg(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?ig(0,3-e.length):"")+e})+"."+ig(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=Cg(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return Mg(e,t.slice(0,t.lastIndexOf(".")),n)+Rg(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Fg(e,t,n){return(0|n)===n?Mg(e,t,n):Lg(e,t,n)}var Bg=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ug(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":cg(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(Bg))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var zg=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Wg(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function Vg(e,t){var n=function(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var a=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,a];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var o=n[0].match(zg),s=n[1].match(zg);return Wg(t,o)?[r,n[0]]:Wg(t,s)?[r,n[1]]:[r,n[null!=o&&null!=s?2:1]]}return[r,a]}function Hg(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:dg)[e])&&(r=n.table&&n.table[fg[e]]||dg[fg[e]]),null==r&&(r=pg[e]||"General")}if(cg(r,0))return _g(t,n);t instanceof Date&&(t=xg(t,n.date1904));var i=Vg(r,t);if(cg(i[1]))return _g(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var i,a,o,s=[],l="",c=0,u="",h="t",d="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!cg(e,c))throw new Error("unrecognized character "+u+" in "+e);s[s.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(o=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(o);s[s.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),p="("===f||")"===f?f:"t";s[s.length]={t:p,v:f},++c;break;case"_":s[s.length]={t:"t",v:" "},c+=2;break;case"@":s[s.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==i&&null==(i=gg(t,n,"2"===e.charAt(c+1))))return"";s[s.length]={t:"X",v:e.substr(c,2)},h=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=gg(t,n)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===h.toLowerCase()&&(u="M"),"h"===u&&(u=d),s[s.length]={t:u,v:l},h=u;break;case"A":case"a":case"\u4e0a":var m={t:u,v:u};if(null==i&&(i=gg(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=i&&(m.v=i.H>=12?"P":"A"),m.t="T",d="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"PM":"AM"),m.t="T",c+=5,d="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,d="h"):(m.t="t",++c),null==i&&"T"===m.t)return"";s[s.length]=m,h=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(Bg)){if(null==i&&null==(i=gg(t,n)))return"";s[s.length]={t:"Z",v:l.toLowerCase()},h=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ug(e)||(s[s.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;s[s.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;s[s.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;s[s.length]={t:u,v:l},h=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":s[s.length]={t:1===r?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);s[s.length]={t:"D",v:l};break;case" ":s[s.length]={t:u,v:u},++c;break;case"$":s[s.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);s[s.length]={t:"t",v:u},++c}var g,v=0,y=0;for(c=s.length-1,h="t";c>=0;--c)switch(s[c].t){case"h":case"H":s[c].t=d,h="h",v<1&&(v=1);break;case"s":(g=s[c].v.match(/\.0+$/))&&(y=Math.max(y,g[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":h=s[c].t;break;case"m":"s"===h&&(s[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[c].v.match(/[Hh]/)&&(v=1),v<2&&s[c].v.match(/[Mm]/)&&(v=2),v<3&&s[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var b,x="";for(c=0;c<s.length;++c)switch(s[c].t){case"t":case"T":case" ":case"D":break;case"X":s[c].v="",s[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[c].v=Eg(s[c].t.charCodeAt(0),s[c].v,i,y),s[c].t="t";break;case"n":case"?":for(b=c+1;null!=s[b]&&("?"===(u=s[b].t)||"D"===u||(" "===u||"t"===u)&&null!=s[b+1]&&("?"===s[b+1].t||"t"===s[b+1].t&&"/"===s[b+1].v)||"("===s[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===s[b].v||" "===s[b].v&&null!=s[b+1]&&"?"==s[b+1].t));)s[c].v+=s[b].v,s[b]={v:"",t:";"},++b;x+=s[c].v,c=b-1;break;case"G":s[c].t="t",s[c].v=_g(t,n)}var w,S,_="";if(x.length>0){40==x.charCodeAt(0)?(w=t<0&&45===x.charCodeAt(0)?-t:t,S=Fg("n",x,w)):(S=Fg("n",x,w=t<0&&r>1?-t:t),w<0&&s[0]&&"t"==s[0].t&&(S=S.substr(1),s[0].v="-"+s[0].v)),b=S.length-1;var E=s.length;for(c=0;c<s.length;++c)if(null!=s[c]&&"t"!=s[c].t&&s[c].v.indexOf(".")>-1){E=c;break}var C=s.length;if(E===s.length&&-1===S.indexOf("E")){for(c=s.length-1;c>=0;--c)null!=s[c]&&-1!=="n?".indexOf(s[c].t)&&(b>=s[c].v.length-1?(b-=s[c].v.length,s[c].v=S.substr(b+1,s[c].v.length)):b<0?s[c].v="":(s[c].v=S.substr(0,b+1),b=-1),s[c].t="t",C=c);b>=0&&C<s.length&&(s[C].v=S.substr(0,b+1)+s[C].v)}else if(E!==s.length&&-1===S.indexOf("E")){for(b=S.indexOf(".")-1,c=E;c>=0;--c)if(null!=s[c]&&-1!=="n?".indexOf(s[c].t)){for(a=s[c].v.indexOf(".")>-1&&c===E?s[c].v.indexOf(".")-1:s[c].v.length-1,_=s[c].v.substr(a+1);a>=0;--a)b>=0&&("0"===s[c].v.charAt(a)||"#"===s[c].v.charAt(a))&&(_=S.charAt(b--)+_);s[c].v=_,s[c].t="t",C=c}for(b>=0&&C<s.length&&(s[C].v=S.substr(0,b+1)+s[C].v),b=S.indexOf(".")+1,c=E;c<s.length;++c)if(null!=s[c]&&(-1!=="n?(".indexOf(s[c].t)||c===E)){for(a=s[c].v.indexOf(".")>-1&&c===E?s[c].v.indexOf(".")+1:0,_=s[c].v.substr(0,a);a<s[c].v.length;++a)b<S.length&&(_+=S.charAt(b++));s[c].v=_,s[c].t="t",C=c}}}for(c=0;c<s.length;++c)null!=s[c]&&"n?".indexOf(s[c].t)>-1&&(w=r>1&&t<0&&c>0&&"-"===s[c-1].v?-t:t,s[c].v=Fg(s[c].t,s[c].v,w),s[c].t="t");var k="";for(c=0;c!==s.length;++c)null!=s[c]&&(k+=s[c].v);return k}(i[1],t,n,i[0])}function qg(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=dg[n]){if(dg[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return dg[t]=e,t}function Gg(e){for(var t=0;392!=t;++t)void 0!==e[t]&&qg(e[t],t)}function Kg(){dg=function(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var Yg=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var Xg=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var a=[];for(r=1;16!=r;++r)a[r-1]="undefined"!==typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return a}(t),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,i=0,a=e.length;i<a;)r=r>>>8^t[255&(r^e.charCodeAt(i++))];return~r},e.buf=function(e,n){for(var y=-1^n,b=e.length-15,x=0;x<b;)y=v[e[x++]^255&y]^g[e[x++]^y>>8&255]^m[e[x++]^y>>16&255]^p[e[x++]^y>>>24]^f[e[x++]]^d[e[x++]]^h[e[x++]]^u[e[x++]]^c[e[x++]]^l[e[x++]]^s[e[x++]]^o[e[x++]]^a[e[x++]]^i[e[x++]]^r[e[x++]]^t[e[x++]];for(b+=15;x<b;)y=y>>>8^t[255&(y^e[x++])];return~y},e.str=function(e,n){for(var r=-1^n,i=0,a=e.length,o=0,s=0;i<a;)(o=e.charCodeAt(i++))<128?r=r>>>8^t[255&(r^o)]:o<2048?r=(r=r>>>8^t[255&(r^(192|o>>6&31))])>>>8^t[255&(r^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),s=1023&e.charCodeAt(i++),r=(r=(r=(r=r>>>8^t[255&(r^(240|o>>8&7))])>>>8^t[255&(r^(128|o>>2&63))])>>>8^t[255&(r^(128|s>>6&15|(3&o)<<4))])>>>8^t[255&(r^(128|63&s))]):r=(r=(r=r>>>8^t[255&(r^(224|o>>12&15))])>>>8^t[255&(r^(128|o>>6&63))])>>>8^t[255&(r^(128|63&o))];return~r},e}(),Qg=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function a(e){qy(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),i=e.read_shift(2),a=e.l+i,o={};if(21589===r)1&(n=e.read_shift(1))&&(o.mtime=e.read_shift(4)),i>5&&(2&n&&(o.atime=e.read_shift(4)),4&n&&(o.ctime=e.read_shift(4))),o.mtime&&(o.mt=new Date(1e3*o.mtime));e.l=a,t[r]=o}return t}function o(){return e||(e={})}function s(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=S(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(Km&&Buffer.isBuffer(e)?e.toString("binary"):S(e)).split("\r\n"),i=0,a="";for(i=0;i<r.length;++i)if(a=r[i],/^Content-Location:/i.test(a)&&(a=a.slice(a.indexOf("file")),n||(n=a.slice(0,a.lastIndexOf("/")+1)),a.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),a.slice(0,n.length)!=n););var o=(r[1]||"").match(/boundary="(.*?)"/);if(!o)throw new Error("MAD cannot find boundary");var s="--"+(o[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};d(u);var h,f=0;for(i=0;i<r.length;++i){var p=r[i];p!==s&&p!==s+"--"||(f++&&ce(u,r.slice(h,i),n),h=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,i,a,o,s,f=512,p=[],m=e.slice(0,512);qy(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(y,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=g[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==g[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==f&&qy(m=e.slice(0,f),28);var b=e.slice(0,f);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var x=m.read_shift(4,"i");if(3===n&&0!==x)throw new Error("# Directory Sectors: Expected 0 saw "+x);m.l+=4,a=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),o=m.read_shift(4,"i"),r=m.read_shift(4,"i"),s=m.read_shift(4,"i"),i=m.read_shift(4,"i");for(var w=-1,_=0;_<109&&!((w=m.read_shift(4,"i"))<0);++_)p[_]=w;var E=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],i=1;i<n;++i)r[i-1]=e.slice(i*t,(i+1)*t);return r[n-1]=e.slice(n*t),r}(e,f);c(s,i,E,f,p);var C=function(e,t,n,r){var i=e.length,a=[],o=[],s=[],l=[],c=r-1,u=0,h=0,d=0,f=0;for(u=0;u<i;++u)if(s=[],(d=u+t)>=i&&(d-=i),!o[d]){l=[];var p=[];for(h=d;h>=0;){p[h]=!0,o[h]=!0,s[s.length]=h,l.push(e[h]);var m=n[Math.floor(4*h/r)];if(r<4+(f=4*h&c))throw new Error("FAT boundary crossed: "+h+" 4 "+r);if(!e[m])break;if(p[h=My(e[m],f)])break}a[d]={nodes:s,data:dy([l])}}return a}(E,a,p,f);C[a].name="!Directory",r>0&&o!==v&&(C[o].name="!MiniFAT"),C[p[0]].name="!FAT",C.fat_addrs=p,C.ssz=f;var k=[],N=[],A=[];!function(e,t,n,r,i,a,o,s){for(var c,d=0,f=r.length?2:0,p=t[e].data,m=0,g=0;m<p.length;m+=128){var y=p.slice(m,m+128);qy(y,64),g=y.read_shift(2),c=py(y,0,g-f),r.push(c);var b={name:c,type:y.read_shift(1),color:y.read_shift(1),L:y.read_shift(4,"i"),R:y.read_shift(4,"i"),C:y.read_shift(4,"i"),clsid:y.read_shift(16),state:y.read_shift(4,"i"),start:0,size:0};0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.ct=h(y,y.l-8)),0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.mt=h(y,y.l-8)),b.start=y.read_shift(4,"i"),b.size=y.read_shift(4,"i"),b.size<0&&b.start<0&&(b.size=b.type=0,b.start=v,b.name=""),5===b.type?(d=b.start,i>0&&d!==v&&(t[d].name="!StreamData")):b.size>=4096?(b.storage="fat",void 0===t[b.start]&&(t[b.start]=u(n,b.start,t.fat_addrs,t.ssz)),t[b.start].name=b.name,b.content=t[b.start].data.slice(0,b.size)):(b.storage="minifat",b.size<0?b.size=0:d!==v&&b.start!==v&&t[d]&&(b.content=l(b,t[d].data,(t[s]||{}).data))),b.content&&qy(b.content,0),a[c]=b,o.push(b)}}(a,C,E,k,r,{},N,o),function(e,t,n){for(var r=0,i=0,a=0,o=0,s=0,l=n.length,c=[],u=[];r<l;++r)c[r]=u[r]=r,t[r]=n[r];for(;s<u.length;++s)i=e[r=u[s]].L,a=e[r].R,o=e[r].C,c[r]===r&&(-1!==i&&c[i]!==i&&(c[r]=c[i]),-1!==a&&c[a]!==a&&(c[r]=c[a])),-1!==o&&(c[o]=r),-1!==i&&r!=c[r]&&(c[i]=c[r],u.lastIndexOf(i)<s&&u.push(i)),-1!==a&&r!=c[r]&&(c[a]=c[r],u.lastIndexOf(a)<s&&u.push(a));for(r=1;r<l;++r)c[r]===r&&(-1!==a&&c[a]!==a?c[r]=c[a]:-1!==i&&c[i]!==i&&(c[r]=c[i]));for(r=1;r<l;++r)if(0!==e[r].type){if((s=r)!=c[s])do{s=c[s],t[r]=t[s]+"/"+t[r]}while(0!==s&&-1!==c[s]&&s!=c[s]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(N,A,k),k.shift();var T={FileIndex:N,FullPaths:A};return t&&t.raw&&(T.raw={header:b,sectors:E}),T}function l(e,t,n){for(var r=e.start,i=e.size,a=[],o=r;n&&i>0&&o>=0;)a.push(t.slice(o*g,o*g+g)),i-=g,o=My(n,4*o);return 0===a.length?Ky(0):eg(a).slice(0,e.size)}function c(e,t,n,r,i){var a=v;if(e===v){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var o=n[e],s=(r>>>2)-1;if(!o)return;for(var l=0;l<s&&(a=My(o,4*l))!==v;++l)i.push(a);c(My(o,r-4),t-1,n,r,i)}}function u(e,t,n,r,i){var a=[],o=[];i||(i=[]);var s=r-1,l=0,c=0;for(l=t;l>=0;){i[l]=!0,a[a.length]=l,o.push(e[l]);var u=n[Math.floor(4*l/r)];if(r<4+(c=4*l&s))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[u])break;l=My(e[u],c)}return{nodes:a,data:dy([o])}}function h(e,t){return new Date(1e3*(Oy(e,t+4)/1e7*Math.pow(2,32)+Oy(e,t)/1e7-11644473600))}function d(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(Qg.find(e,"/"+t))return;var n=Ky(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){d(e);for(var i=!1,a=!1,o=e.FullPaths.length-1;o>=0;--o){var s=e.FileIndex[o];switch(s.type){case 0:a?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:a=!0,isNaN(s.R*s.L*s.C)&&(i=!0),s.R>-1&&s.L>-1&&s.R==s.L&&(i=!0);break;default:i=!0}}if(i||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},h=[];for(o=0;o<e.FullPaths.length;++o)u[e.FullPaths[o]]=!0,0!==e.FileIndex[o].type&&h.push([e.FullPaths[o],e.FileIndex[o]]);for(o=0;o<h.length;++o){var f=n(h[o][0]);(a=u[f])||(h.push([f,{name:r(f).replace("/",""),type:1,clsid:x,ct:l,mt:l,content:null}]),u[f]=!0)}for(h.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0,a=0,o=Math.min(n.length,r.length);i<o;++i){if(a=n[i].length-r[i].length)return a;if(n[i]!=r[i])return n[i]<r[i]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],o=0;o<h.length;++o)e.FullPaths[o]=h[o][0],e.FileIndex[o]=h[o][1];for(o=0;o<h.length;++o){var p=e.FileIndex[o],m=e.FullPaths[o];if(p.name=r(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||x,0===o)p.C=h.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(c=o+1;c<h.length&&n(e.FullPaths[c])!=m;++c);for(p.C=c>=h.length?-1:c,c=o+1;c<h.length&&n(e.FullPaths[c])!=n(m);++c);p.R=c>=h.length?-1:c,p.type=1}else n(e.FullPaths[o+1]||"")==n(m)&&(p.R=o+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],a=e.FullPaths[0],o=a,s=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(o=e.FullPaths[l].slice(a.length),(s=e.FileIndex[l]).size&&s.content&&"\x01Sh33tJ5"!=o){o=o.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=s.content,u=Km&&Buffer.isBuffer(c)?c.toString("binary"):S(c),h=0,d=Math.min(1024,u.length),f=0,p=0;p<=d;++p)(f=u.charCodeAt(p))>=32&&f<128&&++h;var m=h>=4*d/5;i.push(r),i.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+o),i.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),i.push("Content-Type: "+oe(s,o)),i.push(""),i.push(m?le(u):se(u))}return i.push(r+"--\r\n"),i.join("\r\n")}(e,n);if(f(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],a=[],o=Ky(1),s=n.compression?8:0,l=0;0;var c=0,u=0,h=0,d=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],g=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(f.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=p){var y=h,b=Ky(p.length);for(u=0;u<p.length;++u)b.write_shift(1,127&p.charCodeAt(u));b=b.slice(0,b.l),g[d]=Xg.buf(m.content,0);var x=m.content;8==s&&(x=_(x)),(o=Ky(30)).write_shift(4,67324752),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,s),m.mt?i(o,m.mt):o.write_shift(4,0),o.write_shift(-4,8&l?0:g[d]),o.write_shift(4,8&l?0:x.length),o.write_shift(4,8&l?0:m.content.length),o.write_shift(2,b.length),o.write_shift(2,0),h+=o.length,r.push(o),h+=b.length,r.push(b),h+=x.length,r.push(x),8&l&&((o=Ky(12)).write_shift(-4,g[d]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),h+=o.l,r.push(o)),(o=Ky(46)).write_shift(4,33639248),o.write_shift(2,0),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,s),o.write_shift(4,0),o.write_shift(-4,g[d]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),o.write_shift(2,b.length),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(4,0),o.write_shift(4,y),v+=o.l,a.push(o),v+=b.length,a.push(b),++d}return o=Ky(22),o.write_shift(4,101010256),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,d),o.write_shift(2,d),o.write_shift(4,v),o.write_shift(4,h),o.write_shift(2,0),eg([eg(r),eg(a),o])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var i=e.FileIndex[r];if(i.content){var a=i.content.length;a>0&&(a<4096?t+=a+63>>6:n+=a+511>>9)}}for(var o=e.FullPaths.length+3>>2,s=t+127>>7,l=(t+7>>3)+n+o+s,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var h=[1,u,c,s,o,n,t,0];return e.FileIndex[0].size=t<<6,h[7]=(e.FileIndex[0].start=h[0]+h[1]+h[2]+h[3]+h[4]+h[5])+(h[6]+7>>3),h}(e),a=Ky(r[7]<<9),o=0,s=0;for(o=0;o<8;++o)a.write_shift(1,b[o]);for(o=0;o<8;++o)a.write_shift(2,0);for(a.write_shift(2,62),a.write_shift(2,3),a.write_shift(2,65534),a.write_shift(2,9),a.write_shift(2,6),o=0;o<3;++o)a.write_shift(2,0);for(a.write_shift(4,0),a.write_shift(4,r[2]),a.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),a.write_shift(4,0),a.write_shift(4,4096),a.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:v),a.write_shift(4,r[3]),a.write_shift(-4,r[1]?r[0]-1:v),a.write_shift(4,r[1]),o=0;o<109;++o)a.write_shift(-4,o<r[2]?r[1]+o:-1);if(r[1])for(s=0;s<r[1];++s){for(;o<236+127*s;++o)a.write_shift(-4,o<r[2]?r[1]+o:-1);a.write_shift(-4,s===r[1]-1?v:s+1)}var l=function(e){for(s+=e;o<s-1;++o)a.write_shift(-4,o+1);e&&(++o,a.write_shift(-4,v))};for(s=o=0,s+=r[1];o<s;++o)a.write_shift(-4,w.DIFSECT);for(s+=r[2];o<s;++o)a.write_shift(-4,w.FATSECT);l(r[3]),l(r[4]);for(var c=0,u=0,h=e.FileIndex[0];c<e.FileIndex.length;++c)(h=e.FileIndex[c]).content&&((u=h.content.length)<4096||(h.start=s,l(u+511>>9)));for(l(r[6]+7>>3);511&a.l;)a.write_shift(-4,w.ENDOFCHAIN);for(s=o=0,c=0;c<e.FileIndex.length;++c)(h=e.FileIndex[c]).content&&(!(u=h.content.length)||u>=4096||(h.start=s,l(u+63>>6)));for(;511&a.l;)a.write_shift(-4,w.ENDOFCHAIN);for(o=0;o<r[4]<<2;++o){var d=e.FullPaths[o];if(d&&0!==d.length){h=e.FileIndex[o],0===o&&(h.start=h.size?h.start-1:v);var p=0===o&&n.root||h.name;if(u=2*(p.length+1),a.write_shift(64,p,"utf16le"),a.write_shift(2,u),a.write_shift(1,h.type),a.write_shift(1,h.color),a.write_shift(-4,h.L),a.write_shift(-4,h.R),a.write_shift(-4,h.C),h.clsid)a.write_shift(16,h.clsid,"hex");else for(c=0;c<4;++c)a.write_shift(4,0);a.write_shift(4,h.state||0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,h.start),a.write_shift(4,h.size),a.write_shift(4,0)}else{for(c=0;c<17;++c)a.write_shift(4,0);for(c=0;c<3;++c)a.write_shift(4,-1);for(c=0;c<12;++c)a.write_shift(4,0)}}for(o=1;o<e.FileIndex.length;++o)if((h=e.FileIndex[o]).size>=4096)if(a.l=h.start+1<<9,Km&&Buffer.isBuffer(h.content))h.content.copy(a,a.l,0,h.size),a.l+=h.size+511&-512;else{for(c=0;c<h.size;++c)a.write_shift(1,h.content[c]);for(;511&c;++c)a.write_shift(1,0)}for(o=1;o<e.FileIndex.length;++o)if((h=e.FileIndex[o]).size>0&&h.size<4096)if(Km&&Buffer.isBuffer(h.content))h.content.copy(a,a.l,0,h.size),a.l+=h.size+63&-64;else{for(c=0;c<h.size;++c)a.write_shift(1,h.content[c]);for(;63&c;++c)a.write_shift(1,0)}if(Km)a.l=a.length;else for(;a.l<a.length;)a.write_shift(1,0);return a}t.version="1.2.1";var m,g=64,v=-2,y="d0cf11e0a1b11ae1",b=[208,207,17,224,161,177,26,225],x="00000000000000000000000000000000",w={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:x,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function S(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function _(e){return m?m.deflateRawSync(e):Y(e)}var E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function N(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var A="undefined"!==typeof Uint8Array,T=A?new Uint8Array(256):[],I=0;I<256;++I)T[I]=N(I);function D(e,t){var n=T[255&e];return t<=8?n>>>8-t:(n=n<<8|T[e>>8&255],t<=16?n>>>16-t:(n=n<<8|T[e>>16&255])>>>24-t)}function R(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function P(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function j(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function L(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function O(e,t,n){var r=7&t,i=t>>>3,a=(1<<n)-1,o=e[i]>>>r;return n<8-r?o&a:(o|=e[i+1]<<8-r,n<16-r?o&a:(o|=e[i+2]<<16-r,n<24-r?o&a:(o|=e[i+3]<<24-r)&a))}function M(e,t,n){var r=7&t,i=t>>>3;return r<=5?e[i]|=(7&n)<<r:(e[i]|=n<<r&255,e[i+1]=(7&n)>>8-r),t+3}function F(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function B(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function U(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function z(e,t){var n=e.length,r=2*n>t?2*n:t+5,i=0;if(n>=t)return e;if(Km){var a=Qm(r);if(e.copy)e.copy(a);else for(;i<e.length;++i)a[i]=e[i];return a}if(A){var o=new Uint8Array(r);if(o.set)o.set(e);else for(;i<n;++i)o[i]=e[i];return o}return e.length=r,e}function W(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function V(e,t,n){var r=1,i=0,a=0,o=0,s=0,l=e.length,c=A?new Uint16Array(32):W(32);for(a=0;a<32;++a)c[a]=0;for(a=l;a<n;++a)e[a]=0;l=e.length;var u=A?new Uint16Array(l):W(l);for(a=0;a<l;++a)c[i=e[a]]++,r<i&&(r=i),u[a]=0;for(c[0]=0,a=1;a<=r;++a)c[a+16]=s=s+c[a-1]<<1;for(a=0;a<l;++a)0!=(s=e[a])&&(u[a]=c[s+16]++);var h=0;for(a=0;a<l;++a)if(0!=(h=e[a]))for(s=D(u[a],r)>>r-h,o=(1<<r+4-h)-1;o>=0;--o)t[s|o<<h]=15&h|a<<4;return r}var H=A?new Uint16Array(512):W(512),q=A?new Uint16Array(32):W(32);if(!A){for(var G=0;G<512;++G)H[G]=0;for(G=0;G<32;++G)q[G]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);V(e,q,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);V(n,H,288)}();var K=function(){for(var e=A?new Uint8Array(32768):[],t=0,n=0;t<k.length-1;++t)for(;n<k[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=A?new Uint8Array(259):[];for(t=0,n=0;t<C.length-1;++t)for(;n<C[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),i=n+r==e.length;for(t.write_shift(1,+i),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var i=0,a=0,o=A?new Uint16Array(32768):[];a<t.length;){var s=Math.min(65535,t.length-a);if(s<10){for(7&(i=M(n,i,+!(a+s!=t.length)))&&(i+=8-(7&i)),n.l=i/8|0,n.write_shift(2,s),n.write_shift(2,65535&~s);s-- >0;)n[n.l++]=t[a++];i=8*n.l}else{i=M(n,i,+!(a+s!=t.length)+2);for(var l=0;s-- >0;){var c=t[a],u=-1,h=0;if((u=o[l=32767&(l<<5^c)])&&((u|=-32768&a)>a&&(u-=32768),u<a))for(;t[u+h]==t[a+h]&&h<250;)++h;if(h>2){(c=r[h])<=22?i=B(n,i,T[c+1]>>1)-1:(B(n,i,3),B(n,i+=5,T[c-23]>>5),i+=3);var d=c<8?0:c-4>>2;d>0&&(U(n,i,h-C[c]),i+=d),c=e[a-u],i=B(n,i,T[c]>>3),i-=3;var f=c<4?0:c-2>>1;f>0&&(U(n,i,a-u-k[c]),i+=f);for(var p=0;p<h;++p)o[l]=32767&a,l=32767&(l<<5^t[a]),++a;s-=h-1}else c<=143?c+=48:i=F(n,i,1),i=B(n,i,T[c]),o[l]=32767&a,++a}i=B(n,i,0)-1}}return n.l=(i+7)/8|0,n.l}(t,n)}}();function Y(e){var t=Ky(50+Math.floor(1.1*e.length)),n=K(e,t);return t.slice(0,n)}var X=A?new Uint16Array(32768):W(32768),Q=A?new Uint16Array(32768):W(32768),$=A?new Uint16Array(128):W(128),J=1,Z=1;function ee(e,t){var n=j(e,t)+257,r=j(e,t+=5)+1,i=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var a=0,o=A?new Uint8Array(19):W(19),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=A?new Uint8Array(8):W(8),u=A?new Uint8Array(8):W(8),h=o.length,d=0;d<i;++d)o[E[d]]=a=P(e,t),l<a&&(l=a),c[a]++,t+=3;var f=0;for(c[0]=0,d=1;d<=l;++d)u[d]=f=f+c[d-1]<<1;for(d=0;d<h;++d)0!=(f=o[d])&&(s[d]=u[f]++);var p=0;for(d=0;d<h;++d)if(0!=(p=o[d])){f=T[s[d]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)$[f|m<<p]=7&p|d<<3}var g=[];for(l=1;g.length<n+r;)switch(t+=7&(f=$[L(e,t)]),f>>>=3){case 16:for(a=3+R(e,t),t+=2,f=g[g.length-1];a-- >0;)g.push(f);break;case 17:for(a=3+P(e,t),t+=3;a-- >0;)g.push(0);break;case 18:for(a=11+L(e,t),t+=7;a-- >0;)g.push(0);break;default:g.push(f),l<f&&(l=f)}var v=g.slice(0,n),y=g.slice(n);for(d=n;d<286;++d)v[d]=0;for(d=r;d<30;++d)y[d]=0;return J=V(v,X,286),Z=V(y,Q,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[Xm(t),2];for(var n=0,r=0,i=Qm(t||1<<18),a=0,o=i.length>>>0,s=0,l=0;0==(1&r);)if(r=P(e,n),n+=3,r>>>1!=0)for(r>>1==1?(s=9,l=5):(n=ee(e,n),s=J,l=Z);;){!t&&o<a+32767&&(o=(i=z(i,a+32767)).length);var c=O(e,n,s),u=r>>>1==1?H[c]:X[c];if(n+=15&u,0===((u>>>=4)>>>8&255))i[a++]=u;else{if(256==u)break;var h=(u-=257)<8?0:u-4>>2;h>5&&(h=0);var d=a+C[u];h>0&&(d+=O(e,n,h),n+=h),c=O(e,n,l),n+=15&(u=r>>>1==1?q[c]:Q[c]);var f=(u>>>=4)<4?0:u-2>>1,p=k[u];for(f>0&&(p+=O(e,n,f),n+=f),!t&&o<d&&(o=(i=z(i,d+100)).length);a<d;)i[a]=i[a-p],++a}}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,m>0)for(!t&&o<a+m&&(o=(i=z(i,a+m)).length);m-- >0;)i[a++]=e[n>>>3],n+=8}return t?[i,n+7>>>3]:[i.slice(0,a),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;qy(n,0);var r={FileIndex:[],FullPaths:[]};d(r,{root:t.root});for(var i=n.length-4;(80!=n[i]||75!=n[i+1]||5!=n[i+2]||6!=n[i+3])&&i>=0;)--i;n.l=i+4,n.l+=4;var o=n.read_shift(2);n.l+=6;var s=n.read_shift(4);for(n.l=s,i=0;i<o;++i){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),u=n.read_shift(2),h=n.read_shift(2),f=n.read_shift(2);n.l+=8;var p=n.read_shift(4),m=a(n.slice(n.l+u,n.l+u+h));n.l+=u+h+f;var g=n.l;n.l=p+4,ie(n,l,c,r,m),n.l=g}return r}function ie(e,t,n,r,i){e.l+=2;var o=e.read_shift(2),s=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,i=31&n,a=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(a-1),r.setDate(i);var o=31&t,s=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(s),r.setSeconds(o<<1),r}(e);if(8257&o)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),h=e.read_shift(2),d=e.read_shift(2),f="",p=0;p<h;++p)f+=String.fromCharCode(e[e.l++]);if(d){var g=a(e.slice(e.l,e.l+d));(g[21589]||{}).mt&&(l=g[21589].mt),((i||{})[21589]||{}).mt&&(l=i[21589].mt)}e.l+=d;var v=e.slice(e.l,e.l+c);switch(s){case 8:v=function(e,t){if(!m)return te(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+s)}var y=!1;8&o&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&ne(y,"Bad compressed size: "+t+" != "+c),u!=n&&ne(y,"Bad uncompressed size: "+n+" != "+u),ue(r,f,v,{unsafe:!0,mt:l})}var ae={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function oe(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&ae[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&ae[r[1]]?ae[r[1]]:"application/octet-stream"}function se(e){for(var t=qm(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<r.length;++i){var a=r[i];if(0!=a.length)for(var o=0;o<a.length;){var s=76,l=a.slice(o,o+s);"="==l.charAt(s-1)?s--:"="==l.charAt(s-2)?s-=2:"="==l.charAt(s-3)&&(s-=3),l=a.slice(o,o+s),(o+=s)<a.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,i="",a="",o="",s=0;s<10;++s){var l=t[s];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":i=c[2].trim();break;case"content-type":o=c[2].trim();break;case"content-transfer-encoding":a=c[2].trim()}}switch(++s,a.toLowerCase()){case"base64":r=$m(Gm(t.slice(s).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return $m(t.join("\r\n"))}(t.slice(s));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+a)}var u=ue(e,i.slice(n.length),r,{unsafe:!0});o&&(u.ctype=o)}function ue(e,t,n,i){var a=i&&i.unsafe;a||d(e);var o=!a&&Qg.find(e,t);if(!o){var s=e.FullPaths[0];t.slice(0,s.length)==s?s=t:("/"!=s.slice(-1)&&(s+="/"),s=(s+t).replace("//","/")),o={name:r(t),type:2},e.FileIndex.push(o),e.FullPaths.push(s),a||Qg.utils.cfb_gc(e)}return o.content=n,o.size=n?n.length:0,i&&(i.CLSID&&(o.clsid=i.CLSID),i.mt&&(o.mt=i.mt),i.ct&&(o.ct=i.ct)),o}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),i=!1;47===t.charCodeAt(0)?(i=!0,t=n[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var a=t.toUpperCase(),o=!0===i?n.indexOf(a):r.indexOf(a);if(-1!==o)return e.FileIndex[o];var s=!a.match(ng);for(a=a.replace(tg,""),s&&(a=a.replace(ng,"!")),o=0;o<n.length;++o){if((s?n[o].replace(ng,"!"):n[o]).replace(tg,"")==a)return e.FileIndex[o];if((s?r[o].replace(ng,"!"):r[o]).replace(tg,"")==a)return e.FileIndex[o]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||Km&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return o(),s(e.readFileSync(t),n)}(t,n);case"base64":return s($m(Gm(t)),n);case"binary":return s($m(t),n)}return s(t,n)},t.parse=s,t.write=function(t,n){var r=p(t,n);switch(n&&n.type||"buffer"){case"file":return o(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:S(r);case"base64":return qm("string"==typeof r?r:S(r));case"buffer":if(Km)return Buffer.isBuffer(r)?r:Ym(r);case"array":return"string"==typeof r?$m(r):r}return r},t.writeFile=function(t,n,r){o();var i=p(t,r);e.writeFileSync(n,i)},t.utils={cfb_new:function(e){var t={};return d(t,e),t},cfb_add:ue,cfb_del:function(e,t){d(e);var n=Qg.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){d(e);var i=Qg.find(e,t);if(i)for(var a=0;a<e.FileIndex.length;++a)if(e.FileIndex[a]==i)return e.FileIndex[a].name=r(n),e.FullPaths[a]=n,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:By,CheckField:Hy,prep_blob:qy,bconcat:eg,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(VD){console.error("cannot use native zlib: "+(VD.message||VD))}},_deflateRaw:Y,_inflateRaw:te,consts:w},t}();let $g;function Jg(e){return"string"===typeof e?Jm(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function Zg(e,t,n){if("undefined"!==typeof $g&&$g.writeFileSync)return n?$g.writeFileSync(e,t,n):$g.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=Jm(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?Mv(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var i=new Blob([Jg(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!==typeof saveAs)return saveAs(i,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var o=document.createElement("a");if(null!=o.download)return o.download=e,o.href=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var s=File(e);return s.open("w"),s.encoding="binary",Array.isArray(t)&&(t=Zm(t)),s.write(t),s.close(),t}catch(VD){if(!VD.message||!VD.message.match(/onstruct/))throw VD}throw new Error("cannot save file "+e)}function ev(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function tv(e,t){for(var n=[],r=ev(e),i=0;i!==r.length;++i)null==n[e[r[i]][t]]&&(n[e[r[i]][t]]=r[i]);return n}function nv(e){for(var t=[],n=ev(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function rv(e){for(var t=[],n=ev(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var iv=new Date(1899,11,30,0,0,0);function av(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(iv.getTime()+6e4*(e.getTimezoneOffset()-iv.getTimezoneOffset())))/864e5}var ov=new Date,sv=iv.getTime()+6e4*(ov.getTimezoneOffset()-iv.getTimezoneOffset()),lv=ov.getTimezoneOffset();function cv(e){var t=new Date;return t.setTime(24*e*60*60*1e3+sv),t.getTimezoneOffset()!==lv&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-lv)),t}var uv=new Date("2017-02-19T19:06:09.000Z"),hv=isNaN(uv.getFullYear())?new Date("2/19/17"):uv,dv=2017==hv.getFullYear();function fv(e,t){var n=new Date(e);if(dv)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==hv.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-60*a.getTimezoneOffset()*1e3)),a}function pv(e,t){if(Km&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return Mv(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return Mv(Um(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return Mv(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return Mv(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return n[e]||e})}catch(VD){}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function mv(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=mv(e[n]));return t}function gv(e,t){for(var n="";n.length<t;)n+=e;return n}function vv(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var yv=["january","february","march","april","may","june","july","august","september","october","november","december"];function bv(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),i=t.getMonth(),a=t.getDate();if(isNaN(a))return n;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==yv.indexOf(o))return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||a>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function xv(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=Km?Ym(n):function(e){for(var t=[],n=0,r=e.length+250,i=Xm(e.length+255),a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|63&o;else if(o>=55296&&o<57344){o=64+(1023&o);var s=1023&e.charCodeAt(++a);i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|s>>6&15|(3&o)<<4,i[n++]=128|63&s}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|63&o;n>r&&(t.push(i.slice(0,n)),n=0,i=Xm(65535),r=65530)}return t.push(i.slice(0,n)),eg(t)}(n),Qg.utils.cfb_add(e,t,r);Qg.utils.cfb_add(e,t,n)}else e.file(t,n)}function wv(){return Qg.utils.cfb_new()}var Sv='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var _v={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Ev=nv(_v),Cv=/[&<>'"]/g,kv=/[\u0000-\u0008\u000b-\u001f]/g;function Nv(e){return(e+"").replace(Cv,function(e){return Ev[e]}).replace(kv,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Av(e){return Nv(e).replace(/ /g,"_x0020_")}var Tv=/[\u0000-\u001f]/g;function Iv(e){return(e+"").replace(Cv,function(e){return Ev[e]}).replace(/\n/g,"<br/>").replace(Tv,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Dv(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Rv(e){for(var t="",n=0,r=0,i=0,a=0,o=0,s=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(i=e.charCodeAt(n++),r>191&&r<224?(o=(31&r)<<6,o|=63&i,t+=String.fromCharCode(o)):(a=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a):(s=((7&r)<<18|(63&i)<<12|(63&a)<<6|63&(o=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(s>>>10&1023)),t+=String.fromCharCode(56320+(1023&s)))));return t}function Pv(e){var t,n,r,i=Xm(2*e.length),a=1,o=0,s=0;for(n=0;n<e.length;n+=a)a=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),a=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),a=3):(a=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),s=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==s&&(i[o++]=255&s,i[o++]=s>>>8,s=0),i[o++]=t%256,i[o++]=t>>>8;return i.slice(0,o).toString("ucs2")}function jv(e){return Ym(e,"binary").toString("utf8")}var Lv="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Ov=Km&&(jv(Lv)==Rv(Lv)&&jv||Pv(Lv)==Rv(Lv)&&Pv)||Rv,Mv=Km?function(e){return Ym(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},Fv=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var Bv=/(^\s|\s$|\n)/;function Uv(e,t){return"<"+e+(t.match(Bv)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function zv(e){return ev(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Wv(e,t,n){return"<"+e+(null!=n?zv(n):"")+(null!=t?(t.match(Bv)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Vv(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(VD){if(t)throw VD}return""}var Hv="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",qv="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",Gv="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",Kv="http://schemas.openxmlformats.org/package/2006/content-types",Yv="http://schemas.openxmlformats.org/package/2006/relationships",Xv="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",Qv="http://purl.org/dc/elements/1.1/",$v="http://purl.org/dc/terms/",Jv="http://purl.org/dc/dcmitype/",Zv="http://schemas.openxmlformats.org/officeDocument/2006/relationships",ey="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",ty="http://www.w3.org/2001/XMLSchema-instance",ny="http://www.w3.org/2001/XMLSchema",ry=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],iy="urn:schemas-microsoft-com:office:office",ay="urn:schemas-microsoft-com:office:excel",oy="urn:schemas-microsoft-com:office:spreadsheet",sy="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",ly="http://macVmlSchemaUri",cy="urn:schemas-microsoft-com:vml",uy="http://www.w3.org/TR/REC-html40";var hy=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,i=e[0][n].length;r<i;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},dy=Km?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:Ym(e)})):hy(e)}:hy,fy=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(jy(e,i)));return r.join("").replace(tg,"")},py=Km?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(tg,""):fy(e,t,n)}:fy,my=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},gy=Km?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):my(e,t,n)}:my,vy=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(Py(e,i)));return r.join("")},yy=Km?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):vy(e,t,n)}:vy,by=function(e,t){var n=Oy(e,t);return n>0?yy(e,t+4,t+4+n-1):""},xy=by,wy=function(e,t){var n=Oy(e,t);return n>0?yy(e,t+4,t+4+n-1):""},Sy=wy,_y=function(e,t){var n=2*Oy(e,t);return n>0?yy(e,t+4,t+4+n-1):""},Ey=_y,Cy=function(e,t){var n=Oy(e,t);return n>0?py(e,t+4,t+4+n):""},ky=Cy,Ny=function(e,t){var n=Oy(e,t);return n>0?yy(e,t+4,t+4+n):""},Ay=Ny,Ty=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],a=5;a>=0;--a)i=256*i+e[t+a];return 2047==r?0==i?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}(e,t)},Iy=Ty,Dy=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function Ry(){py=function(e,t,n){return zm.utils.decode(1200,e.slice(t,n)).replace(tg,"")},yy=function(e,t,n){return zm.utils.decode(65001,e.slice(t,n))},xy=function(e,t){var n=Oy(e,t);return n>0?zm.utils.decode(jm,e.slice(t+4,t+4+n-1)):""},Sy=function(e,t){var n=Oy(e,t);return n>0?zm.utils.decode(Pm,e.slice(t+4,t+4+n-1)):""},Ey=function(e,t){var n=2*Oy(e,t);return n>0?zm.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},ky=function(e,t){var n=Oy(e,t);return n>0?zm.utils.decode(1200,e.slice(t+4,t+4+n)):""},Ay=function(e,t){var n=Oy(e,t);return n>0?zm.utils.decode(65001,e.slice(t+4,t+4+n)):""}}Km&&(xy=function(e,t){if(!Buffer.isBuffer(e))return by(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Sy=function(e,t){if(!Buffer.isBuffer(e))return wy(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Ey=function(e,t){if(!Buffer.isBuffer(e))return _y(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},ky=function(e,t){if(!Buffer.isBuffer(e))return Cy(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},Ay=function(e,t){if(!Buffer.isBuffer(e))return Ny(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},Iy=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):Ty(e,t)},Dy=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof zm&&Ry();var Py=function(e,t){return e[t]},jy=function(e,t){return 256*e[t+1]+e[t]},Ly=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},Oy=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},My=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Fy=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function By(e,t){var n,r,i,a,o,s,l="",c=[];switch(t){case"dbcs":if(s=this.l,Km&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(o=0;o<e;++o)l+=String.fromCharCode(jy(this,s)),s+=2;e*=2;break;case"utf8":l=yy(this,this.l,this.l+e);break;case"utf16le":e*=2,l=py(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof zm)return By.call(this,e,"dbcs");l=zm.utils.decode(Pm,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=xy(this,this.l),e=4+Oy(this,this.l);break;case"lpstr-cp":l=Sy(this,this.l),e=4+Oy(this,this.l);break;case"lpwstr":l=Ey(this,this.l),e=4+2*Oy(this,this.l);break;case"lpp4":e=4+Oy(this,this.l),l=ky(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+Oy(this,this.l),l=Ay(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(i=Py(this,this.l+e++));)c.push(Wm(i));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(i=jy(this,this.l+e));)c.push(Wm(i)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",s=this.l,o=0;o<e;++o){if(this.lens&&-1!==this.lens.indexOf(s))return i=Py(this,s),this.l=s+1,a=By.call(this,e-o,i?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(Wm(jy(this,s))),s+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof zm){l=zm.utils.decode(Pm,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",s=this.l,o=0;o!=e;++o){if(this.lens&&-1!==this.lens.indexOf(s))return i=Py(this,s),this.l=s+1,a=By.call(this,e-o,i?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(Wm(Py(this,s))),s+=1}l=c.join("");break;default:switch(e){case 1:return n=Py(this,this.l),this.l++,n;case 2:return n=("i"===t?Ly:jy)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?My:Fy)(this,this.l),this.l+=4,n):(r=Oy(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?Iy(this,this.l):Iy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=gy(this,this.l,e)}}return this.l+=e,l}var Uy=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},zy=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},Wy=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function Vy(e,t,n){var r=0,i=0;if("dbcs"===n){for(i=0;i!=t.length;++i)Wy(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof zm&&874==jm)for(i=0;i!=t.length;++i){var a=zm.utils.encode(jm,t.charAt(i));this[this.l+i]=a[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);r=t.length}else{if("hex"===n){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===n){var o=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var s=t.charCodeAt(i);this[this.l++]=255&s,this[this.l++]=s>>8}for(;this.l<o;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,Uy(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,a=0,o=r?-t:t;isFinite(o)?0==o?i=a=0:(i=Math.floor(Math.log(o)/Math.LN2),a=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(t)?26985:0);for(var s=0;s<=5;++s,a/=256)e[n+s]=255&a;e[n+6]=(15&i)<<4|15&a,e[n+7]=i>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,zy(this,t,this.l)}}return this.l+=r,this}function Hy(e,t){var n=gy(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function qy(e,t){e.l=t,e.read_shift=By,e.chk=Hy,e.write_shift=Vy}function Gy(e,t){e.l+=t}function Ky(e){var t=Xm(e);return qy(t,0),t}function Yy(){var e=[],t=Km?256:2048,n=function(e){var t=Ky(e);return qy(t,0),t},r=n(t),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},a=function(e){return r&&e<r.length-r.l?r:(i(),r=n(Math.max(e+1,t)))};return{next:a,push:function(e){i(),null==(r=e).l&&(r.l=r.length),a(t)},end:function(){return i(),eg(e)},_bufs:e}}function Xy(e,t,n,r){var i,a=+t;if(!isNaN(a)){r||(r=u_[a].p||(n||[]).length||0),i=1+(a>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var o=e.next(i);a<=127?o.write_shift(1,a):(o.write_shift(1,128+(127&a)),o.write_shift(1,a>>7));for(var s=0;4!=s;++s){if(!(r>=128)){o.write_shift(1,r);break}o.write_shift(1,128+(127&r)),r>>=7}r>0&&Dy(n)&&e.push(n)}}function Qy(e,t,n){var r=mv(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function $y(e,t,n){var r=mv(e);return r.s=Qy(r.s,t.s,n),r.e=Qy(r.e,t.s,n),r}function Jy(e,t){if(e.cRel&&e.c<0)for(e=mv(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=mv(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=ab(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function Zy(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?Jy(e.s,t.biff)+":"+Jy(e.e,t.biff):(e.s.rRel?"":"$")+tb(e.s.r)+":"+(e.e.rRel?"":"$")+tb(e.e.r):(e.s.cRel?"":"$")+rb(e.s.c)+":"+(e.e.cRel?"":"$")+rb(e.e.c)}function eb(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function tb(e){return""+(e+1)}function nb(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function rb(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function ib(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function ab(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function ob(e){var t=e.indexOf(":");return-1==t?{s:ib(e),e:ib(e)}:{s:ib(e.slice(0,t)),e:ib(e.slice(t+1))}}function sb(e,t){return"undefined"===typeof t||"number"===typeof t?sb(e.s,e.e):("string"!==typeof e&&(e=ab(e)),"string"!==typeof t&&(t=ab(t)),e==t?e:e+":"+t)}function lb(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,a=e.length;for(n=0;r<a&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<a&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===a||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=a&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=a&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function cb(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=Hg(e.z,n?av(t):t)}catch(VD){}try{return e.w=Hg((e.XF||{}).numFmtId||(n?14:0),n?av(t):t)}catch(VD){return""+t}}function ub(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?qb[e.v]||e.v:cb(e,void 0==t?e.v:t))}function hb(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function db(e,t,n){var r=n||{},i=e?Array.isArray(e):r.dense;var a=e||(i?[]:{}),o=0,s=0;if(a&&null!=r.origin){if("number"==typeof r.origin)o=r.origin;else{var l="string"==typeof r.origin?ib(r.origin):r.origin;o=l.r,s=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var u=lb(a["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==o&&(c.e.r=o=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[h].length;++d)if("undefined"!==typeof t[h][d]){var f={v:t[h][d]},p=o+h,m=s+d;if(c.s.r>p&&(c.s.r=p),c.s.c>m&&(c.s.c=m),c.e.r<p&&(c.e.r=p),c.e.c<m&&(c.e.c=m),!t[h][d]||"object"!==typeof t[h][d]||Array.isArray(t[h][d])||t[h][d]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[h][d][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(r.nullError)f.t="e",f.v=0;else{if(!r.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=r.dateNF||dg[14],r.cellDates?(f.t="d",f.w=Hg(f.z,av(f.v))):(f.t="n",f.v=av(f.v),f.w=Hg(f.z,f.v))):f.t="s";else f=t[h][d];if(i)a[p]||(a[p]=[]),a[p][m]&&a[p][m].z&&(f.z=a[p][m].z),a[p][m]=f;else{var g=ab({c:m,r:p});a[g]&&a[g].z&&(f.z=a[g].z),a[g]=f}}}return c.s.c<1e7&&(a["!ref"]=sb(c)),a}function fb(e,t){return db(null,e,t)}function pb(e,t){return t||(t=Ky(4)),t.write_shift(4,e),t}function mb(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function gb(e,t){var n=!1;return null==t&&(n=!0,t=Ky(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function vb(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function yb(e,t){var n=e.l,r=e.read_shift(1),i=mb(e),a=[],o={t:i,h:i};if(0!==(1&r)){for(var s=e.read_shift(4),l=0;l!=s;++l)a.push(vb(e));o.r=a}else o.r=[{ich:0,ifnt:0}];return e.l=n+t,o}var bb=yb;function xb(e,t){var n=!1;return null==t&&(n=!0,t=Ky(23+4*e.t.length)),t.write_shift(1,1),gb(e.t,t),t.write_shift(4,1),function(e,t){t||(t=Ky(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function wb(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function Sb(e,t){return null==t&&(t=Ky(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function _b(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Eb(e,t){return null==t&&(t=Ky(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Cb=mb,kb=gb;function Nb(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function Ab(e,t){var n=!1;return null==t&&(n=!0,t=Ky(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var Tb=mb,Ib=Nb,Db=Ab;function Rb(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var i=0===r?Iy([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):My(t,0)>>2;return n?i/100:i}function Pb(e,t){null==t&&(t=Ky(4));var n=0,r=0,i=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:i==(0|i)&&i>=-(1<<29)&&i<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?i:e)<<2)+(n+2))}function jb(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Lb=jb,Ob=function(e,t){return t||(t=Ky(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function Mb(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Fb(e,t){return(t||Ky(8)).write_shift(8,e,"f")}function Bb(e,t){if(t||(t=Ky(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var Ub=80,zb={1:{n:"CodePage",t:2},2:{n:"Category",t:Ub},3:{n:"PresentationFormat",t:Ub},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:Ub},15:{n:"Company",t:Ub},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:Ub},27:{n:"ContentStatus",t:Ub},28:{n:"Language",t:Ub},29:{n:"Version",t:Ub},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Wb={1:{n:"CodePage",t:2},2:{n:"Title",t:Ub},3:{n:"Subject",t:Ub},4:{n:"Author",t:Ub},5:{n:"Keywords",t:Ub},6:{n:"Comments",t:Ub},7:{n:"Template",t:Ub},8:{n:"LastAuthor",t:Ub},9:{n:"RevNumber",t:Ub},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:Ub},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function Vb(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var Hb=mv(Vb([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),qb={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Gb={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Kb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Yb(e,t){var n,r=function(e){for(var t=[],n=ev(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(Gb),i=[];i[i.length]=Sv,i[i.length]=Wv("Types",null,{xmlns:Kv,"xmlns:xsd":ny,"xmlns:xsi":ty}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return Wv("Default",null,{Extension:e[0],ContentType:e[1]})}));var a=function(r){e[r]&&e[r].length>0&&(n=e[r][0],i[i.length]=Wv("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:Kb[r][t.bookType]||Kb[r].xlsx}))},o=function(n){(e[n]||[]).forEach(function(e){i[i.length]=Wv("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:Kb[n][t.bookType]||Kb[n].xlsx})})},s=function(t){(e[t]||[]).forEach(function(e){i[i.length]=Wv("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})})};return a("workbooks"),o("sheets"),o("charts"),s("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(s),s("vba"),s("comments"),s("threadedcomments"),s("drawings"),o("metadata"),s("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var Xb={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Qb(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function $b(e){var t=[Sv,Wv("Relationships",null,{xmlns:Yv})];return ev(e["!id"]).forEach(function(n){t[t.length]=Wv("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Jb(e,t,n,r,i,a){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=r,i.Target=n,a?i.TargetMode=a:[Xb.HLINK,Xb.XPATH,Xb.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function Zb(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function ex(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function tx(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Rm.version+"</meta:generator></office:meta></office:document-meta>"}var nx=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function rx(e,t,n,r,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=Nv(t),r[r.length]=n?Wv(e,t,n):Uv(e,t))}function ix(e,t){var n=t||{},r=[Sv,Wv("cp:coreProperties",null,{"xmlns:cp":Hv,"xmlns:dc":Qv,"xmlns:dcterms":$v,"xmlns:dcmitype":Jv,"xmlns:xsi":ty})],i={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&rx("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:Vv(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),null!=e.ModifiedDate&&rx("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:Vv(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var a=0;a!=nx.length;++a){var o=nx[a],s=n.Props&&null!=n.Props[o[1]]?n.Props[o[1]]:e?e[o[1]]:null;!0===s?s="1":!1===s?s="0":"number"==typeof s&&(s=String(s)),null!=s&&rx(o[0],s,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var ax=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],ox=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function sx(e){var t=[],n=Wv;return e||(e={}),e.Application="SheetJS",t[t.length]=Sv,t[t.length]=Wv("Properties",null,{xmlns:Gv,"xmlns:vt":ey}),ax.forEach(function(r){if(void 0!==e[r[1]]){var i;switch(r[2]){case"string":i=Nv(String(e[r[1]]));break;case"bool":i=e[r[1]]?"true":"false"}void 0!==i&&(t[t.length]=n(r[0],i))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+Nv(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function lx(e){var t=[Sv,Wv("Properties",null,{xmlns:qv,"xmlns:vt":ey})];if(!e)return t.join("");var n=1;return ev(e).forEach(function(r){++n,t[t.length]=Wv("property",function(e,t){switch(typeof e){case"string":var n=Wv("vt:lpwstr",Nv(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return Wv((0|e)==e?"vt:i4":"vt:r8",Nv(String(e)));case"boolean":return Wv("vt:bool",e?"true":"false")}if(e instanceof Date)return Wv("vt:filetime",Vv(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Nv(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var cx={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function ux(e,t){var n=Ky(4),r=Ky(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=Ky(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var i=(n*=1e7)/Math.pow(2,32)|0;i>0&&(n%=Math.pow(2,32),r+=i);var a=Ky(8);return a.write_shift(4,n),a.write_shift(4,r),a}(t);break;case 31:case 80:for((r=Ky(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return eg([n,r])}var hx=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function dx(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function fx(e,t,n){var r=Ky(8),i=[],a=[],o=8,s=0,l=Ky(8),c=Ky(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),i.push(c),o+=8+l.length,!t){(c=Ky(8)).write_shift(4,0),i.unshift(c);var u=[Ky(4)];for(u[0].write_shift(4,e.length),s=0;s<e.length;++s){var h=e[s][0];for((l=Ky(8+2*(h.length+1)+(h.length%2?0:2))).write_shift(4,s+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=eg(u),a.unshift(l),o+=8+l.length}for(s=0;s<e.length;++s)if((!t||t[e[s][0]])&&!(hx.indexOf(e[s][0])>-1||ox.indexOf(e[s][0])>-1)&&null!=e[s][1]){var d=e[s][1],f=0;if(t){var p=n[f=+t[e[s][0]]];if("version"==p.p&&"string"==typeof d){var m=d.split(".");d=(+m[0]<<16)+(+m[1]||0)}l=ux(p.t,d)}else{var g=dx(d);-1==g&&(g=31,d=String(d)),l=ux(g,d)}a.push(l),(c=Ky(8)).write_shift(4,t?f:2+s),i.push(c),o+=8+l.length}var v=8*(a.length+1);for(s=0;s<a.length;++s)i[s].write_shift(4,v),v+=a[s].length;return r.write_shift(4,o),r.write_shift(4,a.length),eg([r].concat(i).concat(a))}function px(e,t,n,r,i,a){var o=Ky(i?68:48),s=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Qg.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,i?68:48);var l=fx(e,n,r);if(s.push(l),i){var c=fx(i,null,null);o.write_shift(16,a,"hex"),o.write_shift(4,68+l.length),s.push(c)}return eg(s)}function mx(e,t){return 1===e.read_shift(t)}function gx(e,t){return t||(t=Ky(2)),t.write_shift(2,+!!e),t}function vx(e){return e.read_shift(2,"u")}function yx(e,t){return t||(t=Ky(2)),t.write_shift(2,e),t}function bx(e,t,n){return n||(n=Ky(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function xx(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",a=Pm;(n&&n.biff>=8&&(Pm=1200),n&&8!=n.biff)?12==n.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?e.read_shift(r,i):"";return Pm=a,o}function wx(e){var t=e.t||"",n=Ky(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=Ky(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),eg([n,r])}function Sx(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function _x(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):Sx(e,r,n)}function Ex(e,t,n){if(n.biff>5)return _x(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Cx(e,t,n){return n||(n=Ky(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function kx(e,t){t||(t=Ky(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function Nx(e){var t=Ky(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var i=r.indexOf("#"),a=i>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3}t.write_shift(4,2),t.write_shift(4,a);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)t.write_shift(4,o[n]);if(28==a)kx(r=r.slice(1),t);else if(2&a){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)t.write_shift(1,parseInt(o[n],16));var s=i>-1?r.slice(0,i):r;for(t.write_shift(4,2*(s.length+1)),n=0;n<s.length;++n)t.write_shift(2,s.charCodeAt(n));t.write_shift(2,0),8&a&&kx(i>-1?r.slice(i+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)t.write_shift(1,parseInt(o[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function Ax(e,t,n,r){return r||(r=Ky(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function Tx(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function Ix(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function Dx(e,t){return t||(t=Ky(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Rx(e,t,n){var r=1536,i=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;default:throw new Error("unsupported BIFF version")}var a=Ky(i);return a.write_shift(2,r),a.write_shift(2,t),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Px(e,t){var n=!t||t.biff>=8?2:1,r=Ky(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function jx(e,t,n,r){var i=n&&5==n.biff;r||(r=Ky(i?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(i?1:2,t.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return null==a.l&&(a.l=a.length),a}function Lx(e,t,n,r){var i=n&&5==n.biff;r||(r=Ky(i?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&i&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Ox(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=xx(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],i=e.l+t,a=e.read_shift(n.biff>8?4:2);0!==a--;)r.push(Tx(e,n.biff,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function Mx(e){var t=Ky(24),n=ib(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(r[i],16));return eg([t,Nx(e[1])])}function Fx(e){var t=e[1].Tooltip,n=Ky(10+2*(t.length+1));n.write_shift(2,2048);var r=ib(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<t.length;++i)n.write_shift(2,t.charCodeAt(i));return n.write_shift(2,0),n}function Bx(e,t,n){if(!n.cellStyles)return Gy(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),a=e.read_shift(r),o=e.read_shift(r),s=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:i,e:a,w:o,ixfe:s,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var Ux=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=nv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var i=fb(function(t,n){var r=[],i=Xm(1);switch(n.type){case"base64":i=$m(Gm(t));break;case"binary":i=$m(t);break;case"buffer":case"array":i=t}qy(i,0);var a=i.read_shift(1),o=!!(136&a),s=!1,l=!1;switch(a){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:s=!0,o=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+a.toString(16))}var c=0,u=521;2==a&&(c=i.read_shift(2)),i.l+=3,2!=a&&(c=i.read_shift(4)),c>1048576&&(c=1e6),2!=a&&(u=i.read_shift(2));var h=i.read_shift(2),d=n.codepage||1252;2!=a&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(d=e[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);for(var f=[],p={},m=Math.min(i.length,2==a?521:u-10-(s?264:0)),g=l?32:11;i.l<m&&13!=i[i.l];)switch((p={}).name=zm.utils.decode(d,i.slice(i.l,i.l+g)).replace(/[\u0000\r\n].*$/g,""),i.l+=g,p.type=String.fromCharCode(i.read_shift(1)),2==a||l||(p.offset=i.read_shift(4)),p.len=i.read_shift(1),2==a&&(p.offset=i.read_shift(2)),p.dec=i.read_shift(1),p.name.length&&f.push(p),2!=a&&(i.l+=l?13:14),p.type){case"B":s&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var v=0,y=0;for(r[0]=[],y=0;y!=f.length;++y)r[0][y]=f[y].name;for(;c-- >0;)if(42!==i[i.l])for(++i.l,r[++v]=[],y=0,y=0;y!=f.length;++y){var b=i.slice(i.l,i.l+f[y].len);i.l+=f[y].len,qy(b,0);var x=zm.utils.decode(d,b);switch(f[y].type){case"C":x.trim().length&&(r[v][y]=x.replace(/\s+$/,""));break;case"D":8===x.length?r[v][y]=new Date(+x.slice(0,4),+x.slice(4,6)-1,+x.slice(6,8)):r[v][y]=x;break;case"F":r[v][y]=parseFloat(x.trim());break;case"+":case"I":r[v][y]=l?2147483648^b.read_shift(-4,"i"):b.read_shift(4,"i");break;case"L":switch(x.trim().toUpperCase()){case"Y":case"T":r[v][y]=!0;break;case"N":case"F":r[v][y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+x+"|")}break;case"M":if(!o)throw new Error("DBF Unexpected MEMO for type "+a.toString(16));r[v][y]="##MEMO##"+(l?parseInt(x.trim(),10):b.read_shift(4));break;case"N":(x=x.replace(/\u0000/g,"").trim())&&"."!=x&&(r[v][y]=+x||0);break;case"@":r[v][y]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":r[v][y]=new Date(864e5*(b.read_shift(4)-2440588)+b.read_shift(4));break;case"Y":r[v][y]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[v][y]=-b.read_shift(-8,"f");break;case"B":if(s&&8==f[y].len){r[v][y]=b.read_shift(8,"f");break}case"G":case"P":b.l+=f[y].len;break;case"0":if("_NullFlags"===f[y].name)break;default:throw new Error("DBF Unsupported data type "+f[y].type)}}else i.l+=h;if(2!=a&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=f,r}(t,r),r);return i["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,i}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return hb(n(e,t),t)}catch(VD){if(t&&t.WTF)throw VD}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var i=n||{};if(+i.codepage>=0&&Fm(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var a=Yy(),o=lE(e,{header:1,raw:!0,cellDates:!0}),s=o[0],l=o.slice(1),c=e["!cols"]||[],u=0,h=0,d=0,f=1;for(u=0;u<s.length;++u)if(((c[u]||{}).DBF||{}).name)s[u]=c[u].DBF.name,++d;else if(null!=s[u]){if(++d,"number"===typeof s[u]&&(s[u]=s[u].toString(10)),"string"!==typeof s[u])throw new Error("DBF Invalid column name "+s[u]+" |"+typeof s[u]+"|");if(s.indexOf(s[u])!==u)for(h=0;h<1024;++h)if(-1==s.indexOf(s[u]+"_"+h)){s[u]+="_"+h;break}}var p=lb(e["!ref"]),m=[],g=[],v=[];for(u=0;u<=p.e.c-p.s.c;++u){var y="",b="",x=0,w=[];for(h=0;h<l.length;++h)null!=l[h][u]&&w.push(l[h][u]);if(0!=w.length&&null!=s[u]){for(h=0;h<w.length;++h){switch(typeof w[h]){case"number":b="B";break;case"string":default:b="C";break;case"boolean":b="L";break;case"object":b=w[h]instanceof Date?"D":"C"}x=Math.max(x,String(w[h]).length),y=y&&y!=b?"C":b}x>250&&(x=250),"C"==(b=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>x&&(x=c[u].DBF.len),"B"==y&&"N"==b&&(y="N",v[u]=c[u].DBF.dec,x=c[u].DBF.len),g[u]="C"==y||"N"==b?x:r[y]||0,f+=g[u],m[u]=y}else m[u]="?"}var S=a.next(32);for(S.write_shift(4,318902576),S.write_shift(4,l.length),S.write_shift(2,296+32*d),S.write_shift(2,f),u=0;u<4;++u)S.write_shift(4,0);for(S.write_shift(4,(+t[jm]||3)<<8),u=0,h=0;u<s.length;++u)if(null!=s[u]){var _=a.next(32),E=(s[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);_.write_shift(1,E,"sbcs"),_.write_shift(1,"?"==m[u]?"C":m[u],"sbcs"),_.write_shift(4,h),_.write_shift(1,g[u]||r[m[u]]||0),_.write_shift(1,v[u]||0),_.write_shift(1,2),_.write_shift(4,0),_.write_shift(1,0),_.write_shift(4,0),_.write_shift(4,0),h+=g[u]||r[m[u]]||0}var C=a.next(264);for(C.write_shift(4,13),u=0;u<65;++u)C.write_shift(4,0);for(u=0;u<l.length;++u){var k=a.next(f);for(k.write_shift(1,0),h=0;h<s.length;++h)if(null!=s[h])switch(m[h]){case"L":k.write_shift(1,null==l[u][h]?63:l[u][h]?84:70);break;case"B":k.write_shift(8,l[u][h]||0,"f");break;case"N":var N="0";for("number"==typeof l[u][h]&&(N=l[u][h].toFixed(v[h]||0)),d=0;d<g[h]-N.length;++d)k.write_shift(1,32);k.write_shift(1,N,"sbcs");break;case"D":l[u][h]?(k.write_shift(4,("0000"+l[u][h].getFullYear()).slice(-4),"sbcs"),k.write_shift(2,("00"+(l[u][h].getMonth()+1)).slice(-2),"sbcs"),k.write_shift(2,("00"+l[u][h].getDate()).slice(-2),"sbcs")):k.write_shift(8,"00000000","sbcs");break;case"C":var A=String(null!=l[u][h]?l[u][h]:"").slice(0,g[h]);for(k.write_shift(1,A,"sbcs"),d=0;d<g[h]-A.length;++d)k.write_shift(1,32)}}return a.next(1).write_shift(1,26),a.end()}}}(),zx=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+ev(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?Vm(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:Vm(r)};function i(e,i){var a,o=e.split(/[\n\r]+/),s=-1,l=-1,c=0,u=0,h=[],d=[],f=null,p={},m=[],g=[],v=[],y=0;for(+i.codepage>=0&&Fm(+i.codepage);c!==o.length;++c){y=0;var b,x=o[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),w=x.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),S=w[0];if(x.length>0)switch(S){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==w[1].charAt(0)&&d.push(x.slice(3).replace(/;;/g,";"));break;case"C":var _=!1,E=!1,C=!1,k=!1,N=-1,A=-1;for(u=1;u<w.length;++u)switch(w[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(w[u].slice(1))-1,E=!0;break;case"Y":for(s=parseInt(w[u].slice(1))-1,E||(l=0),a=h.length;a<=s;++a)h[a]=[];break;case"K":'"'===(b=w[u].slice(1)).charAt(0)?b=b.slice(1,b.length-1):"TRUE"===b?b=!0:"FALSE"===b?b=!1:isNaN(vv(b))?isNaN(bv(b).getDate())||(b=fv(b)):(b=vv(b),null!==f&&Ug(f)&&(b=cv(b))),"undefined"!==typeof zm&&"string"==typeof b&&"string"!=(i||{}).type&&(i||{}).codepage&&(b=zm.utils.decode(i.codepage,b)),_=!0;break;case"E":k=!0;var T=Rw(w[u].slice(1),{r:s,c:l});h[s][l]=[h[s][l],T];break;case"S":C=!0,h[s][l]=[h[s][l],"S5S"];break;case"R":N=parseInt(w[u].slice(1))-1;break;case"C":A=parseInt(w[u].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}if(_&&(h[s][l]&&2==h[s][l].length?h[s][l][0]=b:h[s][l]=b,f=null),C){if(k)throw new Error("SYLK shared formula cannot have own formula");var I=N>-1&&h[N][A];if(!I||!I[1])throw new Error("SYLK shared formula cannot find base");h[s][l][1]=Lw(I[1],{r:s-N,c:l-A})}break;case"F":var D=0;for(u=1;u<w.length;++u)switch(w[u].charAt(0)){case"X":l=parseInt(w[u].slice(1))-1,++D;break;case"Y":for(s=parseInt(w[u].slice(1))-1,a=h.length;a<=s;++a)h[a]=[];break;case"M":y=parseInt(w[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=d[parseInt(w[u].slice(1))];break;case"W":for(v=w[u].slice(1).split(" "),a=parseInt(v[0],10);a<=parseInt(v[1],10);++a)y=parseInt(v[2],10),g[a-1]=0===y?{hidden:!0}:{wch:y},iw(g[a-1]);break;case"C":g[l=parseInt(w[u].slice(1))-1]||(g[l]={});break;case"R":m[s=parseInt(w[u].slice(1))-1]||(m[s]={}),y>0?(m[s].hpt=y,m[s].hpx=sw(y)):0===y&&(m[s].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}D<1&&(f=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}}return m.length>0&&(p["!rows"]=m),g.length>0&&(p["!cols"]=g),i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),[h,p]}function a(e,t){var n=function(e,t){switch(t.type){case"base64":return i(Gm(e),t);case"binary":return i(e,t);case"buffer":return i(Km&&Buffer.isBuffer(e)?e.toString("binary"):Zm(e),t);case"array":return i(pv(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],a=n[1],o=fb(r,t);return ev(a).forEach(function(e){o[e]=a[e]}),o}function o(e,t,n,r){var i="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+jw(e.f,{r:n,c:r}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return hb(a(e,t),t)},to_sheet:a,from_sheet:function(e,t){var n,r,i=["ID;PWXL;N;E"],a=[],s=lb(e["!ref"]),l=Array.isArray(e),c="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=i,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=tw(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=nw(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*ow(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(i,e["!rows"]),i.push("B;Y"+(s.e.r-s.s.r+1)+";X"+(s.e.c-s.s.c+1)+";D"+[s.s.c,s.s.r,s.e.c,s.e.r].join(" "));for(var u=s.s.r;u<=s.e.r;++u)for(var h=s.s.c;h<=s.e.c;++h){var d=ab({r:u,c:h});(n=l?(e[u]||[])[h]:e[d])&&(null!=n.v||n.f&&!n.F)&&a.push(o(n,0,u,h))}return i.join(c)+c+a.join(c)+c+"E"+c}}}(),Wx=function(){function e(e,t){for(var n=e.split("\n"),r=-1,i=-1,a=0,o=[];a!==n.length;++a)if("BOT"!==n[a].trim()){if(!(r<0)){for(var s=n[a].trim().split(","),l=s[0],c=s[1],u=n[++a]||"";1&(u.match(/["]/g)||[]).length&&a<n.length-1;)u+="\n"+n[++a];switch(u=u.trim(),+l){case-1:if("BOT"===u){o[++r]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?o[r][i]=!0:"FALSE"===u?o[r][i]=!1:isNaN(vv(c))?isNaN(bv(c).getDate())?o[r][i]=c:o[r][i]=fv(c):o[r][i]=vv(c),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),o[r][i++]=""!==u?u:null}if("EOD"===u)break}}else o[++r]=[],i=0;return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}function t(t,n){return fb(function(t,n){switch(n.type){case"base64":return e(Gm(t),n);case"binary":return e(t,n);case"buffer":return e(Km&&Buffer.isBuffer(t)?t.toString("binary"):Zm(t),n);case"array":return e(pv(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}var n=function(){var e=function(e,t,n,r,i){e.push(t),e.push(n+","+r),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,i=[],a=lb(n["!ref"]),o=Array.isArray(n);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,a.e.r-a.s.r+1,""),e(i,"TUPLES",0,a.e.c-a.s.c+1,""),e(i,"DATA",0,0,"");for(var s=a.s.r;s<=a.e.r;++s){t(i,-1,0,"BOT");for(var l=a.s.c;l<=a.e.c;++l){var c=ab({r:s,c:l});if(r=o?(n[s]||[])[l]:n[c])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(i,1,0,"="+r.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=Hg(r.z||dg[14],av(fv(r.v)))),t(i,0,r.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}t(i,-1,0,"EOD");return i.join("\r\n")}}();return{to_workbook:function(e,n){return hb(t(e,n),n)},to_sheet:t,from_sheet:n}}(),Vx=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return fb(function(t,n){for(var r=t.split("\n"),i=-1,a=-1,o=0,s=[];o!==r.length;++o){var l=r[o].trim().split(":");if("cell"===l[0]){var c=ib(l[1]);if(s.length<=c.r)for(i=s.length;i<=c.r;++i)s[i]||(s[i]=[]);switch(i=c.r,a=c.c,l[2]){case"t":s[i][a]=e(l[3]);break;case"v":s[i][a]=+l[3];break;case"vtf":var u=l[l.length-1];case"vtc":"nl"===l[3]?s[i][a]=!!+l[4]:s[i][a]=+l[4],"vtf"==l[2]&&(s[i][a]=[s[i][a],u])}}}return n&&n.sheetRows&&(s=s.slice(0,n.sheetRows)),s}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),o="--SocialCalcSpreadsheetControlSave--";function s(e){if(!e||!e["!ref"])return"";for(var n,r=[],i=[],a="",o=ob(e["!ref"]),s=Array.isArray(e),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c)if(a=ab({r:l,c:c}),(n=s?(e[l]||[])[c]:e[a])&&null!=n.v&&"z"!==n.t){switch(i=["cell",a,"t"],n.t){case"s":case"str":i.push(t(n.v));break;case"n":n.f?(i[2]="vtf",i[3]="n",i[4]=n.v,i[5]=t(n.f)):(i[2]="v",i[3]=n.v);break;case"b":i[2]="vt"+(n.f?"f":"c"),i[3]="nl",i[4]=n.v?"1":"0",i[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=av(fv(n.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=n.w||Hg(n.z||dg[14],u);break;case"e":continue}r.push(i.join(":"))}return r.push("sheet:c:"+(o.e.c-o.s.c+1)+":r:"+(o.e.r-o.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return hb(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,i,a,i,s(e),o].join("\n")}}}(),Hx=function(){function e(e,t,n,r,i){i.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(vv(e))?isNaN(bv(e).getDate())?t[n][r]=e:t[n][r]=fv(e):t[n][r]=vv(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},i=!1,a=0,o=0;a<e.length;++a)34==(o=e.charCodeAt(a))?i=!i:!i&&o in t&&(r[o]=(r[o]||0)+1);for(a in o=[],r)Object.prototype.hasOwnProperty.call(r,a)&&o.push([r[a],a]);if(!o.length)for(a in r=n)Object.prototype.hasOwnProperty.call(r,a)&&o.push([r[a],a]);return o.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[o.pop()[1]]||44}function i(e,t){var n=t||{},i="";var a=n.dense?[]:{},o={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=r(e.slice(0,1024)):i=n&&n.FS?n.FS:r(e.slice(0,1024));var s=0,l=0,c=0,u=0,h=0,d=i.charCodeAt(0),f=!1,p=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=n.dateNF?function(e){var t="number"==typeof e?dg[e]:e;return t=t.replace(Yg,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function v(){var t=e.slice(u,h),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(r.t="s",r.v=t):(r.t="n",r.f=t.slice(1));else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=vv(t)))if(!isNaN(bv(t).getDate())||g&&t.match(g)){r.z=n.dateNF||dg[14];var i=0;g&&t.match(g)&&(t=function(e,t,n){var r=-1,i=-1,a=-1,o=-1,s=-1,l=-1;(t.match(Yg)||[]).forEach(function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":a=c;break;case"h":o=c;break;case"s":l=c;break;case"m":o>=0?s=c:i=c}}),l>=0&&-1==s&&i>=0&&(s=i,i=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==o&&-1==s&&-1==l?c:-1==r&&-1==i&&-1==a?u:c+"T"+u}(0,n.dateNF,t.match(g)||[]),i=1),n.cellDates?(r.t="d",r.v=fv(t,i)):(r.t="n",r.v=av(fv(t,i))),!1!==n.cellText&&(r.w=Hg(r.z,r.v instanceof Date?av(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(a[s]||(a[s]=[]),a[s][l]=r):a[ab({c:l,r:s})]=r),u=h+1,m=e.charCodeAt(u),o.e.c<l&&(o.e.c=l),o.e.r<s&&(o.e.r=s),p==d)++l;else if(l=0,++s,n.sheetRows&&n.sheetRows<=s)return!0}e:for(;h<e.length;++h)switch(p=e.charCodeAt(h)){case 34:34===m&&(f=!f);break;case d:case 10:case 13:if(!f&&v())break e}return h-u>0&&v(),a["!ref"]=sb(o),a}function a(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,n):fb(function(t,n){var r=n||{},i=[];if(!t||0===t.length)return i;for(var a=t.split(/[\r\n]/),o=a.length-1;o>=0&&0===a[o].length;)--o;for(var s=10,l=0,c=0;c<=o;++c)-1==(l=a[c].indexOf(" "))?l=a[c].length:l++,s=Math.max(s,l);for(c=0;c<=o;++c){i[c]=[];var u=0;for(e(a[c].slice(0,s).trim(),i,c,u,r),u=1;u<=(a[c].length-s)/10+1;++u)e(a[c].slice(s+10*(u-1),s+10*u).trim(),i,c,u,r)}return r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}(t,n),n):i(t,n)}function o(e,t){var n="",r="string"==t.type?[0,0,0,0]:Z_(e,t);switch(t.type){case"base64":n=Gm(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof zm?zm.utils.decode(t.codepage,e):Km&&Buffer.isBuffer(e)?e.toString("binary"):Zm(e);break;case"array":n=pv(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=Ov(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=Ov(n):"binary"==t.type&&"undefined"!==typeof zm&&t.codepage&&(n=zm.utils.decode(t.codepage,zm.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?Vx.to_sheet("string"==t.type?n:Ov(n),t):a(n,t)}return{to_workbook:function(e,t){return hb(o(e,t),t)},to_sheet:o,from_sheet:function(e){for(var t,n=[],r=lb(e["!ref"]),i=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){for(var o=[],s=r.s.c;s<=r.e.c;++s){var l=ab({r:a,c:s});if((t=i?(e[a]||[])[s]:e[l])&&null!=t.v){for(var c=(t.w||(ub(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";o.push(c+(0===s?" ":""))}else o.push("          ")}n.push(o.join(""))}return n.join("\n")}}}();var qx=function(){function e(e,t,n){if(e){qy(e,e.l||0);for(var r=n.Enum||v;e.l<e.length;){var i=e.read_shift(2),a=r[i]||r[65535],o=e.read_shift(2),s=e.l+o,l=a.f&&a.f(e,o,n);if(e.l=s,t(l,a,i))return}}}function t(t,n){if(!t)return t;var r=n||{};var i=r.dense?[]:{},a="Sheet1",o="",s=0,l={},c=[],u=[],h={s:{r:0,c:0},e:{r:0,c:0}},d=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=v,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:h=e;break;case 204:e&&(o=e);break;case 222:o=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||dg[14],r.cellDates&&(e[1].t="d",e[1].v=cv(e[1].v))),r.qpro&&e[3]>s&&(i["!ref"]=sb(h),l[a]=i,c.push(a),i=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},s=e[3],a=o||"Sheet"+(s+1),o="");var u=r.dense?(i[e[0].r]||[])[e[0].c]:i[ab(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[ab(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=y,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:a=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>s&&(i["!ref"]=sb(h),l[a]=i,c.push(a),i=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},s=e[3],a="Sheet"+(s+1)),d>0&&e[0].r>=d)break;r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[ab(e[0])]=e[1],h.e.c<e[0].c&&(h.e.c=e[0].c),h.e.r<e[0].r&&(h.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==s&&(a=e[1])}},r)}if(i["!ref"]=sb(h),l[o||a]=i,c.push(o||a),!u.length)return{SheetNames:c,Sheets:l};for(var f={},p=[],m=0;m<u.length;++m)l[c[m]]?(p.push(u[m]||c[m]),f[u[m]]=l[u[m]]||l[c[m]]):(p.push(u[m]),f[u[m]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var i=e.l+t,a=n(e,0,r);if(a[1].t="s",20768==r.vers){e.l++;var o=e.read_shift(1);return a[1].v=e.read_shift(o,"utf8"),a}return r.qpro&&e.l++,a[1].v=e.read_shift(i-e.l,"cstr"),a}function i(e,t,n){var r=Ky(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var i=0;i<r.length;++i){var a=n.charCodeAt(i);r.write_shift(1,a>=128?95:a)}return r.write_shift(1,0),r}function a(e,t,n){var r=Ky(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function o(e,t,n){var r=Ky(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function s(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?rb(t):tb(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function h(e,t,n,r){var i=Ky(6+r.length);i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),i.write_shift(1,39);for(var a=0;a<r.length;++a){var o=r.charCodeAt(a);i.write_shift(1,o>=128?95:o)}return i.write_shift(1,0),i}function d(e,t){var n=u(e),r=e.read_shift(4),i=e.read_shift(4),a=e.read_shift(2);if(65535==a)return 0===r&&3221225472===i?(n[1].t="e",n[1].v=15):0===r&&3489660928===i?(n[1].t="e",n[1].v=42):n[1].v=0,n;var o=32768&a;return a=(32767&a)-16446,n[1].v=(1-2*o)*(i*Math.pow(2,a+32)+r*Math.pow(2,a)),n}function f(e,t,n,r){var i=Ky(14);if(i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),0==r)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var a,o=0,s=0,l=0;return r<0&&(o=1,r=-r),s=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,s-31))>>>0))&&(++s,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,a=(r*=Math.pow(2,32))>>>0,i.write_shift(4,a),i.write_shift(4,l),s+=16383+(o?32768:0),i.write_shift(2,s),i}function p(e,t){var n=u(e),r=e.read_shift(8,"f");return n[1].v=r,n}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var n=Ky(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);n[n.l++]=i>127?95:i}return n[n.l++]=0,n}var v={0:{n:"BOF",f:vx},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var i=e.l+t,a=n(e,0,r);if(a[1].v=e.read_shift(8,"f"),r.qpro)e.l=i;else{var o=e.read_shift(2);!function(e,t){qy(e,0);var n=[],r=0,i="",a="",o="",u="";for(;e.l<e.length;){var h=e[e.l++];switch(h){case 0:n.push(e.read_shift(8,"f"));break;case 1:a=s(t[0].c,e.read_shift(2),!0),i=s(t[0].r,e.read_shift(2),!1),n.push(a+i);break;case 2:var d=s(t[0].c,e.read_shift(2),!0),f=s(t[0].r,e.read_shift(2),!1);a=s(t[0].c,e.read_shift(2),!0),i=s(t[0].r,e.read_shift(2),!1),n.push(d+f+":"+a+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";h=e[e.l++];)p+=String.fromCharCode(h);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:u=n.pop(),o=n.pop(),n.push(["AND","OR"][h-20]+"("+o+","+u+")");break;default:if(h<32&&c[h])u=n.pop(),o=n.pop(),n.push(o+c[h]+u);else{if(!l[h])return h<=7?console.error("WK1 invalid opcode "+h.toString(16)):h<=24?console.error("WK1 unsupported op "+h.toString(16)):h<=30?console.error("WK1 invalid opcode "+h.toString(16)):h<=115?console.error("WK1 unsupported function opcode "+h.toString(16)):console.error("WK1 unrecognized opcode "+h.toString(16));if(69==(r=l[h][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+h.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(l[h][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+o),a),e.l+=o}return a}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=u(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:d},24:{n:"NUMBER18",f:function(e,t){var n=u(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=d(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var i=e.read_shift(2);if(14e3==i){for(n[i]=[0,""],n[i][0]=e.read_shift(2);e[e.l];)n[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=u(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var n=p(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&Fm(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=Yy(),s=lb(e["!ref"]),l=Array.isArray(e),c=[];h_(r,0,function(e){var t=Ky(2);return t.write_shift(2,e),t}(1030)),h_(r,6,function(e){var t=Ky(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(s));for(var u=Math.min(s.e.r,8191),h=s.s.r;h<=u;++h)for(var d=tb(h),f=s.s.c;f<=s.e.c;++f){h===s.s.r&&(c[f]=rb(f));var p=c[f]+d,m=l?(e[h]||[])[f]:e[p];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?h_(r,13,a(h,f,m.v)):h_(r,14,o(h,f,m.v));else h_(r,15,i(h,f,ub(m).slice(0,239)))}return h_(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&Fm(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=Yy();h_(r,0,function(e){var t=Ky(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,i=0,a=0;a<e.SheetNames.length;++a){var o=e.SheetNames[a],s=e.Sheets[o];if(s&&s["!ref"]){++i;var l=ob(s["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,i),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,a=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&h_(r,27,g(e.SheetNames[i],a++));var o=0;for(i=0;i<e.SheetNames.length;++i){var s=e.Sheets[e.SheetNames[i]];if(s&&s["!ref"]){for(var l=lb(s["!ref"]),c=Array.isArray(s),u=[],d=Math.min(l.e.r,8191),p=l.s.r;p<=d;++p)for(var m=tb(p),v=l.s.c;v<=l.e.c;++v){p===l.s.r&&(u[v]=rb(v));var y=u[v]+m,b=c?(s[p]||[])[v]:s[y];if(b&&"z"!=b.t)if("n"==b.t)h_(r,23,f(p,v,o,b.v));else h_(r,22,h(p,v,o,ub(b).slice(0,239)))}++o}}return h_(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t($m(Gm(e)),n);case"binary":return t($m(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var Gx=/^\s|\s$|[\t\n\r]/;function Kx(e,t){if(!t.bookSST)return"";var n=[Sv];n[n.length]=Wv("sst",null,{xmlns:ry[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var i=e[r],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(Gx)&&(a+=' xml:space="preserve"'),a+=">"+Nv(i.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var Yx=function(e,t){var n=!1;return null==t&&(n=!0,t=Ky(15+4*e.t.length)),t.write_shift(1,0),gb(e.t,t),n?t.slice(0,t.l):t};function Xx(e){var t=Yy();Xy(t,159,function(e,t){return t||(t=Ky(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)Xy(t,19,Yx(e[n]));return Xy(t,160),t.end()}function Qx(e){if("undefined"!==typeof zm)return zm.utils.encode(jm,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function $x(e){var t,n,r=0,i=Qx(e),a=i.length+1;for((t=Xm(a))[0]=i.length,n=1;n!=a;++n)t[n]=i[n-1];for(n=a-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var Jx=function(){function e(e,n){switch(n.type){case"base64":return t(Gm(e),n);case"binary":return t(e,n);case"buffer":return t(Km&&Buffer.isBuffer(e)?e.toString("binary"):Zm(e),n);case"array":return t(pv(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,a=/\\\w+\b/g,o=0,s=-1;r=a.exec(e);){if("\\cell"===r[0]){var l=e.slice(o,a.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++s,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][s]=c:n[ab({r:t,c:s})]=c}}o=a.lastIndex}s>i.e.c&&(i.e.c=s)}),n["!ref"]=sb(i),n}return{to_workbook:function(t,n){return hb(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=lb(e["!ref"]),i=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){n.push("\\trowd\\trautofit1");for(var o=r.s.c;o<=r.e.c;++o)n.push("\\cellx"+(o+1));for(n.push("\\pard\\intbl"),o=r.s.c;o<=r.e.c;++o){var s=ab({r:a,c:o});(t=i?(e[a]||[])[o]:e[s])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(ub(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function Zx(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var ew=6;function tw(e){return Math.floor((e+Math.round(128/ew)/256)*ew)}function nw(e){return Math.floor((e-5)/ew*100+.5)/100}function rw(e){return Math.round((e*ew+5)/ew*256)/256}function iw(e){e.width?(e.wpx=tw(e.width),e.wch=nw(e.wpx),e.MDW=ew):e.wpx?(e.wch=nw(e.wpx),e.width=rw(e.wch),e.MDW=ew):"number"==typeof e.wch&&(e.width=rw(e.wch),e.wpx=tw(e.width),e.MDW=ew),e.customWidth&&delete e.customWidth}var aw=96;function ow(e){return 96*e/aw}function sw(e){return e*aw/96}function lw(e,t){var n,r=[Sv,Wv("styleSheet",null,{xmlns:ry[0],"xmlns:vt":ey})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=Wv("numFmt",null,{numFmtId:r,formatCode:Nv(e[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=Wv("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=Wv("cellXfs",null),e.forEach(function(e){t[t.length]=Wv("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=Wv("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function cw(e,t,n){n||(n=Ky(6+4*t.length)),n.write_shift(2,e),gb(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function uw(e,t){t||(t=Ky(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=Ky(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Bb(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),gb(e.name,t),t.length>t.l?t.slice(0,t.l):t}var hw,dw=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],fw=Gy;function pw(e,t){t||(t=Ky(84)),hw||(hw=nv(dw));var n=hw[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(Bb({auto:1},t),Bb({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function mw(e,t,n){n||(n=Ky(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function gw(e,t){return t||(t=Ky(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var vw=Gy;function yw(e){Xy(e,613,pb(1)),Xy(e,46,function(e,t){return t||(t=Ky(51)),t.write_shift(1,0),gw(0,t),gw(0,t),gw(0,t),gw(0,t),gw(0,t),t.length>t.l?t.slice(0,t.l):t}()),Xy(e,614)}function bw(e){Xy(e,619,pb(1)),Xy(e,48,function(e,t){return t||(t=Ky(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),Ab(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),Xy(e,620)}function xw(e){Xy(e,508,function(e,t,n){var r=Ky(2052);return r.write_shift(4,e),Ab(t,r),Ab(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),Xy(e,509)}function ww(e,t){var n=Yy();return Xy(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n}),0!=n&&(Xy(e,615,pb(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&Xy(e,44,cw(r,t[r]))}),Xy(e,616))}}(n,e.SSF),function(e){Xy(e,611,pb(1)),Xy(e,43,uw({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Xy(e,612)}(n),function(e){Xy(e,603,pb(2)),Xy(e,45,pw({patternType:"none"})),Xy(e,45,pw({patternType:"gray125"})),Xy(e,604)}(n),yw(n),function(e){Xy(e,626,pb(1)),Xy(e,47,mw({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Xy(e,627)}(n),function(e,t){Xy(e,617,pb(t.length)),t.forEach(function(t){Xy(e,47,mw(t,0))}),Xy(e,618)}(n,t.cellXfs),bw(n),function(e){Xy(e,505,pb(0)),Xy(e,506)}(n),xw(n),Xy(n,279),n.end()}function Sw(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[Sv];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function _w(){var e=Yy();return Xy(e,332),Xy(e,334,pb(1)),Xy(e,335,function(e){var t=Ky(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),gb(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),Xy(e,336),Xy(e,339,function(e,t){var n=Ky(8+2*t.length);return n.write_shift(4,e),gb(t,n),n.slice(0,n.l)}(1,"XLDAPR")),Xy(e,52),Xy(e,35,pb(514)),Xy(e,4096,pb(0)),Xy(e,4097,yx(1)),Xy(e,36),Xy(e,53),Xy(e,340),Xy(e,337,function(e,t){var n=Ky(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),Xy(e,51,function(e){var t=Ky(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),Xy(e,338),Xy(e,333),e.end()}function Ew(){var e=[Sv];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var Cw=1024;function kw(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[Wv("xml",null,{"xmlns:v":cy,"xmlns:o":iy,"xmlns:x":ay,"xmlns:mv":ly}).replace(/\/>/,">"),Wv("o:shapelayout",Wv("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Wv("v:shapetype",[Wv("v:stroke",null,{joinstyle:"miter"}),Wv("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Cw<1e3*e;)Cw+=1e3;return t.forEach(function(e){var t=ib(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?Wv("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,a=Wv("v:fill",r,n);++Cw,i=i.concat(["<v:shape"+zv({id:"_x0000_s"+Cw,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",a,Wv("v:shadow",null,{on:"t",obscured:"t"}),Wv("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Uv("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),Uv("x:AutoFill","False"),Uv("x:Row",String(t.r)),Uv("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function Nw(e){var t=[Sv,Wv("comments",null,{xmlns:ry[0]})],n=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var r=Nv(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var r=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(r=n.indexOf(Nv(e.a))),i.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),i.length<=1)t.push(Uv("t",Nv(i[0]||"")));else{for(var a="Comment:\n    "+i[0]+"\n",o=1;o<i.length;++o)a+="Reply:\n    "+i[o]+"\n";t.push(Uv("t",Nv(a)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Aw(e,t,n){var r=[Sv,Wv("ThreadedComments",null,{xmlns:Xv}).replace(/[\/]>/,">")];return e.forEach(function(e){var i="";(e[1]||[]).forEach(function(a,o){if(a.T){a.a&&-1==t.indexOf(a.a)&&t.push(a.a);var s={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==o?i=s.id:s.parentId=i,a.ID=s.id,a.a&&(s.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(a.a)).slice(-12)+"}"),r.push(Wv("threadedComment",Uv("text",a.t||""),s))}else delete a.ID})}),r.push("</ThreadedComments>"),r.join("")}var Tw=mb;function Iw(e){var t=Yy(),n=[];return Xy(t,628),Xy(t,630),e.forEach(function(e){e[1].forEach(function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),Xy(t,632,function(e){return gb(e.slice(0,54))}(e.a)))})}),Xy(t,631),Xy(t,633),e.forEach(function(e){e[1].forEach(function(r){r.iauthor=n.indexOf(r.a);var i={s:ib(e[0]),e:ib(e[0])};Xy(t,635,function(e,t){return null==t&&(t=Ky(36)),t.write_shift(4,e[1].iauthor),Ob(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,r])),r.t&&r.t.length>0&&Xy(t,637,xb(r)),Xy(t,636),delete r.iauthor})}),Xy(t,634),Xy(t,629),t.end()}var Dw=["xlsb","xlsm","xlam","biff8","xla"];var Rw=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,i){var a=!1,o=!1;0==r.length?o=!0:"["==r.charAt(0)&&(o=!0,r=r.slice(1,-1)),0==i.length?a=!0:"["==i.charAt(0)&&(a=!0,i=i.slice(1,-1));var s=r.length>0?0|parseInt(r,10):0,l=i.length>0?0|parseInt(i,10):0;return a?l+=t.c:--l,o?s+=t.r:--s,n+(a?"":"$")+rb(l)+(o?"":"$")+tb(s)}return function(r,i){return t=i,r.replace(e,n)}}(),Pw=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,jw=function(){return function(e,t){return e.replace(Pw,function(e,n,r,i,a,o){var s=nb(i)-(r?0:t.c),l=eb(o)-(a?0:t.r);return n+"R"+(0==l?"":a?l+1:"["+l+"]")+"C"+(0==s?"":r?s+1:"["+s+"]")})}}();function Lw(e,t){return e.replace(Pw,function(e,n,r,i,a,o){return n+("$"==r?r+i:rb(nb(i)+t.c))+("$"==a?a+o:tb(eb(o)+t.r))})}function Ow(e){e.l+=1}function Mw(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function Fw(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return Bw(e);12==n.biff&&(r=4)}var i=e.read_shift(r),a=e.read_shift(r),o=Mw(e,2),s=Mw(e,2);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function Bw(e){var t=Mw(e,2),n=Mw(e,2),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function Uw(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=Mw(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),i=Mw(e,2);return{r:r,c:i[0],cRel:i[1],rRel:i[2]}}function zw(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function Ww(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function Vw(e){return[e.read_shift(1),e.read_shift(1)]}function Hw(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=mx(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=qb[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=Mb(e);break;case 2:n[1]=Ex(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function qw(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),i=[],a=0;a!=r;++a)i.push((12==n.biff?Lb:Ix)(e,8));return i}function Gw(e,t,n){var r=0,i=0;12==n.biff?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--i&&(i=256));for(var a=0,o=[];a!=r&&(o[a]=[]);++a)for(var s=0;s!=i;++s)o[a][s]=Hw(e,n.biff);return o}function Kw(e,t,n){return e.l+=2,[zw(e)]}function Yw(e){return e.l+=6,[]}function Xw(e){return e.l+=2,[vx(e),1&e.read_shift(2)]}var Qw=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var $w={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:Gy},3:{n:"PtgAdd",f:Ow},4:{n:"PtgSub",f:Ow},5:{n:"PtgMul",f:Ow},6:{n:"PtgDiv",f:Ow},7:{n:"PtgPower",f:Ow},8:{n:"PtgConcat",f:Ow},9:{n:"PtgLt",f:Ow},10:{n:"PtgLe",f:Ow},11:{n:"PtgEq",f:Ow},12:{n:"PtgGe",f:Ow},13:{n:"PtgGt",f:Ow},14:{n:"PtgNe",f:Ow},15:{n:"PtgIsect",f:Ow},16:{n:"PtgUnion",f:Ow},17:{n:"PtgRange",f:Ow},18:{n:"PtgUplus",f:Ow},19:{n:"PtgUminus",f:Ow},20:{n:"PtgPercent",f:Ow},21:{n:"PtgParen",f:Ow},22:{n:"PtgMissArg",f:Ow},23:{n:"PtgStr",f:function(e,t,n){return e.l++,xx(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,qb[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,Mb(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[gS[i],mS[i],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],i=e.read_shift(1),a=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===a[0]?mS:pS)[a[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,a=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,a]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,Uw(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,Fw(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:Gy},40:{n:"PtgMemNoMem",f:Gy},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==i&&n>=128&&(n-=256),{r:t,c:n,cRel:i,rRel:r}}(e);var i=e.read_shift(r>=12?4:2),a=e.read_shift(2),o=(16384&a)>>14,s=(32768&a)>>15;if(a&=16383,1==s)for(;i>524287;)i-=1048576;if(1==o)for(;a>8191;)a-=16384;return{r:i,c:a,cRel:o,rRel:s}}(e,0,n);return[r,i]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=function(e,t,n){if(n.biff<8)return Bw(e);var r=e.read_shift(12==n.biff?4:2),i=e.read_shift(12==n.biff?4:2),a=Mw(e,2),o=Mw(e,2);return{s:{r:r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}(e,0,n);return[r,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,i,Uw(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,i,Fw(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6}return e.l+=a,[r,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),a=8;if(n)switch(n.biff){case 5:e.l+=12,a=6;break;case 12:a=12}return e.l+=a,[r,i]}},255:{}},Jw={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Zw={1:{n:"PtgElfLel",f:Xw},2:{n:"PtgElfRw",f:Kw},3:{n:"PtgElfCol",f:Kw},6:{n:"PtgElfRwV",f:Kw},7:{n:"PtgElfColV",f:Kw},10:{n:"PtgElfRadical",f:Kw},11:{n:"PtgElfRadicalS",f:Yw},13:{n:"PtgElfColS",f:Yw},15:{n:"PtgElfColSV",f:Yw},16:{n:"PtgElfRadicalLel",f:Xw},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),a=e.read_shift(2);return{ixti:t,coltype:3&n,rt:Qw[n>>2&31],idx:r,c:i,C:a}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},eS={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),i=[],a=0;a<=r;++a)i.push(e.read_shift(n&&2==n.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Ww},33:{n:"PtgAttrBaxcel",f:Ww},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),Vw(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),Vw(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function tS(e,t,n,r){if(r.biff<8)return Gy(e,t);for(var i=e.l+t,a=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=Gw(e,0,r),a.push(n[o][1]);break;case"PtgMemArea":n[o][2]=qw(e,n[o][1],r),a.push(n[o][2]);break;case"PtgExp":r&&12==r.biff&&(n[o][1][1]=e.read_shift(4),a.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return 0!==(t=i-e.l)&&a.push(Gy(e,t)),a}function nS(e,t,n){for(var r,i,a=e.l+t,o=[];a!=e.l;)t=a-e.l,i=e[e.l],r=$w[i]||$w[Jw[i]],24!==i&&25!==i||(r=(24===i?Zw:eS)[e[e.l+1]]),r&&r.f?o.push([r.n,r.f(e,t,n)]):Gy(e,t);return o}function rS(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],a=0;a<r.length;++a){var o=r[a];if(o)if(2===o[0])i.push('"'+o[1].replace(/"/g,'""')+'"');else i.push(o[1]);else i.push("")}t.push(i.join(","))}return t.join(";")}var iS={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function aS(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(i=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function oS(e,t,n){var r=aS(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function sS(e,t,n,r,i){var a,o,s,l,c=i&&i.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},h=[],d=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",v=0,y=e[0].length;v<y;++v){var b=e[0][v];switch(b[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(a=h.pop(),o=h.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=gv(" ",e[0][m][1][1]);break;case 1:g=gv("\r",e[0][m][1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}o+=g,m=-1}h.push(o+iS[b[0]]+a);break;case"PtgIsect":a=h.pop(),o=h.pop(),h.push(o+" "+a);break;case"PtgUnion":a=h.pop(),o=h.pop(),h.push(o+","+a);break;case"PtgRange":a=h.pop(),o=h.pop(),h.push(o+":"+a);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":s=Qy(b[1][1],u,i),h.push(Jy(s,c));break;case"PtgRefN":s=n?Qy(b[1][1],n,i):b[1][1],h.push(Jy(s,c));break;case"PtgRef3d":d=b[1][1],s=Qy(b[1][2],u,i);p=oS(r,d,i);h.push(p+"!"+Jy(s,c));break;case"PtgFunc":case"PtgFuncVar":var x=b[1][0],w=b[1][1];x||(x=0);var S=0==(x&=127)?[]:h.slice(-x);h.length-=x,"User"===w&&(w=S.shift()),h.push(w+"("+S.join(",")+")");break;case"PtgBool":h.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":h.push(b[1]);break;case"PtgNum":h.push(String(b[1]));break;case"PtgStr":h.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=$y(b[1][1],n?{s:n}:u,i),h.push(Zy(l,i));break;case"PtgArea":l=$y(b[1][1],u,i),h.push(Zy(l,i));break;case"PtgArea3d":d=b[1][1],l=b[1][2],p=oS(r,d,i),h.push(p+"!"+Zy(l,i));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgName":f=b[1][2];var _=(r.names||[])[f-1]||(r[0]||[])[f],E=_?_.Name:"SH33TJSNAME"+String(f);E&&"_xlfn."==E.slice(0,6)&&!i.xlfn&&(E=E.slice(6)),h.push(E);break;case"PtgNameX":var C,k=b[1][1];if(f=b[1][2],!(i.biff<=5)){var N="";if(14849==((r[k]||[])[0]||[])[0]||(1025==((r[k]||[])[0]||[])[0]?r[k][f]&&r[k][f].itab>0&&(N=r.SheetNames[r[k][f].itab-1]+"!"):N=r.SheetNames[f-1]+"!"),r[k]&&r[k][f])N+=r[k][f].Name;else if(r[0]&&r[0][f])N+=r[0][f].Name;else{var A=(aS(r,k,i)||"").split(";;");A[f-1]?N=A[f-1]:N+="SH33TJSERRX"}h.push(N);break}k<0&&(k=-k),r[k]&&(C=r[k][f]),C||(C={Name:"SH33TJSERRY"}),h.push(C.Name);break;case"PtgParen":var T="(",I=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:T=gv(" ",e[0][m][1][1])+T;break;case 3:T=gv("\r",e[0][m][1][1])+T;break;case 4:I=gv(" ",e[0][m][1][1])+I;break;case 5:I=gv("\r",e[0][m][1][1])+I;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}h.push(T+h.pop()+I);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":h.push("#REF!");break;case"PtgExp":s={c:b[1][1],r:b[1][0]};var D={c:n.c,r:n.r};if(r.sharedf[ab(s)]){var R=r.sharedf[ab(s)];h.push(sS(R,u,D,r,i))}else{var P=!1;for(a=0;a!=r.arrayf.length;++a)if(o=r.arrayf[a],!(s.c<o[0].s.c||s.c>o[0].e.c)&&!(s.r<o[0].s.r||s.r>o[0].e.r)){h.push(sS(o[1],u,D,r,i)),P=!0;break}P||h.push(b[1])}break;case"PtgArray":h.push("{"+rS(b[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=v;break;case"PtgMissArg":h.push("");break;case"PtgList":h.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(b))}if(3!=i.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var j=!0;switch((b=e[0][m])[1][0]){case 4:j=!1;case 0:g=gv(" ",b[1][1]);break;case 5:j=!1;case 1:g=gv("\r",b[1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}h.push((j?g:"")+h.pop()+(j?"":g)),m=-1}}if(h.length>1&&i.WTF)throw new Error("bad formula stack");return h[0]}function lS(e,t,n,r,i){var a=Ax(t,n,i),o=function(e){if(null==e){var t=Ky(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return Fb("number"==typeof e?e:0)}(e.v),s=Ky(6);s.write_shift(2,33),s.write_shift(4,0);for(var l=Ky(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return eg([a,o,s,l])}function cS(e,t,n){var r=e.read_shift(4),i=nS(e,r,n),a=e.read_shift(4);return[i,a>0?tS(e,a,i,n):null]}var uS=cS,hS=cS,dS=cS,fS=cS,pS={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},mS={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},gS={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function vS(e){return("of:="+e.replace(Pw,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function yS(e){return e.replace(/\./,"!")}var bS="undefined"!==typeof Map;function xS(e,t,n){var r=0,i=e.length;if(n){if(bS?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var a=bS?n.get(t):n[t];r<a.length;++r)if(e[a[r]].t===t)return e.Count++,a[r]}else for(;r<i;++r)if(e[r].t===t)return e.Count++,r;return e[i]={t:t},e.Count++,e.Unique++,n&&(bS?(n.has(t)||n.set(t,[]),n.get(t).push(i)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(i))),i}function wS(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(ew=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=nw(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=rw(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function SS(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function _S(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],i=60,a=e.length;if(null==r&&n.ssf)for(;i<392;++i)if(null==n.ssf[i]){qg(t.z,i),n.ssf[i]=t.z,n.revssf[t.z]=r=i;break}for(i=0;i!=a;++i)if(e[i].numFmtId===r)return i;return e[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function ES(e,t,n){if(e&&e["!ref"]){var r=lb(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var CS=["objects","scenarios","selectLockedCells","selectUnlockedCells"],kS=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function NS(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var i="",a=e.t,o=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=qb[e.v];break;case"d":r&&r.cellDates?i=fv(e.v,-1).toISOString():((e=mv(e)).t="n",i=""+(e.v=av(fv(e.v)))),"undefined"===typeof e.z&&(e.z=dg[14]);break;default:i=e.v}var s=Uv("v",Nv(i)),l={r:t},c=_S(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){s=Uv("v",""+xS(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=a&&(e.t=a,e.v=o),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;s=Wv("f",Nv(e.f),u)+(null!=e.v?s:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),Wv("c",s,l)}function AS(e,t,n,r){var i,a=[Sv,Wv("worksheet",null,{xmlns:ry[0],"xmlns:r":Zv})],o=n.SheetNames[e],s="",l=n.Sheets[o];null==l&&(l={});var c=l["!ref"]||"A1",u=lb(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=sb(u)}r||(r={}),l["!comments"]=[];var h=[];!function(e,t,n,r,i){var a=!1,o={},s=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(VD){}a=!0,o.codeName=Mv(Nv(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),s=(s||"")+Wv("outlinePr",null,c)}(a||s)&&(i[i.length]=Wv("sheetPr",s,o))}(l,n,e,t,a),a[a.length]=Wv("dimension",null,{ref:c}),a[a.length]=function(e,t,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Wv("sheetViews",Wv("sheetView",null,i),{})}(0,0,0,n),t.sheetFormat&&(a[a.length]=Wv("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(a[a.length]=function(e,t){for(var n,r=["<cols>"],i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=Wv("col",null,wS(i,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(s=function(e,t){var n,r,i=[],a=[],o=lb(e["!ref"]),s="",l="",c=[],u=0,h=0,d=e["!rows"],f=Array.isArray(e),p={r:l},m=-1;for(h=o.s.c;h<=o.e.c;++h)c[h]=rb(h);for(u=o.s.r;u<=o.e.r;++u){for(a=[],l=tb(u),h=o.s.c;h<=o.e.c;++h){n=c[h]+l;var g=f?(e[u]||[])[h]:e[n];void 0!==g&&null!=(s=NS(g,n,e,t))&&a.push(s)}(a.length>0||d&&d[u])&&(p={r:l},d&&d[u]&&((r=d[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=ow(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level)),i[i.length]=Wv("row",a.join(""),p))}if(d)for(;u<d.length;++u)d&&d[u]&&(p={r:u+1},(r=d[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=ow(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level),i[i.length]=Wv("row","",p));return i.join("")}(l,t,0,0),s.length>0&&(a[a.length]=s)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=function(e){var t={sheet:1};return CS.forEach(function(n){null!=e[n]&&e[n]&&(t[n]="1")}),kS.forEach(function(n){null==e[n]||e[n]||(t[n]="0")}),e.password&&(t.password=$x(e.password).toString(16).toUpperCase()),Wv("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(a[a.length]=function(e,t,n,r){var i="string"==typeof e.ref?e.ref:sb(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,o=ob(i);o.s.r==o.e.r&&(o.e.r=ob(t["!ref"]).e.r,i=sb(o));for(var s=0;s<a.length;++s){var l=a[s];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return s==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),Wv("autoFilter",null,{ref:i})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(a[a.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+sb(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var d,f,p=-1,m=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(d={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=Jb(r,-1,Nv(e[1].Target).replace(/#.*$/,""),Xb.HLINK),d["r:id"]="rId"+m),(p=e[1].Target.indexOf("#"))>-1&&(d.location=Nv(e[1].Target.slice(p+1))),e[1].Tooltip&&(d.tooltip=Nv(e[1].Tooltip)),a[a.length]=Wv("hyperlink",null,d))}),a[a.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(a[a.length]=(SS(f=l["!margins"]),Wv("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(a[a.length]=Uv("ignoredErrors",Wv("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(m=Jb(r,-1,"../drawings/drawing"+(e+1)+".xml",Xb.DRAW),a[a.length]=Wv("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=h),l["!comments"].length>0&&(m=Jb(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Xb.VML),a[a.length]=Wv("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function TS(e,t,n,r){var i=function(e,t,n){var r=Ky(145),i=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var a=320;i.hpx?a=20*ow(i.hpx):i.hpt&&(a=20*i.hpt),r.write_shift(2,a),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var s=0,l=r.l;r.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,d=-1,f=u<<10;f<u+1<<10;++f)c.c=f,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[ab(c)])&&(h<0&&(h=f),d=f);h<0||(++s,r.write_shift(4,h),r.write_shift(4,d))}var p=r.l;return r.l=l,r.write_shift(4,s),r.l=p,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(i.length>17||(t["!rows"]||[])[r])&&Xy(e,0,i)}var IS=Lb,DS=Ob;function RS(e){return[_b(e),Mb(e),"n"]}var PS=Lb,jS=Ob;var LS=["left","right","top","bottom","header","footer"];function OS(e,t,n,r,i,a,o){if(void 0===t.v)return!1;var s="";switch(t.t){case"b":s=t.v?"1":"0";break;case"d":(t=mv(t)).z=t.z||dg[14],t.v=av(fv(t.v)),t.t="n";break;case"n":case"e":s=""+t.v;break;default:s=t.v}var l={r:n,c:r};switch(l.s=_S(i.cellXfs,t,i),t.l&&a["!links"].push([ab(l),t.l]),t.c&&a["!comments"].push([ab(l),t.c]),t.t){case"s":case"str":return i.bookSST?(s=xS(i.Strings,t.v,i.revStrings),l.t="s",l.v=s,o?Xy(e,18,function(e,t,n){return null==n&&(n=Ky(8)),Eb(t,n),n.write_shift(4,t.v),n}(0,l)):Xy(e,7,function(e,t,n){return null==n&&(n=Ky(12)),Sb(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",o?Xy(e,17,function(e,t,n){return null==n&&(n=Ky(8+4*e.v.length)),Eb(t,n),gb(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):Xy(e,6,function(e,t,n){return null==n&&(n=Ky(12+4*e.v.length)),Sb(t,n),gb(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?o?Xy(e,13,function(e,t,n){return null==n&&(n=Ky(8)),Eb(t,n),Pb(e.v,n),n}(t,l)):Xy(e,2,function(e,t,n){return null==n&&(n=Ky(12)),Sb(t,n),Pb(e.v,n),n}(t,l)):o?Xy(e,16,function(e,t,n){return null==n&&(n=Ky(12)),Eb(t,n),Fb(e.v,n),n}(t,l)):Xy(e,5,function(e,t,n){return null==n&&(n=Ky(16)),Sb(t,n),Fb(e.v,n),n}(t,l)),!0;case"b":return l.t="b",o?Xy(e,15,function(e,t,n){return null==n&&(n=Ky(5)),Eb(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):Xy(e,4,function(e,t,n){return null==n&&(n=Ky(9)),Sb(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",o?Xy(e,14,function(e,t,n){return null==n&&(n=Ky(8)),Eb(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):Xy(e,3,function(e,t,n){return null==n&&(n=Ky(9)),Sb(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return o?Xy(e,12,function(e,t,n){return null==n&&(n=Ky(4)),Eb(t,n)}(0,l)):Xy(e,1,function(e,t,n){return null==n&&(n=Ky(8)),Sb(t,n)}(0,l)),!0}function MS(e,t){t&&t["!merges"]&&(Xy(e,177,function(e,t){return null==t&&(t=Ky(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach(function(t){Xy(e,176,jS(t))}),Xy(e,178))}function FS(e,t){t&&t["!cols"]&&(Xy(e,390),t["!cols"].forEach(function(t,n){t&&Xy(e,60,function(e,t,n){null==n&&(n=Ky(18));var r=wS(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof r.width&&(i|=2),t.level&&(i|=t.level<<8),n.write_shift(2,i),n}(n,t))}),Xy(e,391))}function BS(e,t){t&&t["!ref"]&&(Xy(e,648),Xy(e,649,function(e){var t=Ky(24);return t.write_shift(4,4),t.write_shift(4,1),Ob(e,t),t}(lb(t["!ref"]))),Xy(e,650))}function US(e,t,n){t["!links"].forEach(function(t){if(t[1].Target){var r=Jb(n,-1,t[1].Target.replace(/#.*$/,""),Xb.HLINK);Xy(e,494,function(e,t){var n=Ky(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Ob({s:ib(e[0]),e:ib(e[0])},n),Db("rId"+t,n);var r=e[1].Target.indexOf("#");return gb((-1==r?"":e[1].Target.slice(r+1))||"",n),gb(e[1].Tooltip||"",n),gb("",n),n.slice(0,n.l)}(t,r))}}),delete t["!links"]}function zS(e,t,n){Xy(e,133),Xy(e,137,function(e,t,n){null==n&&(n=Ky(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),Xy(e,138),Xy(e,134)}function WS(e,t){t["!protect"]&&Xy(e,535,function(e,t){return null==t&&(t=Ky(66)),t.write_shift(2,e.password?$x(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?t.write_shift(4,null==e[n[0]]||e[n[0]]?0:1):t.write_shift(4,null!=e[n[0]]&&e[n[0]]?0:1)}),t}(t["!protect"]))}function VS(e,t,n,r){var i=Yy(),a=n.SheetNames[e],o=n.Sheets[a]||{},s=a;try{n&&n.Workbook&&(s=n.Workbook.Sheets[e].CodeName||s)}catch(VD){}var l=lb(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Xy(i,129),(n.vbaraw||o["!outline"])&&Xy(i,147,function(e,t,n){null==n&&(n=Ky(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return Bb({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),kb(e,n),n.slice(0,n.l)}(s,o["!outline"])),Xy(i,148,DS(l)),zS(i,0,n.Workbook),FS(i,o),function(e,t,n,r){var i,a=lb(t["!ref"]||"A1"),o="",s=[];Xy(e,145);var l=Array.isArray(t),c=a.e.r;t["!rows"]&&(c=Math.max(a.e.r,t["!rows"].length-1));for(var u=a.s.r;u<=c;++u){o=tb(u),TS(e,t,a,u);var h=!1;if(u<=a.e.r)for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(s[d]=rb(d)),i=s[d]+o;var f=l?(t[u]||[])[d]:t[i];h=!!f&&OS(e,f,u,d,r,t,h)}}Xy(e,146)}(i,o,0,t),WS(i,o),function(e,t,n,r){if(t["!autofilter"]){var i=t["!autofilter"],a="string"===typeof i.ref?i.ref:sb(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,s=ob(a);s.s.r==s.e.r&&(s.e.r=ob(t["!ref"]).e.r,a=sb(s));for(var l=0;l<o.length;++l){var c=o[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+a;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Xy(e,161,Ob(lb(a))),Xy(e,162)}}(i,o,n,e),MS(i,o),US(i,o,r),o["!margins"]&&Xy(i,476,function(e,t){return null==t&&(t=Ky(48)),SS(e),LS.forEach(function(n){Fb(e[n],t)}),t}(o["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||BS(i,o),function(e,t,n,r){if(t["!comments"].length>0){var i=Jb(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Xb.VML);Xy(e,551,Db("rId"+i)),t["!legacy"]=i}}(i,o,e,r),Xy(i,130),i.end()}var HS=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var qS="][*?/\\".split("");function GS(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return qS.forEach(function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function KS(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,n){e.forEach(function(r,i){GS(r);for(var a=0;a<i;++a)if(r==e[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=t&&t[i]&&t[i].CodeName||r;if(95==o.charCodeAt(0)&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}(e.SheetNames,t,!!e.vbaraw);for(var n=0;n<e.SheetNames.length;++n)ES(e.Sheets[e.SheetNames[n]],e.SheetNames[n],n)}function YS(e){var t=[Sv];t[t.length]=Wv("workbook",null,{xmlns:ry[0],"xmlns:r":Zv});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(HS.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=Wv("workbookPr",null,r);var i=e.Workbook&&e.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&i[a]&&i[a].Hidden;++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var o={name:Nv(e.SheetNames[a].slice(0,31))};if(o.sheetId=""+(a+1),o["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden"}t[t.length]=Wv("sheet",null,o)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=Wv("definedName",Nv(e.Ref),n))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function XS(e,t){return t||(t=Ky(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),Db(e.strRelID,t),gb(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function QS(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n=t.Workbook.Sheets,r=0,i=-1,a=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&-1==i?i=r:1==n[r].Hidden&&-1==a&&(a=r);a>i||(Xy(e,135),Xy(e,158,function(e,t){return t||(t=Ky(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(i)),Xy(e,136))}}function $S(e,t){var n=Yy();return Xy(n,131),Xy(n,128,function(e,t){t||(t=Ky(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return gb("SheetJS",t),gb(Rm.version,t),gb(Rm.version,t),gb("7262",t),t.length>t.l?t.slice(0,t.l):t}()),Xy(n,153,function(e,t){t||(t=Ky(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),kb(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),QS(n,e),function(e,t){Xy(e,143);for(var n=0;n!=t.SheetNames.length;++n)Xy(e,156,XS({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));Xy(e,144)}(n,e),Xy(n,132),n.end()}function JS(e,t,n,r,i){return(".bin"===t.slice(-4)?VS:AS)(e,n,r,i)}function ZS(e,t,n){return(".bin"===t.slice(-4)?Iw:Nw)(e,n)}function e_(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return ev(cx).map(function(e){for(var t=0;t<nx.length;++t)if(nx[t][1]==e)return nx[t];for(t=0;t<ax.length;++t)if(ax[t][1]==e)return ax[t];throw e}).forEach(function(r){if(null!=e[r[1]]){var i=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(Uv(cx[r[1]]||r[1],i))}}),Wv("DocumentProperties",n.join(""),{xmlns:iy})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return e&&ev(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<nx.length;++r)if(t==nx[r][1])return;for(r=0;r<ax.length;++r)if(t==ax[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var a=e[t],o="string";"number"==typeof a?(o="float",a=String(a)):!0===a||!1===a?(o="boolean",a=a?"1":"0"):a=String(a),i.push(Wv(Av(t),a,{"dt:dt":o}))}}),t&&ev(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],a="string";"number"==typeof r?(a="float",r=String(r)):!0===r||!1===r?(a="boolean",r=r?"1":"0"):r instanceof Date?(a="dateTime.tz",r=r.toISOString()):r=String(r),i.push(Wv(Av(n),r,{"dt:dt":a}))}}),"<"+r+' xmlns="'+iy+'">'+i.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function t_(e){return Wv("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+jw(e.Ref,{r:0,c:0})})}function n_(e,t,n,r,i,a,o){if(!e||void 0==e.v&&void 0==e.f)return"";var s={};if(e.f&&(s["ss:Formula"]="="+Nv(jw(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var l=ib(e.F.slice(t.length+1));s["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(e.l&&e.l.Target&&(s["ss:HRef"]=Nv(e.l.Target),e.l.Tooltip&&(s["x:HRefScreenTip"]=Nv(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c==o.c&&c[u].s.r==o.r&&(c[u].e.c>c[u].s.c&&(s["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(s["ss:MergeDown"]=c[u].e.r-c[u].s.r));var h="",d="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",d=String(e.v);break;case"b":h="Boolean",d=e.v?"1":"0";break;case"e":h="Error",d=qb[e.v];break;case"d":h="DateTime",d=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||dg[14]);break;case"s":h="String",d=((e.v||"")+"").replace(Cv,function(e){return Ev[e]}).replace(Tv,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var f=_S(r.cellXfs,e,r);s["ss:StyleID"]="s"+(21+f),s["ss:Index"]=o.c+1;var p=null!=e.v?d:"",m="z"==e.t?"":'<Data ss:Type="'+h+'">'+p+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map(function(e){var t=Wv("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return Wv("Comment",t,{"ss:Author":e.a})}).join("")),Wv("Cell",m,s)}function r_(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=sw(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function i_(e,t,n){var r=[],i=n.SheetNames[e],a=n.Sheets[i],o=a?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,a=[],o=0;o<i.length;++o){var s=i[o];s.Sheet==n&&(s.Name.match(/^_xlfn\./)||a.push(t_(s)))}return a.join("")}(a,0,e,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=a?function(e,t){if(!e["!ref"])return"";var n=lb(e["!ref"]),r=e["!merges"]||[],i=0,a=[];e["!cols"]&&e["!cols"].forEach(function(e,t){iw(e);var n=!!e.width,r=wS(t,e),i={"ss:Index":t+1};n&&(i["ss:Width"]=tw(r.width)),e.hidden&&(i["ss:Hidden"]="1"),a.push(Wv("Column",null,i))});for(var o=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){for(var l=[r_(s,(e["!rows"]||[])[s])],c=n.s.c;c<=n.e.c;++c){var u=!1;for(i=0;i!=r.length;++i)if(!(r[i].s.c>c)&&!(r[i].s.r>s)&&!(r[i].e.c<c)&&!(r[i].e.r<s)){r[i].s.c==c&&r[i].s.r==s||(u=!0);break}if(!u){var h={r:s,c:c},d=ab(h),f=o?(e[s]||[])[c]:e[d];l.push(n_(f,d,e,t,0,0,h))}}l.push("</Row>"),l.length>2&&a.push(l.join(""))}return a.join("")}(a,t):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(Wv("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(Wv("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(Wv("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(Wv("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&(!r.Workbook.Sheets[a]||r.Workbook.Sheets[a].Hidden);++a);a==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(Uv("ProtectContents","True")),e["!protect"].objects&&i.push(Uv("ProtectObjects","True")),e["!protect"].scenarios&&i.push(Uv("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(Uv("EnableSelection","UnlockedCells")):i.push(Uv("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")})),0==i.length?"":Wv("WorksheetOptions",i.join(""),{xmlns:ay})}(a,0,e,n)),r.join("")}function a_(e,t){t||(t={}),e.SSF||(e.SSF=mv(dg)),e.SSF&&(Kg(),Gg(e.SSF),t.revssf=rv(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],_S(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(e_(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(Wv("Worksheet",i_(r,t,e),{"ss:Name":Nv(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var r=[];r.push(Wv("NumberFormat",null,{"ss:Format":Nv(dg[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};n.push(Wv("Style",r.join(""),i))}),Wv("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var i=t[r];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||n.push(t_(i)))}return Wv("Names",n.join(""))}(e),Sv+Wv("Workbook",n.join(""),{xmlns:oy,"xmlns:o":iy,"xmlns:x":ay,"xmlns:ss":oy,"xmlns:dt":sy,"xmlns:html":uy})}var o_="e0859ff2f94f6810ab9108002b27b3d9",s_="02d5cdd59c2e1b10939708002b2cf9ae",l_="05d5cdd59c2e1b10939708002b2cf9ae";function c_(e,t){var n=t||{},r=Qg.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Qg.utils.cfb_add(r,i,x_(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],i=[],a=[],o=0,s=tv(zb,"n"),l=tv(Wb,"n");if(e.Props)for(n=ev(e.Props),o=0;o<n.length;++o)(Object.prototype.hasOwnProperty.call(s,n[o])?r:Object.prototype.hasOwnProperty.call(l,n[o])?i:a).push([n[o],e.Props[n[o]]]);if(e.Custprops)for(n=ev(e.Custprops),o=0;o<n.length;++o)Object.prototype.hasOwnProperty.call(e.Props||{},n[o])||(Object.prototype.hasOwnProperty.call(s,n[o])?r:Object.prototype.hasOwnProperty.call(l,n[o])?i:a).push([n[o],e.Custprops[n[o]]]);var c=[];for(o=0;o<a.length;++o)hx.indexOf(a[o][0])>-1||ox.indexOf(a[o][0])>-1||null!=a[o][1]&&c.push(a[o]);i.length&&Qg.utils.cfb_add(t,"/\x05SummaryInformation",px(i,o_,l,Wb)),(r.length||c.length)&&Qg.utils.cfb_add(t,"/\x05DocumentSummaryInformation",px(r,s_,s,zb,c.length?c:null,l_))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(n,r){if(0!=r){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&Qg.utils.cfb_add(e,i,t.FileIndex[r].content)}})}(r,Qg.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var u_={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=r,7&a&&(n.level=7&a),16&a&&(n.hidden=!0),32&a&&(n.hpt=i/20),n}},1:{f:function(e){return[wb(e)]}},2:{f:function(e){return[wb(e),Rb(e),"n"]}},3:{f:function(e){return[wb(e),e.read_shift(1),"e"]}},4:{f:function(e){return[wb(e),e.read_shift(1),"b"]}},5:{f:function(e){return[wb(e),Mb(e),"n"]}},6:{f:function(e){return[wb(e),mb(e),"str"]}},7:{f:function(e){return[wb(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,i=wb(e);i.r=n["!row"];var a=[i,mb(e),"str"];if(n.cellFormula){e.l+=2;var o=hS(e,r-e.l,n);a[3]=sS(o,0,i,n.supbooks,n)}else e.l=r;return a}},9:{f:function(e,t,n){var r=e.l+t,i=wb(e);i.r=n["!row"];var a=[i,Mb(e),"n"];if(n.cellFormula){e.l+=2;var o=hS(e,r-e.l,n);a[3]=sS(o,0,i,n.supbooks,n)}else e.l=r;return a}},10:{f:function(e,t,n){var r=e.l+t,i=wb(e);i.r=n["!row"];var a=[i,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var o=hS(e,r-e.l,n);a[3]=sS(o,0,i,n.supbooks,n)}else e.l=r;return a}},11:{f:function(e,t,n){var r=e.l+t,i=wb(e);i.r=n["!row"];var a=[i,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var o=hS(e,r-e.l,n);a[3]=sS(o,0,i,n.supbooks,n)}else e.l=r;return a}},12:{f:function(e){return[_b(e)]}},13:{f:function(e){return[_b(e),Rb(e),"n"]}},14:{f:function(e){return[_b(e),e.read_shift(1),"e"]}},15:{f:function(e){return[_b(e),e.read_shift(1),"b"]}},16:{f:RS},17:{f:function(e){return[_b(e),mb(e),"str"]}},18:{f:function(e){return[_b(e),e.read_shift(4),"s"]}},19:{f:yb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),a=Tb(e),o=dS(e,0,n),s=Nb(e);e.l=r;var l={Name:a,Ptg:o};return i<268435455&&(l.Sheet=i),s&&(l.Comment=s),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var a=e.read_shift(1);0!=a&&(r.underline=a);var o=e.read_shift(1);o>0&&(r.family=o);var s=e.read_shift(1);switch(s>0&&(r.charset=s),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),i=e.read_shift(2,"i"),a=e.read_shift(1),o=e.read_shift(1),s=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=Hb[r];l&&(t.rgb=Zx(l));break;case 2:t.rgb=Zx([a,o,s]);break;case 3:t.theme=r}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=mb(e),r}},44:{f:function(e,t){return[e.read_shift(2),mb(e)]}},45:{f:fw},46:{f:vw},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Bx},62:{f:function(e){return[wb(e),yb(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=ab(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Gy,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=Cb(e,t-19),n}},148:{f:IS,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?mb(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=Ib(e,t-8),n.name=mb(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:Lb},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:PS},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:mb(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Ib},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Ox},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,i=jb(e),a=e.read_shift(1),o=[i];if(o[2]=a,n.cellFormula){var s=uS(e,r-e.l,n);o[1]=s}else e.l=r;return o}},427:{f:function(e,t,n){var r=e.l+t,i=[Lb(e,16)];if(n.cellFormula){var a=fS(e,r-e.l,n);i[1]=a,e.l=r}else e.l=r;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return LS.forEach(function(n){t[n]=Mb(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=Lb(e,16),i=Nb(e),a=mb(e),o=mb(e),s=mb(e);e.l=n;var l={rfx:r,relId:i,loc:a,display:s};return o&&(l.Tooltip=o),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Ib},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Tw},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=Lb(e,16);return t.rfx=n.s,t.ref=ab(n.s),e.l+=16,t}},636:{T:-1},637:{f:bb},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:mb(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function h_(e,t,n,r){var i=t;if(!isNaN(i)){var a=r||(n||[]).length||0,o=e.next(4);o.write_shift(2,i),o.write_shift(2,a),a>0&&Dy(n)&&e.push(n)}}function d_(e,t,n){return e||(e=Ky(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function f_(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?av(fv(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?h_(e,2,function(e,t,n){var r=Ky(9);return d_(r,e,t),r.write_shift(2,n),r}(n,r,i)):h_(e,3,function(e,t,n){var r=Ky(15);return d_(r,e,t),r.write_shift(8,n,"f"),r}(n,r,i)));case"b":case"e":return void h_(e,5,function(e,t,n,r){var i=Ky(9);return d_(i,e,t),bx(n,r||"b",i),i}(n,r,t.v,t.t));case"s":case"str":return void h_(e,4,function(e,t,n){var r=Ky(8+2*n.length);return d_(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}h_(e,1,d_(null,n,r))}function p_(e,t){var n=t||{};for(var r=Yy(),i=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==n.sheet&&(i=a);if(0==i&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return h_(r,4==n.biff?1033:3==n.biff?521:9,Rx(0,16,n)),function(e,t,n,r){var i,a=Array.isArray(t),o=lb(t["!ref"]||"A1"),s="",l=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),i=sb(o)}for(var c=o.s.r;c<=o.e.r;++c){s=tb(c);for(var u=o.s.c;u<=o.e.c;++u){c===o.s.r&&(l[u]=rb(u)),i=l[u]+s;var h=a?(t[c]||[])[u]:t[i];h&&f_(e,h,c,u)}}}(r,e.Sheets[e.SheetNames[i]],0,n),h_(r,10),r.end()}function m_(e,t,n){h_(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,i=Ky(r?15+n.length:16+2*n.length);return i.write_shift(2,20*(e.sz||12)),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,n.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),i}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function g_(e,t){if(t){var n=0;t.forEach(function(t,r){++n<=256&&t&&h_(e,125,function(e,t){var n=Ky(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(wS(r,t),r))})}}function v_(e,t,n,r,i){var a=16+_S(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)h_(e,6,lS(t,n,r,0,a));else switch(t.t){case"d":case"n":h_(e,515,function(e,t,n,r){var i=Ky(14);return Ax(e,t,r,i),Fb(n,i),i}(n,r,"d"==t.t?av(fv(t.v)):t.v,a));break;case"b":case"e":h_(e,517,function(e,t,n,r,i,a){var o=Ky(8);return Ax(e,t,r,o),bx(n,a,o),o}(n,r,t.v,a,0,t.t));break;case"s":case"str":if(i.bookSST)h_(e,253,function(e,t,n,r){var i=Ky(10);return Ax(e,t,r,i),i.write_shift(4,n),i}(n,r,xS(i.Strings,t.v,i.revStrings),a));else h_(e,516,function(e,t,n,r,i){var a=!i||8==i.biff,o=Ky(+a+8+(1+a)*n.length);return Ax(e,t,r,o),o.write_shift(2,n.length),a&&o.write_shift(1,1),o.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),o}(n,r,(t.v||"").slice(0,255),a,i));break;default:h_(e,513,Ax(n,r,a))}else h_(e,513,Ax(n,r,a))}function y_(e,t,n){var r,i=Yy(),a=n.SheetNames[e],o=n.Sheets[a]||{},s=(n||{}).Workbook||{},l=(s.Sheets||[])[e]||{},c=Array.isArray(o),u=8==t.biff,h="",d=[],f=lb(o["!ref"]||"A1"),p=u?65536:16384;if(f.e.c>255||f.e.r>=p){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}h_(i,2057,Rx(0,16,t)),h_(i,13,yx(1)),h_(i,12,yx(100)),h_(i,15,gx(!0)),h_(i,17,gx(!1)),h_(i,16,Fb(.001)),h_(i,95,gx(!0)),h_(i,42,gx(!1)),h_(i,43,gx(!1)),h_(i,130,yx(1)),h_(i,128,function(e){var t=Ky(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),h_(i,131,gx(!1)),h_(i,132,gx(!1)),u&&g_(i,o["!cols"]),h_(i,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=Ky(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(f,t)),u&&(o["!links"]=[]);for(var m=f.s.r;m<=f.e.r;++m){h=tb(m);for(var g=f.s.c;g<=f.e.c;++g){m===f.s.r&&(d[g]=rb(g)),r=d[g]+h;var v=c?(o[m]||[])[g]:o[r];v&&(v_(i,v,m,g,t),u&&v.l&&o["!links"].push([r,v.l]))}}var y=l.CodeName||l.name||a;return u&&h_(i,574,function(e){var t=Ky(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((s.Views||[])[0])),u&&(o["!merges"]||[]).length&&h_(i,229,function(e){var t=Ky(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)Dx(e[n],t);return t}(o["!merges"])),u&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];h_(e,440,Mx(r)),r[1].Tooltip&&h_(e,2048,Fx(r))}delete t["!links"]}(i,o),h_(i,442,Cx(y)),u&&function(e,t){var n=Ky(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),h_(e,2151,n),(n=Ky(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),Dx(lb(t["!ref"]||"A1"),n),n.write_shift(4,4),h_(e,2152,n)}(i,o),h_(i,10),i.end()}function b_(e,t,n){var r=Yy(),i=(e||{}).Workbook||{},a=i.Sheets||[],o=i.WBProps||{},s=8==n.biff,l=5==n.biff;(h_(r,2057,Rx(0,5,n)),"xla"==n.bookType&&h_(r,135),h_(r,225,s?yx(1200):null),h_(r,193,function(e,t){t||(t=Ky(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&h_(r,191),l&&h_(r,192),h_(r,226),h_(r,92,function(e,t){var n=!t||8==t.biff,r=Ky(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),h_(r,66,yx(s?1200:1252)),s&&h_(r,353,yx(0)),s&&h_(r,448),h_(r,317,function(e){for(var t=Ky(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),s&&e.vbaraw&&h_(r,211),s&&e.vbaraw)&&h_(r,442,Cx(o.CodeName||"ThisWorkbook"));h_(r,156,yx(17)),h_(r,25,gx(!1)),h_(r,18,gx(!1)),h_(r,19,yx(0)),s&&h_(r,431,gx(!1)),s&&h_(r,444,yx(0)),h_(r,61,function(){var e=Ky(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),h_(r,64,gx(!1)),h_(r,141,yx(0)),h_(r,34,gx("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Dv(e.Workbook.WBProps.date1904)?"true":"false"}(e))),h_(r,14,gx(!0)),s&&h_(r,439,gx(!1)),h_(r,218,yx(0)),m_(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=t[i]&&h_(e,1054,jx(i,t[i],n))})}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)h_(e,224,Lx({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){h_(e,224,Lx(n,0,t))})}(r,n),s&&h_(r,352,gx(!1));var c=r.end(),u=Yy();s&&h_(u,140,function(e){return e||(e=Ky(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),s&&n.Strings&&function(e,t,n,r){var i=r||(n||[]).length||0;if(i<=8224)return h_(e,t,n,i);var a=t;if(!isNaN(a)){for(var o=n.parts||[],s=0,l=0,c=0;c+(o[s]||8224)<=8224;)c+=o[s]||8224,s++;var u=e.next(4);for(u.write_shift(2,a),u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<i;){for((u=e.next(4)).write_shift(2,60),c=0;c+(o[s]||8224)<=8224;)c+=o[s]||8224,s++;u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(u,252,function(e){var t=Ky(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=wx(e[r]);var i=eg([t].concat(n));return i.parts=[t.length].concat(n.map(function(e){return e.length})),i}(n.Strings)),h_(u,10);var h=u.end(),d=Yy(),f=0,p=0;for(p=0;p<e.SheetNames.length;++p)f+=(s?12:11)+(s?2:1)*e.SheetNames[p].length;var m=c.length+f+h.length;for(p=0;p<e.SheetNames.length;++p){h_(d,133,Px({pos:m,hs:(a[p]||{}).Hidden||0,dt:0,name:e.SheetNames[p]},n)),m+=t[p].length}var g=d.end();if(f!=g.length)throw new Error("BS8 "+f+" != "+g.length);var v=[];return c.length&&v.push(c),g.length&&v.push(g),h.length&&v.push(h),eg(v)}function x_(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])ob(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=mv(dg)),e&&e.SSF&&(Kg(),Gg(e.SSF),n.revssf=rv(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,Q_(n),n.cellXfs=[],_S(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)r[r.length]=y_(i,n,e);return r.unshift(b_(e,r,n)),eg(r)}(e,t);case 4:case 3:case 2:return p_(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function w_(e,t,n,r){for(var i=e["!merges"]||[],a=[],o=t.s.c;o<=t.e.c;++o){for(var s=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o)&&!(i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){s=-1;break}s=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(s<0)){var u=ab({r:n,c:o}),h=r.dense?(e[n]||[])[o]:e[u],d=h&&null!=h.v&&(h.h||Iv(h.w||(ub(h),h.w)||""))||"",f={};s>1&&(f.rowspan=s),l>1&&(f.colspan=l),r.editable?d='<span contenteditable="true">'+d+"</span>":h&&(f["data-t"]=h&&h.t||"z",null!=h.v&&(f["data-v"]=h.v),null!=h.z&&(f["data-z"]=h.z),h.l&&"#"!=(h.l.Target||"#").charAt(0)&&(d='<a href="'+h.l.Target+'">'+d+"</a>")),f.id=(r.id||"sjs")+"-"+u,a.push(Wv("td",d,f))}}return"<tr>"+a.join("")+"</tr>"}var S_='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',__="</body></html>";function E_(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function C_(e,t){var n=t||{},r=null!=n.header?n.header:S_,i=null!=n.footer?n.footer:__,a=[r],o=ob(e["!ref"]);n.dense=Array.isArray(e),a.push(E_(0,0,n));for(var s=o.s.r;s<=o.e.r;++s)a.push(w_(e,o,s,n));return a.push("</table>"+i),a.join("")}function k_(e,t,n){var r=n||{};var i=0,a=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var o="string"==typeof r.origin?ib(r.origin):r.origin;i=o.r,a=o.c}var s=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,s.length),c={s:{r:0,c:0},e:{r:i,c:a}};if(e["!ref"]){var u=ob(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==i&&(c.e.r=i=u.e.r+1)}var h=[],d=0,f=e["!rows"]||(e["!rows"]=[]),p=0,m=0,g=0,v=0,y=0,b=0;for(e["!cols"]||(e["!cols"]=[]);p<s.length&&m<l;++p){var x=s[p];if(A_(x)){if(r.display)continue;f[m]={hidden:!0}}var w=x.children;for(g=v=0;g<w.length;++g){var S=w[g];if(!r.display||!A_(S)){var _=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):Fv(S.innerHTML),E=S.getAttribute("data-z")||S.getAttribute("z");for(d=0;d<h.length;++d){var C=h[d];C.s.c==v+a&&C.s.r<m+i&&m+i<=C.e.r&&(v=C.e.c+1-a,d=-1)}b=+S.getAttribute("colspan")||1,((y=+S.getAttribute("rowspan")||1)>1||b>1)&&h.push({s:{r:m+i,c:v+a},e:{r:m+i+(y||1)-1,c:v+a+(b||1)-1}});var k={t:"s",v:_},N=S.getAttribute("data-t")||S.getAttribute("t")||"";null!=_&&(0==_.length?k.t=N||"z":r.raw||0==_.trim().length||"s"==N||("TRUE"===_?k={t:"b",v:!0}:"FALSE"===_?k={t:"b",v:!1}:isNaN(vv(_))?isNaN(bv(_).getDate())||(k={t:"d",v:fv(_)},r.cellDates||(k={t:"n",v:av(k.v)}),k.z=r.dateNF||dg[14]):k={t:"n",v:vv(_)})),void 0===k.z&&null!=E&&(k.z=E);var A="",T=S.getElementsByTagName("A");if(T&&T.length)for(var I=0;I<T.length&&(!T[I].hasAttribute("href")||"#"==(A=T[I].getAttribute("href")).charAt(0));++I);A&&"#"!=A.charAt(0)&&(k.l={Target:A}),r.dense?(e[m+i]||(e[m+i]=[]),e[m+i][v+a]=k):e[ab({c:v+a,r:m+i})]=k,c.e.c<v+a&&(c.e.c=v+a),v+=b}}++m}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,m-1+i),e["!ref"]=sb(c),m>=l&&(e["!fullref"]=sb((c.e.r=s.length-p+m-1+i,c))),e}function N_(e,t){return k_((t||{}).dense?[]:{},e,t)}function A_(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var T_=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+zv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Sv+t}}(),I_=function(){var e=function(e){return Nv(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",n=function(n,r,i){var a=[];a.push('      <table:table table:name="'+Nv(r.SheetNames[i])+'" table:style-name="ta1">\n');var o=0,s=0,l=ob(n["!ref"]||"A1"),c=n["!merges"]||[],u=0,h=Array.isArray(n);if(n["!cols"])for(s=0;s<=l.e.c;++s)a.push("        <table:table-column"+(n["!cols"][s]?' table:style-name="co'+n["!cols"][s].ods+'"':"")+"></table:table-column>\n");var d="",f=n["!rows"]||[];for(o=0;o<l.s.r;++o)d=f[o]?' table:style-name="ro'+f[o].ods+'"':"",a.push("        <table:table-row"+d+"></table:table-row>\n");for(;o<=l.e.r;++o){for(d=f[o]?' table:style-name="ro'+f[o].ods+'"':"",a.push("        <table:table-row"+d+">\n"),s=0;s<l.s.c;++s)a.push(t);for(;s<=l.e.c;++s){var p=!1,m={},g="";for(u=0;u!=c.length;++u)if(!(c[u].s.c>s)&&!(c[u].s.r>o)&&!(c[u].e.c<s)&&!(c[u].e.r<o)){c[u].s.c==s&&c[u].s.r==o||(p=!0),m["table:number-columns-spanned"]=c[u].e.c-c[u].s.c+1,m["table:number-rows-spanned"]=c[u].e.r-c[u].s.r+1;break}if(p)a.push("          <table:covered-table-cell/>\n");else{var v=ab({r:o,c:s}),y=h?(n[o]||[])[s]:n[v];if(y&&y.f&&(m["table:formula"]=Nv(vS(y.f)),y.F&&y.F.slice(0,v.length)==v)){var b=ob(y.F);m["table:number-matrix-columns-spanned"]=b.e.c-b.s.c+1,m["table:number-matrix-rows-spanned"]=b.e.r-b.s.r+1}if(y){switch(y.t){case"b":g=y.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=y.v?"true":"false";break;case"n":g=y.w||String(y.v||0),m["office:value-type"]="float",m["office:value"]=y.v||0;break;case"s":case"str":g=null==y.v?"":y.v,m["office:value-type"]="string";break;case"d":g=y.w||fv(y.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=fv(y.v).toISOString(),m["table:style-name"]="ce1";break;default:a.push(t);continue}var x=e(g);if(y.l&&y.l.Target){var w=y.l.Target;"#"==(w="#"==w.charAt(0)?"#"+yS(w.slice(1)):w).charAt(0)||w.match(/^\w+:/)||(w="../"+w),x=Wv("text:a",x,{"xlink:href":w.replace(/&/g,"&amp;")})}a.push("          "+Wv("table:table-cell",Wv("text:p",x,{}),m)+"\n")}else a.push(t)}}a.push("        </table:table-row>\n")}return a.push("      </table:table>\n"),a.join("")};return function(e,t){var r=[Sv],i=zv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),a=zv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(r.push("<office:document"+i+a+">\n"),r.push(tx().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var i=t["!cols"][r];if(null==i.width&&null==i.wpx&&null==i.wch)continue;iw(i),i.ods=n;var a=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+a+'"/>\n'),e.push("  </style:style>\n"),++n}});var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var i=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++r}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var o=0;o!=e.SheetNames.length;++o)r.push(n(e.Sheets[e.SheetNames[o]],e,o));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==t.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function D_(e,t){if("fods"==t.bookType)return I_(e,t);var n=wv(),r="",i=[],a=[];return xv(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),xv(n,r="content.xml",I_(e,t)),i.push([r,"text/xml"]),a.push([r,"ContentFile"]),xv(n,r="styles.xml",T_(e,t)),i.push([r,"text/xml"]),a.push([r,"StylesFile"]),xv(n,r="meta.xml",Sv+tx()),i.push([r,"text/xml"]),a.push([r,"MetadataFile"]),xv(n,r="manifest.rdf",function(e){var t=[Sv];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=e.length;++n)t.push(Zb(e[n][0],e[n][1])),t.push(ex("",e[n][0]));return t.push(Zb("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(a)),i.push([r,"application/rdf+xml"]),xv(n,r="META-INF/manifest.xml",function(e){var t=[Sv];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),n}function R_(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function P_(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):$m(Mv(e))}function j_(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function L_(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function O_(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function M_(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function F_(e){for(var t=[],n=[0];n[0]<e.length;){var r,i=n[0],a=L_(e,n),o=7&a,s=0;if(0==(a=Math.floor(a/8)))break;switch(o){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:s=4,r=e.slice(n[0],n[0]+s),n[0]+=s;break;case 1:s=8,r=e.slice(n[0],n[0]+s),n[0]+=s;break;case 2:s=L_(e,n),r=e.slice(n[0],n[0]+s),n[0]+=s;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(a," at offset ").concat(i))}var c={data:r,type:o};null==t[a]?t[a]=[c]:t[a].push(c)}return t}function B_(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e){e.data&&(t.push(O_(8*n+e.type)),2==e.type&&t.push(O_(e.data.length)),t.push(e.data))})}),j_(t)}function U_(e){for(var t,n=[],r=[0];r[0]<e.length;){var i=L_(e,r),a=F_(e.slice(r[0],r[0]+i));r[0]+=i;var o={id:M_(a[1][0].data),messages:[]};a[2].forEach(function(t){var n=F_(t.data),i=M_(n[3][0].data);o.messages.push({meta:n,data:e.slice(r[0],r[0]+i)}),r[0]+=i}),(null==(t=a[3])?void 0:t[0])&&(o.merge=M_(a[3][0].data)>>>0>0),n.push(o)}return n}function z_(e){var t=[];return e.forEach(function(e){var n=[];n[1]=[{data:O_(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:O_(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(e){r.push(e.data),e.meta[3]=[{type:0,data:O_(e.data.length)}],n[2].push({data:B_(e.meta),type:2})});var i=B_(n);t.push(O_(i.length)),t.push(i),r.forEach(function(e){return t.push(e)})}),j_(t)}function W_(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=L_(t,n),i=[];n[0]<t.length;){var a=3&t[n[0]];if(0!=a){var o=0,s=0;if(1==a?(s=4+(t[n[0]]>>2&7),o=(224&t[n[0]++])<<3,o|=t[n[0]++]):(s=1+(t[n[0]++]>>2),2==a?(o=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(o=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),i=[j_(i)],0==o)throw new Error("Invalid offset 0");if(o>i[0].length)throw new Error("Invalid offset beyond length");if(s>=o)for(i.push(i[0].slice(-o)),s-=o;s>=i[i.length-1].length;)i.push(i[i.length-1]),s-=i[i.length-1].length;i.push(i[0].slice(-o,-o+s))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}i.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var u=j_(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function V_(e){for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(W_(r,e.slice(n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return j_(t)}function H_(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),i=new Uint8Array(4);t.push(i);var a=O_(r),o=a.length;t.push(a),r<=60?(o++,t.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),o+=r,i[0]=0,i[1]=255&o,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return j_(t)}function q_(e,t){var n=new Uint8Array(32),r=R_(n),i=12,a=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var a=0;i>=1;++a,i/=256)e[t+a]=255&i;e[t+15]|=n>=0?0:128}(n,i,e.v),a|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,e.v?1:0,!0),a|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(i,t.indexOf(e.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,a,!0),n.slice(0,i)}function G_(e,t){var n=new Uint8Array(32),r=R_(n),i=12,a=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(i,e.v,!0),a|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,e.v?1:0,!0),a|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(i,t.indexOf(e.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,a,!0),n.slice(0,i)}function K_(e){return L_(F_(e)[1][0].data)}function Y_(e,t,n){var r,i,a,o;if(!(null==(r=e[6])?void 0:r[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(o=null==(a=e[8])?void 0:a[0])?void 0:o.data)&&M_(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var s=0,l=R_(e[7][0].data),c=0,u=[],h=R_(e[4][0].data),d=0,f=[],p=0;p<t.length;++p)if(null!=t[p]){var m,g;switch(l.setUint16(2*p,c,!0),h.setUint16(2*p,d,!0),typeof t[p]){case"string":m=q_({t:"s",v:t[p]},n),g=G_({t:"s",v:t[p]},n);break;case"number":m=q_({t:"n",v:t[p]},n),g=G_({t:"n",v:t[p]},n);break;case"boolean":m=q_({t:"b",v:t[p]},n),g=G_({t:"b",v:t[p]},n);break;default:throw new Error("Unsupported value "+t[p])}u.push(m),c+=m.length,f.push(g),d+=g.length,++s}else l.setUint16(2*p,65535,!0),h.setUint16(2*p,65535);for(e[2][0].data=O_(s);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),h.setUint16(2*p,65535,!0);return e[6][0].data=j_(u),e[3][0].data=j_(f),s}function X_(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function Q_(e){X_([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function $_(e,t){return"ods"==t.bookType?D_(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=ob(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(sb(r)));var a=lE(n,{range:r,header:1}),o=["~Sh33tJ5~"];a.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&o.push(e)})});var s={},l=[],c=Qg.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&U_(V_(t.content)).forEach(function(e){l.push(e.id),s[e.id]={deps:[],location:n,type:M_(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var u=l.filter(function(e){return e>1}).map(function(e){return[e,O_(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&U_(V_(t.content)).forEach(function(e){e.messages.forEach(function(t){u.forEach(function(t){e.messages.some(function(e){return 11006!=M_(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])})&&s[t[0]].deps.push(e.id)})})})});for(var h,d=Qg.find(c,s[1].location),f=U_(V_(d.content)),p=0;p<f.length;++p){var m=f[p];1==m.id&&(h=m)}var g=K_(F_(h.messages[0].data)[1][0].data);for(f=U_(V_((d=Qg.find(c,s[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);for(g=K_(F_(h.messages[0].data)[2][0].data),f=U_(V_((d=Qg.find(c,s[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);for(g=K_(F_(h.messages[0].data)[2][0].data),f=U_(V_((d=Qg.find(c,s[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);var v=F_(h.messages[0].data);v[6][0].data=O_(r.e.r+1),v[7][0].data=O_(r.e.c+1);for(var y=K_(v[46][0].data),b=Qg.find(c,s[y].location),x=U_(V_(b.content)),w=0;w<x.length&&x[w].id!=y;++w);if(x[w].id!=y)throw"Bad ColumnRowUIDMapArchive";var S=F_(x[w].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var _=0;_<=r.e.c;++_){var E=[];E[1]=E[2]=[{type:0,data:O_(_+420690)}],S[1].push({type:2,data:B_(E)}),S[2].push({type:0,data:O_(_)}),S[3].push({type:0,data:O_(_)})}S[4]=[],S[5]=[],S[6]=[];for(var C=0;C<=r.e.r;++C)(E=[])[1]=E[2]=[{type:0,data:O_(C+726270)}],S[4].push({type:2,data:B_(E)}),S[5].push({type:0,data:O_(C)}),S[6].push({type:0,data:O_(C)});x[w].messages[0].data=B_(S),b.content=H_(z_(x)),b.size=b.content.length,delete v[46];var k=F_(v[4][0].data);k[7][0].data=O_(r.e.r+1);var N=K_(F_(k[1][0].data)[2][0].data);if((x=U_(V_((b=Qg.find(c,s[N].location)).content)))[0].id!=N)throw"Bad HeaderStorageBucket";var A=F_(x[0].messages[0].data);for(C=0;C<a.length;++C){var T=F_(A[2][0].data);T[1][0].data=O_(C),T[4][0].data=O_(a[C].length),A[2][C]={type:A[2][0].type,data:B_(T)}}x[0].messages[0].data=B_(A),b.content=H_(z_(x)),b.size=b.content.length;var I=K_(k[2][0].data);if((x=U_(V_((b=Qg.find(c,s[I].location)).content)))[0].id!=I)throw"Bad HeaderStorageBucket";for(A=F_(x[0].messages[0].data),_=0;_<=r.e.c;++_)(T=F_(A[2][0].data))[1][0].data=O_(_),T[4][0].data=O_(r.e.r+1),A[2][_]={type:A[2][0].type,data:B_(T)};x[0].messages[0].data=B_(A),b.content=H_(z_(x)),b.size=b.content.length;var D=K_(k[4][0].data);!function(){for(var e,t=Qg.find(c,s[D].location),n=U_(V_(t.content)),r=0;r<n.length;++r){var i=n[r];i.id==D&&(e=i)}var a=F_(e.messages[0].data);a[3]=[];var l=[];o.forEach(function(e,t){l[1]=[{type:0,data:O_(t)}],l[2]=[{type:0,data:O_(1)}],l[3]=[{type:2,data:P_(e)}],a[3].push({type:2,data:B_(l)})}),e.messages[0].data=B_(a);var u=H_(z_(n));t.content=u,t.size=t.content.length}();var R=F_(k[3][0].data),P=R[1][0];delete R[2];var j=F_(P.data),L=K_(j[2][0].data);!function(){for(var e,t=Qg.find(c,s[L].location),n=U_(V_(t.content)),i=0;i<n.length;++i){var l=n[i];l.id==L&&(e=l)}var u=F_(e.messages[0].data);delete u[6],delete R[7];var h=new Uint8Array(u[5][0].data);u[5]=[];for(var d=0,f=0;f<=r.e.r;++f){var p=F_(h);d+=Y_(p,a[f],o),p[1][0].data=O_(f),u[5].push({data:B_(p),type:2})}u[1]=[{type:0,data:O_(r.e.c+1)}],u[2]=[{type:0,data:O_(r.e.r+1)}],u[3]=[{type:0,data:O_(d)}],u[4]=[{type:0,data:O_(r.e.r+1)}],e.messages[0].data=B_(u);var m=H_(z_(n));t.content=m,t.size=t.content.length}(),P.data=B_(j),k[3][0].data=B_(R),v[4][0].data=B_(k),h.messages[0].data=B_(v);var O=H_(z_(f));return d.content=O,d.size=d.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){Cw=1024,e&&!e.SSF&&(e.SSF=mv(dg));e&&e.SSF&&(Kg(),Gg(e.SSF),t.revssf=rv(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,bS?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=Dw.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Q_(t=t||{});var a=wv(),o="",s=0;t.cellXfs=[],_S(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(o="docProps/core.xml",xv(a,o,ix(e.Props,t)),i.coreprops.push(o),Jb(t.rels,2,o,Xb.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,xv(a,o,sx(e.Props)),i.extprops.push(o),Jb(t.rels,3,o,Xb.EXT_PROPS),e.Custprops!==e.Props&&ev(e.Custprops||{}).length>0&&(xv(a,o="docProps/custom.xml",lx(e.Custprops)),i.custprops.push(o),Jb(t.rels,4,o,Xb.CUST_PROPS));for(s=1;s<=e.SheetNames.length;++s){var u={"!id":{}},h=e.Sheets[e.SheetNames[s-1]];(h||{})["!type"];if(xv(a,o="xl/worksheets/sheet"+s+"."+n,JS(s-1,o,t,e,u)),i.sheets.push(o),Jb(t.wbrels,-1,"worksheets/sheet"+s+"."+n,Xb.WS[0]),h){var d=h["!comments"],f=!1,p="";d&&d.length>0&&(xv(a,p="xl/comments"+s+"."+n,ZS(d,p,t)),i.comments.push(p),Jb(u,-1,"../comments"+s+"."+n,Xb.CMNT),f=!0),h["!legacy"]&&f&&xv(a,"xl/drawings/vmlDrawing"+s+".vml",kw(s,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&xv(a,Qb(o),$b(u))}null!=t.Strings&&t.Strings.length>0&&(xv(a,o="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?Xx:Kx)(e,n)}(t.Strings,o,t)),i.strs.push(o),Jb(t.wbrels,-1,"sharedStrings."+n,Xb.SST));o="xl/workbook."+n,xv(a,o,function(e,t,n){return(".bin"===t.slice(-4)?$S:YS)(e,n)}(e,o,t)),i.workbooks.push(o),Jb(t.rels,1,o,Xb.WB),o="xl/theme/theme1.xml",xv(a,o,Sw(e.Themes,t)),i.themes.push(o),Jb(t.wbrels,-1,"theme/theme1.xml",Xb.THEME),o="xl/styles."+n,xv(a,o,function(e,t,n){return(".bin"===t.slice(-4)?ww:lw)(e,n)}(e,o,t)),i.styles.push(o),Jb(t.wbrels,-1,"styles."+n,Xb.STY),e.vbaraw&&r&&(xv(a,o="xl/vbaProject.bin",e.vbaraw),i.vba.push(o),Jb(t.wbrels,-1,"vbaProject.bin",Xb.VBA));return o="xl/metadata."+n,xv(a,o,function(e){return(".bin"===e.slice(-4)?_w:Ew)()}(o)),i.metadata.push(o),Jb(t.wbrels,-1,"metadata."+n,Xb.XLMETA),xv(a,"[Content_Types].xml",Yb(i,t)),xv(a,"_rels/.rels",$b(t.rels)),xv(a,"xl/_rels/workbook."+n+".rels",$b(t.wbrels)),delete t.revssf,delete t.ssf,a}(e,t):J_(e,t)}function J_(e,t){Cw=1024,e&&!e.SSF&&(e.SSF=mv(dg)),e&&e.SSF&&(Kg(),Gg(e.SSF),t.revssf=rv(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,bS?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=Dw.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Q_(t=t||{});var a=wv(),o="",s=0;if(t.cellXfs=[],_S(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),xv(a,o="docProps/core.xml",ix(e.Props,t)),i.coreprops.push(o),Jb(t.rels,2,o,Xb.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,xv(a,o,sx(e.Props)),i.extprops.push(o),Jb(t.rels,3,o,Xb.EXT_PROPS),e.Custprops!==e.Props&&ev(e.Custprops||{}).length>0&&(xv(a,o="docProps/custom.xml",lx(e.Custprops)),i.custprops.push(o),Jb(t.rels,4,o,Xb.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,s=1;s<=e.SheetNames.length;++s){var h={"!id":{}},d=e.Sheets[e.SheetNames[s-1]];(d||{})["!type"];if(xv(a,o="xl/worksheets/sheet"+s+"."+n,AS(s-1,t,e,h)),i.sheets.push(o),Jb(t.wbrels,-1,"worksheets/sheet"+s+"."+n,Xb.WS[0]),d){var f=d["!comments"],p=!1,m="";if(f&&f.length>0){var g=!1;f.forEach(function(e){e[1].forEach(function(e){1==e.T&&(g=!0)})}),g&&(xv(a,m="xl/threadedComments/threadedComment"+s+"."+n,Aw(f,u,t)),i.threadedcomments.push(m),Jb(h,-1,"../threadedComments/threadedComment"+s+"."+n,Xb.TCMNT)),xv(a,m="xl/comments"+s+"."+n,Nw(f)),i.comments.push(m),Jb(h,-1,"../comments"+s+"."+n,Xb.CMNT),p=!0}d["!legacy"]&&p&&xv(a,"xl/drawings/vmlDrawing"+s+".vml",kw(s,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&xv(a,Qb(o),$b(h))}return null!=t.Strings&&t.Strings.length>0&&(xv(a,o="xl/sharedStrings."+n,Kx(t.Strings,t)),i.strs.push(o),Jb(t.wbrels,-1,"sharedStrings."+n,Xb.SST)),xv(a,o="xl/workbook."+n,YS(e)),i.workbooks.push(o),Jb(t.rels,1,o,Xb.WB),xv(a,o="xl/theme/theme1.xml",Sw(e.Themes,t)),i.themes.push(o),Jb(t.wbrels,-1,"theme/theme1.xml",Xb.THEME),xv(a,o="xl/styles."+n,lw(e,t)),i.styles.push(o),Jb(t.wbrels,-1,"styles."+n,Xb.STY),e.vbaraw&&r&&(xv(a,o="xl/vbaProject.bin",e.vbaraw),i.vba.push(o),Jb(t.wbrels,-1,"vbaProject.bin",Xb.VBA)),xv(a,o="xl/metadata."+n,Ew()),i.metadata.push(o),Jb(t.wbrels,-1,"metadata."+n,Xb.XLMETA),u.length>1&&(xv(a,o="xl/persons/person.xml",function(e){var t=[Sv,Wv("personList",null,{xmlns:Xv,"xmlns:x":ry[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,n){t.push(Wv("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(u)),i.people.push(o),Jb(t.wbrels,-1,"persons/person.xml",Xb.PEOPLE)),xv(a,"[Content_Types].xml",Yb(i,t)),xv(a,"_rels/.rels",$b(t.rels)),xv(a,"xl/_rels/workbook.xml.rels",$b(t.wbrels)),delete t.revssf,delete t.ssf,a}function Z_(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Gm(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function eE(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Zg(t.file,Qg.write(e,{type:Km?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Qg.write(e,t)}function tE(e,t){var n={},r=Km?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?Qg.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(Jm(i))}return t.password&&"undefined"!==typeof encrypt_agile?eE(encrypt_agile(i,t.password),t):"file"===t.type?Zg(t.file,i):"string"==t.type?Ov(i):i}function nE(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return qm(Mv(r));case"binary":return Mv(r);case"string":return e;case"file":return Zg(t.file,r,"utf8");case"buffer":return Km?Ym(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):nE(r,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function rE(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?qm(n):"string"==t.type?Ov(n):n;case"file":return Zg(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function iE(e,t){Bm(),KS(e);var n=mv(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=iE(e,n);return n.type="array",Jm(r)}var i=0;if(n.sheet&&(i="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return nE(a_(e,n),n);case"slk":case"sylk":return nE(zx.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"htm":case"html":return nE(C_(e.Sheets[e.SheetNames[i]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return qm(e);case"binary":case"string":return e;case"file":return Zg(t.file,e,"binary");case"buffer":return Km?Ym(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(dE(e.Sheets[e.SheetNames[i]],n),n);case"csv":return nE(hE(e.Sheets[e.SheetNames[i]],n),n,"\ufeff");case"dif":return nE(Wx.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"dbf":return rE(Ux.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"prn":return nE(Hx.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"rtf":return nE(Jx.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"eth":return nE(Vx.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"fods":return nE(D_(e,n),n);case"wk1":return rE(qx.sheet_to_wk1(e.Sheets[e.SheetNames[i]],n),n);case"wk3":return rE(qx.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),rE(x_(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return eE(c_(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=mv(t||{});return tE($_(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function aE(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function oE(e,t,n){var r=n||{};return r.type="file",r.file=t,aE(r),iE(e,r)}function sE(e,t,n,r,i,a,o,s){var l=tb(n),c=s.defval,u=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),h=!0,d=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:n,enumerable:!1})}catch(VD){d.__rowNum__=n}else d.__rowNum__=n;if(!o||e[n])for(var f=t.s.c;f<=t.e.c;++f){var p=o?e[n][f]:e[r[f]+l];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=a[f]){if(null==m)if("e"==p.t&&null===m)d[a[f]]=null;else if(void 0!==c)d[a[f]]=c;else{if(!u||null!==m)continue;d[a[f]]=null}else d[a[f]]=u&&("n"!==p.t||"n"===p.t&&!1!==s.rawNumbers)?m:ub(p,m,s);null!=m&&(h=!1)}}else{if(void 0===c)continue;null!=a[f]&&(d[a[f]]=c)}}return{row:d,isempty:h}}function lE(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,i=1,a=[],o=0,s="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof u){case"string":l=lb(u);break;case"number":(l=lb(e["!ref"])).s.r=u;break;default:l=u}r>0&&(i=0);var h=tb(l.s.r),d=[],f=[],p=0,m=0,g=Array.isArray(e),v=l.s.r,y=0,b={};g&&!e[v]&&(e[v]=[]);var x=c.skipHidden&&e["!cols"]||[],w=c.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(x[y]||{}).hidden)switch(d[y]=rb(y),n=g?e[v][y]:e[d[y]+h],r){case 1:a[y]=y-l.s.c;break;case 2:a[y]=d[y];break;case 3:a[y]=c.header[y-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),s=o=ub(n,null,c),m=b[o]||0){do{s=o+"_"+m++}while(b[s]);b[o]=m,b[s]=1}else b[o]=1;a[y]=s}for(v=l.s.r+i;v<=l.e.r;++v)if(!(w[v]||{}).hidden){var S=sE(e,l,v,d,r,a,g,c);(!1===S.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(f[p++]=S.row)}return f.length=p,f}var cE=/"/g;function uE(e,t,n,r,i,a,o,s){for(var l=!0,c=[],u="",h=tb(n),d=t.s.c;d<=t.e.c;++d)if(r[d]){var f=s.dense?(e[n]||[])[d]:e[r[d]+h];if(null==f)u="";else if(null!=f.v){l=!1,u=""+(s.rawNumbers&&"n"==f.t?f.v:ub(f,null,s));for(var p=0,m=0;p!==u.length;++p)if((m=u.charCodeAt(p))===i||m===a||34===m||s.forceQuotes){u='"'+u.replace(cE,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==f.f||f.F?u="":(l=!1,(u="="+f.f).indexOf(",")>=0&&(u='"'+u.replace(cE,'""')+'"'));c.push(u)}return!1===s.blankrows&&l?null:c.join(o)}function hE(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=lb(e["!ref"]),a=void 0!==r.FS?r.FS:",",o=a.charCodeAt(0),s=void 0!==r.RS?r.RS:"\n",l=s.charCodeAt(0),c=new RegExp(("|"==a?"\\|":a)+"+$"),u="",h=[];r.dense=Array.isArray(e);for(var d=r.skipHidden&&e["!cols"]||[],f=r.skipHidden&&e["!rows"]||[],p=i.s.c;p<=i.e.c;++p)(d[p]||{}).hidden||(h[p]=rb(p));for(var m=0,g=i.s.r;g<=i.e.r;++g)(f[g]||{}).hidden||null!=(u=uE(e,i,g,h,o,l,a,r))&&(r.strip&&(u=u.replace(c,"")),(u||!1!==r.blankrows)&&n.push((m++?s:"")+u));return delete r.dense,n.join("")}function dE(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=hE(e,t);if("undefined"==typeof zm||"string"==t.type)return n;var r=zm.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function fE(e,t,n){var r,i=n||{},a=+!i.skipHeader,o=e||{},s=0,l=0;if(o&&null!=i.origin)if("number"==typeof i.origin)s=i.origin;else{var c="string"==typeof i.origin?ib(i.origin):i.origin;s=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:s+t.length-1+a}};if(o["!ref"]){var h=lb(o["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),-1==s&&(s=h.e.r+1,u.e.r=s+t.length-1+a)}else-1==s&&(s=0,u.e.r=t.length-1+a);var d=i.header||[],f=0;t.forEach(function(e,t){ev(e).forEach(function(n){-1==(f=d.indexOf(n))&&(d[f=d.length]=n);var c=e[n],u="z",h="",p=ab({c:l+f,r:s+t+a});r=pE(o,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",i.cellDates||(u="n",c=av(c)),h=i.dateNF||dg[14]):null===c&&i.nullError&&(u="e",c=0),r?(r.t=u,r.v=c,delete r.w,delete r.R,h&&(r.z=h)):o[p]=r={t:u,v:c},h&&(r.z=h)):o[p]=c})}),u.e.c=Math.max(u.e.c,l+d.length-1);var p=tb(s);if(a)for(f=0;f<d.length;++f)o[rb(f+l)+p]={t:"s",v:d[f]};return o["!ref"]=sb(u),o}function pE(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=ib(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return pE(e,ab("number"!=typeof t?t:{r:t,c:n||0}))}function mE(){return{SheetNames:[],Sheets:{}}}function gE(e,t,n,r){var i=1;if(!n)for(;i<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+i);++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var o=a&&a[1]||n;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(n=o+i);++i);}if(GS(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function vE(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var yE={encode_col:rb,encode_row:tb,encode_cell:ab,encode_range:sb,decode_col:nb,decode_row:eb,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:ib,decode_range:ob,format_cell:ub,sheet_add_aoa:db,sheet_add_json:fE,sheet_add_dom:k_,aoa_to_sheet:fb,json_to_sheet:function(e,t){return fE(null,e,t)},table_to_sheet:N_,table_to_book:function(e,t){return hb(N_(e,t),t)},sheet_to_csv:hE,sheet_to_txt:dE,sheet_to_json:lE,sheet_to_html:C_,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var i,a=lb(e["!ref"]),o="",s=[],l=[],c=Array.isArray(e);for(i=a.s.c;i<=a.e.c;++i)s[i]=rb(i);for(var u=a.s.r;u<=a.e.r;++u)for(o=tb(u),i=a.s.c;i<=a.e.c;++i)if(n=s[i]+o,r="",void 0!==(t=c?(e[u]||[])[i]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:lE,sheet_get_cell:pE,book_new:mE,book_append_sheet:gE,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:vE,cell_set_internal_link:function(e,t,n){return vE(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var i="string"!=typeof t?t:lb(t),a="string"==typeof t?t:sb(t),o=i.s.r;o<=i.e.r;++o)for(var s=i.s.c;s<=i.e.c;++s){var l=pE(e,o,s);l.t="n",l.F=a,delete l.v,o==i.s.r&&s==i.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Rm.version;function bE(e){return e+.5|0}const xE=(e,t,n)=>Math.max(Math.min(e,n),t);function wE(e){return xE(bE(2.55*e),0,255)}function SE(e){return xE(bE(255*e),0,255)}function _E(e){return xE(bE(e/2.55)/100,0,1)}function EE(e){return xE(bE(100*e),0,100)}const CE={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},kE=[..."0123456789ABCDEF"],NE=e=>kE[15&e],AE=e=>kE[(240&e)>>4]+kE[15&e],TE=e=>(240&e)>>4===(15&e);function IE(e){var t=(e=>TE(e.r)&&TE(e.g)&&TE(e.b)&&TE(e.a))(e)?NE:AE;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const DE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function RE(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function PE(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function jE(e,t,n){const r=RE(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function LE(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),a=Math.min(t,n,r),o=(i+a)/2;let s,l,c;return i!==a&&(c=i-a,l=o>.5?c/(2-i-a):c/(i+a),s=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),s=60*s+.5),[0|s,l||0,o]}function OE(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(SE)}function ME(e,t,n){return OE(RE,e,t,n)}function FE(e){return(e%360+360)%360}function BE(e){const t=DE.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?wE(+t[5]):SE(+t[5]));const i=FE(+t[2]),a=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return OE(jE,e,t,n)}(i,a,o):"hsv"===t[1]?function(e,t,n){return OE(PE,e,t,n)}(i,a,o):ME(i,a,o),{r:n[0],g:n[1],b:n[2],a:r}}const UE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},zE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let WE;function VE(e){WE||(WE=function(){const e={},t=Object.keys(zE),n=Object.keys(UE);let r,i,a,o,s;for(r=0;r<t.length;r++){for(o=s=t[r],i=0;i<n.length;i++)a=n[i],s=s.replace(a,UE[a]);a=parseInt(zE[o],16),e[s]=[a>>16&255,a>>8&255,255&a]}return e}(),WE.transparent=[0,0,0,0]);const t=WE[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const HE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const qE=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,GE=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function KE(e,t,n){if(e){let r=LE(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=ME(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function YE(e,t){return e?Object.assign(t||{},e):e}function XE(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=SE(e[3]))):(t=YE(e,{r:0,g:0,b:0,a:1})).a=SE(t.a),t}function QE(e){return"r"===e.charAt(0)?function(e){const t=HE.exec(e);let n,r,i,a=255;if(t){if(t[7]!==n){const e=+t[7];a=t[8]?wE(e):xE(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?wE(n):xE(n,0,255)),r=255&(t[4]?wE(r):xE(r,0,255)),i=255&(t[6]?wE(i):xE(i,0,255)),{r:n,g:r,b:i,a:a}}}(e):BE(e)}class $E{constructor(e){if(e instanceof $E)return e;const t=typeof e;let n;"object"===t?n=XE(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*CE[e[1]],g:255&17*CE[e[2]],b:255&17*CE[e[3]],a:5===n?17*CE[e[4]]:255}:7!==n&&9!==n||(t={r:CE[e[1]]<<4|CE[e[2]],g:CE[e[3]]<<4|CE[e[4]],b:CE[e[5]]<<4|CE[e[6]],a:9===n?CE[e[7]]<<4|CE[e[8]]:255})),t}(e)||VE(e)||QE(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=YE(this._rgb);return e&&(e.a=_E(e.a)),e}set rgb(e){this._rgb=XE(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(_E(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?IE(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=LE(e),n=t[0],r=EE(t[1]),i=EE(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(_E(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const a=t===i?.5:t,o=2*a-1,s=n.a-r.a,l=((o*s===-1?o:(o+s)/(1+o*s))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=GE(_E(e.r)),i=GE(_E(e.g)),a=GE(_E(e.b));return{r:SE(qE(r+n*(GE(_E(t.r))-r))),g:SE(qE(i+n*(GE(_E(t.g))-i))),b:SE(qE(a+n*(GE(_E(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new $E(this.rgb)}alpha(e){return this._rgb.a=SE(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=bE(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return KE(this._rgb,2,e),this}darken(e){return KE(this._rgb,2,-e),this}saturate(e){return KE(this._rgb,1,e),this}desaturate(e){return KE(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=LE(e);n[0]=FE(n[0]+t),n=ME(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function JE(){}const ZE=(()=>{let e=0;return()=>e++})();function eC(e){return null===e||void 0===e}function tC(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function nC(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function rC(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function iC(e,t){return rC(e)?e:t}function aC(e,t){return"undefined"===typeof e?t:e}const oC=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function sC(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function lC(e,t,n,r){let i,a,o;if(tC(e))if(a=e.length,r)for(i=a-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<a;i++)t.call(n,e[i],i);else if(nC(e))for(o=Object.keys(e),a=o.length,i=0;i<a;i++)t.call(n,e[o[i]],o[i])}function cC(e,t){let n,r,i,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],a=t[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function uC(e){if(tC(e))return e.map(uC);if(nC(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=uC(e[n[i]]);return t}return e}function hC(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function dC(e,t,n,r){if(!hC(e))return;const i=t[e],a=n[e];nC(i)&&nC(a)?fC(i,a,r):t[e]=uC(a)}function fC(e,t,n){const r=tC(t)?t:[t],i=r.length;if(!nC(e))return e;const a=(n=n||{}).merger||dC;let o;for(let s=0;s<i;++s){if(o=r[s],!nC(o))continue;const t=Object.keys(o);for(let r=0,i=t.length;r<i;++r)a(t[r],e,o,n)}return e}function pC(e,t){return fC(e,t,{merger:mC})}function mC(e,t,n){if(!hC(e))return;const r=t[e],i=n[e];nC(r)&&nC(i)?pC(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=uC(i))}const gC={"":e=>e,x:e=>e.x,y:e=>e.y};function vC(e,t){const n=gC[t]||(gC[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function yC(e){return e.charAt(0).toUpperCase()+e.slice(1)}const bC=e=>"undefined"!==typeof e,xC=e=>"function"===typeof e,wC=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const SC=Math.PI,_C=2*SC,EC=_C+SC,CC=Number.POSITIVE_INFINITY,kC=SC/180,NC=SC/2,AC=SC/4,TC=2*SC/3,IC=Math.log10,DC=Math.sign;function RC(e,t,n){return Math.abs(e-t)<n}function PC(e){const t=Math.round(e);e=RC(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(IC(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function jC(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function LC(e,t,n){let r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function OC(e){return e*(SC/180)}function MC(e){return e*(180/SC)}function FC(e){if(!rC(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function BC(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*SC&&(a+=_C),{angle:a,distance:i}}function UC(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function zC(e,t){return(e-t+EC)%_C-SC}function WC(e){return(e%_C+_C)%_C}function VC(e,t,n,r){const i=WC(e),a=WC(t),o=WC(n),s=WC(a-i),l=WC(o-i),c=WC(i-a),u=WC(i-o);return i===a||i===o||r&&a===o||s>l&&c<u}function HC(e,t,n){return Math.max(t,Math.min(n,e))}function qC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function GC(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,a=0;for(;i-a>1;)r=a+i>>1,n(r)?a=r:i=r;return{lo:a,hi:i}}const KC=(e,t,n,r)=>GC(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),YC=(e,t,n)=>GC(e,n,r=>e[r][t]>=n);const XC=["push","pop","shift","splice","unshift"];function QC(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(XC.forEach(t=>{delete e[t]}),delete e._chartjs)}function $C(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const JC="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function ZC(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];n=a,r||(r=!0,JC.call(window,()=>{r=!1,e.apply(t,n)}))}}const ek=e=>"start"===e?"left":"end"===e?"right":"center",tk=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function nk(e,t,n){const r=t.length;let i=0,a=r;if(e._sorted){const{iScale:o,vScale:s,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(i=Math.min(KC(l,u,h).lo,n?r:KC(t,u,o.getPixelForValue(h)).lo),c){const e=l.slice(0,i+1).reverse().findIndex(e=>!eC(e[s.axis]));i-=Math.max(0,e)}i=HC(i,0,r-1)}if(p){let e=Math.max(KC(l,o.axis,d,!0).hi+1,n?0:KC(t,u,o.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!eC(e[s.axis]));e+=Math.max(0,t)}a=HC(e,i,r)-i}else a=r-i}return{start:i,count:a}}function rk(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}const ik=e=>0===e||1===e,ak=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*_C/n),ok=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*_C/n)+1,sk={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*NC),easeOutSine:e=>Math.sin(e*NC),easeInOutSine:e=>-.5*(Math.cos(SC*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>ik(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ik(e)?e:ak(e,.075,.3),easeOutElastic:e=>ik(e)?e:ok(e,.075,.3),easeInOutElastic(e){const t=.1125;return ik(e)?e:e<.5?.5*ak(2*e,t,.45):.5+.5*ok(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-sk.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*sk.easeInBounce(2*e):.5*sk.easeOutBounce(2*e-1)+.5};function lk(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function ck(e){return lk(e)?e:new $E(e)}function uk(e){return lk(e)?e:new $E(e).saturate(.5).darken(.1).hexString()}const hk=["x","y","borderWidth","radius","tension"],dk=["color","borderColor","backgroundColor"];const fk=new Map;function pk(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=fk.get(n);return r||(r=new Intl.NumberFormat(e,t),fk.set(n,r)),r}(t,n).format(e)}const mk={values:e=>tC(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,a=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),a=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=IC(Math.abs(a)),s=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),pk(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(IC(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?mk.numeric.call(this,e,t,n):""}};var gk={formatters:mk};const vk=Object.create(null),yk=Object.create(null);function bk(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function xk(e,t,n){return"string"===typeof t?fC(bk(e,t),n):fC(bk(e,""),t)}class wk{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>uk(t.backgroundColor),this.hoverBorderColor=(e,t)=>uk(t.borderColor),this.hoverColor=(e,t)=>uk(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return xk(this,e,t)}get(e){return bk(this,e)}describe(e,t){return xk(yk,e,t)}override(e,t){return xk(vk,e,t)}route(e,t,n,r){const i=bk(this,e),a=bk(this,n),o="_"+t;Object.defineProperties(i,{[o]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=a[r];return nC(e)?Object.assign({},t,e):aC(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach(e=>e(this))}}var Sk=new wk({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:dk},numbers:{type:"number",properties:hk}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function _k(e,t,n,r,i){let a=t[i];return a||(a=t[i]=e.measureText(i).width,n.push(i)),a>r&&(r=a),r}function Ek(e,t,n,r){let i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},a=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let o=0;const s=n.length;let l,c,u,h,d;for(l=0;l<s;l++)if(h=n[l],void 0===h||null===h||tC(h)){if(tC(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||tC(d)||(o=_k(e,i,a,o,d))}else o=_k(e,i,a,o,h);e.restore();const f=a.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[a[l]];a.splice(0,f)}return o}function Ck(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function kk(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Nk(e,t,n,r){Ak(e,t,n,r,null)}function Ak(e,t,n,r,i){let a,o,s,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*kC;if(f&&"object"===typeof f&&(a=f.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,m,0,0,_C):e.arc(n,r,m,0,_C),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=TC,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=TC,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,o=Math.cos(g+AC)*l,h=Math.cos(g+AC)*(i?i/2-c:l),s=Math.sin(g+AC)*l,d=Math.sin(g+AC)*(i?i/2-c:l),e.arc(n-h,r-s,c,g-SC,g-NC),e.arc(n+d,r-o,c,g-NC,g),e.arc(n+h,r+s,c,g,g+NC),e.arc(n-d,r+o,c,g+NC,g+SC),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=AC;case"rectRot":h=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-s),e.lineTo(n+d,r-o),e.lineTo(n+h,r+s),e.lineTo(n-d,r+o),e.closePath();break;case"crossRot":g+=AC;case"cross":h=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-s),e.lineTo(n+h,r+s),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o);break;case"star":h=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-s),e.lineTo(n+h,r+s),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o),g+=AC,h=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-s),e.lineTo(n+h,r+s),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o);break;case"line":o=i?i/2:Math.cos(g)*m,s=Math.sin(g)*m,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Tk(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ik(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Dk(e){e.restore()}function Rk(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Pk(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function jk(e,t,n,r,i){if(i.strikethrough||i.underline){const a=e.measureText(r),o=t-a.actualBoundingBoxLeft,s=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,c=n+a.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(s,u),e.stroke()}}function Lk(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Ok(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=tC(t)?t:[t],s=a.strokeWidth>0&&""!==a.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),eC(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<o.length;++l)c=o[l],a.backdrop&&Lk(e,a.backdrop),s&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),eC(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(c,n,r,a.maxWidth)),e.fillText(c,n,r,a.maxWidth),jk(e,n,r,c,a),r+=Number(i.lineHeight);e.restore()}function Mk(e,t){const{x:n,y:r,w:i,h:a,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*SC,SC,!0),e.lineTo(n,r+a-o.bottomLeft),e.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,SC,NC,!0),e.lineTo(n+i-o.bottomRight,r+a),e.arc(n+i-o.bottomRight,r+a-o.bottomRight,o.bottomRight,NC,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-NC,!0),e.lineTo(n+o.topLeft,r)}const Fk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Bk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Uk(e,t){const n=(""+e).match(Fk);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const zk=e=>+e||0;function Wk(e,t){const n={},r=nC(t),i=r?Object.keys(t):t,a=nC(e)?r?n=>aC(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of i)n[o]=zk(a(o));return n}function Vk(e){return Wk(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Hk(e){return Wk(e,["topLeft","topRight","bottomLeft","bottomRight"])}function qk(e){const t=Vk(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Gk(e,t){e=e||{},t=t||Sk.font;let n=aC(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=aC(e.style,t.style);r&&!(""+r).match(Bk)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:aC(e.family,t.family),lineHeight:Uk(aC(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:aC(e.weight,t.weight),string:""};return i.string=function(e){return!e||eC(e.size)||eC(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function Kk(e,t,n,r){let i,a,o,s=!0;for(i=0,a=e.length;i<a;++i)if(o=e[i],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),s=!1),void 0!==n&&tC(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function Yk(e,t){return Object.assign(Object.create(e),t)}function Xk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=oN("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>Xk([r,...e],t,i,n)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>eN(n,r,()=>function(e,t,n,r){let i;for(const a of t)if(i=oN(Jk(a,e),n),"undefined"!==typeof i)return Zk(e,i)?iN(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>sN(e).includes(t),ownKeys:e=>sN(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function Qk(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:$k(e,r),setContext:t=>Qk(e,t,n,r),override:i=>Qk(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>eN(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:o}=e;let s=r[t];xC(s)&&o.isScriptable(t)&&(s=function(e,t,n,r){const{_proxy:i,_context:a,_subProxy:o,_stack:s}=n;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e);let l=t(a,o||r);s.delete(e),Zk(e,l)&&(l=iN(i._scopes,i,e,l));return l}(t,s,e,n));tC(s)&&s.length&&(s=function(e,t,n,r){const{_proxy:i,_context:a,_subProxy:o,_descriptors:s}=n;if("undefined"!==typeof a.index&&r(e))return t[a.index%t.length];if(nC(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=iN(r,i,e,l);t.push(Qk(n,a,o&&o[e],s))}}return t}(t,s,e,o.isIndexable));Zk(t,s)&&(s=Qk(s,i,a&&a[t],o));return s}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function $k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:xC(n)?n:()=>n,isIndexable:xC(r)?r:()=>r}}const Jk=(e,t)=>e?e+yC(t):t,Zk=(e,t)=>nC(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function eN(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function tN(e,t,n){return xC(e)?e(t,n):e}const nN=(e,t)=>!0===e?t:"string"===typeof e?vC(t,e):void 0;function rN(e,t,n,r,i){for(const a of t){const t=nN(n,a);if(t){e.add(t);const a=tN(t._fallback,n,i);if("undefined"!==typeof a&&a!==n&&a!==r)return a}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function iN(e,t,n,r){const i=t._rootScopes,a=tN(t._fallback,n,r),o=[...e,...i],s=new Set;s.add(r);let l=aN(s,o,n,a||n,r);return null!==l&&(("undefined"===typeof a||a===n||(l=aN(s,o,a,l,r),null!==l))&&Xk(Array.from(s),[""],i,a,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(tC(i)&&nC(n))return n;return i||{}}(t,n,r)))}function aN(e,t,n,r,i){for(;n;)n=rN(e,t,n,r,i);return n}function oN(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function sN(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function lN(e,t,n,r){const{iScale:i}=e,{key:a="r"}=this._parsing,o=new Array(r);let s,l,c,u;for(s=0,l=r;s<l;++s)c=s+n,u=t[c],o[s]={r:i.parse(vC(u,a),c)};return o}const cN=Number.EPSILON||1e-14,uN=(e,t)=>t<e.length&&!e[t].skip&&e[t],hN=e=>"x"===e?"y":"x";function dN(e,t,n,r){const i=e.skip?t:e,a=t,o=n.skip?t:n,s=UC(a,i),l=UC(o,a);let c=s/(s+l),u=l/(s+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:a.x-h*(o.x-i.x),y:a.y-h*(o.y-i.y)},next:{x:a.x+d*(o.x-i.x),y:a.y+d*(o.y-i.y)}}}function fN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=hN(t),r=e.length,i=Array(r).fill(0),a=Array(r);let o,s,l,c=uN(e,0);for(o=0;o<r;++o)if(s=l,l=c,c=uN(e,o+1),l){if(c){const e=c[t]-l[t];i[o]=0!==e?(c[n]-l[n])/e:0}a[o]=s?c?DC(i[o-1])!==DC(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(e,t,n){const r=e.length;let i,a,o,s,l,c=uN(e,0);for(let u=0;u<r-1;++u)l=c,c=uN(e,u+1),l&&c&&(RC(t[u],0,cN)?n[u]=n[u+1]=0:(i=n[u]/t[u],a=n[u+1]/t[u],s=Math.pow(i,2)+Math.pow(a,2),s<=9||(o=3/Math.sqrt(s),n[u]=i*o*t[u],n[u+1]=a*o*t[u])))}(e,i,a),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=hN(n),i=e.length;let a,o,s,l=uN(e,0);for(let c=0;c<i;++c){if(o=s,s=l,l=uN(e,c+1),!s)continue;const i=s[n],u=s[r];o&&(a=(i-o[n])/3,s["cp1".concat(n)]=i-a,s["cp1".concat(r)]=u-a*t[c]),l&&(a=(l[n]-i)/3,s["cp2".concat(n)]=i+a,s["cp2".concat(r)]=u+a*t[c])}}(e,a,t)}function pN(e,t,n){return Math.max(Math.min(e,n),t)}function mN(e,t,n,r,i){let a,o,s,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)fN(e,i);else{let n=r?e[e.length-1]:e[0];for(a=0,o=e.length;a<o;++a)s=e[a],l=dN(n,s,e[Math.min(a+1,o-(r?0:1))%o],t.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}t.capBezierPoints&&function(e,t){let n,r,i,a,o,s=Tk(e[0],t);for(n=0,r=e.length;n<r;++n)o=a,a=s,s=n<r-1&&Tk(e[n+1],t),a&&(i=e[n],o&&(i.cp1x=pN(i.cp1x,t.left,t.right),i.cp1y=pN(i.cp1y,t.top,t.bottom)),s&&(i.cp2x=pN(i.cp2x,t.left,t.right),i.cp2y=pN(i.cp2y,t.top,t.bottom)))}(e,n)}function gN(){return"undefined"!==typeof window&&"undefined"!==typeof document}function vN(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function yN(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const bN=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const xN=["top","right","bottom","left"];function wN(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=xN[i];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function SN(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=bN(n),a="border-box"===i.boxSizing,o=wN(i,"padding"),s=wN(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:a}=r;let o,s,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,a,e.target))o=i,s=a;else{const e=t.getBoundingClientRect();o=r.clientX-e.left,s=r.clientY-e.top,l=!0}return{x:o,y:s,box:l}}(e,n),h=o.left+(u&&s.left),d=o.top+(u&&s.top);let{width:f,height:p}=t;return a&&(f-=o.width+s.width,p-=o.height+s.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const _N=e=>Math.round(10*e)/10;function EN(e,t,n,r){const i=bN(e),a=wN(i,"margin"),o=yN(i.maxWidth,e,"clientWidth")||CC,s=yN(i.maxHeight,e,"clientHeight")||CC,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const a=e&&vN(e);if(a){const e=a.getBoundingClientRect(),o=bN(a),s=wN(o,"border","width"),l=wN(o,"padding");t=e.width-l.width-s.width,n=e.height-l.height-s.height,r=yN(o.maxWidth,a,"clientWidth"),i=yN(o.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||CC,maxHeight:i||CC}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=wN(i,"border","width"),t=wN(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-a.width),u=Math.max(0,r?c/r:u-a.height),c=_N(Math.min(c,o,l.maxWidth)),u=_N(Math.min(u,s,l.maxHeight)),c&&!u&&(u=_N(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=_N(Math.floor(u*r))),{width:c,height:u}}function CN(e,t,n){const r=t||1,i=_N(e.height*r),a=_N(e.width*r);e.height=_N(e.height),e.width=_N(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==i||o.width!==a)&&(e.currentDevicePixelRatio=r,o.height=i,o.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}const kN=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};gN()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(VD){}return e}();function NN(e,t){const n=function(e,t){return bN(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function AN(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function TN(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function IN(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},o=AN(e,i,n),s=AN(i,a,n),l=AN(a,t,n),c=AN(o,s,n),u=AN(s,l,n);return AN(c,u,n)}function DN(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function RN(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function PN(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function jN(e){return"angle"===e?{between:VC,compare:zC,normalize:WC}:{between:qC,compare:(e,t)=>e-t,normalize:e=>e}}function LN(e){let{start:t,end:n,count:r,loop:i,style:a}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:a}}function ON(e,t,n){if(!n)return[e];const{property:r,start:i,end:a}=n,o=t.length,{compare:s,between:l,normalize:c}=jN(r),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:r,start:i,end:a}=n,{between:o,normalize:s}=jN(r),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(s(t[h%l][r]),i,a);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let m,g,v,y=!1,b=null;const x=()=>y||l(i,v,m)&&0!==s(i,v),w=()=>!y||0===s(a,m)||l(a,v,m);for(let S=u,_=u;S<=h;++S)g=t[S%o],g.skip||(m=c(g[r]),m!==v&&(y=l(m,i,a),null===b&&x()&&(b=0===s(m,i)?S:_),null!==b&&w()&&(p.push(LN({start:b,end:S,loop:d,count:o,style:f})),b=null),_=S,v=m));return null!==b&&p.push(LN({start:b,end:h,loop:d,count:o,style:f})),p}function MN(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const a=ON(r[i],e.points,t);a.length&&n.push(...a)}return n}function FN(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),a=BN(e.options),{_datasetIndex:o,options:{spanGaps:s}}=e,l=n.length,c=[];let u=a,h=t[0].start,d=h;function f(e,t,r,i){const a=s?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,h=t%l)}}for(const p of t){h=s?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const a=n[d%l];e=BN(r.setContext(Yk(i,{type:"segment",p0:t,p1:a,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),UN(e,u)&&f(h,d-1,p.loop,u),t=a,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,r):t}function BN(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function UN(e,t){if(!t)return!1;const n=[],r=function(e,t){return lk(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function zN(e,t,n){return e.options.clip?e[n]:t[n]}function WN(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:zN(n,t,"left"),right:zN(n,t,"right"),top:zN(r,t,"top"),bottom:zN(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class VN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],a=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=JC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let a,o=i.length-1,s=!1;for(;o>=0;--o)a=i[o],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(e),s=!0):(i[o]=i[i.length-1],i.pop());s&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var HN=new VN;const qN="transparent",GN={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=ck(e||qN),i=r.valid&&ck(t||qN);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class KN{constructor(e,t,n,r){const i=t[n];r=Kk([e.to,r,i,e.from]);const a=Kk([e.from,i,r]);this._active=!0,this._fn=e.fn||GN[e.type||typeof a],this._easing=sk[e.easing]||sk.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Kk([e.to,t,r,e.from]),this._from=Kk([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,a=this._loop,o=this._to;let s;if(this._active=i!==o&&(a||t<n),!this._active)return this._target[r]=o,void this._notify(!0);t<0?this._target[r]=i:(s=t/n%2,s=a&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(i,o,s))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class YN{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!nC(e))return;const t=Object.keys(Sk.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!nC(i))return;const a={};for(const e of t)a[e]=i[e];(tC(i.properties)&&i.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,a)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let s;for(s=a.length-1;s>=0;--s){const l=a[s];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(i[l]=u=new KN(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(HN.add(this._chart,n),!0):void 0}}function XN(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:i,end:r?i:a}}function QN(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,a;for(i=0,a=r.length;i<a;++i)n.push(r[i].index);return n}function $N(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,a="single"===r.mode;let o,s,l,c;if(null===t)return;let u=!1;for(o=0,s=i.length;o<s;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=e.values[l],rC(c)&&(a||0===t||DC(t)===DC(c))&&(t+=c)}return u||r.all?t:0}function JN(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function ZN(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function eA(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function tA(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:a,vScale:o,index:s}=r,l=a.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(a,o,r),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:a}=e;d=(e._stacks||(e._stacks={}))[c]=ZN(i,u,n),d[s]=a,d._top=eA(d,o,!0,r.type),d._bottom=eA(d,o,!1,r.type);(d._visualValues||(d._visualValues={}))[s]=a}}function nA(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function rA(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const iA=e=>"reset"===e||"none"===e,aA=(e,t)=>t?e:Object.assign({},e);class oA{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=JN(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&rA(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=aC(n.xAxisID,nA(e,"x")),a=t.yAxisID=aC(n.yAxisID,nA(e,"y")),o=t.rAxisID=aC(n.rAxisID,nA(e,"r")),s=t.indexAxis,l=t.iAxisID=r(s,i,a,o),c=t.vAxisID=r(s,a,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&QC(this._data,this),e._stacked&&rA(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(nC(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",a="x"===r.axis?"x":"y",o=Object.keys(e),s=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],s[l]={[i]:u,[a]:e[u]};return s}(t,e)}else if(n!==t){if(n){QC(n,this);const e=this._cachedMeta;rA(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),XC.forEach(e=>{const t="_onData"+yC(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];const o=n.apply(this,i);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...i)}),o}})}))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=JN(t.vScale,t),t.stack!==n.stack&&(r=!0,rA(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(tA(this,t._parsed),t._stacked=JN(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:a}=n,o=i.axis;let s,l,c,u=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=tC(r[e])?this.parseArrayData(n,r,e,t):nC(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[o]||h&&l[o]<h[o];for(s=0;s<t;++s)n._parsed[s+e]=l=c[s],u&&(i()&&(u=!1),h=l);n._sorted=u}a&&tA(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:a}=e,o=i.axis,s=a.axis,l=i.getLabels(),c=i===a,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[o]:c||i.parse(l[f],f),[s]:a.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:a}=e,o=new Array(r);let s,l,c,u;for(s=0,l=r;s<l;++s)c=s+n,u=t[c],o[s]={x:i.parse(u[0],c),y:a.parse(u[1],c)};return o}parseObjectData(e,t,n,r){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:s="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=t[h],l[c]={x:i.parse(vC(d,o),h),y:a.parse(vC(d,s),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,a=t[e.axis];return $N({keys:QN(r,!0),values:t._stacks[e.axis]._visualValues},a,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let a=null===i?NaN:i;const o=r&&n._stacks[t.axis];r&&o&&(r.values=o,a=$N(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,a=r.length,o=this._getOtherScale(e),s=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:QN(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=r[h];const t=d[o.axis];return!rC(d[e.axis])||c>t||u<t}for(h=0;h<a&&(f()||(this.updateRangeFromParsed(l,e,d,s),!i));++h);if(i)for(h=a-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,s);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,a;for(r=0,i=t.length;r<i;++r)a=t[r][e.axis],rC(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return nC(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(aC(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=XN(e,n),i=XN(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,a=[],o=this._drawStart||0,s=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,o,s),c=o;c<o+s;++c){const t=r[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,i))}for(c=0;c<a.length;++c)a[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return Yk(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return Yk(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,a=e+"-"+t,o=i[a],s=this.enableOptionSharing&&bC(n);if(o)return aA(o,s);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Sk.elements[e]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,r,t),u);return f.$shared&&(f.$shared=s,i[a]=Object.freeze(aA(f,s))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,a="animation-".concat(t),o=i[a];if(o)return o;let s;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),a=r.getOptionScopes(this.getDataset(),i);s=r.createResolver(a,this.getContext(e,n,t))}const l=new YN(r,s&&s.animations);return s&&s._cacheable&&(i[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||iA(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:a}}updateElement(e,t,n,r){iA(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!iA(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,s,l]of this._syncList)this[o](s,l);this._syncList=[];const r=n.length,i=t.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,a=e+t;let o;const s=e=>{for(e.length+=t,o=e.length-1;o>=a;o--)e[o]=e[o-t]};for(s(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&rA(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function sA(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=$C(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,a,o,s=t._length;const l=()=>{32767!==a&&-32768!==a&&(bC(o)&&(s=Math.min(s,Math.abs(a-o)||s)),o=a)};for(r=0,i=n.length;r<i;++r)a=t.getPixelForValue(n[r]),l();for(o=void 0,r=0,i=t.ticks.length;r<i;++r)a=t.getPixelForTick(r),l();return s}function lA(e,t,n,r){return tC(e)?function(e,t,n,r){const i=n.parse(e[0],r),a=n.parse(e[1],r),o=Math.min(i,a),s=Math.max(i,a);let l=o,c=s;Math.abs(o)>Math.abs(s)&&(l=s,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:a,min:o,max:s}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function cA(e,t,n,r){const i=e.iScale,a=e.vScale,o=i.getLabels(),s=i===a,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=t[c],h={},h[i.axis]=s||i.parse(o[c],c),l.push(lA(d,h,a,c));return l}function uA(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function hA(e,t,n,r){let i=t.borderSkipped;const a={};if(!i)return void(e.borderSkipped=a);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:s,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,a;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:t,top:i,bottom:a}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(a[dA(u,o,s,l)]=!0,i=c)),a[dA(i,o,s,l)]=!0,e.borderSkipped=a}function dA(e,t,n,r){var i,a,o;return r?(o=n,e=fA(e=(i=e)===(a=t)?o:i===o?a:i,n,t)):e=fA(e,t,n),e}function fA(e,t,n){return"start"===e?t:"end"===e?n:e}function pA(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,Oe.A)(oA,"defaults",{}),(0,Oe.A)(oA,"datasetElementType",null),(0,Oe.A)(oA,"dataElementType",null);class mA extends oA{parsePrimitiveData(e,t,n,r){return cA(e,t,n,r)}parseArrayData(e,t,n,r){return cA(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:a}=e,{xAxisKey:o="x",yAxisKey:s="y"}=this._parsing,l="x"===i.axis?o:s,c="x"===a.axis?o:s,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=t[h],f={},f[i.axis]=i.parse(vC(p,l),h),u.push(lA(vC(p,c),f,a,h));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),a=i._custom,o=uA(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:a,_cachedMeta:{vScale:o}}=this,s=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=i||eC(t[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[o.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||uA(t._custom)||a===p._top||a===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(m.options=u||this.resolveDataElementOptions(d,e[d].active?"active":r));const g=m.options||e[d].options;hA(m,g,p,a),pA(m,g,c.ratio),this.updateElement(e[d],d,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(t),s=o&&o[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===s),r=t&&t[e.vScale.axis];if(eC(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===a.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[aC("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,a;for(i=0,a=t.data.length;i<a;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=e.barThickness;return{min:o||sA(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:a}}=this,o=i||0,s=this.getParsed(e),l=s._custom,c=uA(l);let u,h,d=s[t.axis],f=0,p=n?this.applyStack(t,s,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&DC(d)!==DC(l.barEnd)&&(f=0),f+=d);const m=eC(i)||c?f:i;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,h=u-g,Math.abs(h)<a){h=function(e,t,n){return 0!==e?DC(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,o)*a,d===o&&(g-=h/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);g=Math.max(Math.min(g,f),l),u=g+h,n&&!c&&(s._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(o)){const e=DC(h)*t.getLineWidthForValue(o)/2;g+=e,h-=e}return{size:h,base:g,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,a=aC(r.maxBarThickness,1/0);let o,s;const l=this._getAxisCount();if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,a=i[e];let o=e>0?i[e-1]:null,s=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===o&&(o=a-(null===s?t.end-t.start:s-a)),null===s&&(s=a+a-o);const c=a-(a-Math.min(o,s))/2*l;return{chunk:Math.abs(s-o)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const i=n.barThickness;let a,o;return eC(i)?(a=t.min*n.categoryPercentage,o=n.barPercentage):(a=i*r,o=1),{chunk:a/r,ratio:o,start:t.pixels[e]-a/2}}(e,t,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(aC(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+h;o=c.start+c.chunk*d+c.chunk/2,s=Math.min(a,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),s=Math.min(a,t.min*t.ratio);return{base:o-s/2,head:o+s/2,center:o,size:s}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}(0,Oe.A)(mA,"id","bar"),(0,Oe.A)(mA,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Oe.A)(mA,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class gA extends oA{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let a=0;a<i.length;a++)i[a]._custom=this.resolveDataElementOptions(a+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let a=0;a<i.length;a++){const e=t[n+a];i[a]._custom=aC(e[2],this.resolveDataElementOptions(a+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let a=0;a<i.length;a++){const e=t[n+a];i[a]._custom=aC(e&&e.r&&+e.r,this.resolveDataElementOptions(a+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,a=this.getParsed(e),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+o+", "+s+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(t,r),c=a.axis,u=o.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?a.getPixelForDecimal(.5):a.getPixelForValue(n[c]),p=d[u]=i?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=s||this.resolveDataElementOptions(h,t.active?"active":r),i&&(d.options.radius=0)),this.updateElement(t,h,d,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=aC(n&&n._custom,i),r}}(0,Oe.A)(gA,"id","bubble"),(0,Oe.A)(gA,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Oe.A)(gA,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class vA extends oA{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,a,o=e=>+n[e];if(nC(n[e])){const{key:e="value"}=this._parsing;o=t=>+vC(n[t],e)}for(i=e,a=e+t;i<a;++i)r._parsed[i]=o(i)}}_getRotation(){return OC(this.options.rotation-90)}_getCircumference(){return OC(this.options.circumference)}_getRotationExtents(){let e=_C,t=-_C;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),a=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),s=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let r=1,i=1,a=0,o=0;if(t<_C){const s=e,l=s+t,c=Math.cos(s),u=Math.sin(s),h=Math.cos(l),d=Math.sin(l),f=(e,t,r)=>VC(e,s,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>VC(e,s,l,!0)?-1:Math.min(t,t*n,r,r*n),m=f(0,c,h),g=f(NC,u,d),v=p(SC,c,h),y=p(SC+NC,u,d);r=(m-v)/2,i=(g-y)/2,a=-(m+v)/2,o=-(g+y)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:o}}(d,h,s),v=(n.width-a)/f,y=(n.height-a)/p,b=Math.max(Math.min(v,y)/2,0),x=oC(this.options.radius,b),w=(x-Math.max(x*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=g*x,r.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/_C)}updateElements(e,t,n,r){const i="reset"===r,a=this.chart,o=a.chartArea,s=a.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=i&&s.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:d,innerRadius:h};p&&(a.options=f||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,a,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?_C*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=pk(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,a,o,s;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,o=a.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)s=o.resolveDataElementOptions(r),"inner"!==s.borderAlign&&(t=Math.max(t,s.borderWidth||0,s.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(aC(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Oe.A)(vA,"id","doughnut"),(0,Oe.A)(vA,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Oe.A)(vA,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,Oe.A)(vA,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:n,textAlign:r,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,s)=>{const l=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(s),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:r,pointStyle:n,borderRadius:a&&(o||l.borderRadius),index:s}}):[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class yA extends oA{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,a=this.chart._animationsDisabled;let{start:o,count:s}=nk(t,r,a);this._drawStart=o,this._drawCount=s,rk(t)&&(o=0,s=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(r,o,s,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:o,_stacked:s,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),h=a.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,m=jC(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,v=t+n,y=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<y;++x){const n=e[x],f=g?n:{};if(x<t||x>=v){f.skip=!0;continue}const y=this.getParsed(x),w=eC(y[d]),S=f[h]=a.getPixelForValue(y[h],x),_=f[d]=i||w?o.getBasePixel():o.getPixelForValue(s?this.applyStack(o,y,s):y[d],x);f.skip=isNaN(S)||isNaN(_)||w,f.stop=x>0&&Math.abs(y[h]-b[h])>m,p&&(f.parsed=y,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":r)),g||this.updateElement(n,x,f,r),b=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,Oe.A)(yA,"id","line"),(0,Oe.A)(yA,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Oe.A)(yA,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class bA extends oA{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=pk(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return lN.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),a=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,r){const i="reset"===r,a=this.chart,o=a.options.animation,s=this._cachedMeta.rScale,l=s.xCenter,c=s.yCenter,u=s.getIndexAngle(0)-.5*SC;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,r,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,r,f),m=a.getDataVisibility(h)?s.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(o.animateScale&&(m=0),o.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":r)};this.updateElement(t,h,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?OC(this.resolveDataElementOptions(e,t).angle||n):0}}(0,Oe.A)(bA,"id","polarArea"),(0,Oe.A)(bA,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Oe.A)(bA,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const a=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class xA extends vA{}(0,Oe.A)(xA,"id","pie"),(0,Oe.A)(xA,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class wA extends oA{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return lN.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const a={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,a="reset"===r;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":r),s=i.getPointPositionForValue(o,this.getParsed(o).r),l=a?i.xCenter:s.x,c=a?i.yCenter:s.y,u={x:l,y:c,angle:s.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,r)}}}(0,Oe.A)(wA,"id","radar"),(0,Oe.A)(wA,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Oe.A)(wA,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class SA extends oA{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,a=this.getParsed(e),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y);return{label:n[e]||"",value:"("+o+", "+s+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:a}=nk(t,n,r);if(this._drawStart=i,this._drawCount=a,rk(t)&&(i=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:a}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:o,_stacked:s,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=a.axis,f=o.axis,{spanGaps:p,segment:m}=this.options,g=jC(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let y=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=v?t:{},p=eC(n[f]),x=c[d]=a.getPixelForValue(n[d],b),w=c[f]=i||p?o.getBasePixel():o.getPixelForValue(s?this.applyStack(o,n,s):n[f],b);c.skip=isNaN(x)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[d]-y[d])>g,m&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":r)),v||this.updateElement(t,b,c,r),y=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,a)/2}}(0,Oe.A)(SA,"id","scatter"),(0,Oe.A)(SA,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Oe.A)(SA,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function _A(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class EA{static override(e){Object.assign(EA.prototype,e)}constructor(e){(0,Oe.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return _A()}parse(){return _A()}format(){return _A()}add(){return _A()}diff(){return _A()}startOf(){return _A()}endOf(){return _A()}}var CA=EA;function kA(e,t,n,r){const{controller:i,data:a,_sorted:o}=e,s=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(s&&t===s.axis&&"r"!==t&&o&&a.length){const o=s._reversePixels?YC:KC;if(!r){const r=o(a,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,a=n.slice(0,r.lo+1).reverse().findIndex(e=>!eC(e[t.axis]));r.lo-=Math.max(0,a);const o=n.slice(r.hi).findIndex(e=>!eC(e[t.axis]));r.hi+=Math.max(0,o)}return r}if(i._sharedOptions){const e=a[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=o(a,t,n-r),i=o(a,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:a.length-1}}function NA(e,t,n,r,i){const a=e.getSortedVisibleDatasetMetas(),o=n[t];for(let s=0,l=a.length;s<l;++s){const{index:e,data:n}=a[s],{lo:l,hi:c}=kA(a[s],t,o,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function AA(e,t,n,r,i){const a=[];if(!i&&!e.isPointInArea(t))return a;return NA(e,n,t,function(n,o,s){(i||Tk(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:o,index:s})},!0),a}function TA(e,t,n,r,i,a){let o=[];const s=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,a=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}(n);let l=Number.POSITIVE_INFINITY;return NA(e,n,t,function(n,c,u){const h=n.inRange(t.x,t.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!a||e.isPointInArea(d))&&!h)return;const f=s(t,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})}),o}function IA(e,t,n,r,i,a){return a||e.isPointInArea(t)?"r"!==n||r?TA(e,t,n,r,i,a):function(e,t,n,r){let i=[];return NA(e,n,t,function(e,n,a){const{startAngle:o,endAngle:s}=e.getProps(["startAngle","endAngle"],r),{angle:l}=BC(e,{x:t.x,y:t.y});VC(l,o,s)&&i.push({element:e,datasetIndex:n,index:a})}),i}(e,t,n,i):[]}function DA(e,t,n,r,i){const a=[],o="x"===n?"inXRange":"inYRange";let s=!1;return NA(e,n,t,(e,r,l)=>{e[o]&&e[o](t[n],i)&&(a.push({element:e,datasetIndex:r,index:l}),s=s||e.inRange(t.x,t.y,i))}),r&&!s?[]:a}var RA={evaluateInteractionItems:NA,modes:{index(e,t,n,r){const i=SN(t,e),a=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?AA(e,i,a,r,o):IA(e,i,a,!1,r,o),l=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=s[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=SN(t,e),a=n.axis||"xy",o=n.includeInvisible||!1;let s=n.intersect?AA(e,i,a,r,o):IA(e,i,a,!1,r,o);if(s.length>0){const t=s[0].datasetIndex,n=e.getDatasetMeta(t).data;s=[];for(let e=0;e<n.length;++e)s.push({element:n[e],datasetIndex:t,index:e})}return s},point:(e,t,n,r)=>AA(e,SN(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=SN(t,e),a=n.axis||"xy",o=n.includeInvisible||!1;return IA(e,i,a,n.intersect,r,o)},x:(e,t,n,r)=>DA(e,SN(t,e),"x",n.intersect,r),y:(e,t,n,r)=>DA(e,SN(t,e),"y",n.intersect,r)}};const PA=["left","top","right","bottom"];function jA(e,t){return e.filter(e=>e.pos===t)}function LA(e,t){return e.filter(e=>-1===PA.indexOf(e.pos)&&e.box.axis===t)}function OA(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function MA(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!PA.includes(r))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let a,o,s;for(a=0,o=e.length;a<o;++a){s=e[a];const{fullSize:o}=s.box,l=n[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*r:o&&t.availableWidth,s.height=i):(s.width=r,s.height=c?c*i:o&&t.availableHeight)}return n}function FA(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function BA(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function UA(e,t,n,r){const{pos:i,box:a}=n,o=e.maxPadding;if(!nC(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?a.height:a.width),n.size=t.size/t.count,e[i]+=n.size}a.getPadding&&BA(o,a.getPadding());const s=Math.max(0,t.outerWidth-FA(o,e,"left","right")),l=Math.max(0,t.outerHeight-FA(o,e,"top","bottom")),c=s!==e.w,u=l!==e.h;return e.w=s,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function zA(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function WA(e,t,n,r){const i=[];let a,o,s,l,c,u;for(a=0,o=e.length,c=0;a<o;++a){s=e[a],l=s.box,l.update(s.width||t.w,s.height||t.h,zA(s.horizontal,t));const{same:o,other:h}=UA(t,n,s,r);c|=o&&i.length,u=u||h,l.fullSize||i.push(s)}return c&&WA(i,t,n,r)||u}function VA(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function HA(e,t,n,r){const i=n.padding;let{x:a,y:o}=t;for(const s of e){const e=s.box,l=r[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const r=t.w*c,a=l.size||e.height;bC(l.start)&&(o=l.start),e.fullSize?VA(e,i.left,o,n.outerWidth-i.right-i.left,a):VA(e,t.left+l.placed,o,r,a),l.start=o,l.placed+=r,o=e.bottom}else{const r=t.h*c,o=l.size||e.width;bC(l.start)&&(a=l.start),e.fullSize?VA(e,a,i.top,o,n.outerHeight-i.bottom-i.top):VA(e,a,t.top+l.placed,o,r),l.start=a,l.placed+=r,a=e.right}}t.x=a,t.y=o}var qA={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=qk(e.options.layout.padding),a=Math.max(t-i.width,0),o=Math.max(n-i.height,0),s=function(e){const t=function(e){const t=[];let n,r,i,a,o,s;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:a,options:{stack:o,stackWeight:s=1}}=i),t.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&a+o,stackWeight:s});return t}(e),n=OA(t.filter(e=>e.box.fullSize),!0),r=OA(jA(t,"left"),!0),i=OA(jA(t,"right")),a=OA(jA(t,"top"),!0),o=OA(jA(t,"bottom")),s=LA(t,"x"),l=LA(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(l).concat(o).concat(s),chartArea:jA(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:a.concat(o).concat(s)}}(e.boxes),l=s.vertical,c=s.horizontal;lC(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);BA(d,qk(r));const f=Object.assign({maxPadding:d,w:a,h:o,x:i.left,y:i.top},i),p=MA(l.concat(c),h);WA(s.fullSize,f,h,p),WA(l,f,h,p),WA(c,f,h,p)&&WA(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),HA(s.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,HA(s.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},lC(s.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class GA{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class KA extends GA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const YA="$chartjs",XA={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},QA=e=>null===e||""===e;const $A=!!kN&&{passive:!0};function JA(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,$A)}function ZA(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function eT(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||ZA(n.addedNodes,r),t=t&&!ZA(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function tT(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||ZA(n.removedNodes,r),t=t&&!ZA(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const nT=new Map;let rT=0;function iT(){const e=window.devicePixelRatio;e!==rT&&(rT=e,nT.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function aT(e,t,n){const r=e.canvas,i=r&&vN(r);if(!i)return;const a=ZC((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),o=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||a(n,r)});return o.observe(i),function(e,t){nT.size||window.addEventListener("resize",iT),nT.set(e,t)}(e,a),o}function oT(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){nT.delete(e),nT.size||window.removeEventListener("resize",iT)}(e)}function sT(e,t,n){const r=e.canvas,i=ZC(t=>{null!==e.ctx&&n(function(e,t){const n=XA[e.type]||e.type,{x:r,y:i}=SN(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,$A)}(r,t,i),i}class lT extends GA{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[YA]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",QA(i)){const t=NN(e,"width");void 0!==t&&(e.width=t)}if(QA(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=NN(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[YA])return!1;const n=t[YA].initial;["height","width"].forEach(e=>{const r=n[e];eC(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[YA],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:eT,detach:tT,resize:aT}[t]||sT;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:oT,detach:oT,resize:oT}[t]||JA)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return EN(e,t,n,r)}isAttached(e){const t=e&&vN(e);return!(!t||!t.isConnected)}}class cT{constructor(){(0,Oe.A)(this,"x",void 0),(0,Oe.A)(this,"y",void 0),(0,Oe.A)(this,"active",!1),(0,Oe.A)(this,"options",void 0),(0,Oe.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return jC(this.x)&&jC(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function uT(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],o=a.length,s=a[0],l=a[o-1],c=[];if(o>i)return function(e,t,n,r){let i,a=0,o=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===o&&(t.push(e[i]),a++,o=n[a*r])}(t,c,a,o/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const a=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let o=0,s=a.length-1;o<s;o++){const e=a[o];if(e>i)return e}return Math.max(i,1)}(a,t,i);if(o>0){let e,n;const r=o>1?Math.round((l-s)/(o-1)):null;for(hT(t,c,u,eC(r)?0:s-r,s),e=0,n=o-1;e<n;e++)hT(t,c,u,a[e],a[e+1]);return hT(t,c,u,l,eC(r)?t.length:l+r),c}return hT(t,c,u),c}function hT(e,t,n,r,i){const a=aC(r,0),o=Math.min(aC(i,e.length),e.length);let s,l,c,u=0;for(n=Math.ceil(n),i&&(s=i-r,n=s/Math.floor(s/n)),c=a;c<0;)u++,c=Math.round(a+u*n);for(l=Math.max(a,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(a+u*n))}(0,Oe.A)(cT,"defaults",{}),(0,Oe.A)(cT,"defaultRoutes",void 0);const dT=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,fT=(e,t)=>Math.min(t||e,e);function pT(e,t){const n=[],r=e.length/t,i=e.length;let a=0;for(;a<i;a+=r)n.push(e[Math.floor(a)]);return n}function mT(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),a=e._startPixel,o=e._endPixel,s=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-a,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<a-s||c>o+s)))return c}function gT(e){return e.drawTicks?e.tickLength:0}function vT(e,t){if(!e.display)return 0;const n=Gk(e.font,t),r=qk(e.padding);return(tC(e.text)?e.text.length:1)*n.lineHeight+r.height}function yT(e,t,n){let r=ek(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class bT extends cT{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=iC(e,Number.POSITIVE_INFINITY),t=iC(t,Number.NEGATIVE_INFINITY),n=iC(n,Number.POSITIVE_INFINITY),r=iC(r,Number.NEGATIVE_INFINITY),{min:iC(e,n),max:iC(t,r),minDefined:rC(e),maxDefined:rC(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();if(i&&a)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let s=0,l=o.length;s<l;++s)t=o[s].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),a||(r=Math.max(r,t.max));return n=a&&n>r?r:n,r=i&&n>r?n:r,{min:iC(n,iC(r,n)),max:iC(r,iC(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){sC(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,a=oC(t,(i-r)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(r,-Math.abs(a)),max:o(i,a)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=o<this.ticks.length;this._convertTicksToLabels(s?pT(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=uT(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){sC(this.options.afterUpdate,[this])}beforeSetDimensions(){sC(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){sC(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),sC(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){sC(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=sC(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){sC(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){sC(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=fT(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let a,o,s,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=HC(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/n:d/(n-1),u+6>a&&(a=d/(n-(e.offset?.5:1)),o=this.maxHeight-gT(e.grid)-t.padding-vT(e.title,this.chart.options.font),s=Math.sqrt(u*u+h*h),l=MC(Math.min(Math.asin(HC((c.highest.height+6)/a,-1,1)),Math.asin(HC(o/s,-1,1))-Math.asin(HC(h/s,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){sC(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){sC(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const a=vT(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=gT(i)+a):(e.height=this.maxHeight,e.width=gT(i)+a),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:a}=this._getLabelSizes(),s=2*n.padding,l=OC(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*i.width+c*a.height;e.height=Math.min(this.maxHeight,e.height+t+s)}else{const t=n.mirror?0:c*i.width+u*a.height;e.width=Math.min(this.maxWidth,e.width+t+s)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:a},position:o}=this.options,s=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;s?l?(u=r*e.width,h=n*t.height):(u=n*e.height,h=r*t.width):"start"===i?h=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-o+a)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+a)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+a,this.paddingBottom=r+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){sC(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)eC(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=pT(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,a=[],o=[],s=Math.floor(t/fT(t,n));let l,c,u,h,d,f,p,m,g,v,y,b=0,x=0;for(l=0;l<t;l+=s){if(h=e[l].label,d=this._resolveTickFontOptions(l),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},m=d.lineHeight,g=v=0,eC(h)||tC(h)){if(tC(h))for(c=0,u=h.length;c<u;++c)y=h[c],eC(y)||tC(y)||(g=_k(r,p.data,p.gc,g,y),v+=m)}else g=_k(r,p.data,p.gc,g,h),v=m;a.push(g),o.push(v),b=Math.max(g,b),x=Math.max(v,x)}!function(e,t){lC(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(i,t);const w=a.indexOf(b),S=o.indexOf(x),_=e=>({width:a[e]||0,height:o[e]||0});return{first:_(0),last:_(t-1),widest:_(w),highest:_(S),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return HC(this._alignToPixels?Ck(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Yk(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return Yk(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=OC(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,s=i?i.highest.height+a:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:a,border:o}=r,s=i.offset,l=this.isHorizontal(),c=this.ticks.length+(s?1:0),u=gT(i),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,m=function(e){return Ck(n,e,f)};let g,v,y,b,x,w,S,_,E,C,k,N;if("top"===a)g=m(this.bottom),w=this.bottom-u,_=g-p,C=m(e.top)+p,N=e.bottom;else if("bottom"===a)g=m(this.top),C=e.top,N=m(e.bottom)-p,w=g+p,_=this.top+u;else if("left"===a)g=m(this.right),x=this.right-u,S=g-p,E=m(e.left)+p,k=e.right;else if("right"===a)g=m(this.left),E=e.left,k=m(e.right)-p,x=g+p,S=this.left+u;else if("x"===t){if("center"===a)g=m((e.top+e.bottom)/2+.5);else if(nC(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}C=e.top,N=e.bottom,w=g+p,_=w+u}else if("y"===t){if("center"===a)g=m((e.left+e.right)/2);else if(nC(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}x=g-p,S=x-u,E=e.left,k=e.right}const A=aC(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/A));for(v=0;v<c;v+=T){const e=this.getContext(v),t=i.setContext(e),r=o.setContext(e),a=t.lineWidth,c=t.color,u=r.dash||[],d=r.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=mT(this,v,s),void 0!==y&&(b=Ck(n,y,a),l?x=S=E=k=b:w=_=C=N=b,h.push({tx1:x,ty1:w,tx2:S,ty2:_,x1:E,y1:C,x2:k,y2:N,width:a,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,a=this.isHorizontal(),o=this.ticks,{align:s,crossAlign:l,padding:c,mirror:u}=i,h=gT(n.grid),d=h+c,f=u?-c:d,p=-OC(this.labelRotation),m=[];let g,v,y,b,x,w,S,_,E,C,k,N,A="middle";if("top"===r)w=this.bottom-f,S=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,S=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);S=e.textAlign,x=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);S=e.textAlign,x=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+d;else if(nC(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+d}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)x=(e.left+e.right)/2-d;else if(nC(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===s?A="top":"end"===s&&(A="bottom"));const T=this._getLabelSizes();for(g=0,v=o.length;g<v;++g){y=o[g],b=y.label;const e=i.setContext(this.getContext(g));_=this.getPixelForTick(g)+i.labelOffset,E=this._resolveTickFontOptions(g),C=E.lineHeight,k=tC(b)?b.length:1;const t=k/2,n=e.color,s=e.textStrokeColor,c=e.textStrokeWidth;let h,d=S;if(a?(x=_,"inner"===S&&(d=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),N="top"===r?"near"===l||0!==p?-k*C+C/2:"center"===l?-T.highest.height/2-t*C+C:-T.highest.height+C/2:"near"===l||0!==p?C/2:"center"===l?T.highest.height/2-t*C:T.highest.height-k*C,u&&(N*=-1),0===p||e.showLabelBackdrop||(x+=C/2*Math.sin(p))):(w=_,N=(1-k)*C/2),e.showLabelBackdrop){const t=qk(e.backdropPadding),n=T.heights[g],r=T.widths[g];let i=N-t.top,a=0-t.left;switch(A){case"middle":i-=n/2;break;case"bottom":i-=n}switch(S){case"center":a-=r/2;break;case"right":a-=r;break;case"inner":g===v-1?a-=r:g>0&&(a-=r/2)}h={left:a,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:E,textOffset:N,options:{rotation:p,color:n,strokeColor:s,strokeWidth:c,textAlign:d,textBaseline:A,translation:[x,w],backdrop:h}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-OC(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,a=e+i,o=this._getLabelSizes().widest.width;let s,l;return"left"===t?r?(l=this.right+i,"near"===n?s="left":"center"===n?(s="center",l+=o/2):(s="right",l+=o)):(l=this.right-a,"near"===n?s="right":"center"===n?(s="center",l-=o/2):(s="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?s="right":"center"===n?(s="center",l-=o/2):(s="left",l-=o)):(l=this.left+a,"near"===n?s="left":"center"===n?(s="center",l+=o/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,a=r.length;i<a;++i){const e=r[i];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),a=n.display?i.width:0;if(!a)return;const o=r.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Ck(e,this.left,a)-a/2,c=Ck(e,this.right,o)+o/2,u=h=s):(u=Ck(e,this.top,a)-a/2,h=Ck(e,this.bottom,o)+o/2,l=c=s),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Ik(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;Ok(t,i.label,0,i.textOffset,n,e)}n&&Dk(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=Gk(n.font),a=qk(n.padding),o=n.align;let s=i.lineHeight/2;"bottom"===t||"center"===t||nC(t)?(s+=a.bottom,tC(n.text)&&(s+=i.lineHeight*(n.text.length-1))):s+=a.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,r){const{top:i,left:a,bottom:o,right:s,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const m=o-i,g=s-a;if(e.isHorizontal()){if(d=tk(r,a,s),nC(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:dT(e,n,t);h=s-a}else{if(nC(n)){const e=Object.keys(n)[0],r=n[e];d=u[e].getPixelForValue(r)-g+t}else d="center"===n?(c.left+c.right)/2-g+t:dT(e,n,t);f=tk(r,o,i),p="left"===n?-NC:NC}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,s,t,o);Ok(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:yT(o,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=aC(e.grid&&e.grid.z,-1),r=aC(e.border&&e.border.z,0);return this._isVisible()&&this.draw===bT.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,a;for(i=0,a=t.length;i<a;++i){const a=t[i];a[n]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return Gk(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class xT{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=fC(Object.create(null),[n?Sk.get(n):{},Sk.get(t),e.defaults]);Sk.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),a=[e].concat(r).join("."),o=t[n].split("."),s=o.pop(),l=o.join(".");Sk.route(a,i,l,s)})}(t,e.defaultRoutes);e.descriptors&&Sk.describe(t,e.descriptors)}(e,a,n),this.override&&Sk.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Sk[r]&&(delete Sk[r][n],this.override&&delete vk[n])}}class wT{constructor(){this.controllers=new xT(oA,"datasets",!0),this.elements=new xT(cT,"elements"),this.plugins=new xT(Object,"plugins"),this.scales=new xT(bT,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):lC(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=yC(e);sC(n["before"+r],[],n),t[e](n),sC(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var ST=new wT;class _T{constructor(){this._init=void 0}notify(e,t,n,r){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===sC(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){eC(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=aC(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(ST.plugins.items);for(let a=0;a<r.length;a++)n.push(ST.getPlugin(r[a]));const i=e.plugins||[];for(let a=0;a<i.length;a++){const e=i[a];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:a}=t;const o=[],s=e.getContext();for(const l of i){const t=l.id,i=ET(n[t],r);null!==i&&o.push({plugin:l,options:CT(e.config,{plugin:l,local:a[t]},i,s)})}return o}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function ET(e,t){return t||!1!==e?!0===e?{}:e:null}function CT(e,t,n,r){let{plugin:i,local:a}=t;const o=e.pluginScopeKeys(i),s=e.getOptionScopes(n,o);return a&&i.defaults&&s.push(i.defaults),e.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kT(e,t){const n=Sk.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function NT(e){if("x"===e||"y"===e||"r"===e)return e}function AT(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function TT(e){if(NT(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||AT(i.position)||e.length>1&&NT(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function IT(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function DT(e,t){const n=vk[e.type]||{scales:{}},r=t.scales||{},i=kT(e.type,t),a=Object.create(null);return Object.keys(r).forEach(t=>{const o=r[t];if(!nC(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const s=TT(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return IT(e,"x",n[0])||IT(e,"y",n[0])}return{}}(t,e),Sk.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(s,i),c=n.scales||{};a[t]=pC(Object.create(null),[{axis:s},o,c[s],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,o=n.indexAxis||kT(i,t),s=(vk[i]||{}).scales||{};Object.keys(s).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),i=n[t+"AxisID"]||t;a[i]=a[i]||Object.create(null),pC(a[i],[{axis:t},r[i],s[e]])})}),Object.keys(a).forEach(e=>{const t=a[e];pC(t,[Sk.scales[t.type],Sk.scale])}),a}function RT(e){const t=e.options||(e.options={});t.plugins=aC(t.plugins,{}),t.scales=DT(e,t)}function PT(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const jT=new Map,LT=new Set;function OT(e,t){let n=jT.get(e);return n||(n=t(),jT.set(e,n),LT.add(n)),n}const MT=(e,t,n)=>{const r=vC(t,n);void 0!==r&&e.add(r)};class FT{constructor(e){this._config=function(e){return(e=e||{}).data=PT(e.data),RT(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),RT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return OT(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return OT("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return OT("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return OT("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,a=this._cachedScopes(e,n),o=a.get(t);if(o)return o;const s=new Set;t.forEach(t=>{e&&(s.add(e),t.forEach(t=>MT(s,e,t))),t.forEach(e=>MT(s,r,e)),t.forEach(e=>MT(s,vk[i]||{},e)),t.forEach(e=>MT(s,Sk,e)),t.forEach(e=>MT(s,yk,e))});const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),LT.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,vk[t]||{},Sk.datasets[t]||{},{type:t},Sk,yk]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:a,subPrefixes:o}=BT(this._resolverCache,e,r);let s=a;if(function(e,t){const{isScriptable:n,isIndexable:r}=$k(e);for(const i of t){const t=n(i),a=r(i),o=(a||t)&&e[i];if(t&&(xC(o)||UT(o))||a&&tC(o))return!0}return!1}(a,t)){i.$shared=!1;s=Qk(a,n=xC(n)?n():n,this.createResolver(e,n,o))}for(const l of t)i[l]=s[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=BT(this._resolverCache,e,n);return nC(t)?Qk(i,t,void 0,r):i}}function BT(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let a=r.get(i);if(!a){a={resolver:Xk(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,a)}return a}const UT=e=>nC(e)&&Object.getOwnPropertyNames(e).some(t=>xC(e[t]));const zT=["top","bottom","left","right","chartArea"];function WT(e,t){return"top"===e||"bottom"===e||-1===zT.indexOf(e)&&"x"===t}function VT(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function HT(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),sC(n&&n.onComplete,[e],t)}function qT(e){const t=e.chart,n=t.options.animation;sC(n&&n.onProgress,[e],t)}function GT(e){return gN()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const KT={},YT=e=>{const t=GT(e);return Object.values(KT).filter(e=>e.canvas===t).pop()};function XT(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const a=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=a)}}}class QT{static register(){ST.add(...arguments),$T()}static unregister(){ST.remove(...arguments),$T()}constructor(e,t){const n=this.config=new FT(t),r=GT(e),i=YT(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!gN()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?KA:lT}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,a.aspectRatio),s=o&&o.canvas,l=s&&s.height,c=s&&s.width;this.id=ZE(),this.ctx=o,this.canvas=s,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _T,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}(e=>this.update(e),a.resizeDelay||0),this._dataChanges=[],KT[this.id]=this,o&&s?(HN.listen(this,"complete",HT),HN.listen(this,"progress",qT),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return eC(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ST}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():CN(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return kk(this.canvas,this.ctx),this}stop(){return HN.stop(this),this}resize(e,t){HN.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,CN(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),sC(n.onResize,[this,a],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){lC(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=TT(e,n),i="r"===r,a="x"===r;return{options:n,dposition:i?"chartArea":a?"bottom":"left",dtype:i?"radialLinear":a?"category":"linear"}}))),lC(i,t=>{const i=t.options,a=i.id,o=TT(a,i),s=aC(i.type,t.dtype);void 0!==i.position&&WT(i.position,o)===WT(t.dposition)||(i.position=t.dposition),r[a]=!0;let l=null;if(a in n&&n[a].type===s)l=n[a];else{l=new(ST.getScale(s))({id:a,type:s,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)}),lC(r,(e,t)=>{e||delete n[t]}),lC(n,e=>{qA.configure(this,e,e.options),qA.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(VT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const a=r.type||this.config.type;if(i.type&&i.type!==a&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=a,i.indexAxis=r.indexAxis||kT(a,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=ST.getController(a),{datasetElementType:r,dataElementType:o}=Sk.datasets[a];Object.assign(t,{dataElementType:ST.getElement(o),datasetElementType:r&&ST.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){lC(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||lC(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(VT("z","_idx"));const{_active:o,_lastEvent:s}=this;s?this._eventHandler(s,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){lC(this.scales,e=>{qA.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);wC(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){XT(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let i=1;i<t;i++)if(!wC(r,n(i)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;qA.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],lC(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,xC(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(HN.has(this)?this.attached&&!HN.running(this)&&HN.start(this):(this.draw(),HT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=WN(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Ik(t,r),e.controller.draw(),r&&Dk(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Tk(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=RA.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Yk(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,r);bC(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),HN.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),kk(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete KT[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};lC(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){lC(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},lC(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,a,o,s;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,s=e.length;o<s;++o){a=e[o];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!cC(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),a=i(t,e),o=n?e:i(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,a=t,o=this._getActiveElements(e,r,n,a),s=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,s);n&&(this._lastEvent=null,sC(i.onHover,[e,o,this],this),s&&sC(i.onClick,[e,o,this],this));const c=!cC(o,r);return(c||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function $T(){return lC(QT.instances,e=>e._plugins.invalidate())}function JT(e,t,n,r){const i=Wk(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const a=(n-t)/2,o=Math.min(a,r*t/2),s=e=>{const t=(n-Math.min(a,e))*r/2;return HC(e,0,Math.min(a,t))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:HC(i.innerStart,0,o),innerEnd:HC(i.innerEnd,0,o)}}function ZT(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function eI(e,t,n,r,i,a){const{x:o,y:s,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(h>0?h-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*h-n/SC)/h)/2,g=l+m+f,v=i-m-f,{outerStart:y,outerEnd:b,innerStart:x,innerEnd:w}=JT(t,d,h,v-g),S=h-y,_=h-b,E=g+y/S,C=v-b/_,k=d+x,N=d+w,A=g+x/k,T=v-w/N;if(e.beginPath(),a){const t=(E+C)/2;if(e.arc(o,s,h,E,t),e.arc(o,s,h,t,C),b>0){const t=ZT(_,C,o,s);e.arc(t.x,t.y,b,C,v+NC)}const n=ZT(N,v,o,s);if(e.lineTo(n.x,n.y),w>0){const t=ZT(N,T,o,s);e.arc(t.x,t.y,w,v+NC,T+Math.PI)}const r=(v-w/d+(g+x/d))/2;if(e.arc(o,s,d,v-w/d,r,!0),e.arc(o,s,d,r,g+x/d,!0),x>0){const t=ZT(k,A,o,s);e.arc(t.x,t.y,x,A+Math.PI,g-NC)}const i=ZT(S,g,o,s);if(e.lineTo(i.x,i.y),y>0){const t=ZT(S,E,o,s);e.arc(t.x,t.y,y,g-NC,E)}}else{e.moveTo(o,s);const t=Math.cos(E)*h+o,n=Math.sin(E)*h+s;e.lineTo(t,n);const r=Math.cos(C)*h+o,i=Math.sin(C)*h+s;e.lineTo(r,i)}e.closePath()}function tI(e,t,n,r,i){const{fullCircles:a,startAngle:o,circumference:s,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(a){eI(e,t,n,r,m,i);for(let t=0;t<a;++t)e.stroke();isNaN(s)||(m=o+(s%_C||_C))}p&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:a,y:o,outerRadius:s,innerRadius:l}=t;let c=i/s;e.beginPath(),e.arc(a,o,s,r-c,n+c),l>i?(c=i/l,e.arc(a,o,l,n+c,r-c,!0)):e.arc(a,o,i,n+NC,r-NC),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-o>=SC&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:r,x:i,y:a,outerRadius:o,innerRadius:s,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,WC(r-n));if(e.beginPath(),e.arc(i,a,o-c/2,r+h/2,n-h/2),s>0){const t=Math.min(c/s,WC(r-n));e.arc(i,a,s+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,o*WC(r-n));if("round"===u)e.arc(i,a,t,n-SC/2,r+SC/2,!0);else if("bevel"===u){const o=2*t*t,s=-o*Math.cos(n+SC/2)+i,l=-o*Math.sin(n+SC/2)+a,c=o*Math.cos(r+SC/2)+i,u=o*Math.sin(r+SC/2)+a;e.lineTo(s,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),a||(eI(e,t,n,r,m,i),e.stroke())}(0,Oe.A)(QT,"defaults",Sk),(0,Oe.A)(QT,"instances",KT),(0,Oe.A)(QT,"overrides",vk),(0,Oe.A)(QT,"registry",ST),(0,Oe.A)(QT,"version","4.5.1"),(0,Oe.A)(QT,"getChart",YT);class nI extends cT{constructor(e){super(),(0,Oe.A)(this,"circumference",void 0),(0,Oe.A)(this,"endAngle",void 0),(0,Oe.A)(this,"fullCircles",void 0),(0,Oe.A)(this,"innerRadius",void 0),(0,Oe.A)(this,"outerRadius",void 0),(0,Oe.A)(this,"pixelMargin",void 0),(0,Oe.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:a}=BC(r,{x:e,y:t}),{startAngle:o,endAngle:s,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=aC(u,s-o),f=VC(i,o,s)&&o!==s,p=d>=_C||f,m=qC(a,l+h,c+h);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:s,spacing:l}=this.options,c=(r+i)/2,u=(a+o+l+s)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>_C?Math.floor(n/_C):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);const s=r*(1-Math.sin(Math.min(SC,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:a,startAngle:o,circumference:s}=t;let l=t.endAngle;if(a){eI(e,t,n,r,l,i);for(let t=0;t<a;++t)e.fill();isNaN(s)||(l=o+(s%_C||_C))}eI(e,t,n,r,l,i),e.fill()}(e,this,s,i,a),tI(e,this,s,i,a),e.restore()}}function rI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=aC(n.borderCapStyle,t.borderCapStyle),e.setLineDash(aC(n.borderDash,t.borderDash)),e.lineDashOffset=aC(n.borderDashOffset,t.borderDashOffset),e.lineJoin=aC(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=aC(n.borderWidth,t.borderWidth),e.strokeStyle=aC(n.borderColor,t.borderColor)}function iI(e,t,n){e.lineTo(n.x,n.y)}function aI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:a=r-1}=n,{start:o,end:s}=t,l=Math.max(i,o),c=Math.min(a,s),u=i<o&&a<o||i>s&&a>s;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function oI(e,t,n,r){const{points:i,options:a}=t,{count:o,start:s,loop:l,ilen:c}=aI(i,n,r),u=function(e){return e.stepped?Rk:e.tension||"monotone"===e.cubicInterpolationMode?Pk:iI}(a);let h,d,f,{move:p=!0,reverse:m}=r||{};for(h=0;h<=c;++h)d=i[(s+(m?c-h:h))%o],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,m,a.stepped),f=d);return l&&(d=i[(s+(m?c:0))%o],u(e,f,d,m,a.stepped)),!!l}function sI(e,t,n,r){const i=t.points,{count:a,start:o,ilen:s}=aI(i,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,f,p,m,g=0,v=0;const y=e=>(o+(c?s-e:e))%a,b=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(h=i[y(0)],e.moveTo(h.x,h.y)),u=0;u<=s;++u){if(h=i[y(u)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<f?f=n:n>p&&(p=n),g=(v*g+t)/++v):(b(),e.lineTo(t,n),d=r,v=0,f=p=n),m=n}b()}function lI(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?sI:oI}(0,Oe.A)(nI,"id","arc"),(0,Oe.A)(nI,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,Oe.A)(nI,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Oe.A)(nI,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const cI="function"===typeof Path2D;function uI(e,t,n,r){cI&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),rI(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:a}=t,o=lI(t);for(const s of i)rI(e,a,s.style),e.beginPath(),o(e,t,s,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class hI extends cT{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;mN(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const a=!!e._loop,{start:o,end:s}=function(e,t,n,r){let i=0,a=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(a+=i);a>i&&e[a%t].skip;)a--;return a%=t,{start:i,end:a}}(n,i,a,r);return FN(e,!0===r?[{start:o,end:s,loop:a}]:function(e,t,n,r){const i=e.length,a=[];let o,s=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%i];n.skip||n.stop?l.skip||(r=!1,a.push({start:t%i,end:(o-1)%i,loop:r}),t=s=n.stop?o:null):(s=o,l.skip&&(t=o)),l=n}return null!==s&&a.push({start:t%i,end:s%i,loop:r}),a}(n,o,s<o?s+i:s,!!e._fullLoop&&0===o&&s===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,a=MN(this,{property:t,start:r,end:r});if(!a.length)return;const o=[],s=function(e){return e.stepped?TN:e.tension||"monotone"===e.cubicInterpolationMode?IN:AN}(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:c,end:u}=a[l],h=i[c],d=i[u];if(h===d){o.push(h);continue}const f=s(h,d,Math.abs((r-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return lI(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=lI(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const o of r)a&=i(e,this,o,{start:t,end:t+n-1});return!!a}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),uI(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function dI(e,t,n,r){const i=e.options,{[n]:a}=e.getProps([n],r);return Math.abs(t-a)<i.radius+i.hitRadius}(0,Oe.A)(hI,"id","line"),(0,Oe.A)(hI,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Oe.A)(hI,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Oe.A)(hI,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class fI extends cT{constructor(e){super(),(0,Oe.A)(this,"parsed",void 0),(0,Oe.A)(this,"skip",void 0),(0,Oe.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:a}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return dI(this,e,"x",t)}inYRange(e,t){return dI(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Tk(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Nk(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function pI(e,t){const{x:n,y:r,base:i,width:a,height:o}=e.getProps(["x","y","base","width","height"],t);let s,l,c,u,h;return e.horizontal?(h=o/2,s=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=a/2,s=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:s,top:c,right:l,bottom:u}}function mI(e,t,n,r){return e?0:HC(t,n,r)}function gI(e){const t=pI(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,a=Vk(r);return{t:mI(i.top,a.top,0,n),r:mI(i.right,a.right,0,t),b:mI(i.bottom,a.bottom,0,n),l:mI(i.left,a.left,0,t)}}(e,n/2,r/2),a=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,a=Hk(i),o=Math.min(t,n),s=e.borderSkipped,l=r||nC(i);return{topLeft:mI(!l||s.top||s.left,a.topLeft,0,o),topRight:mI(!l||s.top||s.right,a.topRight,0,o),bottomLeft:mI(!l||s.bottom||s.left,a.bottomLeft,0,o),bottomRight:mI(!l||s.bottom||s.right,a.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:a},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function vI(e,t,n,r){const i=null===t,a=null===n,o=e&&!(i&&a)&&pI(e,r);return o&&(i||qC(t,o.left,o.right))&&(a||qC(n,o.top,o.bottom))}function yI(e,t){e.rect(t.x,t.y,t.w,t.h)}function bI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+a,h:e.h+o,radius:e.radius}}(0,Oe.A)(fI,"id","point"),(0,Oe.A)(fI,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Oe.A)(fI,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class xI extends cT{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:a}=gI(this),o=(s=a.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Mk:yI;var s;e.save(),a.w===i.w&&a.h===i.h||(e.beginPath(),o(e,bI(a,t,i)),e.clip(),o(e,bI(i,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,bI(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return vI(this,e,t,n)}inXRange(e,t){return vI(this,e,null,t)}inYRange(e,t){return vI(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,Oe.A)(xI,"id","bar"),(0,Oe.A)(xI,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Oe.A)(xI,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const wI=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class SI extends cT{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=sC(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=Gk(n.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:s}=wI(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,i,o,s)+10):(c=this.maxHeight,l=this._fitCols(a,r,o,s)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o;let u=e;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>a)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),s[f]={left:0,top:d,row:h,width:p,height:r},l[l.length-1]+=p+o}),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach((e,a)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const a=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(i).width}(r,e,t,n),o=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=_I(t,n));return r}(i,r,t.lineHeight);return{itemWidth:a,itemHeight:o}}(n,t,i,e,r);a>0&&d+g+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),s[a]={left:f,top:d,col:p,width:m,height:g},h=Math.max(h,m),d+=g+o}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,a=DN(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=tk(n,this.left+r,this.right-this.lineWidths[i]);for(const s of t)i!==s.row&&(i=s.row,o=tk(n,this.left+r,this.right-this.lineWidths[i])),s.top+=this.top+e+r,s.left=a.leftForLtr(a.x(o),s.width),o+=s.width+r}else{let i=0,o=tk(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const s of t)s.col!==i&&(i=s.col,o=tk(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),s.top=o,s.left+=this.left+r,s.left=a.leftForLtr(a.x(s.left),s.width),o+=s.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Ik(e,this),this._draw(),Dk(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:a}=e,o=Sk.color,s=DN(e.rtl,this.left,this.width),l=Gk(a.font),{padding:c}=a,u=l.size,h=u/2;let d;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=wI(a,u),g=this.isHorizontal(),v=this._computeTitleHeight();d=g?{x:tk(i,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:tk(i,this.top+v+c,this.bottom-t[0].height),line:0},RN(this.ctx,e.textDirection);const y=m+c;this.legendItems.forEach((b,x)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,S=s.textAlign(b.textAlign||(b.textAlign=a.textAlign)),_=f+h+w;let E=d.x,C=d.y;s.setWidth(this.width),g?x>0&&E+_+c>this.right&&(C=d.y+=y,d.line++,E=d.x=tk(i,this.left+c,this.right-n[d.line])):x>0&&C+y>this.bottom&&(E=d.x=E+t[d.line].width+c,d.line++,C=d.y=tk(i,this.top+v+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=aC(n.lineWidth,1);if(r.fillStyle=aC(n.fillStyle,o),r.lineCap=aC(n.lineCap,"butt"),r.lineDashOffset=aC(n.lineDashOffset,0),r.lineJoin=aC(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=aC(n.strokeStyle,o),r.setLineDash(aC(n.lineDash,[])),a.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=s.xPlus(e,f/2);Ak(r,o,l,t+h,a.pointStyleWidth&&f)}else{const a=t+Math.max((u-p)/2,0),o=s.leftForLtr(e,f),l=Hk(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?Mk(r,{x:o,y:a,w:f,h:p,radius:l}):r.rect(o,a,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(s.x(E),C,b),E=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(S,E+f+h,g?E+_:this.right,e.rtl),function(e,t,n){Ok(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(E),C,b),g)d.x+=_+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=_I(b,e)+c}else d.y+=y}),PN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Gk(t.font),r=qk(t.padding);if(!t.display)return;const i=DN(e.rtl,this.left,this.width),a=this.ctx,o=t.position,s=n.size/2,l=r.top+s;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=tk(e.align,u,this.right-h);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+tk(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=tk(o,u,u+h);a.textAlign=i.textAlign(ek(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,Ok(a,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=Gk(e.font),n=qk(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(qC(e,this.left,this.right)&&qC(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],qC(e,r.left,r.left+r.width)&&qC(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&sC(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&sC(t.onHover,[e,n,this],this)}else n&&sC(t.onClick,[e,n,this],this)}}function _I(e,t){return t*(e.text?e.text.length:0)}var EI={id:"legend",_element:SI,start(e,t,n){const r=e.legend=new SI({ctx:e.ctx,options:n,chart:e});qA.configure(e,r,n),qA.addBox(e,r)},stop(e){qA.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;qA.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:a,useBorderRadius:o,borderRadius:s}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=qk(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(s||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class CI extends cT{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=tC(n.text)?n.text.length:1;this._padding=qk(n.padding);const i=r*Gk(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:a}=this,o=a.align;let s,l,c,u=0;return this.isHorizontal()?(l=tk(o,n,i),c=t+e,s=i-n):("left"===a.position?(l=n+e,c=tk(o,r,t),u=-.5*SC):(l=i-e,c=tk(o,t,r),u=.5*SC),s=r-t),{titleX:l,titleY:c,maxWidth:s,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Gk(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:a,maxWidth:o,rotation:s}=this._drawArgs(r);Ok(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:s,textAlign:ek(t.align),textBaseline:"middle",translation:[i,a]})}}var kI={id:"title",_element:CI,start(e,t,n){!function(e,t){const n=new CI({ctx:e.ctx,options:t,chart:e});qA.configure(e,n,t),qA.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;qA.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;qA.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const NI={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,a=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++a}}if(0===a||0===r.size)return!1;const o=[...r].reduce((e,t)=>e+t)/r.size;return{x:o,y:i/a}},nearest(e,t){if(!e.length)return!1;let n,r,i,a=t.x,o=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=UC(t,r.getCenterPoint());e<s&&(s=e,i=r)}}if(i){const e=i.tooltipPosition();a=e.x,o=e.y}return{x:a,y:o}}};function AI(e,t){return t&&(tC(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function TI(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function II(e,t){const{element:n,datasetIndex:r,index:i}=t,a=e.getDatasetMeta(r).controller,{label:o,value:s}=a.getLabelAndValue(i);return{chart:e,label:o,parsed:a.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:s,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function DI(e,t){const n=e.chart.ctx,{body:r,footer:i,title:a}=e,{boxWidth:o,boxHeight:s}=t,l=Gk(t.bodyFont),c=Gk(t.titleFont),u=Gk(t.footerFont),h=a.length,d=i.length,f=r.length,p=qk(t.padding);let m=p.height,g=0,v=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),v){m+=f*(t.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let y=0;const b=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,lC(e.title,b),n.font=l.string,lC(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,lC(r,e=>{lC(e.before,b),lC(e.lines,b),lC(e.after,b)}),y=0,n.font=u.string,lC(e.footer,b),n.restore(),g+=p.width,{width:g,height:m}}function RI(e,t,n,r){const{x:i,width:a}=n,{width:o,chartArea:{left:s,right:l}}=e;let c="center";return"center"===r?c=i<=(s+l)/2?"left":"right":i<=a/2?c="left":i>=o-a/2&&(c="right"),function(e,t,n,r){const{x:i,width:a}=r,o=n.caretSize+n.caretPadding;return"left"===e&&i+a+o>t.width||"right"===e&&i-a-o<0||void 0}(c,e,t,n)&&(c="center"),c}function PI(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||RI(e,t,n,r),yAlign:r}}function jI(e,t,n,r){const{caretSize:i,caretPadding:a,cornerRadius:o}=e,{xAlign:s,yAlign:l}=n,c=i+a,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Hk(o);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,s);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===s?p+=c:"right"===s&&(p-=c):"left"===s?p-=Math.max(u,d)+i:"right"===s&&(p+=Math.max(h,f)+i),{x:HC(p,0,r.width-t.width),y:HC(m,0,r.height-t.height)}}function LI(e,t,n){const r=qk(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function OI(e){return AI([],TI(e))}function MI(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const FI={beforeTitle:JE,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:JE,beforeBody:JE,beforeLabel:JE,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return eC(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:JE,afterBody:JE,beforeFooter:JE,footer:JE,afterFooter:JE};function BI(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?FI[t].call(n,r):i}class UI extends cT{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new YN(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Yk(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=BI(n,"beforeTitle",this,e),i=BI(n,"title",this,e),a=BI(n,"afterTitle",this,e);let o=[];return o=AI(o,TI(r)),o=AI(o,TI(i)),o=AI(o,TI(a)),o}getBeforeBody(e,t){return OI(BI(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return lC(e,e=>{const t={before:[],lines:[],after:[]},i=MI(n,e);AI(t.before,TI(BI(i,"beforeLabel",this,e))),AI(t.lines,BI(i,"label",this,e)),AI(t.after,TI(BI(i,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return OI(BI(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=BI(n,"beforeFooter",this,e),i=BI(n,"footer",this,e),a=BI(n,"afterFooter",this,e);let o=[];return o=AI(o,TI(r)),o=AI(o,TI(i)),o=AI(o,TI(a)),o}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],a=[];let o,s,l=[];for(o=0,s=t.length;o<s;++o)l.push(II(this.chart,t[o]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),lC(l,t=>{const n=MI(e.callbacks,t);r.push(BI(n,"labelColor",this,t)),i.push(BI(n,"labelPointStyle",this,t)),a.push(BI(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(r.length){const e=NI[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const t=this._size=DI(this,n),o=Object.assign({},e,t),s=PI(this.chart,n,o),l=jI(n,o,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:s,topRight:l,bottomLeft:c,bottomRight:u}=Hk(o),{x:h,y:d}=e,{width:f,height:p}=t;let m,g,v,y,b,x;return"center"===i?(b=d+p/2,"left"===r?(m=h,g=m-a,y=b+a,x=b-a):(m=h+f,g=m+a,y=b-a,x=b+a),v=m):(g="left"===r?h+Math.max(s,c)+a:"right"===r?h+f-Math.max(l,u)-a:this.caretX,"top"===i?(y=d,b=y-a,m=g-a,v=g+a):(y=d+p,b=y+a,m=g+a,v=g-a),x=y),{x1:m,x2:g,x3:v,y1:y,y2:b,y3:x}}drawTitle(e,t,n){const r=this.title,i=r.length;let a,o,s;if(i){const l=DN(n.rtl,this.x,this.width);for(e.x=LI(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=Gk(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,s=0;s<i;++s)t.fillText(r[s],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,s+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,r,i){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:s,boxWidth:l}=i,c=Gk(i.bodyFont),u=LI(this,"left",i),h=r.x(u),d=s<c.lineHeight?(c.lineHeight-s)/2:0,f=t.y+d;if(i.usePointStyle){const t={radius:Math.min(l,s)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+s/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Nk(e,t,n,c),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Nk(e,t,n,c)}else{e.lineWidth=nC(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),o=Hk(a.borderRadius);Object.values(o).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Mk(e,{x:t,y:f,w:l,h:s,radius:o}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Mk(e,{x:n,y:f+1,w:l-2,h:s-2,radius:o}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,s),e.strokeRect(t,f,l,s),e.fillStyle=a.backgroundColor,e.fillRect(n,f+1,l-2,s-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:s,boxWidth:l,boxPadding:c}=n,u=Gk(n.bodyFont);let h=u.lineHeight,d=0;const f=DN(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+i},m=f.textAlign(a);let g,v,y,b,x,w,S;for(t.textAlign=a,t.textBaseline="middle",t.font=u.string,e.x=LI(this,m,n),t.fillStyle=n.bodyColor,lC(this.beforeBody,p),d=o&&"right"!==m?"center"===a?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(g=r[b],v=this.labelTextColors[b],t.fillStyle=v,lC(g.before,p),y=g.lines,o&&y.length&&(this._drawColorBox(t,e,b,f,n),h=Math.max(u.lineHeight,s)),x=0,S=y.length;x<S;++x)p(y[x]),h=u.lineHeight;lC(g.after,p)}d=0,h=u.lineHeight,lC(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let a,o;if(i){const s=DN(n.rtl,this.x,this.width);for(e.x=LI(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",a=Gk(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,o=0;o<i;++o)t.fillText(r[o],s.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:a}=this,{x:o,y:s}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Hk(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+u,s),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+l-h,s),t.quadraticCurveTo(o+l,s,o+l,s+h),"center"===a&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+l,s+c-f),t.quadraticCurveTo(o+l,s+c,o+l-f,s+c),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+d,s+c),t.quadraticCurveTo(o,s+c,o,s+c-d),"center"===a&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(o,s+u),t.quadraticCurveTo(o,s,o+u,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=NI[e.position].call(this,this._active,this._eventPosition);if(!n)return;const a=this._size=DI(this,e),o=Object.assign({},n,this._size),s=PI(t,e,o),l=jI(e,o,s,t);r._to===l.x&&i._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=a.width,this.height=a.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=qk(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),RN(e,t.textDirection),i.y+=a.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),PN(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),i=!cC(n,r),a=this._positionChanged(r,t);(i||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(e,i,t,n),o=this._positionChanged(a,e),s=t||!cC(a,i)||o;return s&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,a=NI[i.position].call(this,e,t);return!1!==a&&(n!==a.x||r!==a.y)}}(0,Oe.A)(UI,"positioners",NI);var zI={id:"tooltip",_element:UI,positioners:NI,afterInit(e,t,n){n&&(e.tooltip=new UI({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",Fe(Fe({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:FI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function WI(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function VI(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class HI extends bT{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(eC(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:HC(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:WI(n,e,aC(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){return VI.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function qI(e,t){const n=[],{bounds:r,step:i,min:a,max:o,precision:s,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=i||1,f=c-1,{min:p,max:m}=t,g=!eC(a),v=!eC(o),y=!eC(l),b=(m-p)/(u+1);let x,w,S,_,E=PC((m-p)/f/d)*d;if(E<1e-14&&!g&&!v)return[{value:p},{value:m}];_=Math.ceil(m/E)-Math.floor(p/E),_>f&&(E=PC(_*E/f/d)*d),eC(s)||(x=Math.pow(10,s),E=Math.ceil(E*x)/x),"ticks"===r?(w=Math.floor(p/E)*E,S=Math.ceil(m/E)*E):(w=p,S=m),g&&v&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-a)/i,E/1e3)?(_=Math.round(Math.min((o-a)/E,c)),E=(o-a)/_,w=a,S=o):y?(w=g?a:w,S=v?o:S,_=l-1,E=(S-w)/_):(_=(S-w)/E,_=RC(_,Math.round(_),E/1e3)?Math.round(_):Math.ceil(_));const C=Math.max(FC(E),FC(w));x=Math.pow(10,eC(s)?C:s),w=Math.round(w*x)/x,S=Math.round(S*x)/x;let k=0;for(g&&(h&&w!==a?(n.push({value:a}),w<a&&k++,RC(Math.round((w+k*E)*x)/x,a,GI(a,b,e))&&k++):w<a&&k++);k<_;++k){const e=Math.round((w+k*E)*x)/x;if(v&&e>o)break;n.push({value:e})}return v&&h&&S!==o?n.length&&RC(n[n.length-1].value,o,GI(o,b,e))?n[n.length-1].value=o:n.push({value:o}):v&&S!==o||n.push({value:S}),n}function GI(e,t,n){let{horizontal:r,minRotation:i}=n;const a=OC(i),o=(r?Math.sin(a):Math.cos(a))||.001,s=.75*t*(""+e).length;return Math.min(t/o,s)}(0,Oe.A)(HI,"id","category"),(0,Oe.A)(HI,"defaults",{ticks:{callback:VI}});class KI extends bT{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return eC(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const a=e=>r=t?r:e,o=e=>i=n?i:e;if(e){const e=DC(r),t=DC(i);e<0&&t<0?o(0):e>0&&t>0&&a(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);o(i+t),e||a(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=qI({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&LC(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return pk(e,this.chart.options.locale,this.options.ticks.format)}}class YI extends KI{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=rC(e)?e:0,this.max=rC(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=OC(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,Oe.A)(YI,"id","linear"),(0,Oe.A)(YI,"defaults",{ticks:{callback:gk.formatters.numeric}});const XI=e=>Math.floor(IC(e)),QI=(e,t)=>Math.pow(10,XI(e)+t);function $I(e){return 1===e/Math.pow(10,XI(e))}function JI(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function ZI(e,t){let{min:n,max:r}=t;n=iC(e.min,n);const i=[],a=XI(n);let o=function(e,t){let n=XI(t-e);for(;JI(e,t,n)>10;)n++;for(;JI(e,t,n)<10;)n--;return Math.min(n,XI(e))}(n,r),s=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=a>o?Math.pow(10,a):0,u=Math.round((n-c)*s)/s,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=iC(e.min,Math.round((c+h+d*Math.pow(10,o))*s)/s);for(;f<r;)i.push({value:f,major:$I(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,s=o>=0?1:s),f=Math.round((c+h+d*Math.pow(10,o))*s)/s;const p=iC(e.max,f);return i.push({value:p,major:$I(p),significand:d}),i}class eD extends bT{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=KI.prototype.parse.apply(this,[e,t]);if(0!==n)return rC(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=rC(e)?Math.max(0,e):null,this.max=rC(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!rC(this._userMin)&&(this.min=e===QI(this.min,0)?QI(this.min,-1):QI(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,a=e=>r=t?r:e;n===r&&(n<=0?(i(1),a(10)):(i(QI(n,-1)),a(QI(r,1)))),n<=0&&i(QI(r,-1)),r<=0&&a(QI(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=ZI({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&LC(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":pk(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=IC(e),this._valueRange=IC(this.max)-IC(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(IC(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function tD(e){const t=e.ticks;if(t.display&&e.display){const e=qk(t.backdropPadding);return aC(t.font&&t.font.size,Sk.font.size)+e.height}return 0}function nD(e,t,n){return n=tC(n)?n:[n],{w:Ek(e,t.string,n),h:n.length*t.lineHeight}}function rD(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function iD(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],a=e._pointLabels.length,o=e.options.pointLabels,s=o.centerPointLabels?SC/a:0;for(let l=0;l<a;l++){const a=o.setContext(e.getPointLabelContext(l));i[l]=a.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],s),u=Gk(a.font),h=nD(e.ctx,u,e._pointLabels[l]);r[l]=h;const d=WC(e.getIndexAngle(l)+s),f=Math.round(MC(d));aD(n,t,d,rD(f,c.x,h.w,0,180),rD(f,c.y,h.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,a=e.options,{centerPointLabels:o,display:s}=a.pointLabels,l={extra:tD(a)/2,additionalAngle:o?SC/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=oD(e,u,l);r.push(i),"auto"===s&&(i.visible=sD(i,c),i.visible&&(c=i))}return r}(e,r,i)}function aD(e,t,n,r,i){const a=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let s=0,l=0;r.start<t.l?(s=(t.l-r.start)/a,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/a,e.r=Math.max(e.r,t.r+s)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function oD(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:a,padding:o,size:s}=n,l=e.getPointPosition(t,r+i+o,a),c=Math.round(MC(WC(l.angle+NC))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,s.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,s.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+s.w,bottom:u+s.h}}function sD(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:a}=e;return!(Tk({x:n,y:r},t)||Tk({x:n,y:a},t)||Tk({x:i,y:r},t)||Tk({x:i,y:a},t))}function lD(e,t,n){const{left:r,top:i,right:a,bottom:o}=n,{backdropColor:s}=t;if(!eC(s)){const n=Hk(t.borderRadius),l=qk(t.backdropPadding);e.fillStyle=s;const c=r-l.left,u=i-l.top,h=a-r+l.width,d=o-i+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),Mk(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function cD(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,_C);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let a=1;a<r;a++)n=e.getPointPosition(a,t),i.lineTo(n.x,n.y)}}(0,Oe.A)(eD,"id","logarithmic"),(0,Oe.A)(eD,"defaults",{ticks:{callback:gk.formatters.logarithmic,major:{enabled:!0}}});class uD extends KI{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=qk(tD(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=rC(e)&&!isNaN(e)?e:0,this.max=rC(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/tD(this.options))}generateTickLabels(e){KI.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=sC(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?iD(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return WC(e*(_C/(this._pointLabels.length||1))+OC(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(eC(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(eC(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Yk(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-NC+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),cD(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,a=this._pointLabels.length;let o,s,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const a=r.setContext(e.getPointLabelContext(i));lD(n,a,t);const o=Gk(a.font),{x:s,y:l,textAlign:c}=t;Ok(n,e._pointLabels[i],s,l+o.lineHeight/2,o,{color:a.color,textAlign:c,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){s=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const a=e.ctx,o=t.circular,{color:s,lineWidth:l}=t;!o&&!r||!s||!l||n<0||(a.save(),a.strokeStyle=s,a.lineWidth=l,a.setLineDash(i.dash||[]),a.lineDashOffset=i.dashOffset,a.beginPath(),cD(e,n,o,r),a.closePath(),a.stroke(),a.restore())}(this,o,s,a,l)}}),n.display){for(e.save(),o=a-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:a}=r;a&&i&&(e.lineWidth=a,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,s=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,s),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const s=n.setContext(this.getContext(o)),l=Gk(s.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),s.showLabelBackdrop){e.font=l.string,a=e.measureText(r.label).width,e.fillStyle=s.backdropColor;const t=qk(s.backdropPadding);e.fillRect(-a/2-t.left,-i-l.size/2-t.top,a+t.width,l.size+t.height)}Ok(e,r.label,0,-i,l,{color:s.color,strokeColor:s.textStrokeColor,strokeWidth:s.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,Oe.A)(uD,"id","radialLinear"),(0,Oe.A)(uD,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gk.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,Oe.A)(uD,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Oe.A)(uD,"descriptors",{angleLines:{_fallback:"grid"}});const hD={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},dD=Object.keys(hD);function fD(e,t){return e-t}function pD(e,t){if(eC(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:a}=e._parseOpts;let o=t;return"function"===typeof r&&(o=r(o)),rC(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!jC(a)&&!0!==a?n.startOf(o,i):n.startOf(o,"isoWeek",a)),+o)}function mD(e,t,n,r){const i=dD.length;for(let a=dD.indexOf(e);a<i-1;++a){const e=hD[dD[a]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return dD[a]}return dD[i-1]}function gD(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=GC(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function vD(e,t,n){const r=[],i={},a=t.length;let o,s;for(o=0;o<a;++o)s=t[o],i[s]=o,r.push({value:s,major:!1});return 0!==a&&n?function(e,t,n,r){const i=e._adapter,a=+i.startOf(t[0].value,r),o=t[t.length-1].value;let s,l;for(s=a;s<=o;s=+i.add(s,1,r))l=n[s],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class yD extends bT{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new CA(e.adapters.date);r.init(t),pC(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:pD(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function s(e){a||isNaN(e.min)||(r=Math.min(r,e.min)),o||isNaN(e.max)||(i=Math.max(i,e.max))}a&&o||(s(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||s(this.getMinMax(!1))),r=rC(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=rC(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?mD(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let a=dD.length-1;a>=dD.indexOf(n);a--){const n=dD[a];if(hD[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return dD[n?dD.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=dD.indexOf(e)+1,n=dD.length;t<n;++t)if(hD[dD[t]].common)return dD[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),vD(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const a=n.length<3?.5:.25;r=HC(r,0,a),i=HC(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,a=i.unit||mD(i.minUnit,t,n,this._getLabelCapacity(t)),o=aC(r.ticks.stepSize,1),s="week"===a&&i.isoWeekday,l=jC(s)||!0===s,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",s)),d=+e.startOf(d,l?"day":a),e.diff(n,t,a)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+a);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,o,a),h++)gD(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||gD(c,u,f),Object.keys(c).sort(fD).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,a=i.ticks.callback;if(a)return sC(a,[e,t,n],this);const o=i.time.displayFormats,s=this._unit,l=this._majorUnit,c=s&&o[s],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,r||(d?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=OC(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*a,h:n*a+o*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,vD(this,[e],this._majorUnit),r),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(pD(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $C(e.sort(fD))}}function bD(e,t,n){let r,i,a,o,s=0,l=e.length-1;n?(t>=e[s].pos&&t<=e[l].pos&&({lo:s,hi:l}=KC(e,"pos",t)),({pos:r,time:a}=e[s]),({pos:i,time:o}=e[l])):(t>=e[s].time&&t<=e[l].time&&({lo:s,hi:l}=KC(e,"time",t)),({time:r,pos:a}=e[s]),({time:i,pos:o}=e[l]));const c=i-r;return c?a+(o-a)*(t-r)/c:a}(0,Oe.A)(yD,"id","time"),(0,Oe.A)(yD,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class xD extends yD{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=bD(t,this.min),this._tableRange=bD(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let a,o,s,l,c;for(a=0,o=e.length;a<o;++a)l=e[a],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,o=r.length;a<o;++a)c=r[a+1],s=r[a-1],l=r[a],Math.round((c+s)/2)!==l&&i.push({time:l,pos:a/(o-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(bD(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return bD(this._table,n*this._tableRange+this._minPos,!0)}}(0,Oe.A)(xD,"id","timeseries"),(0,Oe.A)(xD,"defaults",yD.defaults);const wD=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],SD="label";function _D(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function ED(e,t){e.labels=t}function CD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:SD;const r=[];e.datasets=t.map(t=>{const i=e.datasets.find(e=>e[n]===t[n]);return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):Fe({},t)})}function kD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SD;const n={labels:[],datasets:[]};return ED(n,e.labels),CD(n,e.datasets,t),n}function ND(e,n){const{height:r=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:s,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d}=e,f=ef(e,wD),p=(0,t.useRef)(null),m=(0,t.useRef)(null),g=()=>{p.current&&(m.current=new QT(p.current,{type:s,data:kD(l,o),options:c&&Fe({},c),plugins:u}),_D(n,m.current))},v=()=>{_D(n,null),m.current&&(m.current.destroy(),m.current=null)};return(0,t.useEffect)(()=>{!a&&m.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,c)},[a,c]),(0,t.useEffect)(()=>{!a&&m.current&&ED(m.current.config.data,l.labels)},[a,l.labels]),(0,t.useEffect)(()=>{!a&&m.current&&l.datasets&&CD(m.current.config.data,l.datasets,o)},[a,l.datasets]),(0,t.useEffect)(()=>{m.current&&(a?(v(),setTimeout(g)):m.current.update(d))},[a,c,l.labels,l.datasets,d]),(0,t.useEffect)(()=>{m.current&&(v(),setTimeout(g))},[s]),(0,t.useEffect)(()=>(g(),()=>v()),[]),(0,Be.jsx)("canvas",Fe(Fe({ref:p,role:"img",height:r,width:i},f),{},{children:h}))}const AD=(0,t.forwardRef)(ND);function TD(e,n){return QT.register(n),(0,t.forwardRef)((t,n)=>(0,Be.jsx)(AD,Fe(Fe({},t),{},{ref:n,type:e})))}const ID=TD("line",yA),DD=TD("bar",mA),RD=TD("doughnut",vA),PD=TD("pie",xA);var jD=n(7762);n(557);const LD="https://script.google.com/macros/s/AKfycbwErf9zlc6vjGOq-idseNeSFknRQckZam_Qev_3k-dn_C65WW0pZBd_pEHC8zhCMkcW/exec";const OD=class{static async checkExistingAttempt(e,t,n,r,i){try{if(!navigator.onLine)return console.warn("[MCQService] Client is offline, cannot check existing attempt"),{exists:!1,data:null,completed:!1,offline:!0};const a="colleges/".concat(n,"/years/").concat(r,"/departments/").concat(i,"/students/").concat(e,"/mcq_results/").concat(t),o=ph(Kd,a),s=await hd(o);if(s.exists()){const e=s.data();return{exists:!0,data:e,completed:!0===e.completed||!0===e.submitted}}return{exists:!1,data:null,completed:!1}}catch(s){var a,o;return console.error("[MCQService] Error checking existing attempt:",s),"unavailable"===s.code||null!==(a=s.message)&&void 0!==a&&a.includes("offline")||null!==(o=s.message)&&void 0!==o&&o.includes("network")?(console.warn("[MCQService] Network error, allowing test to proceed"),{exists:!1,data:null,completed:!1,offline:!0}):{exists:!1,data:null,completed:!1,error:s.message}}}static async createInitialAttempt(e,t){try{var n,r,i;const{Email:a,College:o,Year:s,Department:l,Name:c,"Roll Number":u}=e,h=(null===(n=t.testInfo)||void 0===n?void 0:n.id)||t.id||"unknown",d=await this.checkExistingAttempt(a,h,o,s,l);if(d.exists&&d.completed)throw new Error("Test already completed. You cannot retake this test.");const f="colleges/".concat(o,"/years/").concat(s,"/departments/").concat(l,"/students/").concat(a,"/mcq_results/").concat(h),p=ph(Kd,f),m={rollNumber:u||"",name:c||"",email:a,college:o,year:s,department:l,testID:h,testName:t.name||(null===(r=t.testInfo)||void 0===r?void 0:r.name)||"Unknown Test",totalQuestions:(null===(i=t.questions)||void 0===i?void 0:i.length)||t.totalQuestions||0,timeStarted:bd(),timeStartedISO:(new Date).toISOString(),completed:!1,submitted:!1,attempts:1,from:"student",syncedToSheets:!1,createdAt:bd()};return await pd(p,m,{merge:!0}),console.log("[MCQService] Initial attempt created:",f),{success:!0,docPath:f}}catch(a){throw console.error("[MCQService] Error creating initial attempt:",a),a}}static async saveResultToFirestore(e){try{var t;const{email:a,college:o,year:s,department:l,testID:c,rollNumber:u,name:h,testName:d,score:f,totalQuestions:p,correctAnswers:m,incorrectAnswers:g,percentage:v,timeTaken:y,timeStarted:b,timeEnded:x,answers:w,autoSubmitted:S}=e;try{const e=await this.checkExistingAttempt(a,c,o,s,l);if(e.exists&&e.completed&&!e.offline)throw new Error("DUPLICATE_SUBMISSION: Test has already been submitted. Multiple submissions are not allowed.")}catch(i){var n,r;if(null!==(n=i.message)&&void 0!==n&&n.includes("NETWORK_ERROR")||!navigator.onLine)throw new Error("NETWORK_ERROR: No internet connection. Your answers will be saved locally and submitted when connection is restored.");if(null!==(r=i.message)&&void 0!==r&&r.includes("DUPLICATE_SUBMISSION"))throw i;console.warn("[MCQService] Error checking existing attempt during save, continuing:",i)}const _="colleges/".concat(o,"/years/").concat(s,"/departments/").concat(l,"/students/").concat(a,"/mcq_results/").concat(c),E=ph(Kd,_);let C=null;try{const e=await this.checkExistingAttempt(a,c,o,s,l);e.exists&&(C=e.data)}catch(VD){}const k={rollNumber:u||"",name:h||"",email:a,college:o,year:s,department:l,testID:c,testName:d||"Unknown Test",score:f||0,totalQuestions:p||0,correctAnswers:m||0,incorrectAnswers:g||0,percentage:v||0,timeTaken:y||0,timeTakenFormatted:this.formatTime(y||0),timeStarted:b||bd(),timeStartedISO:e.timeStartedISO||(new Date).toISOString(),timeEnded:x||bd(),timeEndedISO:(new Date).toISOString(),submittedAt:bd(),submittedAtISO:(new Date).toISOString(),completed:!0,submitted:!0,attempts:(null===(t=C)||void 0===t?void 0:t.attempts)||1,from:"student",syncedToSheets:!1,autoSubmitted:S||!1,autoSubmitReason:e.autoSubmitReason||"",answers:w||{},violationCount:e.violationCount||0,totalNoFace:e.totalNoFace||0,totalMultipleFaces:e.totalMultipleFaces||0,violations:e.violations||[],updatedAt:bd()};return await pd(E,k,{merge:!0}),console.log("[MCQService] Result saved to Firestore:",_),{success:!0,docId:_,docRef:E}}catch(a){throw console.error("[MCQService] Error saving to Firestore:",a),a}}static async saveResultToSheets(e){try{const t={action:"submitMCQ",timestamp:(new Date).toISOString(),rollNumber:e.rollNumber||"",name:e.name||"",email:e.email||"",college:e.college||"",year:e.year||"",department:e.department||"",testID:e.testID||"",testName:e.testName||"Unknown Test",score:e.score||0,totalQuestions:e.totalQuestions||0,total:e.totalQuestions||0,correctAnswers:e.correctAnswers||0,incorrectAnswers:e.incorrectAnswers||0,percentage:e.percentage||0,timeTaken:e.timeTakenFormatted||this.formatTime(e.timeTaken||0),timeStarted:e.timeStartedISO||(new Date).toISOString(),timeEnded:e.timeEndedISO||(new Date).toISOString(),submittedAt:e.submittedAtISO||(new Date).toISOString(),autoSubmitted:e.autoSubmitted||!1,autoSubmitReason:e.autoSubmitReason||"",violationCount:e.violationCount||0,totalNoFace:e.totalNoFace||0,totalMultipleFaces:e.totalMultipleFaces||0,violations:JSON.stringify(e.violations||[]),violationsDetails:JSON.stringify(e.violations||[])};console.log("[MCQService] Sending to Google Sheets:",t);await fetch(LD,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return console.log("[MCQService] Result sent to Google Sheets"),{success:!0}}catch(t){throw console.error("[MCQService] Error saving to Google Sheets:",t),t}}static async saveProgressToFirestore(e){const{email:t,college:n,year:r,department:i,testID:a,rollNumber:o,name:s,testName:l,score:c,totalQuestions:u,correctAnswers:h,incorrectAnswers:d,percentage:f,timeTaken:p,timeStarted:m,answers:g}=e,v="colleges/".concat(n,"/years/").concat(r,"/departments/").concat(i,"/students/").concat(t,"/mcq_results/").concat(a),y=ph(Kd,v),b={rollNumber:o||"",name:s||"",email:t,college:n,year:r,department:i,testID:a,testName:l||"Unknown Test",totalQuestions:u||0,inProgressScore:c||0,inProgressPercentage:f||0,correctAnswers:h||0,incorrectAnswers:d||0,progressTimeTaken:p||0,progressTimeTakenFormatted:this.formatTime(p||0),timeStarted:m||bd(),timeStartedISO:e.timeStartedISO||(new Date).toISOString(),lastProgressAt:bd(),lastProgressAtISO:(new Date).toISOString(),answers:g||{},completed:!1,submitted:!1,syncedToSheets:!1,updatedAt:bd(),autoSubmitReason:e.autoSubmitReason||""};return await pd(y,b,{merge:!0}),{success:!0}}static async saveProgressToSheets(e){const t={action:"syncMCQProgress",timestamp:e.timestamp||(new Date).toISOString(),rollNumber:e.rollNumber||"",name:e.name||"",email:e.email||"",college:e.college||"",year:e.year||"",department:e.department||"",testID:e.testID||"",testName:e.testName||"Unknown Test",score:e.score||0,total:e.totalQuestions||0,totalQuestions:e.totalQuestions||0,correctAnswers:e.correctAnswers||0,incorrectAnswers:e.incorrectAnswers||0,percentage:e.percentage||0,timeTaken:e.timeTakenFormatted||this.formatTime(e.timeTaken||0),timeStarted:e.timeStartedISO||(new Date).toISOString(),timeEnded:e.timeEndedISO||"",submittedAt:e.submittedAt||"",autoSubmitted:e.autoSubmitted||!1,autoSubmitReason:e.autoSubmitReason||""};return await fetch(LD,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}static async syncProgress(e){try{return await this.saveProgressToFirestore(e),await this.saveProgressToSheets(e),{success:!0}}catch(t){throw console.error("[MCQService] Progress sync failed:",t),t}}static async markSyncedToSheets(e,t,n,r,i){try{const a="colleges/".concat(n,"/years/").concat(r,"/departments/").concat(i,"/students/").concat(e,"/mcq_results/").concat(t),o=ph(Kd,a);await pd(o,{syncedToSheets:!0,syncedAt:bd(),syncedAtISO:(new Date).toISOString()},{merge:!0}),console.log("[MCQService] Marked as synced to Sheets")}catch(a){throw console.error("[MCQService] Error marking as synced:",a),a}}static saveUnsyncedResult(e){try{const t=JSON.parse(localStorage.getItem("mcq_unsynced_results")||"[]");t.push(Fe(Fe({},e),{},{retryCount:0,lastRetry:null})),localStorage.setItem("mcq_unsynced_results",JSON.stringify(t)),console.log("[MCQService] Saved unsynced result to localStorage")}catch(t){console.error("[MCQService] Error saving unsynced result:",t)}}static async syncUnsyncedResults(){try{const t=JSON.parse(localStorage.getItem("mcq_unsynced_results")||"[]");if(0===t.length)return{synced:0,failed:0};let n=0,r=0;const i=[];for(const a of t)try{await this.saveResultToSheets(a),await this.markSyncedToSheets(a.email,a.testID,a.college,a.year,a.department),n++}catch(e){console.error("[MCQService] Retry failed for result:",e),a.retryCount=(a.retryCount||0)+1,a.lastRetry=(new Date).toISOString(),a.retryCount<5?i.push(a):r++}return i.length>0?localStorage.setItem("mcq_unsynced_results",JSON.stringify(i)):localStorage.removeItem("mcq_unsynced_results"),{synced:n,failed:r}}catch(e){return console.error("[MCQService] Error syncing unsynced results:",e),{synced:0,failed:0}}}static formatTime(e){if(!e||e<0)return"0s";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,"h ").concat(n,"m ").concat(r,"s"):n>0?"".concat(n,"m ").concat(r,"s"):"".concat(r,"s")}static async fetchMCQResults(e){try{const t={action:"getMCQResults",college:e},n=(await fetch(LD,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),await fetch(LD,{method:"POST",body:JSON.stringify(t)}));return await n.json()}catch(t){throw console.error("[MCQService] Error fetching MCQ results:",t),t}}static async submitMCQResult(e){let t=!1,n=!1;try{try{await this.saveResultToFirestore(e),t=!0,console.log("[MCQService] \u2705 Firestore save successful")}catch(r){if(console.error("[MCQService] \u274c Firestore save failed:",r),r.message.includes("DUPLICATE_SUBMISSION"))throw r;throw new Error("Firestore save failed: ".concat(r.message))}try{await this.saveResultToSheets(e),n=!0,t&&await this.markSyncedToSheets(e.email,e.testID,e.college,e.year,e.department),console.log("[MCQService] \u2705 Google Sheets save successful")}catch(i){console.error("[MCQService] \u26a0\ufe0f Google Sheets save failed:",i),t&&this.saveUnsyncedResult(e)}return{success:t,firestore:t,sheets:n}}catch(a){throw console.error("[MCQService] \u274c Submission failed:",a),a}}};QT.register(HI,YI,fI,hI,xI,kI,zI,EI,nI);const MD=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[a,o]=(0,t.useState)(""),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0),[h,d]=(0,t.useState)({Name:"",Role:"",College:""}),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[b,x]=(0,t.useState)(!1),[w,S]=(0,t.useState)(null),[_,E]=(0,t.useState)("overview"),[C,k]=(0,t.useState)(!1),[N,A]=(0,t.useState)([]),[T,I]=(0,t.useState)(!1),[D,R]=(0,t.useState)(!1),[P,j]=(0,t.useState)(!1),[L,O]=(0,t.useState)("table"),[M,F]=(0,t.useState)([]),[B,U]=(0,t.useState)([]),[z,W]=(0,t.useState)([]),[V,H]=(0,t.useState)([]),[q,G]=(0,t.useState)(""),[K,Y]=(0,t.useState)(!1),[X,Q]=(0,t.useState)([]),[$,J]=(0,t.useState)([]),[Z,ee]=(0,t.useState)({key:"Name",order:"asc"}),[te,re]=(0,t.useState)(!1),[ie,ae]=(0,t.useState)({}),[oe,se]=(0,t.useState)({}),[le,ce]=(0,t.useState)({labels:[],datasets:[]}),[ue,he]=(0,t.useState)([]),[de,fe]=(0,t.useState)([]),[pe,me]=(0,t.useState)(!1),[ge,ve]=(0,t.useState)(null),[ye,be]=(0,t.useState)(""),[xe,we]=(0,t.useState)(""),[Se,_e]=(0,t.useState)(""),[Ee,Ce]=(0,t.useState)(""),[ke,Ne]=(0,t.useState)({key:"Score",order:"desc"}),[Ae,Te]=(0,t.useState)([]),[Ie,De]=(0,t.useState)([]),[Re,Pe]=(0,t.useState)([]),[je,Le]=(0,t.useState)(!1),[Oe,Me]=(0,t.useState)("excel"),[Ue,ze]=(0,t.useState)(!1),[We,Ve]=(0,t.useState)(!1),He=ne(),qe=t.useMemo(()=>({BasicDataTypesScore:{displayName:"Basic Datatypes",maxScore:310,questions:31},ConditionalStatementsScore:{displayName:"Conditional Statements",maxScore:200,questions:20},LoopingScore:{displayName:"Looping",maxScore:200,questions:20},PatternsScore:{displayName:"Patterns",maxScore:800,questions:80},NumberCrunchingScore:{displayName:"Number Crunching",maxScore:300,questions:30},NumberProblemsScore:{displayName:"Number Based Problems",maxScore:200,questions:20},ArraysScore:{displayName:"Arrays",maxScore:500,questions:50},StringsScore:{displayName:"Strings",maxScore:380,questions:38}}),[]),Ge=t.useMemo(()=>{if(0===s.length)return"Year";const e=new Set;s.slice(0,100).forEach(t=>{Object.keys(t||{}).forEach(t=>{"year"===(e=>(e||"").replace(/\s+/g,"").toLowerCase())(t)&&e.add(t)})});const t=e.values().next().value||"Year";try{console.log("Resolved yearKey:",t)}catch(vR){}return t},[s]),Ke=t.useCallback(e=>{if(void 0===e||null===e)return null;const t=String(e).toUpperCase().replace(/\s+/g,"");if(/^\d{4}$/.test(t))return t;const n=t.match(/^2K(\d{2})$/);return n?"20".concat(n[1]):null},[]),Xe=t.useCallback(()=>{const e=(r||"").toString().trim().toLowerCase(),t=(a||"").toString();return s.filter(n=>{var r;const i=!e||((null===n||void 0===n?void 0:n.Department)||"").toString().trim().toLowerCase()===e,a=Ke(null!==(r=null===n||void 0===n?void 0:n[Ge])&&void 0!==r?r:null===n||void 0===n?void 0:n.Year);return i&&(!t||a===t)})},[s,r,a,Ge,Ke]);t.useCallback(e=>{let t=0;for(const n of s){const r=Number(null===n||void 0===n?void 0:n[e]);!Number.isNaN(r)&&r>t&&(t=r)}return t},[s]);(0,t.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("auth_data")),t=localStorage.getItem("role");if(!e||"staff"!==t)return void He("/");S(e),d({Name:e.Name,Role:e.Role,College:e.College});(async()=>{try{u(!0),p(null);const t=["".concat("","/SEEDDB/userPassword.json"),"/SEEDDB/userPassword.json","https://raw.githubusercontent.com/seeditDev/SEEDDB/main/userPassword.json"];let n=null;for(const e of t)try{const t=await fetch(e,{cache:"no-store"});if(t.ok){n=await t.json();break}}catch(vR){}if(!n)throw new Error("Failed to fetch student data from all sources");const r=e=>(e||"").toString().toUpperCase().replace(/\s+/g,"").replace(/[^A-Z0-9]/g,""),i=r(e.College);let a=n.filter(e=>r(e.College)===i);0===a.length&&(a=n.filter(e=>{const t=r(e.College);return t.includes(i)||i.includes(t)})),0===a.length&&(console.warn("No students matched staff college; falling back to entire dataset for counting."),a=n);try{const e=n.reduce((e,t)=>{const n=r(t.College)||"UNKNOWN";return e[n]=(e[n]||0)+1,e},{});console.log("College distribution (normalized):",e),console.log("Staff college (normalized):",i),console.log("Matched students count:",a.length)}catch(vR){}a.length>0&&(console.log("Sample student data:",a.slice(0,3)),console.log("Available fields:",Object.keys(a[0]))),l(a),A(a);const o=new Set,s=[];a.forEach(e=>{Object.keys(e||{}).forEach(e=>{o.has(e)||(o.add(e),s.push(e))})}),H(s);const c=s.filter(e=>/score/i.test(e));if(Q(c),J(c),a.length>0){const e=xt(a),t=wt(a),n=St(a),r=yt(a),i=bt(a);ae(e),se(t),ce(n),U(r),W(i)}}catch(f){console.error("Error fetching student data:",f),p("Failed to load student data. Please try again later.")}finally{u(!1)}})()},[He]);const Qe=()=>{const e=e=>(null!==e&&void 0!==e?e:"").toString().trim().toLowerCase();let t=s.filter(t=>{var n;const i=!r||e(t.Department)===e(r),o=null!==(n=null===t||void 0===t?void 0:t[Ge])&&void 0!==n?n:null===t||void 0===t?void 0:t.Year,s=!a||(e=>Ke(e))(o)===a,l=!q||V.some(n=>e(t[n]).includes(e(q)));return i&&s&&l});t.sort((e,t)=>{let n=e[Z.key],r=t[Z.key];return X.includes(Z.key)?(n=parseFloat(n)||0,r=parseFloat(r)||0):(n=String(n||"").toLowerCase(),r=String(r||"").toLowerCase()),n<r?"asc"===Z.order?-1:1:n>r?"asc"===Z.order?1:-1:0}),I(!1),setTimeout(()=>{A(t),I(!0)},0)},Je=()=>{const e=it(),t=yE.book_new(),n=yE.json_to_sheet(e);yE.book_append_sheet(t,n,"Students");oE(t,ot("xlsx"))},it=()=>{const e=at().length>0?at():Array.from(N.reduce((e,t)=>(Object.keys(t||{}).forEach(t=>e.add(t)),e),new Set));return N.map(t=>{const n={};return e.forEach(e=>{var r;n[e]=null!==(r=t[e])&&void 0!==r?r:""}),n})},at=t.useCallback(()=>{const e=V.filter(e=>!X.includes(e));return[...e,...$]},[V,X,$]),ot=e=>{const t=(new Date).toISOString().slice(0,10);return"".concat(null===w||void 0===w?void 0:w.College,"_").concat(r||"All","_").concat(a||"All","_").concat(t,".").concat(e)},st=t.useCallback(e=>{if(!e)return"";return e.replace(/Score$/i,"").replace(/([A-Z])/g," $1").trim()},[]),ct=t.useMemo(()=>{const e=Array.from(new Set(s.map(e=>null===e||void 0===e?void 0:e.Department).filter(Boolean)));return e.sort((e,t)=>e.localeCompare(t)),e},[s]),dt=t.useMemo(()=>{const e=Array.from(new Set(s.map(e=>{var t;return Ke(null!==(t=null===e||void 0===e?void 0:e[Ge])&&void 0!==t?t:null===e||void 0===e?void 0:e.Year)}).filter(e=>e)));return e.sort(),e},[s,Ge,Ke]),yt=e=>(e||s).map(e=>{const t=[e.BasicDataTypesScore,e.ConditionalStatementsScore,e.LoopingScore,e.PatternsScore,e.NumberCrunchingScore,e.NumberProblemsScore,e.ArraysScore,e.StringsScore,e.FunctionsScore,e.StructuresScore].filter(e=>e&&"N/A"!==e&&"-"!==e).map(Number),n=t.length>0?t.reduce((e,t)=>e+t,0)/t.length:0;return Fe(Fe({},e),{},{avgScore:n,completedCourses:t.length})}).filter(e=>e.completedCourses>0).sort((e,t)=>t.avgScore-e.avgScore).slice(0,5),bt=e=>(e||s).map(e=>{const t=[e.BasicDataTypesScore,e.ConditionalStatementsScore,e.LoopingScore,e.PatternsScore,e.NumberCrunchingScore,e.NumberProblemsScore,e.ArraysScore,e.StringsScore,e.FunctionsScore,e.StructuresScore].filter(e=>e&&"N/A"!==e&&"-"!==e).map(Number),n=t.length>0?t.reduce((e,t)=>e+t,0)/t.length:0;return Fe(Fe({},e),{},{avgScore:n,completedCourses:t.length})}).filter(e=>e.completedCourses>0&&e.avgScore<40).sort((e,t)=>e.avgScore-t.avgScore).slice(0,5),xt=e=>{const t={},n=(e||s).reduce((e,t)=>(e[t.Department]||(e[t.Department]=[]),e[t.Department].push(t),e),{});return Object.entries(n).forEach(e=>{let[n,r]=e;const i=r.map(e=>{const t=[e.BasicDataTypesScore,e.ConditionalStatementsScore,e.LoopingScore,e.PatternsScore,e.NumberCrunchingScore,e.NumberProblemsScore,e.ArraysScore,e.StringsScore,e.FunctionsScore,e.StructuresScore].filter(e=>e&&"N/A"!==e&&"-"!==e).map(Number);return t.length>0?t.reduce((e,t)=>e+t,0)/t.length:0}).filter(e=>e>0);i.length>0&&(t[n]={avgScore:(i.reduce((e,t)=>e+t,0)/i.length).toFixed(1),studentCount:r.length})}),t},wt=e=>{const t=e||s,n={};return["BasicDataTypes","ConditionalStatements","Looping","Patterns","NumberCrunching","NumberProblems","Arrays","Strings","Functions","Structures"].forEach(e=>{const r=e+"Score",i=t.filter(e=>e[r]&&"N/A"!==e[r]&&"-"!==e[r]).length;n[e]=(i/t.length*100).toFixed(1)}),n},St=e=>{const t=e||s,n=["BasicDataTypes","ConditionalStatements","Looping","Patterns"].map((e,n)=>{const r=e+"Score",i=t.filter(e=>e[r]&&"N/A"!==e[r]&&"-"!==e[r]).map(e=>Number(e[r])),a=i.length>0?i.reduce((e,t)=>e+t,0)/i.length:0;return{label:e.replace(/([A-Z])/g," $1").trim(),data:[.7*a,.8*a,.9*a,a].map(e=>e.toFixed(1)),borderColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(75, 192, 192)"][n],tension:.1}});return{labels:["Week 1","Week 2","Week 3","Week 4"],datasets:n}},_t=async()=>{try{me(!0),ve(null);const e=await OD.fetchMCQResults(h.College);if(e.success){he(e.data||[]),fe(e.data||[]);const t=Array.from(new Set((e.data||[]).map(e=>e["Test Name"]))),n=Array.from(new Set((e.data||[]).map(e=>e.Department))),r=Array.from(new Set((e.data||[]).map(e=>e.Year)));Te(t.sort()),De(n.sort()),Pe(r.sort())}else ve(e.message||"Failed to fetch MCQ results")}catch(e){console.error("Error fetching MCQ results:",e),ve("An error occurred while fetching reports.")}finally{me(!1)}},Et=()=>{let e=ue;const t=ye.toLowerCase().trim();t&&(e=e.filter(e=>(e.Name||"").toLowerCase().includes(t)||(e["Roll Number"]||"").toLowerCase().includes(t))),xe&&(e=e.filter(e=>e["Test Name"]===xe)),Se&&(e=e.filter(e=>e.Department===Se)),Ee&&(e=e.filter(e=>e.Year===Ee)),e.sort((e,t)=>{let n=e[ke.key],r=t[ke.key];return"Score"===ke.key||"Percentage"===ke.key||"Total Questions"===ke.key?(n=parseFloat(n)||0,r=parseFloat(r)||0):"Submitted At"===ke.key?(n=new Date(n).getTime(),r=new Date(r).getTime()):(n=String(n||"").toLowerCase(),r=String(r||"").toLowerCase()),n<r?"asc"===ke.order?-1:1:n>r?"asc"===ke.order?1:-1:0}),fe(e)},Ct=e=>{const t=de;if(0===t.length)return void alert("No data to export");const n="MCQ_Report_".concat(h.College,"_").concat(xe||"All","_").concat((new Date).toISOString().split("T")[0]);if("excel"===e||"csv"===e){const r=yE.json_to_sheet(t),i=yE.book_new();yE.book_append_sheet(i,r,"MCQ Results"),oE(i,"".concat(n,".").concat("excel"===e?"xlsx":"csv"))}else if("pdf"===e){const e=new jD.default("landscape");e.setFontSize(16),e.text("".concat(h.College," - MCQ Report"),14,15),e.setFontSize(11),e.text("Test: ".concat(xe||"All"," | Dept: ").concat(Se||"All"),14,25);const r=Object.keys(t[0]).filter(e=>"Violations Details"!==e),i=t.map(e=>r.map(t=>e[t]));e.autoTable({head:[r],body:i,startY:30,styles:{fontSize:7},margin:{top:30}}),e.save("".concat(n,".pdf"))}},kt=()=>{const e=[0,0,0,0,0];de.forEach(t=>{const n=100*(parseFloat(t.Percentage)||0);n<=20?e[0]++:n<=40?e[1]++:n<=60?e[2]++:n<=80?e[3]++:e[4]++});const t={};de.forEach(e=>{const n=e.Department||"Unknown",r=100*parseFloat(e.Percentage||0);t[n]||(t[n]={total:0,count:0}),t[n].total+=r,t[n].count++});const n=Object.keys(t),r=n.map(e=>(t[e].total/t[e].count).toFixed(1));return(0,Be.jsx)("div",{className:"modal-overlay",onClick:()=>Le(!1),children:(0,Be.jsxs)("div",{className:"modal-content analytics-modal",onClick:e=>e.stopPropagation(),style:{maxWidth:"1000px",width:"90%",maxHeight:"90vh",overflowY:"auto",padding:"2rem"},children:[(0,Be.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,Be.jsxs)("h2",{className:"staff-section-title",style:{marginBottom:0},children:["MCQ Analytics - ",xe||"Filtered Data"]}),(0,Be.jsxs)("button",{className:"staff-reset-btn",onClick:()=>Le(!1),children:[(0,Be.jsx)(At,{})," Close"]})]}),(0,Be.jsxs)("div",{className:"staff-insights-grid",children:[(0,Be.jsxs)("div",{className:"staff-insight-box",children:[(0,Be.jsx)("h3",{children:"Score Distribution"}),(0,Be.jsx)(DD,{data:{labels:["0-20%","21-40%","41-60%","61-80%","81-100%"],datasets:[{label:"Number of Students",data:e,backgroundColor:"rgba(103, 58, 183, 0.5)",borderColor:"rgb(103, 58, 183)",borderWidth:1}]},options:{responsive:!0}})]}),(0,Be.jsxs)("div",{className:"staff-insight-box",children:[(0,Be.jsx)("h3",{children:"Average Score by Department (%)"}),(0,Be.jsx)(PD,{data:{labels:n,datasets:[{data:r,backgroundColor:["rgba(54, 162, 235, 0.5)","rgba(255, 99, 132, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)"]}]},options:{responsive:!0}})]}),(0,Be.jsxs)("div",{className:"staff-stat-box full-width",style:{marginTop:"1.5rem",flexBasis:"100%"},children:[(0,Be.jsx)("h3",{children:"Summary Statistics"}),(0,Be.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[(0,Be.jsxs)("div",{className:"staff-stat-item",children:[(0,Be.jsx)("span",{children:"Total Students:"}),(0,Be.jsx)("span",{children:de.length})]}),(0,Be.jsxs)("div",{className:"staff-stat-item",children:[(0,Be.jsx)("span",{children:"Average Score:"}),(0,Be.jsxs)("span",{children:[(de.reduce((e,t)=>e+(parseFloat(t.Percentage)||0),0)/(de.length||1)*100).toFixed(1),"%"]})]}),(0,Be.jsxs)("div",{className:"staff-stat-item",children:[(0,Be.jsx)("span",{children:"Highest Score:"}),(0,Be.jsxs)("span",{children:[(100*Math.max(...de.map(e=>parseFloat(e.Percentage)||0))).toFixed(1),"%"]})]})]})]})]})]})})};return c?(0,Be.jsxs)("div",{className:"staff-loading-wrapper",children:[(0,Be.jsx)("div",{className:"staff-spinner"}),(0,Be.jsx)("p",{style:{marginTop:"1rem",color:"#666"},children:"Loading dashboard data..."})]}):f?(0,Be.jsx)("div",{className:"staff-loading-wrapper",children:(0,Be.jsxs)("div",{style:{padding:"2rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,Be.jsx)("p",{style:{color:"#d32f2f",marginBottom:"1rem"},children:f}),(0,Be.jsx)("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",background:"#1a237e",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Retry"})]})}):(0,Be.jsxs)("div",{className:"staff-root",children:[(0,Be.jsx)("header",{className:"staff-header-container",children:(0,Be.jsxs)("div",{className:"staff-header-inner",children:[window.innerWidth<=768?(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("button",{className:"staff-menu-btn",onClick:()=>k(!C),children:(0,Be.jsx)($e,{})}),(0,Be.jsx)("div",{className:"staff-header-logo-wrapper",children:(0,Be.jsx)("img",{src:"https://raw.githubusercontent.com/seeditDev/SEED-Website/f3cee9002410a00df4da7bea636ac9fbc4c312ca/Plugins/SEED_Logo.webp",alt:"SEED Logo",className:"staff-logo"})})]}):(0,Be.jsxs)("div",{className:"staff-header-logo-wrapper",children:[(0,Be.jsx)("img",{src:"https://raw.githubusercontent.com/seeditDev/SEED-Website/f3cee9002410a00df4da7bea636ac9fbc4c312ca/Plugins/SEED_Logo.webp",alt:"SEED Logo",className:"staff-logo"}),(0,Be.jsx)("span",{className:"staff-portal-title",children:"SEED-IT STAFF PORTAL"})]}),(0,Be.jsx)("button",{className:"staff-logout-btn",onClick:()=>{Ve(!0),console.log("Starting comprehensive logout process..."),localStorage.removeItem("hackerRankAuth"),sessionStorage.removeItem("hackerRankAuthInProgress"),sessionStorage.removeItem("currentHackerRankAssessmentUrl"),console.log("Cleared all HackerRank authentication flags");try{"undefined"!==typeof window.cacheManager&&window.cacheManager.clearAllCache&&(window.cacheManager.clearAllCache(),console.log("Cleared all caches using cacheManager.clearAllCache()"))}catch(f){console.error("Error clearing cache:",f)}try{Object.keys(localStorage).forEach(e=>{(e.startsWith("college_")||e.startsWith("seed-")||e.startsWith("cache_")||e.includes("_cache_"))&&(localStorage.removeItem(e),console.log("Removed cache: ".concat(e)))})}catch(f){console.error("Error clearing college caches:",f)}try{const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const n=e[t],r=n.indexOf("="),i=r>-1?n.substr(0,r).trim():n.trim();document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/",document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.hackerrank.com",document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=localhost"}console.log("Cleared all cookies")}catch(f){console.error("Error clearing cookies:",f)}try{localStorage.removeItem("user"),localStorage.removeItem("auth_data"),localStorage.removeItem("role"),localStorage.removeItem("portal_links"),sessionStorage.clear(),setTimeout(()=>{localStorage.clear(),console.log("Cleared all localStorage and sessionStorage")},100)}catch(f){console.error("Error clearing storages:",f)}"undefined"!==typeof window.pyqtFlag&&!0===window.pyqtFlag?console.log("Detected PyQt environment, letting browser handle complete cleanup..."):console.log("Not running in PyQt environment, using standard web cleanup..."),setTimeout(()=>{Ve(!1),console.log("Logout process complete, redirecting to login page"),He("/login")},1500)},children:(0,Be.jsx)(Nt,{})})]})}),(0,Be.jsxs)("div",{className:"staff-container",children:[(0,Be.jsxs)("div",{className:"staff-sidebar-container ".concat(b?"staff-sidebar-collapsed":""," ").concat(C?"staff-sidebar-mobile-open":""),children:[window.innerWidth>768&&(0,Be.jsx)("button",{className:"staff-collapse-btn",onClick:()=>x(!b),children:(0,Be.jsx)(Ye,{})}),(0,Be.jsxs)("nav",{className:"staff-nav",children:[(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("overview"===_?"staff-nav-active":""),onClick:()=>{E("overview"),k(!1)},children:[(0,Be.jsx)(tt,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"Overview"})]}),(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("insights"===_?"staff-nav-active":""),onClick:()=>{E("insights"),k(!1)},children:[(0,Be.jsx)(nt,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"Insights"})]}),(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("analytics"===_?"staff-nav-active":""),onClick:()=>{E("analytics"),k(!1)},children:[(0,Be.jsx)(et,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"Analytics"})]}),(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("students"===_?"staff-nav-active":""),onClick:()=>{E("students"),k(!1)},children:[(0,Be.jsx)(Dt,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"Student Management"})]}),(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("reports"===_?"staff-nav-active":""),onClick:()=>{E("reports"),k(!1)},children:[(0,Be.jsx)(mt,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"Reports"})]}),(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("mcq-reports"===_?"staff-nav-active":""),onClick:()=>{E("mcq-reports"),k(!1),0===ue.length&&_t()},children:[(0,Be.jsx)(gt,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"MCQ Reports"})]}),(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("placements"===_?"staff-nav-active":""),onClick:()=>{E("placements"),k(!1)},children:[(0,Be.jsx)(Ze,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"Placements"})]}),(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("profile"===_?"staff-nav-active":""),onClick:()=>{E("profile"),k(!1)},children:[(0,Be.jsx)(It,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"Profile"})]}),(0,Be.jsxs)("button",{className:"staff-nav-item ".concat("settings"===_?"staff-nav-active":""),onClick:()=>{E("settings"),k(!1)},children:[(0,Be.jsx)(lt,{}),(0,Be.jsx)("span",{className:"staff-nav-text",children:"Settings"})]})]})]}),(0,Be.jsxs)("main",{className:"staff-main-content ".concat(b?"staff-main-collapsed":""),children:["overview"===_&&(0,Be.jsxs)("div",{className:"staff-overview-section",children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"Staff Overview"}),(0,Be.jsxs)("div",{className:"staff-overview-grid",children:[(0,Be.jsxs)("div",{className:"staff-stat-box",children:[(0,Be.jsxs)("h3",{children:["Total Students in ",h.College]}),(0,Be.jsx)("p",{children:s.length})]}),(0,Be.jsxs)("div",{className:"staff-stat-box",children:[(0,Be.jsx)("h3",{children:"Students by Department"}),(0,Be.jsx)("div",{className:"staff-stat-details",children:Object.entries(s.reduce((e,t)=>(e[t.Department]=(e[t.Department]||0)+1,e),{})).sort((e,t)=>t[1]-e[1]).map(e=>{let[t,n]=e;return(0,Be.jsxs)("div",{className:"staff-stat-item",children:[(0,Be.jsxs)("span",{children:[t,":"]}),(0,Be.jsx)("span",{children:n})]},t)})})]}),(0,Be.jsxs)("div",{className:"staff-stat-box",children:[(0,Be.jsx)("h3",{children:"Students by Year"}),(0,Be.jsx)("div",{className:"staff-stat-details",children:Array.from(new Set(s.map(e=>{var t;return Ke(null!==(t=null===e||void 0===e?void 0:e[Ge])&&void 0!==t?t:null===e||void 0===e?void 0:e.Year)}).filter(Boolean))).sort().map(e=>{const t=s.reduce((t,n)=>{var r;return t+(Ke(null!==(r=null===n||void 0===n?void 0:n[Ge])&&void 0!==r?r:null===n||void 0===n?void 0:n.Year)===e?1:0)},0);return(0,Be.jsxs)("div",{className:"staff-stat-item",children:[(0,Be.jsxs)("span",{children:[e,":"]}),(0,Be.jsx)("span",{children:t})]},e)})})]}),(0,Be.jsxs)("div",{className:"staff-stat-box course-progress-box",children:[(0,Be.jsx)("h3",{children:"Course Progress Overview"}),(0,Be.jsx)("div",{className:"staff-stat-details",children:(()=>{const e=$&&$.length>0?$:X;if(!e||0===e.length)return(0,Be.jsx)("div",{className:"staff-stat-item",children:(0,Be.jsx)("span",{children:"No score columns detected."})});const t=Xe(),n=t.length;return e.map(e=>{var r;const i=qe[e],a=e=>{const t=Number(e);return!Number.isNaN(t)&&!(t<=0)},o=t.filter(t=>a(t[e])).length,s=n>0?(o/n*100).toFixed(1):"0.0",l=t.map(t=>Number(t[e])).filter(e=>!Number.isNaN(e)&&a(e)),c=l.filter(e=>(null===i||void 0===i?void 0:i.maxScore)>0?e>=.5*i.maxScore:e>0).length;return(0,Be.jsxs)("div",{className:"staff-stat-item course-stat-item",children:[(0,Be.jsxs)("div",{className:"course-info",children:[(0,Be.jsxs)("div",{className:"course-header",children:[(0,Be.jsx)("span",{className:"course-name",children:(null===i||void 0===i?void 0:i.displayName)||st(e)}),(0,Be.jsxs)("span",{className:"course-details",children:["Above 50%: ",c," | Questions: ",null!==(r=null===i||void 0===i?void 0:i.questions)&&void 0!==r?r:"\u2014"," | Attempted: ",o,"/",n]})]}),(0,Be.jsx)("div",{className:"progress-bar-container",children:(0,Be.jsx)("div",{className:"progress-bar",style:{width:"".concat(s,"%")}})})]}),(0,Be.jsxs)("div",{className:"completion-info",children:[(0,Be.jsxs)("span",{children:[s,"%"]}),(0,Be.jsxs)("span",{className:"completion-count",children:["(",o,"/",n,")"]})]})]},e)})})()})]})]})]}),"insights"===_&&(0,Be.jsxs)("div",{className:"staff-insights-section",children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"Performance Insights"}),(0,Be.jsxs)("div",{className:"staff-insights-grid",children:[(0,Be.jsxs)("div",{className:"staff-insight-box",children:[(0,Be.jsxs)("h3",{children:[(0,Be.jsx)(Tt,{})," Top Performers"]}),(0,Be.jsx)("div",{className:"staff-insight-list",children:B.map((e,t)=>(0,Be.jsxs)("div",{className:"staff-insight-item",children:[(0,Be.jsxs)("div",{className:"student-info",children:[(0,Be.jsxs)("span",{className:"rank",children:["#",t+1]}),(0,Be.jsxs)("div",{children:[(0,Be.jsx)("div",{className:"student-name",children:e.Name}),(0,Be.jsxs)("div",{className:"student-details",children:[e.Department," - ",e.Year]})]})]}),(0,Be.jsxs)("span",{className:"score",children:[e.avgScore.toFixed(1),"%"]})]},t))})]}),(0,Be.jsxs)("div",{className:"staff-insight-box",children:[(0,Be.jsxs)("h3",{children:[(0,Be.jsx)(ht,{})," Needs Attention"]}),(0,Be.jsx)("div",{className:"staff-insight-list",children:z.map((e,t)=>(0,Be.jsxs)("div",{className:"staff-insight-item attention",children:[(0,Be.jsx)("div",{className:"student-info",children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)("div",{className:"student-name",children:e.Name}),(0,Be.jsxs)("div",{className:"student-details",children:[e.Department," - ",e.Year]})]})}),(0,Be.jsxs)("span",{className:"score",children:[e.avgScore.toFixed(1),"%"]})]},t))})]}),(0,Be.jsxs)("div",{className:"staff-insight-box",children:[(0,Be.jsxs)("h3",{children:[(0,Be.jsx)(vt,{})," Department Performance"]}),(0,Be.jsx)("div",{className:"chart-container",children:(0,Be.jsx)(DD,{data:{labels:Object.keys(ie),datasets:[{label:"Average Score",data:Object.values(ie).map(e=>e.avgScore),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgb(54, 162, 235)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Department-wise Average Scores"}}}})})]}),(0,Be.jsxs)("div",{className:"staff-insight-box",children:[(0,Be.jsxs)("h3",{children:[(0,Be.jsx)(rt,{})," Course Completion"]}),(0,Be.jsx)("div",{className:"chart-container",children:(0,Be.jsx)(PD,{data:{labels:Object.keys(oe),datasets:[{data:Object.values(oe),backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(153, 102, 255, 0.5)","rgba(255, 159, 64, 0.5)","rgba(199, 199, 199, 0.5)","rgba(83, 102, 255, 0.5)"],borderColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(199, 199, 199)","rgb(83, 102, 255)"],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"right"},title:{display:!0,text:"Course Completion Rates (%)"}}}})})]}),(0,Be.jsxs)("div",{className:"staff-insight-box full-width",children:[(0,Be.jsxs)("h3",{children:[(0,Be.jsx)(nt,{})," Performance Trends"]}),(0,Be.jsx)("div",{className:"chart-container",children:(0,Be.jsx)(ID,{data:le,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Weekly Performance Trends"}},scales:{y:{beginAtZero:!0,max:100}}}})})]})]})]}),"analytics"===_&&(0,Be.jsxs)("div",{className:"staff-analytics-section",children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"Advanced Analytics"}),(0,Be.jsxs)("div",{className:"staff-analytics-content",children:[(0,Be.jsx)("p",{children:"Analytics features coming soon..."}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Detailed Performance Metrics"}),(0,Be.jsx)("li",{children:"Custom Report Generation"}),(0,Be.jsx)("li",{children:"Predictive Analysis"}),(0,Be.jsx)("li",{children:"Learning Pattern Recognition"})]})]})]}),"students"===_&&(0,Be.jsxs)("div",{className:"staff-students-section",children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"Student Management"}),(0,Be.jsxs)("div",{className:"staff-students-content",children:[(0,Be.jsx)("p",{children:"Student management features coming soon..."}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Direct Student Communication"}),(0,Be.jsx)("li",{children:"Progress Tracking"}),(0,Be.jsx)("li",{children:"Performance Reviews"}),(0,Be.jsx)("li",{children:"Attendance Management"})]})]})]}),"reports"===_&&(0,Be.jsxs)("div",{className:"staff-reports-section",children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"Student Reports"}),(0,Be.jsxs)("div",{className:"staff-filter-bar",children:[(0,Be.jsxs)("select",{className:"staff-select",value:r,onChange:e=>i(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Departments"}),ct.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]}),(0,Be.jsxs)("select",{className:"staff-select",value:a,onChange:e=>o(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Years"}),dt.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]}),(0,Be.jsx)("input",{className:"staff-select",placeholder:"Search (any field)",value:q,onChange:e=>G(e.target.value),style:{minWidth:220}}),(0,Be.jsxs)("select",{className:"staff-select",value:"".concat(Z.key,"-").concat(Z.order),onChange:e=>{const[t,n]=e.target.value.split("-");ee({key:t,order:n})},children:[(0,Be.jsx)("option",{value:"Name-asc",children:"Name: A-Z"}),(0,Be.jsx)("option",{value:"Name-desc",children:"Name: Z-A"}),(0,Be.jsx)("option",{value:"Roll Number-asc",children:"Roll No: Asc"}),X.slice(0,5).map(e=>(0,Be.jsxs)("option",{value:"".concat(e,"-desc"),children:[e,": High to Low"]},e))]}),(0,Be.jsxs)("button",{className:"staff-filter-btn",onClick:Qe,children:[(0,Be.jsx)(ft,{})," View"]}),(0,Be.jsxs)("button",{className:"staff-filter-btn",onClick:()=>{0===N.length&&Qe(),re(!0)},style:{backgroundColor:"#673ab7"},children:[(0,Be.jsx)(tt,{})," Analytics"]}),(0,Be.jsxs)("button",{className:"staff-reset-btn",onClick:()=>{i(""),o(""),G(""),A(s),I(!1)},children:[(0,Be.jsx)(At,{})," Reset"]}),(0,Be.jsxs)("div",{className:"staff-export-group",children:[(0,Be.jsxs)("select",{className:"staff-select export-select",value:Oe,onChange:e=>Me(e.target.value),children:[(0,Be.jsx)("option",{value:"excel",children:"Excel"}),(0,Be.jsx)("option",{value:"pdf",children:"PDF"}),(0,Be.jsx)("option",{value:"csv",children:"CSV"})]}),(0,Be.jsx)("button",{className:"staff-export-btn",onClick:async()=>{if(!Ue)try{switch(ze(!0),Oe){case"excel":default:await Je();break;case"csv":await(()=>{const e=it(),t=yE.json_to_sheet(e),n=yE.sheet_to_csv(t),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=ot("csv");if(navigator.msSaveBlob)navigator.msSaveBlob(r,i);else{const e=document.createElement("a");e.href=URL.createObjectURL(r),e.download=i,e.style.display="none",document.body.appendChild(e);try{e.click()}finally{setTimeout(()=>{URL.revokeObjectURL(e.href),e.parentNode&&e.parentNode.removeChild(e)},100)}}})();break;case"pdf":await(()=>{const e=new jD.default("landscape"),t=it();e.setFontSize(16),e.text("".concat(null===w||void 0===w?void 0:w.College," - Student Report"),14,15),e.setFontSize(11),e.text("Department: ".concat(r||"All"," | Year: ").concat(a||"All"),14,25),e.setFontSize(10),e.text("Generated on: ".concat((new Date).toLocaleString()),14,30);const n=V.length>0?at():t[0]?Object.keys(t[0]):[],i=t.map(e=>n.map(t=>e[t]));e.autoTable({head:[n],body:i,startY:35,styles:{fontSize:8},columnStyles:{0:{cellWidth:30},1:{cellWidth:20},2:{cellWidth:25},3:{cellWidth:20},4:{cellWidth:15}},didDrawPage:t=>{e.setFontSize(8),e.text("Page ".concat(e.internal.getNumberOfPages()),t.settings.margin.left,e.internal.pageSize.height-10)}});const o=ot("pdf");e.save(o)})()}}catch(f){console.error("Export failed:",f),alert("Export failed. Please try again.")}finally{ze(!1)}},disabled:Ue,children:Ue?(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"staff-spinner-small"}),"Exporting..."]}):(0,Be.jsxs)(Be.Fragment,{children:["excel"===Oe&&(0,Be.jsx)(mt,{}),"pdf"===Oe&&(0,Be.jsx)(gt,{}),"csv"===Oe&&(0,Be.jsx)(pt,{})," Export"]})}),(0,Be.jsx)("button",{className:"staff-reset-btn",onClick:()=>Y(e=>!e),style:{marginLeft:8},children:"Choose Scores"})]})]}),K&&(0,Be.jsxs)("div",{className:"staff-export-options",style:{marginTop:12,display:"flex",flexWrap:"wrap",gap:8},children:[0===X.length?(0,Be.jsx)("span",{style:{color:"#666"},children:"No score columns detected."}):X.map(e=>(0,Be.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6,background:"#f7f8fc",padding:"6px 10px",borderRadius:6},children:[(0,Be.jsx)("input",{type:"checkbox",checked:$.includes(e),onChange:t=>{J(n=>t.target.checked?[...n,e]:n.filter(t=>t!==e))}}),(0,Be.jsx)("span",{children:e})]},e)),X.length>0&&(0,Be.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,Be.jsx)("button",{className:"staff-filter-btn",onClick:()=>J(X),children:"Select All"}),(0,Be.jsx)("button",{className:"staff-reset-btn",onClick:()=>J([]),children:"Clear"})]})]}),T&&(0,Be.jsx)("div",{className:"staff-table-wrapper",children:(0,Be.jsxs)("table",{className:"staff-table",children:[(0,Be.jsx)("thead",{children:(0,Be.jsx)("tr",{children:V.map(e=>(0,Be.jsx)("th",{children:e},e))})}),(0,Be.jsx)("tbody",{children:N.map(e=>(0,Be.jsx)("tr",{children:V.map(t=>{var n;return(0,Be.jsx)("td",{children:null!==(n=e[t])&&void 0!==n?n:""},t)})},e["Roll Number"]||e.Email||e.ID||e.Name))})]})})]}),te&&(()=>{const e=$.length>0?$:X.slice(0,5),t=e.map(e=>{var t;return(null===(t=qe[e])||void 0===t?void 0:t.displayName)||e}),n=e.map(e=>{const t=N.map(t=>parseFloat(t[e])).filter(e=>!isNaN(e)&&e>0);return t.length>0?(t.reduce((e,t)=>e+t,0)/t.length).toFixed(1):0}),r=[0,0,0,0];return N.forEach(t=>{let n=0,i=0;e.forEach(e=>{const r=parseFloat(t[e]);var a;isNaN(r)||(n+=r,i+=(null===(a=qe[e])||void 0===a?void 0:a.maxScore)||100)});const a=i>0?n/i*100:0;a>80?r[0]++:a>60?r[1]++:a>40?r[2]++:r[3]++}),(0,Be.jsx)("div",{className:"modal-overlay",onClick:()=>re(!1),children:(0,Be.jsxs)("div",{className:"modal-content analytics-modal",onClick:e=>e.stopPropagation(),style:{maxWidth:"1000px",width:"90%",maxHeight:"90vh",overflowY:"auto",padding:"2rem"},children:[(0,Be.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,Be.jsxs)("h2",{className:"staff-section-title",style:{marginBottom:0},children:["Reports Analytics - ",N.length," Students"]}),(0,Be.jsxs)("button",{className:"staff-reset-btn",onClick:()=>re(!1),children:[(0,Be.jsx)(At,{})," Close"]})]}),(0,Be.jsxs)("div",{className:"staff-insights-grid",children:[(0,Be.jsxs)("div",{className:"staff-insight-box",children:[(0,Be.jsx)("h3",{children:"Average Scores by Course"}),(0,Be.jsx)(DD,{data:{labels:t,datasets:[{label:"Avg Score",data:n,backgroundColor:"rgba(33, 150, 243, 0.5)",borderColor:"rgb(33, 150, 243)",borderWidth:1}]},options:{responsive:!0}})]}),(0,Be.jsxs)("div",{className:"staff-insight-box",children:[(0,Be.jsx)("h3",{children:"Overall Performance Distribution"}),(0,Be.jsx)(RD,{data:{labels:["Excellent (>80%)","Good (60-80%)","Average (40-60%)","Below Avg (<40%)"],datasets:[{data:r,backgroundColor:["rgba(76, 175, 80, 0.5)","rgba(33, 150, 243, 0.5)","rgba(255, 152, 0, 0.5)","rgba(244, 67, 54, 0.5)"]}]},options:{responsive:!0}})]}),(0,Be.jsxs)("div",{className:"staff-stat-box full-width",style:{marginTop:"1.5rem",flexBasis:"100%"},children:[(0,Be.jsx)("h3",{children:"Dataset Performance Summary"}),(0,Be.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[(0,Be.jsxs)("div",{className:"staff-stat-item",children:[(0,Be.jsx)("span",{children:"Selected Students:"}),(0,Be.jsx)("span",{children:N.length})]}),(0,Be.jsxs)("div",{className:"staff-stat-item",children:[(0,Be.jsx)("span",{children:"Avg Dept Performance:"}),(0,Be.jsxs)("span",{children:[(n.reduce((e,t)=>parseFloat(e)+parseFloat(t),0)/(n.length||1)).toFixed(1)," %"]})]}),(0,Be.jsxs)("div",{className:"staff-stat-item",children:[(0,Be.jsx)("span",{children:"High Achievers:"}),(0,Be.jsx)("span",{children:r[0]})]})]})]})]}),(0,Be.jsxs)("div",{style:{marginTop:"2rem",fontSize:"0.8rem",color:"#666",fontStyle:"italic"},children:["* Analytics based on the currently filtered students and ",$.length>0?"selected":"first 5"," score columns."]})]})})})(),"mcq-reports"===_&&(0,Be.jsxs)("div",{className:"staff-reports-section",children:[(0,Be.jsxs)("div",{className:"staff-section-header-row",style:{padding:"0 1rem"},children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"MCQ Reports"}),(0,Be.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Be.jsxs)("button",{className:"staff-filter-btn",onClick:()=>Le(!0),style:{backgroundColor:"#673ab7"},disabled:0===de.length,children:[(0,Be.jsx)(tt,{})," View Analytics"]}),(0,Be.jsx)("button",{className:"staff-filter-btn",onClick:_t,disabled:pe,children:pe?"Refreshing...":"Refresh Data"})]})]}),(0,Be.jsxs)("div",{className:"staff-filter-bar",children:[(0,Be.jsxs)("select",{className:"staff-select",value:xe,onChange:e=>we(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Tests"}),Ae.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]}),(0,Be.jsxs)("select",{className:"staff-select",value:Se,onChange:e=>_e(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Departments"}),Ie.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]}),(0,Be.jsxs)("select",{className:"staff-select",value:Ee,onChange:e=>Ce(e.target.value),children:[(0,Be.jsx)("option",{value:"",children:"All Years"}),Re.map(e=>(0,Be.jsx)("option",{value:e,children:e},e))]}),(0,Be.jsxs)("select",{className:"staff-select",value:"".concat(ke.key,"-").concat(ke.order),onChange:e=>{const[t,n]=e.target.value.split("-");Ne({key:t,order:n})},children:[(0,Be.jsx)("option",{value:"Score-desc",children:"Score: High to Low"}),(0,Be.jsx)("option",{value:"Score-asc",children:"Score: Low to High"}),(0,Be.jsx)("option",{value:"Submitted At-desc",children:"Date: NewestFirst"}),(0,Be.jsx)("option",{value:"Submitted At-asc",children:"Date: OldestFirst"}),(0,Be.jsx)("option",{value:"Name-asc",children:"Name: A-Z"})]}),(0,Be.jsx)("input",{className:"staff-select",placeholder:"Search Name / Roll No",value:ye,onChange:e=>be(e.target.value),style:{minWidth:200}}),(0,Be.jsxs)("button",{className:"staff-filter-btn",onClick:Et,children:[(0,Be.jsx)(ft,{})," Apply Filters"]}),(0,Be.jsxs)("div",{className:"staff-export-group",style:{marginLeft:"auto"},children:[(0,Be.jsxs)("button",{className:"staff-export-btn",onClick:()=>Ct("excel"),children:[(0,Be.jsx)(ut,{})," Excel"]}),(0,Be.jsxs)("button",{className:"staff-export-btn",onClick:()=>Ct("pdf"),style:{backgroundColor:"#d32f2f"},children:[(0,Be.jsx)(gt,{})," PDF"]})]})]}),ge&&(0,Be.jsx)("div",{className:"staff-error-banner",style:{margin:"1rem",padding:"1rem",background:"#ffebee",color:"#c62828",borderRadius:8},children:ge}),pe?(0,Be.jsxs)("div",{className:"staff-loading-content",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"4rem"},children:[(0,Be.jsx)("div",{className:"staff-spinner"}),(0,Be.jsx)("p",{style:{marginTop:"1rem"},children:"Fetching reports from Google Sheets..."})]}):(0,Be.jsx)("div",{className:"staff-table-wrapper",children:(0,Be.jsxs)("table",{className:"staff-table",children:[(0,Be.jsx)("thead",{children:(0,Be.jsxs)("tr",{children:[(0,Be.jsx)("th",{children:"Name"}),(0,Be.jsx)("th",{children:"Roll Number"}),(0,Be.jsx)("th",{children:"Year"}),(0,Be.jsx)("th",{children:"Dept"}),(0,Be.jsx)("th",{children:"Test Name"}),(0,Be.jsx)("th",{children:"Score"}),(0,Be.jsx)("th",{children:"Total"}),(0,Be.jsx)("th",{children:"%"}),(0,Be.jsx)("th",{children:"Time Taken"}),(0,Be.jsx)("th",{children:"Submitted At"}),(0,Be.jsx)("th",{children:"Auto"})]})}),(0,Be.jsx)("tbody",{children:de.length>0?de.map((e,t)=>(0,Be.jsxs)("tr",{children:[(0,Be.jsx)("td",{children:e.Name}),(0,Be.jsx)("td",{children:e["Roll Number"]}),(0,Be.jsx)("td",{children:e.Year}),(0,Be.jsx)("td",{children:e.Department}),(0,Be.jsx)("td",{children:e["Test Name"]}),(0,Be.jsx)("td",{children:e.Score}),(0,Be.jsx)("td",{children:e["Total Questions"]}),(0,Be.jsx)("td",{children:e.Percentage?(100*e.Percentage).toFixed(1)+"%":e.score&&e.totalQuestions?(e.score/e.totalQuestions*100).toFixed(1)+"%":"0%"}),(0,Be.jsx)("td",{children:e["Time Taken"]}),(0,Be.jsx)("td",{children:e["Submitted At"]?new Date(e["Submitted At"]).toLocaleString():"N/A"}),(0,Be.jsx)("td",{children:"Yes"===e["Auto Submitted"]?"Yes":"No"})]},t)):(0,Be.jsx)("tr",{children:(0,Be.jsx)("td",{colSpan:"11",style:{textAlign:"center",padding:"2rem"},children:"No MCQ results found for the selected criteria."})})})]})}),je&&kt()]}),"profile"===_&&(0,Be.jsxs)("div",{className:"staff-profile-section",children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"Staff Profile"}),(0,Be.jsxs)("div",{className:"staff-profile-content",children:[(0,Be.jsxs)("div",{className:"staff-profile-item",children:[(0,Be.jsx)("label",{children:"Name:"}),(0,Be.jsx)("p",{children:null===w||void 0===w?void 0:w.Name})]}),(0,Be.jsxs)("div",{className:"staff-profile-item",children:[(0,Be.jsx)("label",{children:"Email:"}),(0,Be.jsx)("p",{children:null===w||void 0===w?void 0:w.Email})]}),(0,Be.jsxs)("div",{className:"staff-profile-item",children:[(0,Be.jsx)("label",{children:"Department:"}),(0,Be.jsx)("p",{children:(null===w||void 0===w?void 0:w.Department)||"Not specified"})]}),(0,Be.jsxs)("div",{className:"staff-profile-item",children:[(0,Be.jsx)("label",{children:"College:"}),(0,Be.jsx)("p",{children:null===w||void 0===w?void 0:w.College})]}),(0,Be.jsxs)("div",{className:"staff-profile-item",children:[(0,Be.jsx)("label",{children:"Role:"}),(0,Be.jsx)("p",{children:null===w||void 0===w?void 0:w.Role})]})]})]}),"placements"===_&&(0,Be.jsxs)("div",{className:"staff-placements-section",children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"Placements"}),(0,Be.jsxs)("div",{className:"staff-placements-content",children:[(0,Be.jsx)("p",{children:"Placement management features coming soon..."}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Company Partner Management"}),(0,Be.jsx)("li",{children:"Job Posting Management"}),(0,Be.jsx)("li",{children:"Student Placement Tracking"}),(0,Be.jsx)("li",{children:"Interview Scheduling"}),(0,Be.jsx)("li",{children:"Offer Letter Management"})]})]})]}),"settings"===_&&(0,Be.jsxs)("div",{className:"staff-settings-section",children:[(0,Be.jsx)("h2",{className:"staff-section-title",children:"Dashboard Settings"}),(0,Be.jsxs)("div",{className:"staff-settings-content",children:[(0,Be.jsx)("p",{children:"Settings features coming soon..."}),(0,Be.jsxs)("ul",{children:[(0,Be.jsx)("li",{children:"Dashboard Customization"}),(0,Be.jsx)("li",{children:"Notification Preferences"}),(0,Be.jsx)("li",{children:"Data Display Options"}),(0,Be.jsx)("li",{children:"Theme Settings"})]})]})]})]})]}),We&&(0,Be.jsx)("div",{className:"modal-overlay",children:(0,Be.jsxs)("div",{className:"logout-modal",children:[(0,Be.jsx)("div",{className:"logout-icon-container",children:(0,Be.jsx)(Nt,{className:"logout-icon"})}),(0,Be.jsxs)("p",{children:["Goodbye, ",null===w||void 0===w?void 0:w.Name,"!"]}),(0,Be.jsx)("p",{className:"redirect-text",children:"Logging you out..."})]})})]})},FD=Object.entries(Mt).map(e=>{let[t,n]=e;return{id:t,name:n}});const BD=function(){var e;const[n,r]=(0,t.useState)({name:"",rollNumber:"",email:"",college:"",department:"",year:"",hackerrankEmail:"",hackerrankID:""}),[i,a]=(0,t.useState)(!1),[o,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),[d,f]=(0,t.useState)(""),[p,m]=(0,t.useState)({}),[g,v]=(0,t.useState)({}),[y,b]=(0,t.useState)({loading:!1,error:null}),[x,w]=(0,t.useState)(""),[S,_]=(0,t.useState)(!1),E=(0,t.useRef)(null),C=FD.filter(e=>e.name.toLowerCase().includes(x.toLowerCase()));(0,t.useEffect)(()=>{function e(e){E.current&&!E.current.contains(e.target)&&_(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const k=e=>{const{name:t,value:n}=e.target;let i=n;"name"===t||"rollNumber"===t?i=n.toUpperCase():"email"===t||"hackerrankEmail"===t?i=n.toLowerCase():"hackerrankID"===t&&n.startsWith("@")&&(i=n.substring(1)),r(e=>Fe(Fe({},e),{},{[t]:i})),g[t]&&m(e=>Fe(Fe({},e),{},{[t]:A(t,i)}))},N=e=>{const{name:t,value:n}=e.target;v(e=>Fe(Fe({},e),{},{[t]:!0})),m(e=>Fe(Fe({},e),{},{[t]:A(t,n)}))},A=(e,t)=>{switch(e){case"name":return t.trim()?/^[A-Z\s]+$/.test(t)?"":"Use only uppercase letters and spaces":"Name is required";case"email":return t.trim()?/^\S+@\S+\.\S+$/.test(t)?"":"Invalid email format":"Email is required";case"hackerrankEmail":return t.trim()?/^\S+@\S+\.\S+$/.test(t)?"":"Invalid email format":"HackerRank email is required";case"hackerrankID":return t.trim()?t.startsWith("@")?"Username cannot start with @":"":"HackerRank ID is required";case"rollNumber":return t.trim()?"":"Roll number is required";default:return t.trim()?"":"".concat(e," is required")}},T=()=>{const e=Object.values(n).every(e=>""!==e.trim()),t=Object.values(p).every(e=>!e);return e&&t};return(0,Be.jsx)("div",{className:"registration-page-wrapper",children:(0,Be.jsxs)("div",{className:"registration-card",children:[(0,Be.jsxs)("header",{className:"registration-header-new",children:[(0,Be.jsx)("div",{className:"registration-avatar",children:(0,Be.jsx)("img",{src:"https://raw.githubusercontent.com/seeditDev/SEED-Website/f3cee9002410a00df4da7bea636ac9fbc4c312ca/Plugins/SEED_Logo.webp",alt:"SEED-IT Logo"})}),(0,Be.jsxs)("div",{className:"registration-header-text",children:[(0,Be.jsx)("h2",{children:n.name||"New Student"}),(0,Be.jsxs)("div",{className:"registration-status-pill ".concat(l?"review":""),children:[(0,Be.jsx)("span",{className:"pill-dot"}),l?"Registration \u2014 Reviewing":"Registration \u2014 Creating"]})]})]}),!i&&!o&&!l&&(0,Be.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={};if(Object.keys(n).forEach(e=>{const r=A(e,n[e]);r&&(t[e]=r)}),Object.keys(t).length>0)return m(t),void v(Object.keys(n).reduce((e,t)=>Fe(Fe({},e),{},{[t]:!0}),{}));c(!0),window.scrollTo({top:0,behavior:"smooth"})},className:"registration-form-new",children:[(0,Be.jsxs)("div",{className:"form-body-grid",children:[(0,Be.jsxs)("div",{className:"form-column",children:[(0,Be.jsx)("h3",{className:"section-title",children:"Personal Information"}),(0,Be.jsxs)("div",{className:"form-group-new",children:[(0,Be.jsx)("label",{children:"Full Name"}),(0,Be.jsx)("input",{type:"text",name:"name",value:n.name,onChange:k,onBlur:N,className:p.name&&g.name?"error":"",placeholder:"E.g., JOHN DOE",required:!0}),p.name&&g.name&&(0,Be.jsx)("span",{className:"error-hint",children:p.name})]}),(0,Be.jsxs)("div",{className:"form-group-new",children:[(0,Be.jsx)("label",{children:"Email Address"}),(0,Be.jsx)("input",{type:"email",name:"email",value:n.email,onChange:k,onBlur:N,className:p.email&&g.email?"error":"",placeholder:"Enter your email",required:!0}),p.email&&g.email&&(0,Be.jsx)("span",{className:"error-hint",children:p.email})]}),(0,Be.jsxs)("div",{className:"form-group-new",children:[(0,Be.jsx)("label",{children:"Roll Number"}),(0,Be.jsx)("input",{type:"text",name:"rollNumber",value:n.rollNumber,onChange:k,onBlur:N,className:p.rollNumber&&g.rollNumber?"error":"",placeholder:"Enter roll number (CAPS)",required:!0}),p.rollNumber&&g.rollNumber&&(0,Be.jsx)("span",{className:"error-hint",children:p.rollNumber})]})]}),(0,Be.jsxs)("div",{className:"form-column",children:[(0,Be.jsx)("h3",{className:"section-title",children:"Academic Details"}),(0,Be.jsxs)("div",{className:"form-group-new",ref:E,children:[(0,Be.jsx)("label",{children:"College Name"}),(0,Be.jsxs)("div",{className:"college-search-wrapper",children:[(0,Be.jsx)("input",{type:"text",value:x,onChange:e=>{w(e.target.value),_(!0)},onFocus:()=>_(!0),placeholder:"Type to search...",className:p.college&&g.college?"error":"",required:!0}),S&&(0,Be.jsx)("div",{className:"college-results-dropdown",children:C.length>0?C.map(e=>(0,Be.jsx)("div",{className:"college-result-item",onClick:()=>(e=>{r(t=>Fe(Fe({},t),{},{college:e.id})),w(e.name),_(!1),v(e=>Fe(Fe({},e),{},{college:!0}))})(e),children:e.name},e.id)):(0,Be.jsx)("div",{className:"no-college-results",children:"No results found"})})]}),p.college&&g.college&&(0,Be.jsx)("span",{className:"error-hint",children:p.college})]}),(0,Be.jsxs)("div",{className:"form-group-new",children:[(0,Be.jsx)("label",{children:"Department"}),(0,Be.jsxs)("select",{name:"department",value:n.department,onChange:k,onBlur:N,className:p.department&&g.department?"error":"",required:!0,children:[(0,Be.jsx)("option",{value:"",children:"Select Department"}),(0,Be.jsx)("option",{value:"CIVIL",children:"Civil Engineering"}),(0,Be.jsx)("option",{value:"MECH",children:"Mechanical Engineering"}),(0,Be.jsx)("option",{value:"EEE",children:"Electrical and Electronics Engineering"}),(0,Be.jsx)("option",{value:"ECE",children:"Electronics and Communication Engineering"}),(0,Be.jsx)("option",{value:"CSE",children:"Computer Science and Engineering"}),(0,Be.jsx)("option",{value:"IT",children:"Information Technology"}),(0,Be.jsx)("option",{value:"AIDS",children:"Artificial Intelligence and Data Science"}),(0,Be.jsx)("option",{value:"AIML",children:"Artificial Intelligence and Machine Learning"}),(0,Be.jsx)("option",{value:"CSBS",children:"Computer Science and Business Systems"}),(0,Be.jsx)("option",{value:"CSD",children:"Computer Science and Design"}),(0,Be.jsx)("option",{value:"BCA",children:"Computer Applications"}),(0,Be.jsx)("option",{value:"MECHATRONICS",children:"Mechatronics Engineering"}),(0,Be.jsx)("option",{value:"CYBER",children:"Cyber Security"}),(0,Be.jsx)("option",{value:"IOT",children:"Internet of Things"}),(0,Be.jsx)("option",{value:"CLOUD",children:"Cloud Computing"}),(0,Be.jsx)("option",{value:"ETC",children:"Electronics and Telecommunication"}),(0,Be.jsx)("option",{value:"BCOM_CA",children:"B.Com Computer Applications"}),(0,Be.jsx)("option",{value:"BSC_CS",children:"B.Sc Computer Science"}),(0,Be.jsx)("option",{value:"BCA",children:"Bachelor of Computer Applications"})]}),p.department&&g.department&&(0,Be.jsx)("span",{className:"error-hint",children:p.department})]}),(0,Be.jsxs)("div",{className:"form-group-new",children:[(0,Be.jsx)("label",{children:"Batch Year"}),(0,Be.jsxs)("select",{name:"year",value:n.year,onChange:k,onBlur:N,className:p.year&&g.year?"error":"",required:!0,children:[(0,Be.jsx)("option",{value:"",children:"Select Year"}),["2K21","2K22","2K23","2K24","2K25","2K26","2K27","2K28","2K29","2K30"].map(e=>(0,Be.jsx)("option",{value:e,children:e.replace("2K","20")},e))]}),p.year&&g.year&&(0,Be.jsx)("span",{className:"error-hint",children:p.year})]})]}),(0,Be.jsxs)("div",{className:"form-column",children:[(0,Be.jsx)("h3",{className:"section-title",children:"HackerRank Info"}),(0,Be.jsxs)("div",{className:"form-group-new",children:[(0,Be.jsx)("label",{children:"HackerRank Email"}),(0,Be.jsx)("input",{type:"email",name:"hackerrankEmail",value:n.hackerrankEmail,onChange:k,onBlur:N,className:p.hackerrankEmail&&g.hackerrankEmail?"error":"",placeholder:"HackerRank registered email",required:!0}),p.hackerrankEmail&&g.hackerrankEmail&&(0,Be.jsx)("span",{className:"error-hint",children:p.hackerrankEmail})]}),(0,Be.jsxs)("div",{className:"form-group-new",children:[(0,Be.jsx)("label",{children:"HackerRank ID"}),(0,Be.jsx)("input",{type:"text",name:"hackerrankID",value:n.hackerrankID,onChange:k,onBlur:N,className:p.hackerrankID&&g.hackerrankID?"error":"",placeholder:"e.g., john_doe",required:!0}),p.hackerrankID&&g.hackerrankID&&(0,Be.jsx)("span",{className:"error-hint",children:p.hackerrankID})]})]})]}),(0,Be.jsx)("footer",{className:"registration-footer-new",children:(0,Be.jsx)("button",{type:"submit",className:"submit-action-btn ".concat(T()?"":"disabled"),disabled:!T(),children:"Continue to Review"})})]}),l&&(0,Be.jsxs)("div",{className:"registration-review-section",children:[(0,Be.jsxs)("div",{className:"review-alert",children:[(0,Be.jsx)("span",{className:"alert-icon",children:"\u2139\ufe0f"}),(0,Be.jsx)("p",{children:"Please review your details carefully. Your information will be sent for verification."})]}),(0,Be.jsxs)("div",{className:"review-grid",children:[(0,Be.jsxs)("div",{className:"review-card-item",children:[(0,Be.jsx)("span",{className:"review-label",children:"Full Name"}),(0,Be.jsx)("span",{className:"review-value",children:n.name})]}),(0,Be.jsxs)("div",{className:"review-card-item",children:[(0,Be.jsx)("span",{className:"review-label",children:"Email"}),(0,Be.jsx)("span",{className:"review-value",children:n.email})]}),(0,Be.jsxs)("div",{className:"review-card-item",children:[(0,Be.jsx)("span",{className:"review-label",children:"Roll Number"}),(0,Be.jsx)("span",{className:"review-value",children:n.rollNumber})]}),(0,Be.jsxs)("div",{className:"review-card-item",children:[(0,Be.jsx)("span",{className:"review-label",children:"College"}),(0,Be.jsx)("span",{className:"review-value",children:(null===(e=FD.find(e=>e.id===n.college))||void 0===e?void 0:e.name)||n.college})]}),(0,Be.jsxs)("div",{className:"review-card-item",children:[(0,Be.jsx)("span",{className:"review-label",children:"Department"}),(0,Be.jsx)("span",{className:"review-value",children:n.department})]}),(0,Be.jsxs)("div",{className:"review-card-item",children:[(0,Be.jsx)("span",{className:"review-label",children:"Batch Year"}),(0,Be.jsx)("span",{className:"review-value",children:n.year.replace("2K","20")})]}),(0,Be.jsxs)("div",{className:"review-card-item",children:[(0,Be.jsx)("span",{className:"review-label",children:"HackerRank Email"}),(0,Be.jsx)("span",{className:"review-value",children:n.hackerrankEmail})]}),(0,Be.jsxs)("div",{className:"review-card-item",children:[(0,Be.jsx)("span",{className:"review-label",children:"HackerRank ID"}),(0,Be.jsx)("span",{className:"review-value",children:n.hackerrankID})]})]}),(0,Be.jsxs)("div",{className:"review-confirmation-box",children:[(0,Be.jsxs)("label",{children:["To confirm, please re-type your ",(0,Be.jsx)("strong",{children:"Roll Number"})," below:"]}),(0,Be.jsx)("input",{type:"text",value:u,onChange:e=>{h(e.target.value.toUpperCase()),f("")},placeholder:"Type Roll Number again",className:d?"error":""}),d&&(0,Be.jsx)("span",{className:"error-hint",children:d})]}),(0,Be.jsxs)("footer",{className:"registration-footer-new",children:[(0,Be.jsx)("button",{className:"back-btn",onClick:()=>c(!1),children:"Back to Edit"}),(0,Be.jsx)("button",{className:"submit-action-btn ".concat(u&&u===n.rollNumber?"":"disabled"),onClick:async()=>{if(u.toUpperCase()===n.rollNumber.toUpperCase()){f(""),b({loading:!0,error:null}),c(!1),a(!0);try{const e=Math.floor(5001*Math.random())+4e3;await new Promise(t=>setTimeout(t,e/2));await fetch("https://script.google.com/macros/s/AKfycbx7ehG0Kpz2Aq5WIjnC5HSuZHBD_oPgfzlro-xSwi-PDPjdJBnHgJExsYzV4NS8bJsk/exec",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});await new Promise(t=>setTimeout(t,e/2)),s(!0),b({loading:!1,error:null}),r({name:"",rollNumber:"",email:"",college:"",department:"",year:"",hackerrankEmail:"",hackerrankID:""}),m({}),v({}),h("")}catch(e){console.error("Error:",e),b({loading:!1,error:"Registration failed. Please try again."}),c(!0)}finally{a(!1)}}else f("Roll number does not match. Please re-check.")},disabled:!u||u!==n.rollNumber,children:"Confirm & Register"})]})]}),i&&(0,Be.jsxs)("div",{className:"loading-state-new",children:[(0,Be.jsx)("div",{className:"processing-spinner"}),(0,Be.jsx)("h3",{children:"Finalizing Registration..."}),(0,Be.jsx)("p",{children:"We're setting up your profile. This usually takes a few seconds."}),y.error&&(0,Be.jsxs)("div",{className:"error-box-new",children:[(0,Be.jsx)("p",{children:y.error}),(0,Be.jsx)("button",{className:"retry-action-btn",onClick:()=>b({loading:!1,error:null}),children:"Try Again"})]})]}),o&&(0,Be.jsxs)("div",{className:"success-state-new",children:[(0,Be.jsx)("div",{className:"success-icon-wrapper",children:(0,Be.jsx)("svg",{viewBox:"0 0 24 24",className:"checkmark-svg",children:(0,Be.jsx)("path",{d:"M21 7L9 19L3.5 13.5L4.91 12.09L9 16.17L19.59 5.58L21 7Z"})})}),(0,Be.jsx)("h2",{children:"Registration Successful!"}),(0,Be.jsx)("p",{children:"Welcome to the SEED-IT platform. You will receive a mail once your account is verified by admin."}),(0,Be.jsxs)("div",{className:"success-actions",children:[(0,Be.jsx)("button",{className:"primary-succ-btn",onClick:()=>window.location.href="/login",children:"Login Now"}),(0,Be.jsx)("button",{className:"secondary-succ-btn",onClick:()=>s(!1),children:"Register Another"})]})]}),(0,Be.jsx)("div",{className:"registration-card-footer",children:(0,Be.jsxs)("p",{children:["\xa9 2023-2025 SEED-IT. All rights Reserved. ",(0,Be.jsxs)("span",{className:"ver-text",children:["v",kY]})]})})]})})},UD="https://script.google.com/macros/s/AKfycbwI5RdohQT3s0OsuQP35VOyP4oezP7d2nBM4JDhQuN7mgVMzFhlHh5QorgFG83AY7T0xw/exec",zD=()=>{const[e,n]=(0,t.useState)({challengeName:"",description:"",problemStatement:"",inputFormat:"",constraints:"",outputFormat:"",tags:"",date:(new Date).toISOString().slice(0,10),language:"",solution:""}),[r,i]=(0,t.useState)(Array.from({length:8},()=>({input:"",output:""}))),[a,o]=(0,t.useState)(!1),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[h,d]=(0,t.useState)(!1),[f,p]=(0,t.useState)("overview"),m=ne(),[g,v]=(0,t.useState)([]),[y,b]=(0,t.useState)(!1),[x,w]=(0,t.useState)(null),[S,_]=(0,t.useState)({}),E=(0,t.useMemo)(()=>{try{return JSON.parse(localStorage.getItem("auth_data")||"{}")}catch(e){return{}}},[]),C=e=>{if(!e)return null;return[e.HackerRankID,e.hackerRankID,e.hackerrank_id,e["HackerRank ID"],e["Hackerrank ID"],e["HackerRank ID "],e.HackerrankID].find(Boolean)||null};(0,t.useEffect)(()=>{i(e=>{if(8===e.length)return e;const t=Array.from({length:8},(t,n)=>e[n]||{input:"",output:""});return t})},[]);const k=e=>{const{name:t,value:r}=e.target;n(e=>Fe(Fe({},e),{},{[t]:r}))},N=(e,t,n)=>{i(r=>r.map((r,i)=>i===e?Fe(Fe({},r),{},{[t]:n}):r))},A=async t=>{t&&t.preventDefault();const a=(()=>{if(!e.challengeName.trim())return"Challenge Name is required";if(!e.description.trim())return"Description is required";if(!e.problemStatement.trim())return"Problem Statement is required";if(!e.inputFormat.trim())return"Input Format is required";if(!e.constraints.trim())return"Constraints are required";if(!e.outputFormat.trim())return"Output Format is required";if(!e.tags.trim())return"Tags are required";if(!e.date)return"Date is required";if(!e.language.trim())return"Language is required";if(!e.solution.trim())return"Solution is required";if(!Array.isArray(r)||8!==r.length)return"Exactly 8 testcases are required";for(let e=0;e<8;e++){const t=r[e]||{};if(!t.input||!t.input.trim())return"Testcase ".concat(e+1,": Input is required");if(!t.output||!t.output.trim())return"Testcase ".concat(e+1,": Expected Output is required")}return null})();if(a)return void l(a);o(!0),l(null);const s=C(E)||(null===E||void 0===E?void 0:E.Email)||null,c={challengeName:e.challengeName,description:e.description,problemStatement:e.problemStatement,inputFormat:e.inputFormat,constraints:e.constraints,outputFormat:e.outputFormat,tags:e.tags,testCases:r.map((e,t)=>({index:t+1,input:e.input,output:e.output})),language:e.language,solution:e.solution,name:(null===E||void 0===E?void 0:E.Name)||null,userId:s,date:e.date,timestamp:(new Date).toISOString()};try{await fetch(UD,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),u(!0),d(!1),n({challengeName:"",description:"",problemStatement:"",inputFormat:"",constraints:"",outputFormat:"",tags:"",date:(new Date).toISOString().slice(0,10),language:"",solution:""}),i(Array.from({length:8},()=>({input:"",output:""})))}catch(h){l("Failed to submit. Please try again.")}finally{o(!1)}},T=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{b(!0),w(null);const t="".concat(UD,"?action=list&limit=").concat(encodeURIComponent(e)),n=await fetch(t,{method:"GET",mode:"cors"}),r=await n.json().catch(()=>null);if(!r||!0!==r.ok||!Array.isArray(r.items))throw new Error("Invalid response");v(r.items)}catch(t){w("Failed to load submissions")}finally{b(!1)}};(0,t.useEffect)(()=>{"history"===f&&T(50)},[f]);return(0,Be.jsxs)("div",{className:"challenge-root",children:[(0,Be.jsx)("header",{className:"challenge-header-container",children:(0,Be.jsxs)("div",{className:"challenge-header-inner",children:[(0,Be.jsxs)("div",{className:"challenge-header-left",children:[(0,Be.jsx)("img",{src:"https://raw.githubusercontent.com/seeditDev/SEED-Website/f3cee9002410a00df4da7bea636ac9fbc4c312ca/Plugins/SEED_Logo.webp",alt:"SEED Logo",className:"challenge-logo"}),(0,Be.jsx)("span",{className:"challenge-portal-title",children:"SEED-IT Challenge Portal"})]}),(0,Be.jsxs)("div",{className:"challenge-header-right",children:[(0,Be.jsx)("span",{style:{color:"#cbd5e1",fontSize:12},children:(new Date).toLocaleString()}),(0,Be.jsx)("div",{className:"challenge-avatar",children:(()=>{if(null!==E&&void 0!==E&&E.Name){return String(E.Name).trim().split(/\s+/).slice(0,2).map(e=>e[0]).join("").toUpperCase()}return"TR"})()}),(0,Be.jsx)("button",{className:"challenge-logout-btn",title:"Logout",onClick:()=>{try{localStorage.removeItem("auth_data"),localStorage.removeItem("role"),sessionStorage.clear()}catch(e){}m("/login")},children:"\u238b"})]})]})}),(0,Be.jsxs)("div",{className:"challenge-layout",children:[(0,Be.jsxs)("aside",{className:"challenge-sidebar-container",children:[(0,Be.jsx)("div",{className:"challenge-sidebar-title",children:"Analytics"}),(0,Be.jsxs)("nav",{className:"challenge-nav",children:[(0,Be.jsx)("button",{className:"challenge-nav-item ".concat("overview"===f?"active":""),onClick:()=>p("overview"),children:"Overview"}),(0,Be.jsx)("button",{className:"challenge-nav-item ".concat("submit"===f?"active":""),onClick:()=>p("submit"),children:"Submit Challenge"}),(0,Be.jsx)("div",{className:"challenge-sidebar-title",children:"Learning"}),(0,Be.jsx)("button",{className:"challenge-nav-item ".concat("history"===f?"active":""),onClick:()=>p("history"),children:"Submission History"}),(0,Be.jsx)("div",{className:"challenge-sidebar-title",children:"Settings"}),(0,Be.jsx)("button",{className:"challenge-nav-item ".concat("settings"===f?"active":""),onClick:()=>p("settings"),children:"Preferences"})]})]}),(0,Be.jsx)("main",{className:"challenge-main-content",children:(0,Be.jsxs)("div",{className:"challenge-container",children:["overview"===f&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsxs)("div",{className:"challenge-card challenge-grid two-col",children:[(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Your Name"}),(0,Be.jsx)("input",{type:"text",value:(null===E||void 0===E?void 0:E.Name)||"",readOnly:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"User ID"}),(0,Be.jsx)("input",{type:"text",value:C(E)||(null===E||void 0===E?void 0:E.Email)||"",readOnly:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Today"}),(0,Be.jsx)("input",{type:"text",value:"".concat(e.date," \u2022 ").concat((new Date).toLocaleTimeString()),readOnly:!0})]})]}),(0,Be.jsxs)("div",{className:"challenge-card",children:[(0,Be.jsx)("h3",{style:{marginTop:0},children:"Welcome, Trainer"}),(0,Be.jsx)("p",{children:"Use the sidebar to submit new coding challenges or review previous submissions."})]})]}),"submit"===f&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("div",{className:"challenge-header",children:(0,Be.jsx)("h2",{className:"challenge-title",children:"Submit Coding Challenge"})}),(0,Be.jsxs)("div",{className:"challenge-card challenge-grid two-col",children:[(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Your Name"}),(0,Be.jsx)("input",{type:"text",value:(null===E||void 0===E?void 0:E.Name)||"",readOnly:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"User ID"}),(0,Be.jsx)("input",{type:"text",value:C(E)||(null===E||void 0===E?void 0:E.Email)||"",readOnly:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Date"}),(0,Be.jsx)("input",{type:"text",value:e.date,readOnly:!0})]})]}),c?(0,Be.jsxs)("div",{className:"success-message",children:[(0,Be.jsx)("h3",{children:"\u2705 Challenge submitted!"}),(0,Be.jsx)("p",{children:"Thank you for your contribution."}),(0,Be.jsx)("button",{className:"register-btn",onClick:()=>u(!1),children:"Submit Another"})]}):(0,Be.jsxs)("form",{onSubmit:A,children:[(0,Be.jsxs)("div",{className:"challenge-card challenge-grid two-col",children:[(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Challenge Name"}),(0,Be.jsx)("input",{type:"text",name:"challengeName",value:e.challengeName,onChange:k,placeholder:"Enter challenge title",required:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Description"}),(0,Be.jsx)("textarea",{name:"description",value:e.description,onChange:k,rows:3,placeholder:"Short description",required:!0})]}),(0,Be.jsxs)("div",{className:"input-box",style:{gridColumn:"1 / -1"},children:[(0,Be.jsx)("label",{children:"Problem Statement"}),(0,Be.jsx)("textarea",{name:"problemStatement",value:e.problemStatement,onChange:k,rows:6,placeholder:"Full problem statement",required:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Input Format"}),(0,Be.jsx)("textarea",{name:"inputFormat",value:e.inputFormat,onChange:k,rows:3,placeholder:"Describe input format",required:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Constraints"}),(0,Be.jsx)("textarea",{name:"constraints",value:e.constraints,onChange:k,rows:3,placeholder:"List constraints",required:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Output Format"}),(0,Be.jsx)("textarea",{name:"outputFormat",value:e.outputFormat,onChange:k,rows:3,placeholder:"Describe output format",required:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Tags"}),(0,Be.jsx)("input",{type:"text",name:"tags",value:e.tags,onChange:k,placeholder:"e.g., arrays, strings, dp",required:!0})]})]}),(0,Be.jsx)("div",{className:"challenge-card",children:(0,Be.jsx)("div",{className:"challenge-grid two-col",children:r.map((e,t)=>(0,Be.jsxs)("div",{className:"testcase-item",children:[(0,Be.jsxs)("h4",{className:"testcase-title",children:["Testcase ",t+1]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Input"}),(0,Be.jsx)("textarea",{value:e.input,onChange:e=>N(t,"input",e.target.value),rows:3,placeholder:"Input",required:!0})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Expected Output"}),(0,Be.jsx)("textarea",{value:e.output,onChange:e=>N(t,"output",e.target.value),rows:3,placeholder:"Expected output",required:!0})]})]},t))})}),(0,Be.jsxs)("div",{className:"challenge-card challenge-grid two-col",children:[(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Language"}),(0,Be.jsxs)("select",{name:"language",value:e.language,onChange:k,required:!0,children:[(0,Be.jsx)("option",{value:"",children:"Select language"}),(0,Be.jsx)("option",{value:"C",children:"C"}),(0,Be.jsx)("option",{value:"C++",children:"C++"}),(0,Be.jsx)("option",{value:"Java",children:"Java"}),(0,Be.jsx)("option",{value:"Python",children:"Python"}),(0,Be.jsx)("option",{value:"C#",children:"C#"})]})]}),(0,Be.jsxs)("div",{className:"input-box",style:{gridColumn:"1 / -1"},children:[(0,Be.jsx)("label",{children:"Solution"}),(0,Be.jsx)("textarea",{name:"solution",value:e.solution,onChange:k,rows:8,placeholder:"Paste your reference solution here",required:!0})]})]}),s&&(0,Be.jsx)("div",{className:"error-inline",children:s}),(0,Be.jsxs)("div",{className:"actions",children:[(0,Be.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>d(!0),children:"Preview"}),(0,Be.jsx)("button",{type:"submit",className:"btn-primary",disabled:a,children:a?"Submitting...":"Submit Challenge"})]})]}),h&&(0,Be.jsx)("div",{className:"preview-overlay",onClick:()=>!a&&d(!1),children:(0,Be.jsxs)("div",{className:"preview-modal",onClick:e=>e.stopPropagation(),children:[(0,Be.jsxs)("div",{className:"preview-header",children:[(0,Be.jsx)("h3",{style:{margin:0},children:"Preview Challenge"}),(0,Be.jsxs)("div",{className:"actions",children:[(0,Be.jsx)("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Close"}),(0,Be.jsx)("button",{className:"btn-primary",onClick:()=>A(),disabled:a,children:a?"Submitting...":"Confirm & Submit"})]})]}),(0,Be.jsxs)("div",{className:"preview-body",children:[(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Challenge Name"}),(0,Be.jsx)("div",{children:e.challengeName||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Description"}),(0,Be.jsx)("div",{children:e.description||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Problem Statement"}),(0,Be.jsx)("div",{className:"preview-code",children:e.problemStatement||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Input Format"}),(0,Be.jsx)("div",{className:"preview-code",children:e.inputFormat||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Constraints"}),(0,Be.jsx)("div",{className:"preview-code",children:e.constraints||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Output Format"}),(0,Be.jsx)("div",{className:"preview-code",children:e.outputFormat||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Tags"}),(0,Be.jsx)("div",{children:e.tags||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Language"}),(0,Be.jsx)("div",{children:e.language||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Solution"}),(0,Be.jsx)("div",{className:"preview-code",children:e.solution||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Name"}),(0,Be.jsx)("div",{children:(null===E||void 0===E?void 0:E.Name)||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"User ID"}),(0,Be.jsx)("div",{children:C(E)||(null===E||void 0===E?void 0:E.Email)||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsx)("h4",{children:"Date"}),(0,Be.jsx)("div",{children:e.date||"-"})]}),(0,Be.jsxs)("div",{className:"preview-row",children:[(0,Be.jsxs)("h4",{children:["Testcases (",r.length,")"]}),r.map((e,t)=>(0,Be.jsxs)("div",{className:"challenge-card",children:[(0,Be.jsxs)("strong",{children:["#",t+1]}),(0,Be.jsxs)("div",{style:{marginTop:8},children:[(0,Be.jsx)("div",{style:{marginBottom:6},children:"Input"}),(0,Be.jsx)("div",{className:"preview-code",children:e.input||"-"})]}),(0,Be.jsxs)("div",{style:{marginTop:8},children:[(0,Be.jsx)("div",{style:{marginBottom:6},children:"Expected Output"}),(0,Be.jsx)("div",{className:"preview-code",children:e.output||"-"})]})]},t))]})]})]})})]}),"history"===f&&(0,Be.jsxs)("div",{className:"challenge-card",children:[(0,Be.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Be.jsx)("h3",{style:{marginTop:0},children:"Recent Submissions"}),(0,Be.jsx)("div",{className:"actions",children:(0,Be.jsx)("button",{className:"btn-secondary",onClick:()=>T(50),disabled:y,children:"Refresh"})})]}),y&&(0,Be.jsx)("p",{children:"Loading..."}),x&&(0,Be.jsx)("div",{className:"error-inline",children:x}),!y&&!x&&0===g.length&&(0,Be.jsx)("p",{style:{color:"#6b7280"},children:"No submissions found."}),!y&&!x&&g.length>0&&(0,Be.jsx)("div",{className:"staff-table-wrapper",children:(0,Be.jsxs)("table",{className:"staff-table",children:[(0,Be.jsx)("thead",{children:(0,Be.jsxs)("tr",{children:[(0,Be.jsx)("th",{children:"Date"}),(0,Be.jsx)("th",{children:"Time"}),(0,Be.jsx)("th",{children:"Trainer"}),(0,Be.jsx)("th",{children:"User ID"}),(0,Be.jsx)("th",{children:"Challenge"}),(0,Be.jsx)("th",{children:"Lang"}),(0,Be.jsx)("th",{children:"Tags"}),(0,Be.jsx)("th",{})]})}),(0,Be.jsx)("tbody",{children:g.map((e,n)=>{const r=e.ChallengeID||"row_".concat(n),i=String(e.Date||"").trim(),a=String(e.Timestamp||"").trim();return(0,Be.jsxs)(t.Fragment,{children:[(0,Be.jsxs)("tr",{children:[(0,Be.jsx)("td",{children:i}),(0,Be.jsx)("td",{children:a.replace(/T/," ").replace(/\.\d+Z?$/,"")}),(0,Be.jsx)("td",{children:e.TrainerName||e.Name||"-"}),(0,Be.jsx)("td",{children:e.UserID||"-"}),(0,Be.jsx)("td",{children:e.ChallengeName||"-"}),(0,Be.jsx)("td",{children:e.Language||"-"}),(0,Be.jsx)("td",{children:e.Tags||"-"}),(0,Be.jsx)("td",{children:(0,Be.jsx)("button",{className:"btn-secondary",onClick:()=>(e=>{_(t=>Fe(Fe({},t),{},{[e]:!t[e]}))})(r),children:S[r]?"Hide":"View"})})]}),S[r]&&(0,Be.jsx)("tr",{children:(0,Be.jsxs)("td",{colSpan:8,children:[(0,Be.jsxs)("div",{className:"challenge-grid two-col",children:[(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Description"}),(0,Be.jsx)("textarea",{readOnly:!0,rows:3,value:e.Description||""})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Problem Statement"}),(0,Be.jsx)("textarea",{readOnly:!0,rows:6,value:e.ProblemStatement||""})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Input Format"}),(0,Be.jsx)("textarea",{readOnly:!0,rows:3,value:e.InputFormat||""})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Constraints"}),(0,Be.jsx)("textarea",{readOnly:!0,rows:3,value:e.Constraints||""})]}),(0,Be.jsxs)("div",{className:"input-box",style:{gridColumn:"1 / -1"},children:[(0,Be.jsx)("label",{children:"Output Format"}),(0,Be.jsx)("textarea",{readOnly:!0,rows:3,value:e.OutputFormat||""})]}),(0,Be.jsxs)("div",{className:"input-box",style:{gridColumn:"1 / -1"},children:[(0,Be.jsx)("label",{children:"Solution"}),(0,Be.jsx)("textarea",{readOnly:!0,rows:8,value:e.Solution||""})]})]}),(0,Be.jsx)("div",{className:"challenge-grid two-col",style:{marginTop:12},children:Array.from({length:8}).map((t,n)=>(0,Be.jsxs)("div",{className:"testcase-item",children:[(0,Be.jsxs)("h4",{className:"testcase-title",children:["Testcase ",n+1]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Input"}),(0,Be.jsx)("textarea",{readOnly:!0,rows:3,value:e["TC".concat(n+1,"_Input")]||""})]}),(0,Be.jsxs)("div",{className:"input-box",children:[(0,Be.jsx)("label",{children:"Expected Output"}),(0,Be.jsx)("textarea",{readOnly:!0,rows:3,value:e["TC".concat(n+1,"_Output")]||""})]})]},n))})]})})]},r)})})]})})]}),"settings"===f&&(0,Be.jsxs)("div",{className:"challenge-card",children:[(0,Be.jsx)("h3",{style:{marginTop:0},children:"Preferences"}),(0,Be.jsx)("p",{children:"Configure trainer preferences. (Coming soon)"})]})]})})]}),(0,Be.jsx)("footer",{className:"challenge-footer",children:(0,Be.jsx)("div",{className:"challenge-footer-inner",children:"\xa9 2023-2025 SEED Innovating Technologies and Educational Services (SEED-IT). All Rights Reserved."})})]})};var WD=function(e,t){return(WD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function VD(e,t){function n(){this.constructor=e}WD(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function HD(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,s)}l((r=r.apply(e,t||[])).next())})}function qD(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var GD=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")}),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach(function(t){var n=t.split(":"),r=n[0],i=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,i)})}},e}();function KD(){return YD}var YD=null,XD=new Map,QD=new Map;function $D(e,t){var n=tR(e,t);return XD.get(n)}function JD(e){for(var t=XD.entries(),n=[];;){var r=t.next(),i=r.done,a=r.value;if(i)break;var o=a[0],s=a[1];o.split("_")[0]===e&&n.push(s)}return n}function ZD(e){var t=e.kernelName,n=e.backendName,r=tR(t,n);if(XD.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");XD.set(r,e)}function eR(e){var t=e.kernelName;QD.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),QD.set(t,e)}function tR(e,t){return t+"_"+e}function nR(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function rR(e,t,n){return Math.max(e,Math.min(t,n))}function iR(e){return e%2==0?e:e+1}function aR(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function oR(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function sR(e,t,n){void 0===n&&(n=""),oR(hR(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function lR(e){oR(null!=e,function(){return"The input to the tensor constructor must be a non-null value."})}function cR(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||CR(e)&&!n)for(var r=0;r<e.length;++r)cR(e[r],t,n);else t.push(e);return t}function uR(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function hR(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function dR(e){return e%1==0}function fR(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function pR(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function mR(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function gR(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,i){var a=0,o=function(){if(e())r();else{a++;var s=t(a);null!=n&&a>=n?i():setTimeout(o,s)}};o()})}function vR(e,t){for(var n=1,r=-1,i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found "+e[i]+" at dim "+i);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var a=e.slice();return a[r]=t/n,a}function yR(e,t){var n=t.length;return oR((e=null==e?t.map(function(e,t){return t}):[].concat(e)).every(function(e){return e>=-n&&e<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),oR(e.every(function(e){return dR(e)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(e){return e<0?n+e:e})}function bR(e,t){for(var n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||i?null:yR(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=a){if(a[o]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==a[o]||a[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),a[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function xR(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function wR(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function SR(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function _R(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function ER(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function CR(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function kR(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function NR(e){if(null==e)return 0;var t=0;return e.forEach(function(e){return t+=e.length}),t}function AR(e){return"string"==typeof e||e instanceof String}function TR(e){return"boolean"==typeof e}function IR(e){return"number"==typeof e}function DR(e){return Array.isArray(e)?DR(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":IR(e)?"float32":AR(e)?"string":TR(e)?"bool":"float32"}function RR(e){return!!(e&&e.constructor&&e.call&&e.apply)}function PR(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function jR(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function LR(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=cR(e)),n&&SR(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),i=0;i<r.length;++i)0!==Math.round(e[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+t)}function OR(e,t){if(0===e.length)return t[0];var n=e.reduce(function(e,t){return e*t});if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var i=new Array;if(1===n.length)for(var a=n[0],o=0;o<a;o++)i[o]=r[t+o];else{a=n[0];var s=n.slice(1),l=s.reduce(function(e,t){return e*t});for(o=0;o<a;o++)i[o]=e(t+o*l,s,r)}return i}(0,e,t)}function MR(e,t){for(var n=FR(e,t),r=0;r<n.length;r++)n[r]=1;return n}function FR(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function BR(){return KD().platform.now()}function UR(e){e.forEach(function(t){oR(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function zR(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",KD().platform.encode(e,t)}function WR(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",KD().platform.decode(e,t)}function VR(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function HR(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}Object.freeze({shuffle:nR,clamp:rR,nearestLargerEven:iR,sum:aR,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var i=Number(e[r])-Number(t[r]);n+=i*i}return n},assert:oR,assertShapesMatch:sR,assertNonNull:lR,flatten:cR,sizeFromShape:uR,isScalarShape:function(e){return 0===e.length},arraysEqual:hR,isInt:dR,tanh:fR,sizeToSquarishShape:pR,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return nR(t),t},rightPad:mR,repeatedTry:gR,inferFromImplicitShape:vR,parseAxisParam:yR,squeezeShape:bR,getTypedArrayFromDType:xR,getArrayFromDType:wR,checkConversionForErrors:SR,isValidDtype:_R,hasEncodingLoss:ER,isTypedArray:CR,bytesPerElement:kR,bytesFromStringArray:NR,isString:AR,isBoolean:TR,isNumber:IR,inferDtype:DR,isFunction:RR,nearestDivisor:PR,computeStrides:jR,toTypedArray:LR,toNestedArray:OR,makeOnesTypedArray:MR,makeZerosTypedArray:FR,now:BR,assertNonNegativeIntegerDimensions:UR,fetch:function(e,t){return KD().platform.fetch(e,t)},encodeString:zR,decodeString:WR,locToIndex:VR,indexToLoc:HR});var qR=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new GR)}return e.prototype.profileKernel=function(e,t,n){var r,i=this,a=this.backendTimer.time(function(){r=n()});return r.forEach(function(n){n.data().then(function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(isNaN(i)||!isFinite(i))return console.warn("Found "+i+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),a.then(function(a){var o="";null!=a.getExtraProfileInfo&&(o=a.getExtraProfileInfo()),i.logger.logKernelProfile(e,n,r,a.kernelMs,t,o)})})}),r},e}(),GR=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,i,a){var o="number"==typeof r?mR(r+"ms",9):r.error,s=mR(e,25),l=t.rank,c=t.size,u=mR(t.shape.toString(),14),h="";for(var d in i){var f=i[d].shape||t.shape,p=f.length;h+=d+": "+p+"D "+(p>0?f:"")+" "}console.log("%c"+s+"\t%c"+o+"\t%c"+l+"D "+u+"\t%c"+c+"\t%c"+h+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function KR(e,t,n){return mR(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":AR(e)?"'"+e+"'":"bool"===n?YR(e):parseFloat(e.toFixed(7)).toString(),t)}function YR(e){return 0===e?"false":"true"}function XR(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var QR=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=uR(e),null!=n){var i=n.length;oR(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||wR(t,this.size),this.strides=jR(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),oR(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"});var i=this.locToIndex(n);this.values[i]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,i=e;r<i.length;r++){var a=i[r];if(a<0||a>=this.shape[n]){var o="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var s=e[e.length-1],l=0;l<e.length-1;++l)s+=this.strides[l]*e[l];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return $R().makeTensor(this.values,this.shape,this.dtype)},e}(),$R=null,JR=null,ZR=null,eP=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=uR(e),this.strides=jR(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),oR(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),this.reshape([e,t,n,r,i])},e.prototype.asType=function(e){return this.throwIfDisposed(),JR.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return HD(this,void 0,void 0,function(){var e;return qD(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,JR.buffer(this.shape,this.dtype,e)]}})})},e.prototype.bufferSync=function(){return JR.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return HD(this,void 0,void 0,function(){var e;return qD(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,OR(this.shape,e)]}})})},e.prototype.arraySync=function(){return OR(this.shape,this.dataSync())},e.prototype.data=function(){return HD(this,void 0,void 0,function(){var e,t;return qD(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=$R().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map(function(e){return WR(e)})]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}case 2:return[2,e]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var e=$R().readSync(this.dataId);if("string"===this.dtype)try{return e.map(function(e){return WR(e)})}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return HD(this,void 0,void 0,function(){var e;return qD(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,$R().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||($R().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),JR.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),JR.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),JR.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),JR.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),JR.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),JR.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),JR.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var i=jR(t),a=function(e,t,n,r){var i=uR(t),a=r[r.length-1],o=new Array(a).fill(0),s=t.length,l="complex64"===n?XR(e):e;if(s>1)for(var c=0;c<i/a;c++)for(var u=c*a,h=0;h<a;h++)o[h]=Math.max(o[h],KR(l[u+h],0,n).length);return o}(e,t,n,i),o=t.length,s=function e(t,n,r,i,a,o){void 0===o&&(o=!0);var s="complex64"===r?2:1,l=n[0],c=n.length;if(0===c)return"complex64"===r?[KR(XR(t)[0],0,r)]:"bool"===r?[YR(t[0])]:[t[0].toString()];if(1===c){if(l>20){var u=3*s,h=Array.from(t.slice(0,u)),d=Array.from(t.slice((l-3)*s,l*s));return"complex64"===r&&(h=XR(h),d=XR(d)),["["+h.map(function(e,t){return KR(e,a[t],r)}).join(", ")+", ..., "+d.map(function(e,t){return KR(e,a[l-3+t],r)}).join(", ")+"]"]}return["["+("complex64"===r?XR(t):Array.from(t)).map(function(e,t){return KR(e,a[t],r)}).join(", ")+"]"]}var f=n.slice(1),p=i.slice(1),m=i[0]*s,g=[];if(l>20){for(var v=0;v<3;v++){var y=(b=v*m)+m;g.push.apply(g,e(t.slice(b,y),f,r,p,a,!1))}for(g.push("..."),v=l-3;v<l;v++)y=(b=v*m)+m,g.push.apply(g,e(t.slice(b,y),f,r,p,a,v===l-1))}else for(v=0;v<l;v++){var b;y=(b=v*m)+m,g.push.apply(g,e(t.slice(b,y),f,r,p,a,v===l-1))}var x=2===c?",":"";for(g[0]="["+g[0]+x,v=1;v<g.length-1;v++)g[v]=" "+g[v]+x;var w=",\n";for(v=2;v<c;v++)w+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(o?"":w),g}(e,t,n,i,a),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+o),l.push("  shape: ["+t+"]"),l.push("  values:")),l.push(s.map(function(e){return"    "+e}).join("\n")),l.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),JR.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),JR.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),JR.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),JR.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),JR.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),JR.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),JR.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),JR.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),JR.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),JR.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),JR.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),JR.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,i){return void 0===n&&(n=.001),ZR("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,r,n)},e.prototype.batchNorm=function(e,t,n,r,i){return void 0===i&&(i=.001),this.throwIfDisposed(),JR.batchNorm(this,e,t,n,r,i)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),JR.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),JR.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),JR.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),JR.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),JR.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),JR.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),JR.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),JR.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),JR.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),JR.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),JR.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),JR.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),JR.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),JR.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),JR.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),JR.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),JR.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),JR.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),JR.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),JR.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),JR.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),JR.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),JR.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),JR.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),JR.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),JR.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),JR.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),JR.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),JR.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),JR.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),JR.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),JR.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),JR.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),JR.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),JR.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),JR.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),JR.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),JR.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),JR.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),JR.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),JR.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),JR.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),JR.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),JR.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),JR.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),JR.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),JR.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),JR.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),JR.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),JR.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),JR.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),JR.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),JR.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),JR.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),JR.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),JR.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),JR.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),JR.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),JR.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),JR.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),JR.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),JR.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),JR.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),JR.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),JR.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),JR.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),JR.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),JR.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),JR.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),JR.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),JR.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),JR.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),JR.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),JR.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),JR.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),JR.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),JR.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),JR.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),JR.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),JR.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),JR.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),JR.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),JR.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),JR.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),JR.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),JR.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),JR.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),JR.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),JR.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),JR.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),JR.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),JR.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),JR.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),JR.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),JR.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),JR.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,i,a){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),JR.conv1d(this,e,t,n,r,i,a)},e.prototype.conv2d=function(e,t,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),JR.conv2d(this,e,t,n,r,i,a)},e.prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),JR.conv2dTranspose(this,e,t,n,r,i)},e.prototype.depthwiseConv2D=function(e,t,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),JR.depthwiseConv2d(this,e,t,n,r,i,a)},e.prototype.separableConv2d=function(e,t,n,r,i,a){return void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),JR.separableConv2d(this,e,t,n,r,i,a)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),JR.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),JR.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),JR.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),JR.pool(this,e,t,n,r,i)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),$R().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),JR.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),JR.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),JR.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),JR.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,i,a,o,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),this.throwIfDisposed(),JR.stridedSlice(this,e,t,n,r,i,a,o,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),JR.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),JR.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),JR.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),JR.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),JR.spectral.irfft(this)},e}();Object.defineProperty(eP,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var tP,nP,rP,iP,aP,oP=function(e){function t(t,n,r,i){var a=e.call(this,t.shape,t.dtype,t.dataId,i)||this;return a.trainable=n,a.name=r,a}return VD(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!hR(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");$R().disposeTensor(this),this.dataId=e.dataId,$R().incRef(this,null)},t.prototype.dispose=function(){$R().disposeVariable(this),this.isDisposedInternal=!0},t}(eP);Object.defineProperty(oP,Symbol.hasInstance,{value:function(e){return e instanceof eP&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(tP||(tP={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(nP||(nP={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(rP||(rP={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(iP||(iP={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(aP||(aP={}));var sP={float32:iP,int32:nP,bool:rP,complex64:aP};function lP(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return sP[e][t]}function cP(e){return lP(e,"int32")}function uP(e,t){if(e.dtype===t.dtype)return[e,t];var n=lP(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function hP(e,t){oR(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function dP(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof eP)n.push(t);else if(i=t,Array.isArray(i)||"object"==typeof i){var i,a=t;for(var o in a){var s=a[o];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:uP,assertTypesMatch:hP,isTensorInList:function(e,t){return t.some(function(t){return t.id===e.id})},getTensorsInContainer:dP});var fP,pP=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),mP=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new pP}return e.prototype.ready=function(){return HD(this,void 0,void 0,function(){var e,t,n;return qD(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return HD(this,void 0,void 0,function(){var t,n,r;return qD(this,function(i){switch(i.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new qR(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var e=this;JD(this.backendName).forEach(function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)})},e.prototype.disposeRegisteredKernels=function(e){var t=this;JD(e).forEach(function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])})},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,a=r.then(function(n){return!(i<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)}).catch(function(n){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),i=r.success,a=r.asyncInit;if(a||i)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,i=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun(function(){return r.startScope(i)},function(){return r.endScope(n)},function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],function(e){return{x:function(){return e.toFloat()}}},[]),t},e.prototype.runKernel=function(e,t,n,r,i){return this.runKernelFunc(null,t,null,e,n,r,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),i=0;n.forEach(function(e){i+="complex64"===e.dtype?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-i-a;if(o>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+o+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,i,a,o){var s,l=this;void 0===a&&(a=[]),void 0===o&&(o=[]);var c=[],u=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var h,d=function(e){u&&(c=e.map(function(e){return l.keep(l.clone(e))}))},f=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=$D(r,this.backendName);return h=null!=g?function(){var e=l.backend.numDataIds();m=g.kernelFunc({inputs:t,attrs:i,backend:l.backend});var n=Array.isArray(m)?m:[m];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,e,n);var s=n.map(function(e){var t=e.dataId,n=e.shape,r=e.dtype;return l.makeTensorFromDataId(t,n,r)}),c=s.filter(function(e,t){return o[t]});return d((a||[]).slice().concat(c)),s}:function(){var t=l.backend.numDataIds();m=l.tidy(function(){return e(l.backend,d)});var n=Array.isArray(m)?m:[m];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,t,n),n},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){s=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(r,t,function(){return h()}):h()}),u&&this.addTapeNode(r,t,s,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(e){return t[e].shape}),outputShapes:s.map(function(e){return e.shape})}),Array.isArray(m)?s:s[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var i=e;"string"===n&&AR(e[0])&&(i=e.map(function(e){return zR(e)}));var a=r.write(i,t,n),o=new eP(t,n,a,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(a),l=NR(i);this.state.numBytes+=l-s.bytes,s.bytes=l}return o},e.prototype.makeTensorFromDataId=function(e,t,n,r){var i=new eP(t,n=n||"float32",e,this.nextTensorId());return this.incRef(i,r),i},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var i=new oP(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*kR(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof oP||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return HD(this,void 0,void 0,function(){var t,n;return qD(this,function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(e){return e.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,i){var a=this,o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=function(e){return QD.get(e)}(e);null!=s&&(r=s.gradFunc),null!=r&&(o.gradient=function(e){return e=e.map(function(e,t){if(null==e){var r=n[t],i=FR(r.size,r.dtype);return a.makeTensor(i,r.shape,r.dtype)}return e}),r(e.length>1?e:e[0],i)}),this.state.activeTape.push(o)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=dP(e),r=new Set(n.map(function(e){return e.id})),i=0;i<this.state.activeScope.track.length;i++){var a=this.state.activeScope.track[i];a.kept||r.has(a.id)||a.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(e){e.kept||e.scopeId!==o.id||t.track(e)})},e.prototype.gradients=function(e,t,n,r){var i=this;if(void 0===r&&(r=!1),oR(t.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)});oR(a instanceof eP,function(){return"The result y returned by f() must be a tensor."});var o=function(e,t,n){for(var r={},i={},a=0;a<t.length;a++)r[t[a].id]=!0;for(a=0;a<e.length;a++){var o=(p=e[a]).inputs;for(var s in o){for(var l=o[s],c=!1,u=0;u<t.length;u++)if(r[l.id]){p.outputs.forEach(function(e){return r[e.id]=!0}),c=!0,i[p.id]=!0;break}if(c)break}}var h={};h[n.id]=!0;var d={};for(a=e.length-1;a>=0;a--)for(o=(p=e[a]).inputs,u=0;u<p.outputs.length;u++)if(h[p.outputs[u].id]){for(var s in o)h[o[s].id]=!0,d[p.id]=!0;break}var f=[];for(a=0;a<e.length;a++){var p;if(i[(p=e[a]).id]&&d[p.id]){var m={};for(var s in p.inputs){var g=p.inputs[s];r[g.id]&&(m[s]=g)}var v=Object.assign({},p);v.inputs=m,v.outputs=p.outputs,f.push(v)}}return f}(this.state.activeTape,t,a);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var e,r,s={};s[a.id]=null==n?(r=MR(uR(e=a.shape),"float32"),gP.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var i=t[r],a=[];if(i.outputs.forEach(function(t){var n=e[t.id];null!=n?a.push(n):a.push(null)}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.kernelName+".");var o=i.gradient(a),s=function(t){if(!(t in o))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(o)+".");var r=n(function(){return o[t]()});if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=i.inputs[t];if(!hR(r.shape,a.shape))throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==e[a.id])e[a.id]=r;else{var s=e[a.id];e[a.id]=s.add(r),s.dispose()}};for(var l in i.inputs)s(l)},i=t.length-1;i>=0;i--)r(i)}(s,o,function(e){return i.tidy(e)});var l=t.map(function(e){return s[e.id]});return 0===i.state.gradientDepth&&(i.state.activeTape.forEach(function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()}),i.state.activeTape=null),{value:a,grads:l}})},e.prototype.customGrad=function(e){var t=this;return oR(RR(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];oR(r.every(function(e){return e instanceof eP}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return r.forEach(function(e,t){a[t]=e}),t.runKernelFunc(function(t,i){return oR((n=e.apply(void 0,r.concat([i]))).value instanceof eP,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),oR(RR(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},a,function(e,t){var i=n.gradFunc(e,t),a=Array.isArray(i)?i:[i];oR(a.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),oR(a.every(function(e){return e instanceof eP}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var o={};return a.forEach(function(e,t){o[t]=function(){return e}}),o})}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return HD(this,void 0,void 0,function(){var t,n;return qD(this,function(r){switch(r.label){case 0:return t=BR(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=BR()-t,[2,n]}})})},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new pP,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),gP=function(){var e=function(){if(null==fP){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}fP=e}return fP}();if(null==e._tfengine){var t=new GD(e);e._tfengine=new mP(t)}return function(e){YD=e}(e._tfengine.ENV),$R=function(){return e._tfengine},e._tfengine}();function vP(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var yP=KD();yP.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),yP.registerFlag("IS_BROWSER",function(){return vP()}),yP.registerFlag("IS_NODE",function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}),yP.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),yP.registerFlag("PROD",function(){return!1}),yP.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return yP.getBool("DEBUG")}),yP.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),yP.registerFlag("IS_TEST",function(){return!1});var bP,xP,wP,SP={},_P={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function EP(e,t){SP[e]=t}function CP(e){e in SP||(SP[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",function(t){t.preventDefault(),delete SP[e]},!1),1===e?t.getContext("webgl",_P)||t.getContext("experimental-webgl",_P):t.getContext("webgl2",_P)}(e));var t=SP[e];return t.isContextLost()?(delete SP[e],CP(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),SP[e])}function kP(e,t){return[t,e]}function NP(e){var t=uR(e);return pR(Math.ceil(t/4))}function AP(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function TP(e,t){var n,r,i,a,o,s,l,c,u,h=e;return 2===KD().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,i=h.RGBA16F,a=h.RGBA32F,o=h.RED,s=4,l=1,c=h.HALF_FLOAT,u=h.FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,a=h.RGBA,o=e.RGBA,s=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:u}}function IP(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+RP(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(bP||(bP={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(xP||(xP={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(wP||(wP={}));function DP(e){return!!(KD().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function RP(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function PP(e,t,n){return nj(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function jP(e,t,n){var r=nj(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(IP(e,t,function(){return e.shaderSource(r,n)}),IP(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function LP(e,t,n){var r=nj(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(IP(e,t,function(){return e.shaderSource(r,n)}),IP(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=FP.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],i=e.split("\n"),a=i.length.toString().length+2,o=i.map(function(e,t){return mR((t+1).toString(),a)+e}),s=0,l=0;l<o.length;l++)s=Math.max(o[l].length,s);var c=o.slice(0,r-1),u=o.slice(r-1,r),h=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+mR(u[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var OP,MP,FP=/ERROR: [0-9]+:([0-9]+):/g;function BP(e,t){return nj(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function UP(e,t,n){if(IP(e,t,function(){return e.linkProgram(n)}),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function zP(e,t,n){if(IP(e,t,function(){return e.validateProgram(n)}),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function WP(e,t,n){var r=nj(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return IP(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),IP(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function VP(e,t,n){var r=nj(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return IP(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),IP(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function HP(e,t){return nj(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function qP(e,t){var n=KD().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function GP(e,t){return nj(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function KP(e,t,n,r,i,a,o,s){var l=e.getAttribLocation(n,r);return-1!==l&&(IP(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,i)}),IP(e,t,function(){return e.vertexAttribPointer(l,a,e.FLOAT,!1,o,s)}),IP(e,t,function(){return e.enableVertexAttribArray(l)}),!0)}function YP(e,t,n,r){rj(e,r),IP(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),IP(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function XP(e,t,n,r){return nj(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function QP(e,t,n){return e.getUniformLocation(t,n)}function $P(e,t,n,r,i,a){IP(e,t,function(){return YP(e,t,r,a)}),IP(e,t,function(){return e.uniform1i(i,a)})}function JP(e,t,n,r){IP(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),IP(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function ZP(e,t,n){IP(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),IP(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function ej(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+tj(e,t))}function tj(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function nj(e,t,n,r){var i=IP(e,t,function(){return n()});if(null==i)throw new Error(r);return i}function rj(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function ij(e,t){return void 0===t&&(t=2),uR(e.slice(0,e.length-t))}function aj(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function oj(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[ij(e)].concat(aj(e))),t}function sj(e,t){var n;void 0===t&&(t=!1);var r=KD().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map(function(t,n){return n>=e.length-2?iR(e[n]):e[n]})).length&&(e=[2,e[0]])),2!==e.length){var i=bR(e);e=i.newShape}var a=uR(e);if(e.length<=1&&a<=r)return[1,a];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=ij(e),s=2,l=2;return e.length&&(s=(n=aj(e))[0],l=n[1]),pR(a=o*(s/2)*(l/2)).map(function(e){return 2*e})}return pR(a)}function lj(e){return e%2==0}function cj(e,t){if(hR(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(lj(n)&&lj(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&lj(e[0])&&lj(t[0])}function uj(e){if(null==OP){var t=CP(e);OP=t.getParameter(t.MAX_TEXTURE_SIZE)}return OP}function hj(e){if(null==MP){var t=CP(e);MP=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,MP)}function dj(e){if(0===e)return 0;var t=CP(e);return fj(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:fj(t,"EXT_disjoint_timer_query")?1:0}function fj(e,t){return null!=e.getExtension(t)}function pj(e){try{if(null!=CP(e))return!0}catch(e){return!1}return!1}function mj(e){if(0===e)return!1;var t=CP(e);if(1===e){if(!fj(t,"OES_texture_float"))return!1}else if(!fj(t,"EXT_color_buffer_float"))return!1;return vj(t)}function gj(e){if(0===e)return!1;var t=CP(e);if(1!==e){if(fj(t,"EXT_color_buffer_float"))return vj(t);if(fj(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=TP(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),a}(t,n)}return!1}return!!fj(t,"OES_texture_float")&&!!fj(t,"WEBGL_color_buffer_float")&&vj(t)}function vj(e){var t=TP(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function yj(e){return 2===e&&null!=CP(e).fenceSync}var bj=Object.freeze({callAndCheck:IP,canBeRepresented:DP,getWebGLErrorMessage:RP,getExtensionOrThrow:PP,createVertexShader:jP,createFragmentShader:LP,createProgram:BP,linkProgram:UP,validateProgram:zP,createStaticVertexBuffer:WP,createStaticIndexBuffer:VP,getNumChannels:function(){return 2===KD().getNumber("WEBGL_VERSION")?1:4},createTexture:HP,validateTextureSize:qP,createFramebuffer:GP,bindVertexBufferToProgramAttribute:KP,bindTextureUnit:YP,unbindTextureUnit:function(e,t,n){rj(e,n),IP(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),IP(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:XP,getProgramUniformLocation:QP,bindTextureToProgramUniformSampler:$P,bindCanvasToFramebuffer:function(e,t){IP(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),IP(e,t,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),IP(e,t,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},bindColorTextureToFramebuffer:JP,unbindColorTextureFromFramebuffer:ZP,validateFramebuffer:ej,getFramebufferErrorMessage:tj,getBatchDim:ij,getRowsCols:aj,getShapeAs3D:oj,getTextureShapeFromLogicalShape:sj,isReshapeFree:cj,getWebGLMaxTextureSize:uj,resetMaxTextureSize:function(){OP=null},resetMaxTexturesInShader:function(){MP=null},getMaxTexturesInShader:hj,getWebGLDisjointQueryTimerVersion:dj,hasExtension:fj,isWebGLVersionEnabled:pj,isCapableOfRenderingToFloatTexture:mj,isDownloadFloatTextureEnabled:gj,isWebGLFenceEnabled:yj}),xj=KD();function wj(e){KD().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Sj(e,t){return gP.tidy(e,t)}function _j(e){dP(e).forEach(function(e){return e.dispose()})}function Ej(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];KD().getBool("IS_TEST")||console.warn.apply(console,e)}function Cj(e,t){var n=e;if(CR(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||CR(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&KD().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||CR(t)){oR(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),oR(t.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"});for(var i=n.slice(1),a=0;a<t.length;++a)e(t[a],i,r.concat(a))}else oR(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(e,r,[]),r}function kj(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function Nj(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof eP)return kj(r,e.dtype,t,n),e;var i=DR(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),kj(r,i,t,n),null==e||!CR(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var a=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var o=Cj(e,i);CR(e)||Array.isArray(e)||(e=[e]);var s="string"!==i?LR(e,i,KD().getBool("DEBUG")):cR(e,[],!0);return gP.makeTensor(s,o,i)}function Aj(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(e,r){return Nj(e,t+"["+r+"]",n)},r)}function Tj(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Ij(e,t,n){for(var r=e.length+t.length,i=[],a=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[a++]):i.push(t[o++]);return i}function Dj(e,t){for(var n=[],r=e.length,i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map(function(t){return e[t]})]}function Rj(e,t){return Ij(e,t.map(function(e){return 1}),t)}function Pj(e,t,n){oR(Tj(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function jj(e,t){if(Tj(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(function(e){return n.push(e)}),n}function Lj(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function Oj(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Mj(e,t){var n=e[0].length;e.forEach(function(e,t){oR(e.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"})}),oR(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(e,i){for(var a=0;a<n;a++)oR(a===t||e[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Fj(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Bj(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];gP.startScope(n);try{var i=r.apply(void 0,e);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),gP.endScope(i),i}catch(e){throw gP.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}xj.registerFlag("HAS_WEBGL",function(){return xj.getNumber("WEBGL_VERSION")>0}),xj.registerFlag("WEBGL_VERSION",function(){return pj(2)?2:pj(1)?1:0}),xj.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===xj.get("WEBGL_VERSION")}),xj.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),xj.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),xj.registerFlag("WEBGL_PACK",function(){return xj.getBool("HAS_WEBGL")}),xj.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_PACK_CLIP",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),xj.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_PACK_REDUCE",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_LAZILY_UNPACK",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_CONV_IM2COL",function(){return xj.getBool("WEBGL_PACK")}),xj.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return uj(xj.getNumber("WEBGL_VERSION"))}),xj.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return hj(xj.getNumber("WEBGL_VERSION"))}),xj.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=xj.getNumber("WEBGL_VERSION");return 0===e?0:dj(e)}),xj.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return xj.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),xj.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return mj(xj.getNumber("WEBGL_VERSION"))}),xj.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!xj.getBool("WEBGL_FORCE_F16_TEXTURES")&&xj.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),xj.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return gj(xj.getNumber("WEBGL_VERSION"))}),xj.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return yj(xj.getNumber("WEBGL_VERSION"))}),xj.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return xj.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),ZR=wj;var Uj=Bj({complex_:function(e,t){var n=Nj(e,"real","complex"),r=Nj(t,"imag","complex");return sR(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),gP.runKernelFunc(function(e){return e.complex(n,r)},{$real:n,$imag:r})}}),zj=Bj({real_:function(e){var t=Nj(e,"input","real");return gP.runKernelFunc(function(e){return e.real(t)},{$input:t})}}),Wj=Bj({imag_:function(e){var t=Nj(e,"input","imag");return gP.runKernelFunc(function(e){return e.imag(t)},{$input:t})}});function Vj(e,t,n){return Hj(e,t,Cj(e,n),n)}function Hj(e,t,n,r){if(null==r&&(r=DR(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!CR(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){UR(t);var i=uR(t),a=uR(n);oR(i===a,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+a});for(var o=0;o<n.length;++o){var s=n[o],l=o!==n.length-1||s!==uR(t.slice(o));oR(n[o]===t[o]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return CR(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?LR(e,r,KD().getBool("DEBUG")):cR(e,[],!0),gP.makeTensor(e,t,r)}function qj(e,t){if((CR(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&CR(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Hj(e,[],[],t)}function Gj(e,t){lR(e);var n=Cj(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Hj(e,null,n,t)}function Kj(e,t,n){if(lR(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Cj(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Hj(e,t,r,n)}function Yj(e,t,n){if(lR(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Cj(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Hj(e,t,r,n)}function Xj(e,t,n){if(lR(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Cj(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Hj(e,t,r,n)}function Qj(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Qj(e,"float32"),r=$j(e,"float32");return Uj(n,r)}var i=MR(uR(e),t);return gP.makeTensor(i,e,t)}function $j(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=$j(e,"float32"),r=$j(e,"float32");return Uj(n,r)}var i=FR(uR(e),t);return gP.makeTensor(i,e,t)}function Jj(e,t,n){return gP.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function Zj(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return $j([0],r);var i=FR(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+n;return Gj(i,r)}var eL=Bj({onesLike_:function(e){var t=Nj(e,"x","onesLike");if("complex64"===t.dtype){var n=eL(zj(t)),r=tL(Wj(t));return Uj(n,r)}return gP.runKernelFunc(function(e){return e.onesLike(t)},{$x:t},function(e,t){return{$x:function(){return tL(e)}}})}}),tL=Bj({zerosLike_:function(e){var t=Nj(e,"x","zerosLike");return gP.runKernelFunc(function(e){return e.zerosLike(t)},{$x:t},function(e,t){return{$x:function(){return tL(e)}}})}}),nL=Bj({concat_:function(e,t){void 0===t&&(t=0),oR(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=Aj(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")}),t=yR(t,n[0].shape)[0];var r=Fj(n.map(function(e){return e.shape}),t);if(0===uR(r))return Vj([],r);if(1===(n=n.filter(function(e){return e.size>0})).length)return n[0];var i=n.map(function(e){return e.shape});Mj(i,t);var a=n,o={axis:t};return gP.runKernelFunc(function(e){return e.concat(n,t)},a,function(e){var n=i.map(function(e){return e[t]});return sL(e,n,t).map(function(e){return function(){return e}})},"Concat",o)}}),rL=Bj({concat1d_:function(e){return nL(e,0)}}),iL=Bj({concat2d_:function(e,t){return nL(e,t)}}),aL=Bj({concat3d_:function(e,t){return nL(e,t)}}),oL=Bj({concat4d_:function(e,t){return nL(e,t)}}),sL=Bj({split_:function(e,t,n){void 0===n&&(n=0);var r,i=Nj(e,"x","split");return n=yR(n,i.shape)[0],"number"==typeof t?(oR(i.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(i.shape[n]/t)):(oR(i.shape[n]===t.reduce(function(e,t){return e+t}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),gP.runKernelFunc(function(e){return e.split(i,r,n)},{$x:i},function(e){return{$x:function(){return nL(e,n)}}})}});function lL(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var cL=lL(function(e){!function(e,t){function n(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var i=new n(e),a=t&&t.state,o=i.next;return o.int32=function(){return 4294967296*i.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,a&&("object"==typeof a&&r(a,i),o.state=function(){return r(i,{})}),o}t&&t.exports?t.exports=i:this.alea=i}(0,e)}),uL=lL(function(e){!function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var i=new n(e),a=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,a&&("object"==typeof a&&r(a,i),o.state=function(){return r(i,{})}),o}t&&t.exports?t.exports=i:this.xor128=i}(0,e)}),hL=lL(function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var i=new n(e),a=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,a&&("object"==typeof a&&r(a,i),o.state=function(){return r(i,{})}),o}t&&t.exports?t.exports=i:this.xorwow=i}(0,e)}),dL=lL(function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var i=new n(e),a=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,a&&(a.x&&r(a,i),o.state=function(){return r(i,{})}),o}t&&t.exports?t.exports=i:this.xorshift7=i}(0,e)}),fL=lL(function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var i=new n(e),a=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,a&&(a.X&&r(a,i),o.state=function(){return r(i,{})}),o}t&&t.exports?t.exports=i:this.xor4096=i}(0,e)}),pL=lL(function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var i=new n(e),a=t&&t.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=i.next,o.quick=o,a&&("object"==typeof a&&r(a,i),o.state=function(){return r(i,{})}),o}t&&t.exports?t.exports=i:this.tychei=i}(0,e)}),mL=lL(function(e){!function(t,r){var i,a=this,o=256,s="random",l=r.pow(o,6),c=r.pow(2,52),u=2*c,h=255;function d(e,n,h){var d=[],v=m(function e(t,n){var r,i=[],a=typeof t;if(n&&"object"==a)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==a?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(o):(e=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,g(t)]}}():e,3),d),y=new f(d),b=function(){for(var e=y.g(6),t=l,n=0;e<c;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(g(y.S),t),(n.pass||h||function(e,t,n,i){return i&&(i.S&&p(i,y),e.state=function(){return p(y,{})}),n?(r[s]=e,t):e})(b,v,"global"in n?n.global:this==r,n.state)}function f(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=h&a+e[i%n]+(t=s[i])],s[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,s=r.S;e--;)t=s[i=h&i+1],n=n*o+s[h&(s[i]=s[a=h&a+t])+(s[a]=t)];return r.i=i,r.j=a,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[h&i]=h&(n^=19*t[h&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=d,m(r.random(),t),e.exports){e.exports=d;try{i=n(8082)}catch(e){}}}([],Math)});mL.alea=cL,mL.xor128=uL,mL.xorwow=hL,mL.xorshift7=dL,mL.xor4096=fL,mL.tychei=pL;var gL=mL.alea,vL=function(){function e(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=gL(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var i=void 0,a=void 0,o=void 0;do{o=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),yL=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var i=r||Math.random();this.randu=gL(i.toString()),this.randn=new vL(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,i,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-a+Math.log(a)),(i=this.randu())<t||Math.log(i)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),bL=function(){function e(e,t,n,r){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=gL(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function xL(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",UR(e),new QR(e,t,n)}var wL=Bj({batchToSpaceND_:function(e,t,n){var r=Nj(e,"x","batchToSpaceND"),i=t.reduce(function(e,t){return e*t});return oR(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),oR(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),oR(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i}),gP.runKernelFunc(function(e){return e.batchToSpaceND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}})}}),SL=Bj({broadcastTo_:function(e,t){var n=Nj(e,"broadcastTo","x"),r=n.shape;if(t.some(function(e){return!(e>0)||e%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var i=n.shape.slice();i.length<t.length;)i.unshift(1);n=n.reshape(i)}for(var a=Array.from(t),o=t.length-1;o>=0;o--)if(n.shape[o]===t[o])a[o]=1;else if(1!==n.shape[o])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=a.map(function(e,t){return e>1?t:-1}).filter(function(e){return e>=0});return 0===s.length?n.clone():gP.runKernelFunc(function(e){return e.tile(n,a)},{input:n},function(e){return{input:function(){return e.sum(s,!0)}}})}}),_L=Bj({cast_:function(e,t){var n=Nj(e,"x","cast");if(!_R(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return gP.runKernelFunc(function(e){return e.cast(n,t)},{x:n},function(e){return{x:function(){return e.clone()}}},"Cast",r)}}),EL=Bj({clone_:function(e){var t=Nj(e,"x","clone",null);return gP.runKernelFunc(function(){return gP.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),CL=Bj({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=Nj(e,"x","cumsum"),a=jj([t|=0],i.rank),o=i;null!=a&&(o=i.transpose(a));var s=Oj(1,i.rank)[0],l=gP.runKernelFunc(function(e){return e.cumsum(o,s,n,r)},{permutedX:o},function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}});return null!=a&&(l=l.transpose(a)),l}}),kL=Bj({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=Nj(e,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return oR(i*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+"  for depthToSpace with input shape\n      "+r.shape}),oR(a*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+" for depthToSpace with input shape\n          "+r.shape}),oR(o%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape}),gP.runKernelFunc(function(e){return e.depthToSpace(r,t,n)},{$x:r})}}),NL=Bj({expandDims_:function(e,t){void 0===t&&(t=0);var n=Nj(e,"x","expandDims",null);oR(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(oR(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),UL(n,r)}}),AL=Bj({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var i=xL([e,t],r),a=e<=t?e:t,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return HL(NL(s,0),[n[0],1,1]);if(2===n.length)return HL(NL(NL(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return HL(NL(NL(NL(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),TL=Bj({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var i=Nj(e,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=1===o?i.as2D(1,-1):i,l=gP.runKernelFunc(function(e){return e.multinomial(s,r,t,n)},{logits2D:s});return 1===o?l.as1D():l}}),IL=Bj({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var i=Nj(e,"indices","oneHot","int32"),a=i.shape.concat([t]);return i=i.flatten(),gP.runKernelFunc(function(e){return e.oneHot(i,t,n,r)},{$indices:i},function(e){return{$indices:function(){return $j(i.shape,"float32")}}}).reshape(a)}}),DL=Bj({pad_:function(e,t,n){void 0===n&&(n=0);var r=Nj(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:t,constantValue:n};return gP.runKernelFunc(function(e){return e.pad(r,t,n)},{x:r},function(e){var n=t.map(function(e){return e[0]});return{x:function(){return e.slice(n,r.shape)}}},"PadV2",i)}}),RL=Bj({pad1d_:function(e,t,n){return void 0===n&&(n=0),oR(2===t.length,function(){return"Invalid number of paddings. Must be length of 2."}),DL(e,[t],n)}}),PL=Bj({pad2d_:function(e,t,n){return void 0===n&&(n=0),oR(2===t.length&&2===t[0].length&&2===t[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),DL(e,t,n)}}),jL=Bj({pad3d_:function(e,t,n){return void 0===n&&(n=0),oR(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),DL(e,t,n)}}),LL=Bj({pad4d_:function(e,t,n){return void 0===n&&(n=0),oR(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),DL(e,t,n)}}),OL=Bj({rand_:function(e,t,n){var r=uR(e),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=t();return gP.makeTensor(i,e,n)}}),ML=Bj({randomNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new vL(t,n,r,!1,i),o=xL(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),FL=Bj({randomGamma_:function(e,t,n,r,i){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new yL(t,n,r,i),o=xL(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),BL=Bj({randomUniform_:function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=xL(e,r),o=new bL(t,n,null,i),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),UL=Bj({reshape_:function(e,t){var n=Nj(e,"x","reshape",null);t=vR(t,n.size),oR(n.size===uR(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return gP.runKernelFunc(function(e){return e.reshape(n,t)},{x:n},function(e){return{x:function(){return e.reshape(n.shape)}}},"Reshape",r)}}),zL=Bj({spaceToBatchND_:function(e,t,n){var r=Nj(e,"x","spaceToBatchND");return oR(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),oR(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),oR(r.shape.reduce(function(e,r,i){return i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),gP.runKernelFunc(function(e){return e.spaceToBatchND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}})}}),WL=Bj({squeeze_:function(e,t){var n=Nj(e,"x","squeeze");return UL(n,bR(n.shape,t).newShape)}}),VL=Bj({stack_:function(e,t){void 0===t&&(t=0);var n=Aj(e,"tensors","stack");if(oR(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(t);var r=n[0].rank,i=n[0].shape,a=n[0].dtype;oR(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(e){sR(i,e.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(e){oR(a===e.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=n.map(function(e){return e.expandDims(t)});return nL(o,t)}}),HL=Bj({tile_:function(e,t){var n=Nj(e,"x","tile",null);oR(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],i={reps:t};return gP.runKernelFunc(function(e,r){var i=e.tile(n,t);return r([n]),i},{x:n},function(e,n){var r=n[0];return{x:function(){var n=tL(r);if(1===r.rank)for(var i=0;i<t[0];++i)n=n.add(e.slice([i*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(i=0;i<t[0];++i)for(var a=0;a<t[1];++a)n=n.add(e.slice([i*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(i=0;i<t[0];++i)for(a=0;a<t[1];++a)for(var o=0;o<t[2];++o)n=n.add(e.slice([i*r.shape[0],a*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(i=0;i<t[0];++i)for(a=0;a<t[1];++a)for(o=0;o<t[2];++o)for(var s=0;s<t[3];++s)n=n.add(e.slice([i*r.shape[0],a*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}},"Tile",i,r)}}),qL=Bj({truncatedNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new vL(t,n,r,!0,i),o=xL(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),GL=Bj({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=Nj(e,"x","unstack");oR(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return gP.runKernelFunc(function(e){return e.unstack(n,t)},{x:n},function(e){return{x:function(){return VL(e,t)}}},"Unpack",r)}});function KL(e,t,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(t.slice(0))).push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);for(var a=t.length,o=0;o<a;++o)i=i.concat([e[o+1]/t[o],t[o]]);i=i.concat(e.slice(a+1))}return i}function YL(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<e;++i)i>=2*t+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function XL(e,t,n,r){void 0===r&&(r=!0);var i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(var a=1;a<e.length;++a)a<=t.length?r?i.push(t[a-1]*e[a]):i.push(e[a]/t[a-1]):i.push(e[a]);return i}function QL(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function $L(e,t,n){for(var r=e.slice(0,1),i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function JL(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],i=1,a=0;a<n.length-1;++a)i*=n[a];var o=e.shape,s=n.slice();s.pop();var l=1;for(a=r;a<e.rank;++a)l*=o[a],s.push(o[a]);var c=jR(e.shape).map(function(e){return e/l}).concat([1]).slice(0,r);return[s,i,l,c]}Object.freeze({prepareAndValidate:JL});function ZL(e){return e<=30?e:PR(e,Math.floor(Math.sqrt(e)))}function eO(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(a+" update.rank < "+i+". ");if(e.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+e.length-r)throw new Error(a+" update.rank != "+(i+e.length-r));for(var o=0;o<i;++o)if(n.shape[o]!==t.shape[o])throw new Error(a+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-i;++o)if(n.shape[o+i]!==e[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+n.shape[o+i]+") != shape["+(o+i)+"] ("+e[o+i]+")")}function tO(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}eO(n,t,e)}function nO(e,t,n){for(var r=t.shape.length,i=r>1?t.shape[r-1]:1,a=n.length,o=1,s=i;s<a;++s)o*=n[s];var l=i<1?1:i;return{sliceRank:i,numUpdates:uR(t.shape)/l,sliceSize:o,strides:jR(n.slice(0,i)).concat([1]),outputSize:uR(n)}}Object.freeze({validateUpdateShape:eO,validateInput:tO,calculateShapes:nO});function rO(e,t,n){oR(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),oR(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(r){oR(t[r]+n[r]<=e.shape[r],function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"})},i=0;i<e.rank;++i)r(i)}function iO(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function aO(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function oO(e,t,n,r,i){var a=t[i],o=n[i]||1;(e&1<<i||null==a)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),rR(0,a,s-1)}function sO(e,t,n,r,i){var a=t[i],o=n[i]||1;(e&1<<i||null==a)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),o>0?rR(0,a,s):rR(-1,a,s-1)}function lO(e,t,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function cO(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:rO,maskToAxes:iO,computeOutShape:aO,startForAxis:oO,stopForAxis:sO,isSliceContinous:lO,computeFlatOffset:cO});function uO(e){return gP.customGrad(e)}var hO=Bj({softmax_:function(e,t){void 0===t&&(t=-1);var n=Nj(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return gP.runKernelFunc(function(e,r){var i=e.softmax(n,t);return r([i]),i},{logits:n},function(e,n){var r=n[0],i=e.mul(r);return{logits:function(){return i.sub(i.sum([t],!0).mul(r))}}},"Softmax",{dim:t},[],[!0])}}),dO=Bj({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=Nj(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return uO(function(e,n){var r=e.max(t,!0),i=e.sub(r),a=i.toFloat().sub(i.exp().sum(t,!0).log());return n([a]),{value:a,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}})(n)}}),fO=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),pO=function(){function e(){}return e.prototype.time=function(e){return mO("time")},e.prototype.read=function(e){return mO("read")},e.prototype.readSync=function(e){return mO("readSync")},e.prototype.numDataIds=function(){return mO("numDataIds")},e.prototype.disposeData=function(e){return mO("disposeData")},e.prototype.write=function(e,t,n){return mO("write")},e.prototype.move=function(e,t,n,r){return mO("move")},e.prototype.memory=function(){return mO("memory")},e.prototype.floatPrecision=function(){return mO("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return mO("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,mO("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return mO("slice")},e.prototype.stridedSlice=function(e,t,n,r){return mO("stridedSlice")},e.prototype.unstack=function(e,t){return mO("unstack")},e.prototype.reverse=function(e,t){return mO("reverse")},e.prototype.concat=function(e,t){return mO("concat")},e.prototype.neg=function(e){return mO("neg")},e.prototype.add=function(e,t){return mO("add")},e.prototype.addN=function(e){return mO("addN")},e.prototype.subtract=function(e,t){return mO("subtract")},e.prototype.multiply=function(e,t){return mO("multiply")},e.prototype.realDivide=function(e,t){return mO("realDivide")},e.prototype.floorDiv=function(e,t){return mO("floorDiv")},e.prototype.sum=function(e,t){return mO("sum")},e.prototype.prod=function(e,t){return mO("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return mO("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return mO("argMin")},e.prototype.argMax=function(e,t){return mO("argMax")},e.prototype.equal=function(e,t){return mO("equal")},e.prototype.notEqual=function(e,t){return mO("notEqual")},e.prototype.less=function(e,t){return mO("less")},e.prototype.lessEqual=function(e,t){return mO("lessEqual")},e.prototype.greater=function(e,t){return mO("greater")},e.prototype.greaterEqual=function(e,t){return mO("greaterEqual")},e.prototype.logicalNot=function(e){return mO("logicalNot")},e.prototype.logicalAnd=function(e,t){return mO("logicalAnd")},e.prototype.logicalOr=function(e,t){return mO("logicalOr")},e.prototype.where=function(e){return mO("where")},e.prototype.select=function(e,t,n){return mO("select")},e.prototype.topk=function(e,t,n){return mO("topk")},e.prototype.min=function(e,t){return mO("min")},e.prototype.minimum=function(e,t){return mO("minimum")},e.prototype.mod=function(e,t){return mO("mod")},e.prototype.max=function(e,t){return mO("max")},e.prototype.maximum=function(e,t){return mO("maximum")},e.prototype.all=function(e,t){return mO("all")},e.prototype.any=function(e,t){return mO("any")},e.prototype.squaredDifference=function(e,t){return mO("squaredDifference")},e.prototype.ceil=function(e){return mO("ceil")},e.prototype.floor=function(e){return mO("floor")},e.prototype.round=function(e){return mO("round")},e.prototype.sign=function(e){return mO("sign")},e.prototype.isNaN=function(e){return mO("isNaN")},e.prototype.isInf=function(e){return mO("isInf")},e.prototype.isFinite=function(e){return mO("isFinite")},e.prototype.pow=function(e,t){return mO("pow")},e.prototype.exp=function(e){return mO("exp")},e.prototype.expm1=function(e){return mO("expm1")},e.prototype.softmax=function(e,t){return mO("softmax")},e.prototype.log=function(e){return mO("log")},e.prototype.log1p=function(e){return mO("log1p")},e.prototype.sqrt=function(e){return mO("sqrt")},e.prototype.rsqrt=function(e){return mO("rsqrt")},e.prototype.square=function(e){return mO("square")},e.prototype.reciprocal=function(e){return mO("reciprocal")},e.prototype.relu=function(e){return mO("relu")},e.prototype.relu6=function(e){return mO("relu6")},e.prototype.prelu=function(e,t){return mO("prelu")},e.prototype.elu=function(e){return mO("elu")},e.prototype.eluDer=function(e,t){return mO("eluDer")},e.prototype.selu=function(e){return mO("selu")},e.prototype.int=function(e){return mO("int")},e.prototype.clip=function(e,t,n){return mO("clip")},e.prototype.abs=function(e){return mO("abs")},e.prototype.complexAbs=function(e){return mO("complexAbs")},e.prototype.sigmoid=function(e){return mO("sigmoid")},e.prototype.softplus=function(e){return mO("softplus")},e.prototype.sin=function(e){return mO("sin")},e.prototype.cos=function(e){return mO("cos")},e.prototype.tan=function(e){return mO("tan")},e.prototype.asin=function(e){return mO("asin")},e.prototype.acos=function(e){return mO("acos")},e.prototype.atan=function(e){return mO("atan")},e.prototype.atan2=function(e,t){return mO("atan2")},e.prototype.sinh=function(e){return mO("sinh")},e.prototype.cosh=function(e){return mO("cosh")},e.prototype.tanh=function(e){return mO("tanh")},e.prototype.asinh=function(e){return mO("asinh")},e.prototype.acosh=function(e){return mO("acosh")},e.prototype.atanh=function(e){return mO("atanh")},e.prototype.erf=function(e){return mO("erf")},e.prototype.step=function(e,t){return mO("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,mO("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return mO("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return mO("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return mO("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,mO("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return mO("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return mO("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return mO("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return mO("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return mO("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return mO("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return mO("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return mO("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return mO("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return mO("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return mO("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return mO("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return mO("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return mO("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return mO("reshape")},e.prototype.cast=function(e,t){return mO("cast")},e.prototype.tile=function(e,t){return mO("tile")},e.prototype.pad=function(e,t,n){return mO("pad")},e.prototype.transpose=function(e,t){return mO("transpose")},e.prototype.gather=function(e,t,n){return mO("gather")},e.prototype.gatherND=function(e,t){return mO("gatherND")},e.prototype.scatterND=function(e,t,n){return mO("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return mO("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return mO("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return mO("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return mO("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return mO("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return mO("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,i,a){return mO("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){return mO("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,i,a,o){return mO("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return mO("multinomial")},e.prototype.oneHot=function(e,t,n,r){return mO("oneHot")},e.prototype.cumsum=function(e,t,n,r){return mO("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return mO("nonMaxSuppression")},e.prototype.fft=function(e){return mO("fft")},e.prototype.ifft=function(e){return mO("ifft")},e.prototype.complex=function(e,t){return mO("complex")},e.prototype.real=function(e){return mO("real")},e.prototype.imag=function(e){return mO("imag")},e.prototype.cropAndResize=function(e,t,n,r,i,a){return mO("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return mO("depthToSpace")},e.prototype.split=function(e,t,n){return mO("split")},e.prototype.sparseToDense=function(e,t,n,r){return mO("sparseToDense")},e.prototype.diag=function(e){return mO("diag")},e.prototype.fill=function(e,t,n){return mO("fill")},e.prototype.onesLike=function(e){return mO("onesLike")},e.prototype.zerosLike=function(e){return mO("zerosLike")},e.prototype.linspace=function(e,t,n){return mO("linspace")},e.prototype.dispose=function(){return mO("dispose")},e}();function mO(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function gO(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var a=n-1-i,o=e[a]||1;(t[t.length-1-i]||1)>1&&1===o&&r.unshift(a)}return r}function vO(e,t){for(var n=[],r=0;r<t.length;r++){var i=e[e.length-r-1],a=t.length-r-1,o=t[a];(null==i||1===i&&o>1)&&n.unshift(a)}return n}function yO(e,t){for(var n=[],r=Math.max(e.length,t.length),i=0;i<r;i++){var a=e[e.length-i-1];null==a&&(a=1);var o=t[t.length-i-1];if(null==o&&(o=1),1===a)n.unshift(o);else if(1===o)n.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(a)}}return n}function bO(e,t,n,r,i,a,o){void 0===o&&(o="channelsLast");var s,l=EO(t),c=l[0],u=l[1];if("channelsLast"===o)s=[c,u,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);s=[c,u,e[1],e[1]]}return wO(e,s,n,r,i,a,!1,o)}function xO(e,t,n,r,i,a,o){void 0===o&&(o="NDHWC");var s,l,c=CO(t),u=c[0],h=c[1],d=c[2];if("NDHWC"===o)l="channelsLast",s=[u,h,d,e[4],e[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);l="channelsFirst",s=[u,h,d,e[1],e[1]]}return SO(e,s,n,r,i,!1,l,a)}function wO(e,t,n,r,i,a,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var l=[-1,-1,-1,-1],c=l[0],u=l[1],h=l[2],d=l[3];if("channelsLast"===s)c=e[0],u=e[1],h=e[2],d=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=e[0],d=e[1],u=e[2],h=e[3]}var f,p=t[0],m=t[1],g=t[3],v=EO(n),y=v[0],b=v[1],x=EO(r),w=x[0],S=x[1],_=kO(p,w),E=kO(m,S),C=function(e,t,n,r,i,a,o,s){var l,c,u;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,i){null==r&&(r=_O(e,t,n));var a=e[1],o=NO((e[0]-t+2*r)/n+1,i);oR(dR(o),function(){return"The output # of rows ("+o+") must be an integer. Change the stride and/or zero pad parameters"});var s=NO((a-t+2*r)/n+1,i);return oR(dR(s),function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"}),[o,s]}([t,n],a,r,e,s);c=h[0],u=h[1]}else if("same"===e){c=Math.ceil(t/r),u=Math.ceil(n/i);var d=Math.max(0,(c-1)*r+a-t),f=Math.max(0,(u-1)*i+o-n),p=Math.floor(d/2),m=d-p,g=Math.floor(f/2);l={top:p,bottom:m,left:g,right:f-g,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-a+1)/r),u=Math.ceil((n-o+1)/i)}return{padInfo:l,outHeight:c,outWidth:u}}(i,u,h,y,b,_,E,a),k=C.padInfo,N=C.outHeight,A=C.outWidth,T=o?g*d:g;return"channelsFirst"===s?f=[c,T,N,A]:"channelsLast"===s&&(f=[c,N,A,T]),{batchSize:c,dataFormat:s,inHeight:u,inWidth:h,inChannels:d,outHeight:N,outWidth:A,outChannels:T,padInfo:k,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:_,effectiveFilterWidth:E,dilationHeight:w,dilationWidth:S,inShape:e,outShape:f,filterShape:t}}function SO(e,t,n,r,i,a,o,s){void 0===a&&(a=!1),void 0===o&&(o="channelsLast");var l=[-1,-1,-1,-1,-1],c=l[0],u=l[1],h=l[2],d=l[3],f=l[4];if("channelsLast"===o)c=e[0],u=e[1],h=e[2],d=e[3],f=e[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);c=e[0],f=e[1],u=e[2],h=e[3],d=e[4]}var p,m=t[0],g=t[1],v=t[2],y=t[4],b=CO(n),x=b[0],w=b[1],S=b[2],_=CO(r),E=_[0],C=_[1],k=_[2],N=kO(m,E),A=kO(g,C),T=kO(v,k),I=function(e,t,n,r,i,a,o,s,l,c,u){var h,d,f,p;if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,i,a){null==i&&(i=_O(e,t,r));var o=e[1],s=e[2],l=NO((e[0]-t+2*i)/r+1,a);oR(dR(l),function(){return"The output # of depths ("+l+") must be an integer. Change the stride and/or zero pad parameters"});var c=NO((o-t+2*i)/r+1,a);oR(dR(c),function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"});var u=NO((s-t+2*i)/r+1,a);return oR(dR(u),function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"}),[l,c,u,1]}([t,n,r,1],s,0,i,e,u);d=m[0],f=m[1],p=m[2]}else if("same"===e){var g=((d=Math.ceil(t/i))-1)*i+s-t,v=((f=Math.ceil(n/a))-1)*a+l-n,y=((p=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(g/2),x=g-b,w=Math.floor(v/2),S=v-w,_=Math.floor(y/2);h={top:w,bottom:S,left:_,right:y-_,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/i),f=Math.ceil((n-l+1)/a),p=Math.ceil((r-c+1)/o)}return{padInfo:h,outDepth:d,outHeight:f,outWidth:p}}(i,u,h,d,x,w,S,N,A,T,s),D=I.padInfo,R=I.outDepth,P=I.outHeight,j=I.outWidth,L=a?y*f:y;return"channelsFirst"===o?p=[c,L,R,P,j]:"channelsLast"===o&&(p=[c,R,P,j,L]),{batchSize:c,dataFormat:o,inDepth:u,inHeight:h,inWidth:d,inChannels:f,outDepth:R,outHeight:P,outWidth:j,outChannels:L,padInfo:D,strideDepth:x,strideHeight:w,strideWidth:S,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:N,effectiveFilterHeight:A,effectiveFilterWidth:T,dilationDepth:E,dilationHeight:C,dilationWidth:k,inShape:e,outShape:p,filterShape:t}}function _O(e,t,n,r){void 0===r&&(r=1);var i=kO(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function EO(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function CO(e){return"number"==typeof e?[e,e,e]:e}function kO(e,t){return t<=1?e:e+(e-1)*(t-1)}function NO(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function AO(e){var t=EO(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function TO(e,t){return AO(e)||AO(t)}function IO(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function DO(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=$j(e.shape),i=e.toFloat(),a=n.complex(i,r);return r.dispose(),i.dispose(),a}if(!ER(e.dtype,t))return gP.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e);return a=o.cast(t),o.dispose(),a}if("int32"===t)return n.int(e);if("bool"===t){var s=qj(0,e.dtype);return a=n.notEqual(e,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function RO(e,t){return gP.makeTensorFromDataId(e.dataId,t,e.dtype)}function PO(e,t,n){var r=(t-e)/(n-1),i=FR(n,"float32");i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return Gj(i,"float32")}Object.freeze({castTensor:DO,reshapeTensor:RO,linspaceImpl:PO,upcastType:lP,axesAreInnerMostDims:Tj,combineLocations:Ij,computeOutAndReduceShapes:Dj,expandShapeToKeepDim:Rj,assertAxesAreInnerMostDims:Pj,getAxesPermutation:jj,getUndoAxesPermutation:Lj,getInnerMostAxes:Oj,getBroadcastDims:gO,getReductionAxes:vO,assertAndGetBroadcastShape:yO,assertParamsConsistent:Mj,computeOutShape:Fj,computePool2DInfo:bO,computePool3DInfo:xO,computeConv2DInfo:wO,computeConv3DInfo:SO,computeDefaultPad:_O,tupleValuesAreOne:AO,eitherStridesOrDilationsAreOne:TO,convertConv2DDataFormat:IO,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:ZL});function jO(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function LO(e,t){return{real:e[2*t],imag:e[2*t+1]}}function OO(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function MO(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function FO(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,i=e.length,a=0,o=!1;r<i;){var s=n(t,e[a=r+(i-r>>>1)]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}(e,t,n||BO)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function BO(e,t){return e>t?1:e<t?-1:0}function UO(e,t,n,r,i){return WO(e,t,n,r,i,0).selectedIndices}function zO(e,t,n,r,i,a){var o=WO(e,t,n,r,i,a,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function WO(e,t,n,r,i,a,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);for(var l=Array.from(t).map(function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}}).filter(function(e){return e.score>i}).sort(qO),c=a>0?-.5/a:0,u=[],h=[];u.length<n&&l.length>0;){var d=l.pop(),f=d.score,p=d.boxIndex,m=d.suppressBeginIndex;if(f<i)break;for(var g=!1,v=u.length-1;v>=m;--v){var y=VO(e,p,u[v]);if(y>=r){g=!0;break}if(d.score=d.score*HO(r,c,y),d.score<=i)break}d.suppressBeginIndex=u.length,g||(d.score===f?(u.push(p),h.push(d.score)):d.score>i&&FO(l,d,qO))}var b=u.length;return s&&(u.fill(0,b),h.fill(0,b)),{selectedIndices:Gj(u,"int32"),selectedScores:Gj(h,"float32"),numValidOutputs:qj(b,"int32")}}function VO(e,t,n){var r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),f=(s-a)*(l-o),p=(h-c)*(d-u);if(f<=0||p<=0)return 0;var m=Math.max(a,c),g=Math.max(o,u),v=Math.min(s,h),y=Math.min(l,d),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(f+p-b)}function HO(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function qO(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function GO(e,t,n){var r=new Array(e.rank).fill(0),i=e.shape.slice();return t.map(function(t){i[n]=t;var a=e.slice(r,i);return r[n]+=t,a})}function KO(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var i=xL(n,e.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=a[s]%e.shape[s];var l=e.locToIndex(o);i.values[r]=e.values[l]}return i.toTensor()}function YO(e,t,n,r,i){for(var a=t[t.length-1],o=[e.length/a,a],s=o[0],l=o[1],c=xR(n,s*r),u=xR("int32",s*r),h=0;h<s;h++){for(var d=h*l,f=e.subarray(d,d+l),p=[],m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort(function(e,t){return t.value-e.value});var g=h*r,v=c.subarray(g,g+r),y=u.subarray(g,g+r);for(m=0;m<r;m++)v[m]=p[m].value,y[m]=p[m].index}var b=t.slice();return b[b.length-1]=r,[Vj(c,b,n),Vj(u,b,"int32")]}function XO(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var i=xL(e,"int32"),a=xL([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]),s=r*e.length;a.values.set(o,s)}return a.toTensor()}var QO=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t});var n=[];this.variableNames.forEach(function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")});var r=this.variableNames.map(function(e){return"v"+e}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},$O=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t});var n=[];this.variableNames.forEach(function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")});var r=this.variableNames.map(function(e){return"v"+e}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},JO=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,i=e.batchSize,a=e.inSize,o=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===t?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+l+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function ZO(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(t){return e+"."+t})}function eM(e,t){return 1===t?[e]:ZO(e,t)}function tM(){var e,t,n,r,i,a,o,s,l,c;return 2===KD().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}function nM(e,t,n){void 0===n&&(n="index");var r=jR(t);return r.map(function(t,i){return"int "+e[i]+" = "+n+" / "+t+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+t:"index -= "+e[i]+" * "+t)+";"}).join("")}function rM(e){var t=jR(e).map(function(e){return e.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var iM="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function aM(e,t,n,r){var i=[];e.forEach(function(e){var t=uR(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?i.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(i.push("uniform sampler2D "+e.name+";"),i.push("uniform int offset"+e.name+";"))});var a,o,s=i.join("\n"),l=e.map(function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?sM(e):oM(e);var i=e.shapeInfo.logicalShape,a=t.logicalShape;return i.length<=a.length&&(r+=n?function(e,t){var n,r=e.name,i=r.charAt(0).toUpperCase()+r.slice(1),a="get"+i+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,l=gO(e.shapeInfo.logicalShape,t.logicalShape),c=pM(s),u=s-o,h=["x","y","z","w","u","v"];n=0===o?"":s<2&&l.length>=1?"coords = 0;":l.map(function(e){return"coords."+h[e+u]+" = 0;"}).join("\n");var d;d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+h[t+u]}).join(", ");var f="return outputValue;",p=1===uR(e.shapeInfo.logicalShape),m=1===uR(t.logicalShape);if(1!==o||p||m){if(p&&!m)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var g=o-2,v=o-1;l.indexOf(g)>-1&&l.indexOf(v)>-1?f="return vec4(outputValue.x);":l.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+i+"("+d+");\n      "+f+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&hR(o,a))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c,u=pM(l),h=gO(e.shapeInfo.logicalShape,t.logicalShape),d=l-s,f=["x","y","z","w","u","v"];c=0===s?"":l<2&&h.length>=1?"coords = 0;":h.map(function(e){return"coords."+f[e+d]+" = 0;"}).join("\n");var p;return p=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+f[t+d]}).join(", "),"\n    float "+i+"() {\n      "+u+" coords = getOutputCoords();\n      "+c+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)}).join("\n"),c=t.texShape,u=tM(),h=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(u),d=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+lM+"\n    "+cM+"\n    "+uM+"\n  "}(u);return t.isPacked?(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(hR(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2),a=i,o="",s="b, r, c",l=2;l<e.length-1;l++)o="\n      int b"+l+" = index / "+(a*=e[e.length-l-1])+";\n      index -= b"+l+" * "+a+";\n    "+o,s="b"+l+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,i,a,o}(t.logicalShape,c),o=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(u)):(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return hR(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=nM(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=nM(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=nM(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=nM(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),o=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(u)),r&&(d+=hM),[d,h,o,s,a,l,n].join("\n")}function oM(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,i=r[0],a=r[1];if(1===i&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+o[0]+", "+o[1]+", "+dM(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+fM(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,i=r[0],a=r[1];if(1===a&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=dM(t);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+a+", index + "+o+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape;if(null!=i&&hR(t,i)){var a=i[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var o=bR(t),s=o.newShape,l=o.keptDims,c=s;if(c.length<t.length)return"\n      "+oM(mM(e,c))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+gM(["row","col"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+fM(e)+"\n      }\n    ";var u=i[0],h=i[1],d=dM(n);return 1===h?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+u+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===u?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+h+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+d+";\n    vec2 uv = uvFromFlat("+u+", "+h+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[1]*t[2],a=t[2],o=bR(t),s=o.newShape,l=o.keptDims,c=s;if(c.length<t.length)return"\n        "+oM(mM(e,c))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+gM(["row","col","depth"],l)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+i+", "+a+", 1)));\n        "+fM(e)+"\n      }\n    ";var u=e.shapeInfo.texShape,h=u[0],d=u[1],f=e.shapeInfo.flatOffset;return d===i&&null==f?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+d+".0, "+h+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":d===a&&null==f?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+d+".0, "+h+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+i+" + col * "+a+" + depth + "+dM(n)+";\n        vec2 uv = uvFromFlat("+h+", "+d+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[3],a=t[2]*i,o=t[1]*a,s=bR(t),l=s.newShape,c=s.keptDims;if(l.length<t.length)return"\n      "+oM(mM(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+gM(["row","col","depth","depth2"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+o+", "+a+", "+i+", 1)));\n        "+fM(e)+"\n      }\n    ";var u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],f=h[1];return f===o&&null==u?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===i&&null==u?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+a+" +\n          depth * "+i+" + depth2;\n      vec2 uv = uvFromFlat("+d+", "+f+", index + "+dM(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],a=t[3]*i,o=t[2]*a,s=t[1]*o,l=bR(t),c=l.newShape,u=l.keptDims;if(c.length<t.length)return"\n      "+oM(mM(e,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+gM(["row","col","depth","depth2","depth3"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+o+", "+a+", "+i+")) +\n          depth3;\n        "+fM(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],p=d[1];return p===s&&null==h?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+o+", "+a+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===i&&null==h?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+o+" + depth * "+a+" +\n          depth2 * "+i+" + depth3 + "+dM(n)+";\n      vec2 uv = uvFromFlat("+f+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=bR(t),a=i.newShape,o=i.keptDims;if(a.length<t.length)return"\n      "+oM(mM(e,a))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+gM(["row","col","depth","depth2","depth3","depth4"],o)+");\n      }\n    ";var s=t[5],l=t[4]*s,c=t[3]*l,u=t[2]*c,h=t[1]*u;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+h+", "+u+", "+c+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+fM(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],m=f[1];return m===h&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+u+", "+c+", "+l+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+h+" + col * "+u+" + depth * "+c+" +\n          depth2 * "+l+" + depth3 * "+s+" + depth4 + "+dM(n)+";\n      vec2 uv = uvFromFlat("+p+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function sM(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+tM().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=tM();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+a.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,a=i[0],o=i[1],s=tM();if(null!=i&&hR(t,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+a+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+l[0]+", "+l[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===t[0])return"\n        "+sM(mM(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+gM(["b","row","col"],[1,2])+");\n        }\n      ";var o=a[0],s=a[1],l=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+o+", "+s+", "+l*Math.ceil(t[1]/2)+", "+l+", b, row, col);\n      return "+tM().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=o[0],l=o[1],c=Math.ceil(t[n-1]/2),u=c*Math.ceil(t[n-2]/2),h="int b, int row, int col",d="b * "+u+" + (row / 2) * "+c+" + (col / 2)",f=2;f<n-1;f++)h="int b"+f+", "+h,d="b"+f+" * "+(u*=t[n-f-1])+" + "+d;return"\n    vec4 "+i+"("+h+") {\n      int index = "+d+";\n      int texR = index / "+l+";\n      int texC = index - texR * "+l+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+l+", "+s+");\n      return "+tM().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var lM="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cM="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",uM="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",hM="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function dM(e){return"offset"+e}function fM(e){var t=e.name,n=uR(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function pM(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function mM(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function gM(e,t){return t.map(function(t){return e[t]}).join(", ")}var vM=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,oR(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=e[e.length-1],a=Math.ceil(i/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var o,s,l=this.outputShape,c=l.length,u=pM(c),h=eM("coords",c);if(1===a){var d=pM(s=c+1);o="\n        "+d+" sourceLocR = "+d+"("+h.join()+", 0);\n        ++"+h[c-1]+";\n        "+d+" sourceLocG = "+d+"("+h.join()+", 0);\n        ++"+h[c-2]+";\n        "+d+" sourceLocA = "+d+"("+h.join()+", 0);\n        --"+h[c-1]+";\n        "+d+" sourceLocB = "+d+"("+h.join()+", 0);\n        --"+h[c-2]+";"}else s=c,o="\n        "+u+" sourceLocR = coords;\n        ++"+h[c-1]+";\n        "+u+" sourceLocG = coords;\n        ++"+h[c-2]+";\n        "+u+" sourceLocA = coords;\n        --"+h[c-1]+";\n        "+u+" sourceLocB = coords;\n        --"+h[c-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),p="."+f[s-1],m=f.map(function(e){return"int "+e}),g=eM("sourceLocR",s-1).concat("inIdx.r"),v=eM("sourceLocG",s-1).concat("inIdx.g"),y=eM("sourceLocB",s-1).concat("inIdx.b"),b=eM("sourceLocA",s-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",S="vec4(\n            getAChannel("+g.join()+"),\n            hasNextCol ? getAChannel("+v.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",_=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+f.join()+"),\n                                          vec2("+f.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+f.join()+"),\n                               vec2("+f.slice(-2).join()+"));\n      }\n      "+_+"\n      void main() {\n        "+u+" coords = getOutputCoords();\n        bool hasNextCol = "+h[c-1]+" < "+(l[c-1]-1)+";\n        bool hasNextRow = "+h[c-2]+" < "+(l[c-2]-1)+";\n        "+o+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+S+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+S+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},yM=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.top,u=l-1-e.padInfo.left,h=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+u+");\n      const float avgMultiplier = float("+h+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+l+";\n            wC+= "+o+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},bM=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=u-1-e.padInfo.front,p=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n      const float avgMultiplier = float("+g+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+i+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+h+";\n              wR += "+l+") {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+d+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},xM=function(e,t,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],yO(e,t),yO(e,n);var o="0.0";null!=r&&(yO(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=i&&(yO(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},wM=function(e,t,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],yO(e,t),yO(e,n);var o="vec4(0.0)";null!=r&&(yO(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=i&&(yO(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},SM=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=yO(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},_M="return a + b;",EM="return a - b;",CM="return a * b;",kM="return (a < 0.) ? b * a : a;",NM=function(e,t,n){this.variableNames=["A","B"],this.outputShape=yO(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},AM="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",TM=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=yO(t,n);var i=this.outputShape.length,a="";if(r)if(0===i||1===uR(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+pM(i)+" coords = getOutputCoords();\n        ",1===i)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=eM("coords",i);a+="\n            bool nextRowOutOfBounds =\n              ("+o[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+o[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},IM=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),DM=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),RM=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},PM=function(e){this.outputShape=[],this.outputShape=Fj(e,1),this.variableNames=e.map(function(e,t){return"T"+t});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var i=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var a=t.length,o=t[t.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+o+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},jM=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Fj(e,t);var n=this.outputShape,r=n.length,i=pM(r),a=eM("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(e,t){return"T"+t});var s=new Array(e.length-1);s[0]=e[0][t];for(var l=1;l<s.length;l++)s[l]=s[l-1]+e[l][t];var c=o[t],u=o.slice(-2),h=o.join(),d="if ("+c+" < "+s[0]+") {\n        return getChannel(\n            getT0("+h+"), vec2("+u.join()+"));\n        }";for(l=1;l<s.length;l++){var f=s[l-1];d+="\n        if ("+c+" < "+s[l]+"  && "+c+" >= "+s[l-1]+") {\n          return getChannel(\n            getT"+l+"("+LM(o,c,f)+"),\n            vec2("+LM(u,c,f)+"));\n        }"}var p=s.length,m=s[s.length-1];d+="\n        return getChannel(\n          getT"+p+"("+LM(o,c,m)+"),\n          vec2("+LM(u,c,m)+"));",this.userCode="\n      float getValue("+o.map(function(e){return"int "+e})+") {\n        "+d+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function LM(e,t,n){var r=e.indexOf(t);return e.map(function(e,t){return t===r?e+" - "+n:e}).join()}var OM=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+a+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},MM=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=a?1:2,c=a?2:3,u=a?3:1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+u+"];\n\n        ivec2 dyCorner = ivec2(coords["+l+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+a+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},FM=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+i+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+o+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},BM=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+l+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},UM=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},zM=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},WM=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.padInfo.top,a=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,d=4*Math.floor(e.inChannels/4),f=e.inChannels%4,p="channelsLast"===e.dataFormat,m=p?1:2,g=p?2:3,v=p?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+v+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+u+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===f)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+d+") *\n                    getW(wR, wC, "+d+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+d+", xR, xC) *\n                    getW(wR, wC, "+d+", d2);\n              }\n\n            } else if ("+(2===f)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===f)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2),\n                getW(wR, wC, "+d+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1),\n                  getX(batch, xR, xC, "+d+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC),\n                  getX(batch, "+d+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},VM=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,d=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+a+", "+o+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+u+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+"; wR++) {\n            int xR = xRCorner + wR * "+l+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+f+") *\n                  getW(wF, wR, wC, "+f+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1),\n                  getX(batch, xF, xR, xC, "+f+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2),\n                  getW(wF, wR, wC, "+f+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},HM=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.inHeight,a=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,p=e.outChannels/e.inChannels,m="",g="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+l+", "+c+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+h+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+v+"\n        "+g+"\n        setOutput(result);\n      }\n    "},qM=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var i=e.inHeight,a=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,p=f,m="int xR; int xC; int xCOffset;",g=0;g<d;g++)for(var v=0;v<f;v++)m+="\n          vec4 xTexelR"+g+"C"+2*v+" = vec4(0.);\n          vec4 wR"+g+"C"+v+" = vec4(0.);\n          vec4 xR"+g+"C"+v+" = vec4(0.);";for(g=0;g<d;g++)for(var y=0;y<p;y++){if(m+="\n          xR = xRCorner + "+g*u+";\n          xC = xCCorner + "+(v=2*y)*h+";\n        ",1===c){if(v<f&&(m+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+g+"C"+v+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+".xy);\n                } else {\n                  xR"+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = xTexelR"+g+"C"+v+";\n              ",v+1<f)){var b=s%2==0?iR(h):h;h%2==0&&s%2==1||h%2!=0&&s%2!=1?(m+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",h>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+g+"C"+v+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+";\n                "}}else v<f&&(m+="\n              if(xR >= 0 && xR < "+i+") {\n            ",s%2==1?(m+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n              ",v+1<f&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+".xy);\n              ",v+1<f&&(m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n                ")),m+="}");v<f&&(m+="\n            vec4 wTexelR"+g+"C"+v+" = getW("+g+", "+v+", d1, q);\n            wR"+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+".xz);\n          ",v+1<f&&(m+="\n              vec4 wTexelR"+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+", d1, q);\n              wR"+g+"C"+(v+1)+" =\n                vec4(wTexelR"+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<d;g++)for(v=0;v<f;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var x="",w="";n&&(x=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var S=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+l+", "+c+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+S+"\n        "+w+"\n        setOutput(result);\n      }\n    "},GM=function(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],o=e[1],s=e[2],l=e[3],c=t[0],u=n[0],h=n[1];this.outputShape=[c,u,h,l];var d="bilinear"===r?1:0,f=[o-1+".0",s-1+".0"],p=f[0],m=f[1],g=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=g[0],y=g[1],b=g[2],x=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=x[0],S=x[1],_=x[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+S+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+_+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+d+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},KM=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=e[e.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+pM(r)+" coords = getOutputCoords();\n        int end = "+YM(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+YM(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function YM(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var XM=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=bP.DENSE;var t=NP(e),n=tM();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+nM(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},QM=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=bP.DENSE;var t=NP(e),n=tM();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+nM(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},$M=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),JM=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},ZM=function(e){this.variableNames=["A"],this.outTexUsage=xP.DOWNLOAD;var t=tM();this.outputShape=e,this.userCode="\n      "+iM+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},eF=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=xP.DOWNLOAD;var t=tM();this.outputShape=e,this.userCode="\n      "+iM+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},tF=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=tM(),i=t[0],a=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+rM(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},nF=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=tM(),i=t[0],a=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var c=0;c<=1;c++){var u=2*l+c;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+l+" < "+e[1]+") {\n              localCoords[1] += "+l+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+u+"] = values[0];\n              } else if(offset == 1) {\n                result["+u+"] = values[1];\n              } else if(offset == 2) {\n                result["+u+"] = values[2];\n              } else {\n                result["+u+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+rM(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+s+";\n      }\n    "},rF=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},iF=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),aF=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var i=pM(this.rank),a=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],a=0;a<e.length;a++)a===t?i.push("int(getIndices("+r[a]+"))"):i.push(""+r[a]);return i.join()}(e,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},oF=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=pM(t.length),i=pM(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function sF(e,t){var n=tM();return jP(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function lF(e,t){return WP(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function cF(e,t){return VP(e,t,new Uint16Array([0,1,2,2,1,3]))}function uF(e,t,n,r,i,a,o){qP(n,r);var s=HP(e,t),l=e.TEXTURE_2D;return IP(e,t,function(){return e.bindTexture(l,s)}),IP(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),IP(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),IP(e,t,function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)}),IP(e,t,function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)}),IP(e,t,function(){return e.texImage2D(l,0,i,n,r,0,a,o,null)}),IP(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function hF(e,t,n,r,i){var a=kP(n,r);return uF(e,t,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,e.FLOAT)}function dF(e,t,n,r,i){var a=kP(n,r);return uF(e,t,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function fF(e,t,n,r,i){var a=kP(n,r);return uF(e,t,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function pF(e,t,n,r,i){var a=AP(n,r);return uF(e,t,a[0],a[1],i.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function mF(e,t,n,r,i){var a=AP(n,r);return uF(e,t,a[0],a[1],i.internalFormatPackedHalfFloat,e.RGBA,i.textureTypeHalfFloat)}function gF(e,t,n,r){return IP(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),KP(e,t,n,"clipSpacePos",r,3,20,0)&&KP(e,t,n,"uv",r,2,20,12)}function vF(e,t,n,r,i,a,o){var s,l,c;IP(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),a instanceof Uint8Array?(s=new Uint8Array(r*i*4),l=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(r*i*4),l=e.FLOAT,c=o.internalFormatPackedFloat),s.set(a),IP(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,i,0,e.RGBA,l,s)}),IP(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function yF(e,t,n,r){IP(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?IP(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):IP(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),IP(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function bF(e,t,n,r,i){var a=e.createBuffer();IP(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)});var o=16*n*r;return IP(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),IP(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),IP(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),a}function xF(e,t,n){var r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function wF(e,t,n,r,i){var a=kP(n,r),o=a[0],s=a[1],l=new Uint8Array(n*r*4);return IP(e,t,function(){return e.readPixels(0,0,o,s,i.downloadTextureFormat,e.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function SF(e,t,n,r,i,a,o,s){var l=e,c=new Float32Array(function(e,t){var n=AP(e,t);return n[0]*n[1]*4}(a,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function _F(e,t,n,r){var i=new Float32Array(n*r*4);return IP(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,i)}),i}var EF=Object.freeze({createVertexShader:sF,createVertexBuffer:lF,createIndexBuffer:cF,createFloat32MatrixTexture:hF,createFloat16MatrixTexture:dF,createUnsignedBytesMatrixTexture:fF,createPackedMatrixTexture:pF,createFloat16PackedMatrixTexture:mF,bindVertexProgramAttributeStreams:gF,uploadDenseMatrixToTexture:vF,uploadPixelDataToTexture:yF,createBufferFromOutputTexture:bF,downloadFloat32MatrixFromBuffer:xF,downloadByteEncodedFloatMatrixFromOutputTexture:wF,downloadPackedMatrixFromBuffer:SF,downloadMatrixFromPackedOutputTexture:_F}),CF=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=KD().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,EP(t,e)):this.gl=CP(t);var n="WEBGL_color_buffer_float";if(1===KD().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=PP(this.gl,this.debug,"OES_texture_float"),fj(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=PP(this.gl,this.debug,"OES_texture_half_float");else if(KD().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),fj(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=PP(this.gl,this.debug,"EXT_color_buffer_half_float");else if(KD().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",fj(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!fj(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=lF(this.gl,this.debug),this.indexBuffer=cF(this.gl,this.debug),this.framebuffer=GP(this.gl,this.debug),this.textureConfig=TP(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return KD().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;IP(t,this.debug,function(){return t.finish()}),IP(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),IP(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),IP(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),IP(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),IP(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),hF(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),dF(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),fF(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),yF(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),vF(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),mF(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),pF(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(ZP(this.gl,this.debug,this.framebuffer),this.outputTexture=null),IP(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return wF(r.gl,r.debug,t,n,r.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,i,a){return SF(this.gl,e,0,0,0,i,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return xF(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=bF(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(KD().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=i.clientWaitSync(a,0,0);return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=a}else KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return _F(r.gl,r.debug,t,n)})},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=LP(t,this.debug,e),r=sF(t,this.debug),i=BP(t,this.debug);return IP(t,this.debug,function(){return t.attachShader(i,r)}),IP(t,this.debug,function(){return t.attachShader(i,n)}),UP(t,this.debug,i),this.debug&&zP(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=gF(t,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&IP(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&zP(this.gl,this.debug,this.program),IP(this.gl,this.debug,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?XP(this.gl,this.debug,e,t):QP(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),IP(this.gl,this.debug,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),$P(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=AP(t,n),i=r[0],a=r[1];this.setOutputMatrixTextureDriver(e,i,a)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&zP(this.gl,this.debug,this.program),ej(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),IP(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),IP(this.gl,this.debug,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=PP(this.gl,this.debug,2===KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(2!==KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return HD(this,void 0,void 0,function(){var t=this;return qD(this,function(n){switch(n.label){case 0:return[4,gR(function(){return t.disposed||t.isQueryAvailable(e,KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(e,KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(function(e){return e.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||gR(function(){return n.pollItems(),0===n.itemsToPoll.length})},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),JP(this.gl,this.debug,e,this.framebuffer),this.debug&&ej(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(JP(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ej(this.gl)):ZP(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;JP(r,this.debug,e,this.framebuffer),this.debug&&ej(r),this.outputTexture=e,IP(r,this.debug,function(){return r.viewport(0,0,t,n)}),IP(r,this.debug,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var i=this;this.throwIfDisposed(),IP(this.gl,this.debug,function(){return i.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function kF(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(e,n){var r=e.logicalShape,i=t[n],a=i.shape;if(!hR(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!e.isUniform||!i.isUniform){var o=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!hR(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}})}var NF=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,i=n.inChannels,a=n.strideWidth,o=n.strideHeight,s=n.padInfo,l=n.outWidth,c=n.dilationWidth,u=n.dilationHeight,h=n.dataFormat,d=s.left,f=s.top,p=i*r,m=tM(),g="channelsLast"===h,v=g?0:1,y=g?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+l+")) * "+o+" - "+f+";\n            d0 = offsetY + "+u+" * (pos / "+p+");\n\n            if(d0 < "+t[v]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+l+".) * "+a+". - "+d+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+p+".) / "+i+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+g+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+m.output+" = result;\n      }\n    "},AF=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";a=.5===i?"inversesqrt("+l+")":1===i?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},TF=function(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},IF=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,o=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";a=.5===i?"inversesqrt("+l+")":1===i?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+o+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+o+"; j <= "+o+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},DF=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,s=a-1-e.padInfo.left,l=i*a-1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+l+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},RF=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=s-1-e.padInfo.front,h=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=s*l*c-1;this.userCode="\n      const ivec3 pads = ivec3("+u+", "+h+", "+d+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+i+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+a+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+o+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+f+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+l+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},PF=function(e,t,n,r,i,a,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===o&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],l=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",u=r?"rc.z, i * 2":"i * 2, rc.z",h=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",p="";a&&(f=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+l+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+l+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+u+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+h[0]+" * "+d[0]+");\n          result += ("+h[1]+" * "+d[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+m+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},jF=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),LF=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},OF=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=eM("rc",t),r=pM(t),i=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",i=e-2;i<e;i++)r+=n[i]+" >= "+t[i],i<e-1&&(r+="||");return r}(t,e,n),a=function(e,t,n,r){if(1===e)return"";var i=r.slice(-2);return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),o=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var a=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),o=2;o<e;o++)a=t[t.length-1-o]+","+a;n.push(a)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}},MF=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});var r=e.length,i=pM(r),a=t.map(function(e){return e[0]}).join(","),o=t.map(function(t,n){return t[0]+e[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+a+");\n      "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},FF=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});for(var r=e.length,i=pM(r),a=t.map(function(e){return e[0]}).join(","),o=t.map(function(t,n){return t[0]+e[n]}).join(","),s=eM("rc",r),l=eM("source",r),c=s[r-1]+" < "+this.outputShape[r-1],u=1===r?"source":"vec2("+l.slice(-2).join()+")",h=[i+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+c+") {"],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",p=0,m=1===r?2:4;p<m;p++)f+="\n        "+h[p]+"\n        if ("+d+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+p+"] = getChannel(getX("+l.join()+"), "+u+");\n        }\n      ";f+=1===r?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+a+");\n      const "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+f+"\n        setOutput(result);\n      }\n    "},BF=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var d="avg"===t,f="0.0";if(d||(f="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+a+");\n        const ivec2 pads = ivec2("+u+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+o+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(p="avgValue / count");var m=4*Math.floor(r/4),g=r%4,v="\n      if ("+d+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+a+");\n      const ivec2 pads = ivec2("+u+", "+h+");\n      const float initializationValue = "+f+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+f+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+l+";\n            wR += "+o+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+v+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(2===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(3===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+v+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},UF=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var g="avg"===t,v="0.0";if(g||(v="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+a+", "+o+");\n        const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+u+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+h+";\n                wR += "+l+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+d+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+h+" * "+d+" +\n                      wR * "+d+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(r/4),x=r%4,w="\n      if ("+g+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+a+", "+o+");\n      const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n      const float initializationValue = "+v+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+v+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+";\n            wR += "+l+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},zF=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,i=e.inSize,a=Math.ceil(i/n);this.outputShape=[r,a];var o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");var l=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");var c=4*Math.floor(n/4),u=n%4,h="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",d="vec4";"all"===t?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var f="";i%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===u)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(2===u)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(3===u)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+h+"\n        }\n        setOutput("+l+");\n      }\n    "},WF=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+nM(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+rM(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},VF=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],a=r[2],o=e.shape,s=o[1],l=o[2],c=[n&&s>1?i-1:i,n&&l>1?a-1:a],u=[n&&s>1?s-1:s,n&&l>1?l-1:l],h=c[0]/u[0],d=c[1]/u[1],f=1/h,p=1/d,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},HF=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},qF=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+",\n          "+l[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+o+".0,\n                                     "+o+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},GF=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],a=r[2],o=e.shape,s=o[1],l=o[2],c=[n&&s>1?i-1:i,n&&l>1?a-1:a],u=[n&&s>1?s-1:s,n&&l>1?l-1:l],h=c[0]/u[0],d=c[1]/u[1],f=1/h,p=1/d,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+u[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+u[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},KF=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],u=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+u+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},YF=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map(function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),i=pM(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},XF=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=eM("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],o=pM(n);function s(n){var r=e.map(function(r,i){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)});return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+i+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},QF=function(e,t,n,r,i,a,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=pM(i.length),l=pM(a.length),c="";1===n?c="i":2===n&&(c="i, j");var u="getIndices("+c+")",h="";1===r?h="i":2===r&&(h="i, coords[1]");var d="getUpdates("+h+")",f=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+i+");\n\n        void main() {\n          "+l+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+u+");\n              flattenedIndex += index * "+f+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+d+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},$F=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",u="";i%n>0&&(u="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var h="";i%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+u+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+h+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},JF=function(e,t,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],l=0;l<t.length;l++)s.push(""+a[l]),l<e&&o.push(""+a[l]);r=o.join(),i=s.join()}var c=pM(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},ZF=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=pM(this.rank),r="uniform int start["+this.rank+"];",i=function(e){if(1===e)return"sourceLoc";if(e<=6)return eB.slice(0,e).map(function(e){return"sourceLoc."+e}).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map(function(e,t){return"sourceLoc."+eB[t]+" = start["+t+"] + coords."+eB[t]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+i+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),eB=["x","y","z","w","u","v"],tB=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=pM(this.rank),n=eM("coords",this.rank),r=eM("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+i+")",o="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",l=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map(function(e,t){return"start["+t+"]"}).join()+");":e.map(function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+l+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),nB=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=pM(n.length),a=pM(n.length),o="";if(1===r)o="coords * strides + begin";else{var s=0;o=n.map(function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"}).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+e+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "},rB=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,i=iB(t,n),a=aB(e,i,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[a].shift();return this.usedTextures[a].push(o),o}return this.numUsedTextures++,this.log(),i===wP.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===wP.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===wP.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===wP.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===wP.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var i=aB(t,iB(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[i],o=a.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(o,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function iB(e,t){if(e===xP.UPLOAD)return wP.PACKED_2X2_FLOAT32;if(e===xP.RENDER||null==e)return function(e){return KD().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?wP.PACKED_2X2_FLOAT32:wP.UNPACKED_FLOAT32:e?wP.PACKED_2X2_FLOAT16:wP.UNPACKED_FLOAT16}(t);if(e===xP.DOWNLOAD||e===xP.PIXELS)return wP.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function aB(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var oB=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var i=pM(this.rank),a=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<e.length;i++)r.push("imod("+n[i]+", "+e[i]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},sB=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var i=pM(this.rank),a=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},lB=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=pM(this.rank),a=ZO("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=a[r];var s="vec2("+o.slice(-2).join()+")",l="++"+a[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+o.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+l+") {\n        result[1] = "+c+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+l+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},cB=1.7580993408473768,uB=1.0507009873554805,hB=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},dB="if (isnan(x)) return x;",fB="return abs(x);",pB=dB+"\n  return (x < 0.0) ? 0.0 : x;\n",mB=dB+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",gB="return (x >= 0.0) ? x : (exp(x) - 1.0);",vB="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+cB+";\n  float scale = "+uB+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",yB="return -x;",bB="return ceil(x);",xB="return floor(x);",wB="return exp(x);",SB="return exp(x) - 1.0;",_B=dB+"\n  return sin(x);\n",EB=dB+"\n  return cos(x);\n",CB=dB+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",kB=dB+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",NB=dB+"\n  return atan(x);\n",AB=dB+"return log(x + sqrt(x * x + 1.0));",TB=dB+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",IB=dB+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",DB="return x;",RB="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",PB="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",jB="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",LB=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},OB=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=eM("rc",t),r=pM(t),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),o=t<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},MB={};function FB(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?RB:pB;if("elu"===e)return t?jB:gB;if("relu6"===e)return t?PB:mB;if("prelu"===e)return t?AM:kM;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var BB=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!KD().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var i=CP(KD().getNumber("WEBGL_VERSION"));r.binaryCache=((n=KD().getNumber("WEBGL_VERSION"))in MB||(MB[n]={}),MB[n]),r.gpgpu=new CF(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new rB(r.gpgpu),r.numMBBeforeWarning=null==KD().global.screen?1024:KD().global.screen.height*KD().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new fO(r,gP),r}return VD(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(KD().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:xP.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(KD().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:xP.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensors,a=t.slice,o=t.shape,s=t.isPacked;if(null!=a){var l;l=s?new LB(o,DB):new hB(o,DB);var c=this.runWebGLProgram(l,[{dataId:e,shape:o,dtype:r}],r),u=this.readSync(c.dataId);return this.disposeData(c.dataId),u}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var h,d,f=null!=this.activeTimers;return f&&(h=BR()),d="complex64"===r?jO(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=BR()-h),this.convertAndCacheOnCPU(e,d)},t.prototype.read=function(e){return HD(this,void 0,void 0,function(){var t,n,r,i,a,o,s,l,c,u,h,d,f,p,m,g,v,y,b,x,w,S;return qD(this,function(_){switch(_.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(e){return t.push(e)})];if(n=this.texData.get(e),r=n.values,i=n.shape,a=n.slice,o=n.dtype,s=n.complexTensors,l=n.isPacked,null!=a)return void 0,c=l?new LB(i,DB):new hB(i,DB),u=this.runWebGLProgram(c,[{dataId:e,shape:i,dtype:o}],o),h=this.read(u.dataId),this.disposeData(u.dataId),[2,h];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!KD().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===KD().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,"complex64"!==o&&KD().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(e),p=this.texData.get(f.dataId),d=(S=this.gpgpu).createBufferFromTexture.apply(S,[p.texture].concat(NP(i)))),this.pendingRead.set(e,[]),"complex64"===o?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:_.sent(),_.label=2;case 2:return"complex64"!==o?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return g=_.sent(),v=g[0],y=g[1],m=jO(v,y),[3,5];case 4:null==d?m=this.getValuesFromTexture(e):(b=uR(i),m=this.gpgpu.downloadFloat32MatrixFromBuffer(d,b)),_.label=5;case 5:return null!=f&&this.disposeData(f.dataId),x=this.convertAndCacheOnCPU(e,m),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach(function(e){return e(x)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,x]}})})},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!DP(n)){if(KD().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,a=n.isPacked,o=uR(r);if(KD().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),l=this.texData.get(s.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[l.texture].concat(NP(r))).subarray(0,o);return this.disposeData(s.dataId),c}var u=KD().getBool("WEBGL_PACK")&&!0===a,h=u?oj(r):r,d=u?new eF(h):new ZM(h),f=this.runWebGLProgram(d,[{shape:h,dtype:i,dataId:e}],"float32"),p=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,o);return this.disposeData(f.dataId),m},t.prototype.time=function(e){return HD(this,void 0,void 0,function(){var t,n,r,i,a,o,s;return qD(this,function(l){switch(l.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),i=cR(this.activeTimers.map(function(e){return e.query})).filter(function(e){return null!=e}),a=cR(this.activeTimers.map(function(e){return e.name})).filter(function(e){return null!=e}),this.activeTimers=t,r&&(this.programTimersStack=null),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return s=l.sent(),o.kernelMs=aR(s),o.getExtraProfileInfo=function(){return s.map(function(e,t){return{name:a[t],ms:e}}).map(function(e){return e.name+": "+e.ms}).join(", ")},[3,3];case 2:o.kernelMs={error:"WebGL query timers are not supported in this environment."},l.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:BR(),endMs:null}},t.prototype.endTimer=function(e){return KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=BR(),e)},t.prototype.getQueryTime=function(e){return HD(this,void 0,void 0,function(){var t;return qD(this,function(n){return KD().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,i=t.texShape,a=t.usage,o=t.isPacked,s=t.slice,l=s&&s.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,o)));var u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return KD().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=gP.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every(function(e){return null==n.texData.get(e.dataId).texture&&e.size<t})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:gP.keep(e.clone()),imag:gP.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===uR(n))return Vj([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,i=lO(e.shape,t,n);if(r||!i){var a=KD().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tB(n):new ZF(n),o=a.getCustomSetupFunc(t);return this.compileAndRun(a,[e],null,o)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),i=this.makeOutput(n,e.dtype),a=this.texData.get(i.dataId);Object.assign(a,r),a.shape=n,a.dtype=e.dtype;var o=cO(t,e.strides);r.slice&&(o+=r.slice.flatOffset),a.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),i},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var i=aO(t,n,r);if(i.some(function(e){return 0===e}))return Vj([],i);var a=new nB(t,r,i);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,t){var n=KD().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XF(e.shape,t):new YF(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map(function(e){return zj(e)}),r=e.map(function(e){return Wj(e)});return Uj(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>KD().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(e.length/2),a=this.concat(e.slice(0,i),t),o=this.concat(e.slice(i),t);return this.concat([a,o],t)}if(KD().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new jM(e.map(function(e){return e.shape}),t);return this.compileAndRun(s,e)}var l=Fj(e.map(function(e){return e.shape}),t),c=e.map(function(e){return e.as2D(-1,uR(e.shape.slice(t)))}),u=new PM(c.map(function(e){return e.shape}));return this.compileAndRun(u,c).reshape(l)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(KD().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,yB,e.dtype);var t=new hB(e.shape,yB);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var i=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],o=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===i||1===a)&&o>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var l=1===a?e:e.as3D(s,o,1),c=1===a?2:1,u=1===a?t.as3D(s,1,o):t;return this.multiply(l,u).sum(c,!0)}var h=lP(e.dtype,t.dtype),d=new PF(e.shape,[s,i,a],n,r);return this.compileAndRun(d,[e,t],h)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,a=e.bias,o=e.activation,s=e.preluActivationWeights,l=r?t.shape[2]:t.shape[1],c=i?n.shape[1]:n.shape[2],u=t.shape[0],h=lP(t.dtype,n.dtype),d=null!=a,f=null!=s,p=o?FB(o,!0):null,m=new PF(t.shape,[u,l,c],r,i,d,p,f),g=[t,n];return a&&g.push(a),s&&g.push(s),this.compileAndRun(m,g,h)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),i=new SM("return areal * breal - aimag * bimag;",e.shape,t.shape),a=new SM("return areal * bimag + aimag * breal;",e.shape,t.shape),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(i,o),l=this.compileAndRun(a,o),c=this.complex(s,l);return s.dispose(),l.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,CM,e.dtype);var u=new NM(CM,e.shape,t.shape);return this.compileAndRun(u,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,i,a){var o=[e,t,n],s=null;null!=a&&(s=a.shape,o.push(a));var l=null;if(null!=i&&(l=i.shape,o.push(i)),KD().getBool("WEBGL_PACK_NORMALIZATION")){var c=new wM(e.shape,t.shape,n.shape,s,l,r);return this.compileAndRun(c,o)}var u=new xM(e.shape,t.shape,n.shape,s,l,r);return this.compileAndRun(u,o)},t.prototype.localResponseNormalization4D=function(e,t,n,r,i){var a=KD().getBool("WEBGL_PACK_NORMALIZATION")?new IF(e.shape,t,n,r,i):new AF(e.shape,t,n,r,i);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,t,n,r,i,a,o){var s=new TF(t.shape,r,i,a,o);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map(function(e){return WR(e)});return KO(xL(e.shape,e.dtype,n),t)}var r=new oB(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=KD().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new FF(e.shape,t,n):new MF(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=KD().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lB(e.shape,t):new sB(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new aF(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){oR(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var r=t.reduce(function(e,t){return e*t}),i=KL(e.shape,t,r),a=YL(i.length,t.length),o=XL(e.shape,t,r),s=QL(n,t.length),l=$L(o,n,t.length);return e.reshape(i).transpose(a).reshape(o).slice(s,l)},t.prototype.spaceToBatchND=function(e,t,n){oR(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var r=t.reduce(function(e,t){return e*t}),i=[[0,0]];i.push.apply(i,n);for(var a=1+t.length;a<e.shape.length;++a)i.push([0,0]);var o=e.pad(i),s=KL(o.shape,t,r,!1),l=YL(s.length,t.length,!1),c=XL(o.shape,t,r,!1);return o.reshape(s).transpose(l).reshape(c)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],i=e.shape[1],a=ZL(i),o=new zF({windowSize:a,inSize:i,batchSize:r},t),s=this.compileAndRun(o,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],i=e.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var a=ZL(i),o=new JO({windowSize:a,inSize:i,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var l=this.compileAndRun(o,s,"int32");return 1===l.shape[1]?l:this.argReduce(e,t,l)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,i=ZL(r[r.length-1]),a=new vM(r,i,t,null==n),o=null==n?[e]:[e,n],s=this.compileAndRun(a,o,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){Pj("sum",t,e.rank);var n=Dj(e.shape,t),r=n[0],i=uR(n[1]),a=e.as2D(-1,i),o=cP(e.dtype);return this.reduce(a,"sum",o).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=Dj(e.shape,t),r=n[0],i=uR(n[1]),a=e.as2D(-1,i),o=cP(e.dtype);return this.reduce(a,"prod",o).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,i=jj([r],e.rank),a=e;null!=i&&(a=e.transpose(i),r=Oj(1,e.rank)[0]);var o=function(e,t,n){for(var r=[],i=e.length,a=0;a<i;a++)a!==t?r.push(e[a]):r.push(n);return r}(a.shape,r,n),s=uR([a.shape[r]]),l=a.as2D(-1,s),c=cP(e.dtype),u=this.segOpCompute(l,"unsortedSegmentSum",t,c,n).reshape(o);return null!=i&&(u=u.transpose(Lj(i))),u},t.prototype.segOpCompute=function(e,t,n,r,i){var a=e.shape[0],o=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=PR(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=PR(e,n+1);return n}(o,i),l=new $F({windowSize:s,inSize:o,batchSize:a,numSegments:i},t),c=this.compileAndRun(l,[e,n],r);return c.shape[1]===i?c:(n=Zj(0,i).tile([o/s]),this.segOpCompute(c,t,n,r,i))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(Pj("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!KD().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var i=Dj(e.shape,r),a=i[0],o=uR(i[1]),s=e.as2D(-1,o);return this.argReduce(s,n).reshape(a)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var i=new KM(e.shape,n,r);return this.compileAndRun(i,[e])},t.prototype.equal=function(e,t){if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new NM("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new NM("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new NM("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new NM("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new NM("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new NM("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new hB(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new NM("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new NM("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new JF(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],lP(t.dtype,n.dtype))},t.prototype.where=function(e){Ej("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return XO(e.shape,t)},t.prototype.topk=function(e,t,n){return YO(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Pj("min",t,e.rank);var n=Dj(e.shape,t),r=n[0],i=uR(n[1]),a=e.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TM("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TM("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);Pj("max",t,e.rank);var n=Dj(e.shape,t),r=n[0],i=uR(n[1]),a=e.as2D(-1,i);return this.reduce(a,"max",a.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TM("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){Pj("all",t,e.rank);var n=Dj(e.shape,t),r=n[0],i=uR(n[1]),a=e.as2D(-1,i);return this.reduce(a,"all",a.dtype).reshape(r)},t.prototype.any=function(e,t){Pj("any",t,e.rank);var n=Dj(e.shape,t),r=n[0],i=uR(n[1]),a=e.as2D(-1,i);return this.reduce(a,"any",a.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new NM("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new NM("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,_M);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=lP(e.dtype,t.dtype);if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,_M,n);var r=new NM(_M,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new LB(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,i){void 0===i&&(i=!1);var a=new TM(n,e.shape,t.shape,i);return this.compileAndRun(a,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,i=this.texData.get(e.dataId),a=this.texData.get(t.dataId),o=[[i.complexTensors.real,a.complexTensors.real],[i.complexTensors.imag,a.complexTensors.imag]].map(function(i){var a=i[0],o=i[1],s=r.makeComplexComponentTensorInfo(e,a),l=r.makeComplexComponentTensorInfo(t,o),c=new NM(n,e.shape,t.shape);return r.compileAndRun(c,[s,l],lP(a.dtype,o.dtype))}),s=o[0],l=o[1],c=this.complex(s,l);return s.dispose(),l.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>KD().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var i=e.map(function(e){return e.dtype}).reduce(function(e,t){return lP(e,t)}),a=e.map(function(e){return e.shape}),o=KD().getBool("WEBGL_PACK")?new $O(e[0].shape,a):new QO(e[0].shape,a);return this.compileAndRun(o,e,i)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,EM);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=lP(e.dtype,t.dtype);if(KD().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,EM,e.dtype);var r=new NM(EM,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TM("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=lP(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(KD().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,bB,e.dtype);var t=new hB(e.shape,bB);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(KD().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,xB,e.dtype);var t=new hB(e.shape,xB);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new hB(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new hB(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new hB(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new hB(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new hB(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(KD().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,wB,e.dtype);var t=new hB(e.shape,wB);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(KD().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,SB,e.dtype);var t=new hB(e.shape,SB);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=yR([t],e.shape),r=this.max(e,n),i=Rj(r.shape,n),a=this.subtract(e,r.reshape(i)),o=this.exp(a),s=this.sum(o,n).reshape(i);return this.realDivide(o,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(KD().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new hB(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new hB(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new hB(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new hB(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new hB(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=KD().getBool("WEBGL_PACK")?new LB(e.shape,RB):new hB(e.shape,pB),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=KD().getBool("WEBGL_PACK")?new LB(e.shape,PB):new hB(e.shape,mB),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TM(AM,e.shape,t.shape):new NM(kM,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(KD().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,jB,e.dtype);var t=new hB(e.shape,gB);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TM("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new NM("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new hB(e.shape,vB);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new hB(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,i=(r=KD().getBool("WEBGL_PACK_CLIP")?new DM(e.shape):new IM(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,i)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(KD().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,fB,e.dtype);var t=new hB(e.shape,fB);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new RM(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new hB(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new hB(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new hB(e.shape,_B);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new hB(e.shape,EB);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new hB(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new hB(e.shape,CB);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new hB(e.shape,kB);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new hB(e.shape,NB);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TM("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new hB(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new hB(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new hB(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new hB(e.shape,AB);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new hB(e.shape,TB);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new hB(e.shape,IB);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new hB(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new hB(e.shape,function(e){return void 0===e&&(e=0),dB+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,i,a){var o=e.shape,s=this.texData.get(e.dataId),l=n.inChannels,c=o[0]*o[1]*o[2],u=n.outChannels,h="channelsLast"===n.dataFormat,d=(1===c||1===u)&&l>1e3,f=o[2]%2!=0&&!!s.isPacked;if(d||!KD().getBool("WEBGL_LAZILY_UNPACK")||!KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!f){var p=h?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],m=this.reshape(e,[1,p,n.inChannels]),g=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:a}),n.outShape)}var v=h?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),y={dataId:e.dataId,shape:[1,v,n.inChannels],dtype:e.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,oR(cj(s.shape,y.shape),function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"});var x=this.reshape(t,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:x,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:a}),S=this.texData.get(w.dataId);return oR(S.isPacked,function(){return"batchMatMul result is expected to be packed"}),s.shape=b,S.shape=n.outShape,gP.makeTensorFromDataId(w.dataId,n.outShape,w.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,i,a){var o=n.filterWidth,s=n.filterHeight,l=n.inChannels,c=n.outWidth,u=n.outHeight,h="channelsLast"===n.dataFormat,d=o*s*l,f=u*c,p=[d,f],m=e.squeeze([0]),g=t.reshape([1,d,-1]),v=new NF(p,m.shape,n),y=this.compileAndRun(v,[m]).reshape([1,p[0],p[1]]),b=null!=r,x=null!=a,w=i?FB(i,!0):null,S=new PF(y.shape,[1,f,n.outChannels],!0,!1,b,w,x),_=[y,g];r&&_.push(r),x&&_.push(a);var E=this.compileAndRun(S,_);return h?E.reshape([1,u,c,n.outChannels]):E.reshape([1,n.outChannels,u,c])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,i,a,o);if(KD().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,i,a,o);var s=null!=i,l=null!=o,c=a?FB(a,!1):null,u=new WM(r,s,c,l),h=[t,n];return i&&h.push(i),o&&h.push(o),this.compileAndRun(u,h)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(KD().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new WM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new MM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new OM(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,i=e.convInfo,a=e.bias,o=e.activation,s=e.preluActivationWeights,l=KD().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,c=o?FB(o,l):null,u=[n,r],h=null!=a,d=null!=s;return h&&u.push(a),d&&u.push(s),l?(t=new qM(i,h,c,d),this.compileAndRun(t,u)):(t=new HM(i,h,c,d),this.compileAndRun(t,u))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return KD().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new qM(n),this.compileAndRun(r,[e,t])):(r=new HM(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new zM(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new UM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new VM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new BM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new FM(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new BF(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new BF(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var i=new BF(r,"max",!0),a=this.compileAndRun(i,[t]),o=new DF(r),s=this.compileAndRun(o,[e,a],t.dtype);return a.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new yM(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return DO(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,a=0;a<e.rank;a++)a!==t&&(r[i++]=e.shape[a]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var l=new Array(n);for(a=0;a<l.length;a++)o[t]=a,l[a]=this.slice(e,o,s).reshape(r);return l},t.prototype.avgPool3d=function(e,t){var n=new UF(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new bM(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new UF(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var i=new UF(r,"max",!0),a=this.compileAndRun(i,[t]),o=new RF(r),s=this.compileAndRun(o,[e,a],t.dtype);return a.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!cj(e.shape,t)&&(null===n.texture||!cj(n.shape,t))){var r=this.packedReshape(e,t);return gP.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return RO(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var i=KD().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new qF(e.shape,t,n,r):new HF(e.shape,t,n,r);return this.compileAndRun(i,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new VF(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var i=new KF(e.shape,t,n,r);return this.compileAndRun(i,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new GF(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var i=t?e:hO(e),a=i.shape[0],o=i.shape[1],s=new jF(a,o,n),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],"int32",l)},t.prototype.oneHot=function(e,t,n,r){var i=new LF(e.size,t,n,r);return this.compileAndRun(i,[e])},t.prototype.diag=function(e){var t=new JM(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,i){return Ej("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),UO(e.dataSync(),t.dataSync(),n,r,i)},t.prototype.cropAndResize=function(e,t,n,r,i,a){var o=new GM(e.shape,t.shape,r,i,a);return this.compileAndRun(o,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){oR(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});var r=e.shape[0],i="NHWC"===n?e.shape[1]:e.shape[2],a="NHWC"===n?e.shape[2]:e.shape[3],o="NHWC"===n?e.shape[3]:e.shape[1],s=i*t,l=a*t,c=o/(t*t),u=new $M("NHWC"===n?[r,s,l,c]:[r,c,s,l],t,n);return this.compileAndRun(u,[e])},t.prototype.split=function(e,t,n){return GO(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=nO(0,e,n),i=r.sliceRank,a=r.numUpdates,o=r.sliceSize,s=r.strides,l=r.outputSize,c=[l/o,o],u=e.reshape([a,i]),h=t.reshape([a,o]);if(0===l)return RO(Vj([]),n);var d=qj(0),f=new QF(a,i,u.rank,h.rank,s,c);return this.compileAndRun(f,[h,u,d]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var i=nO(0,e,n),a=i.sliceRank,o=i.numUpdates,s=i.strides,l=i.outputSize,c=new QF(o,a,e.rank,t.rank,s,[l,1],!1);return this.compileAndRun(c,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new rF("return real * expR - imag * expI;",e.shape,t),i=new rF("return real * expI + imag * expR;",e.shape,t),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],o=this.compileAndRun(r,a),s=this.compileAndRun(i,a),l=this.complex(o,s).as2D(e.shape[0],e.shape[1]);return o.dispose(),s.dispose(),l},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=JL(e,t),a=i[0],o=i[1],s=i[2],l=i[3],c=t.reshape([o,r]),u=e.reshape([e.size/s,s]),h=new oF(r,l,[o,s]);return this.compileAndRun(h,[u,c]).reshape(a)},t.prototype.fill=function(e,t,n){if("string"===(n=n||DR(t))){var r=wR(n,uR(e));return r.fill(t),gP.makeTensor(r,e,n,this)}var i=new iF(e,t),a=i.getCustomSetupFunc(t);return this.compileAndRun(i,[],n,a)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return PO(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return gP.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new OB(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new OF(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[ij(e.shape)].concat(aj(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[ij(t)].concat(aj(t)),a=new WF(i,n),o=this.runWebGLProgram(a,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,i=n.shape,a=n.dtype,o=oj(i);return t=r?new QM(o):new XM(o),{dtype:a,shape:i,dataId:this.runWebGLProgram(t,[{shape:o,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,i){var a=this;void 0===i&&(i=!1);var o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===bP.DENSE){var l=NP(e.outputShape);s.texShape=l.map(function(e){return 2*e})}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===uR(o.shape))return s.values=xR(o.dtype,0),o;var c=[],u=t.map(function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&uR(t.shape)<=KD().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!cj(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),c.push(t),n=a.texData.get(t.dataId),r.shape=i}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(o.dataId);var h,d={shape:o.shape,texData:s,isUniform:!1},f=function(e,t,n){var r="";t.concat(n).forEach(function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t});var i=e.userCode;return e.constructor.name+"_"+r+"_"+i}(e,u,d),p=this.getAndSaveBinary(f,function(){return function(e,t,n,r){var i=t.userCode,a=n.map(function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),o=a.map(function(e){return e.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=aM(a,s,i,t.packedInputs),c=e.createProgram(l),u=null,h=e.getUniformLocation(c,"NAN",!1);1===KD().getNumber("WEBGL_VERSION")&&(u=e.getUniformLocation(c,"INFINITY",!1));for(var d={},f=0;f<t.variableNames.length;f++){var p=t.variableNames[f];d[p]=e.getUniformLocation(c,p,!1),d["offset"+p]=e.getUniformLocation(c,"offset"+p,!1)}return{program:t,source:l,webGLProgram:c,uniformLocations:d,inShapeInfos:o,outShapeInfo:s,infLoc:u,nanLoc:h}}(a.gpgpu,e,u,d)}),m=null!=this.activeTimers;if(m&&(h=this.startTimer()),function(e,t,n,r,i){kF(t.inShapeInfos,n),kF([t.outShapeInfo],[r]);var a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a,o[0],o[1]):e.setOutputMatrixTexture(a,o[0],o[1]),e.setProgram(t.webGLProgram),1===KD().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(function(n,r){var i=t.program.variableNames[r],a=t.uniformLocations[i],o=t.uniformLocations["offset"+i];if(null!=a)if(n.isUniform)if(uR(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(a,s)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,r)}),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,p,u,d,r),c.forEach(function(e){return a.disposeData(e.dataId)}),m&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)})),!KD().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){var g=this.unpackTensor(o);return this.disposeData(o.dataId),g}return o},t.prototype.compileAndRun=function(e,t,n,r,i){void 0===i&&(i=!1),n=n||t[0].dtype;var a=this.runWebGLProgram(e,t,n,r,i);return gP.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(KD().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Sj(function(){if(!KD().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=KD().getBool("DEBUG");KD().set("DEBUG",!1);var n=e.abs(qj(1e-8)).dataSync()[0];if(KD().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,a=n.values,o=n.texture,s=n.usage,l=n.isPacked;if(null==o){var c,u=null!=this.activeTimers;u&&(c=BR());var h=n.texShape;if(null==h&&(h=sj(r,l),n.texShape=h),null!=a){var d=oj(r),f=void 0,p=h[1],m=h[0],g=a instanceof Uint8Array;l?(p=(t=AP(h[0],h[1]))[0],m=t[1],f=new nF(d,[m,p],g)):f=new tF(d,[m,p],g);var v=this.makeTensorInfo([m,p],i);this.texData.get(v.dataId).usage=g?xP.PIXELS:xP.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,a);var y=this.runWebGLProgram(f,[v],i,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(v.dataId),this.texData.delete(y.dataId),n.values=null,u&&(this.uploadWaitMs+=BR()-c)}else{var x=this.acquireTexture(h,s,i,l);n.texture=x}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*kR(t)},t}(pO);vP()&&gP.registerBackend("webgl",function(){return new BB},2);var UB=Bj({square_:function(e){var t=Nj(e,"x","square"),n=[t];return gP.runKernelFunc(function(e,n){return n([t]),e.square(t)},{x:t},null,"Square",{},n,[])}}),zB="SquaredDifference",WB=Bj({squaredDifference_:function(e,t){var n,r=Nj(e,"a","squaredDifference"),i=Nj(t,"b","squaredDifference");n=uP(r,i),r=n[0],i=n[1],yO(r.shape,i.shape);var a={a:r,b:i},o=[r,i];return gP.runKernelFunc(function(e,t){var n=e.squaredDifference(r,i);return t([r,i]),n},a,function(e,t){var n=t[0],r=t[1],i=qj(2);return{a:function(){return e.mul(n.sub(r).mul(i))},b:function(){return e.mul(r.sub(n).mul(i))}}},zB,{},o,[])}}),VB=Bj({abs_:function(e){var t=Nj(e,"x","abs");return"complex64"===t.dtype?gP.runKernelFunc(function(e){return e.complexAbs(t)},{$x:t}):gP.runKernelFunc(function(e,n){var r=e.abs(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}},"Abs")}}),HB=Bj({acos_:function(e){var t=Nj(e,"x","acos");return gP.runKernelFunc(function(e,n){var r=e.acos(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(qj(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),qB=Bj({acosh_:function(e){var t=Nj(e,"x","acosh");return gP.runKernelFunc(function(e,n){var r=e.acosh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),GB=Bj({asin_:function(e){var t=Nj(e,"x","asin");return gP.runKernelFunc(function(e,n){var r=e.asin(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(qj(1).sub(n.toFloat().square()).sqrt())}}})}}),KB=Bj({asinh_:function(e){var t=Nj(e,"x","asinh");return gP.runKernelFunc(function(e,n){var r=e.asinh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(qj(1).add(n.toFloat().square()).sqrt())}}})}}),YB=Bj({atan_:function(e){var t=Nj(e,"x","atan");return gP.runKernelFunc(function(e,n){var r=e.atan(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}})}}),XB=Bj({atanh_:function(e){var t=Nj(e,"x","atanh");return gP.runKernelFunc(function(e,n){var r=e.atanh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(qj(1).sub(n.toFloat().square()))}}})}}),QB=Bj({ceil_:function(e){var t=Nj(e,"x","ceil");return gP.runKernelFunc(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return tL(e)}}})}}),$B=Bj({clipByValue_:function(e,t,n){var r=Nj(e,"x","clipByValue");oR(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var i=[r],a={min:t,max:n};return gP.runKernelFunc(function(e,i){var a=e.clip(r,t,n);return i([r]),a},{x:r},function(e,r){var i=r[0];return{x:function(){return e.where(i.greaterEqual(t).logicalAnd(i.lessEqual(n)),tL(e))}}},"ClipByValue",a,i)}}),JB=Bj({cos_:function(e){var t=Nj(e,"x","cos"),n=[t];return gP.runKernelFunc(function(e,n){var r=e.cos(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}},"Cos",{},n)}}),ZB=Bj({cosh_:function(e){var t=Nj(e,"x","cosh");return gP.runKernelFunc(function(e,n){var r=e.cosh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}})}}),eU=Bj({erf_:function(e){var t=Nj(e,"x","erf");return oR("int32"===t.dtype||"float32"===t.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===t.dtype&&(t=t.toFloat()),gP.runKernelFunc(function(e,n){var r=e.erf(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),tU=Bj({exp_:function(e){var t=Nj(e,"x","exp");return gP.runKernelFunc(function(e,n){var r=e.exp(t);return n([r]),r},{x:t},function(e,t){return{x:function(){return e.mulStrict(t[0])}}},"Exp",{},[],[!0])}}),nU=Bj({expm1_:function(e){var t=Nj(e,"x","expm1");return gP.runKernelFunc(function(e,n){var r=e.expm1(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}})}}),rU=Bj({floor_:function(e){var t=Nj(e,"x","floor");return gP.runKernelFunc(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return tL(e)}}})}}),iU=Bj({log_:function(e){var t=Nj(e,"x","log"),n=[t];return gP.runKernelFunc(function(e,n){var r=e.log(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}},"Log",{},n)}}),aU=Bj({log1p_:function(e){var t=Nj(e,"x","log1p");return gP.runKernelFunc(function(e,n){var r=e.log1p(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}})}}),oU=Bj({logSigmoid_:function(e){var t=Nj(e,"x","logSigmoid");return gP.runKernelFunc(function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}})}}),sU=Bj({neg_:function(e){var t=Nj(e,"x","neg"),n=[t];return gP.runKernelFunc(function(e){return e.neg(t)},{x:t},function(e){return{x:function(){return e.neg()}}},"Neg",{},n)}}),lU=Bj({reciprocal_:function(e){var t=Nj(e,"x","reciprocal");return gP.runKernelFunc(function(e,n){var r=e.reciprocal(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}})}}),cU=Bj({round_:function(e){var t=Nj(e,"x","round");return gP.runKernelFunc(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return tL(e)}}})}}),uU=Bj({rsqrt_:function(e){var t=Nj(e,"x","rsqrt"),n=[t];return gP.runKernelFunc(function(e,n){var r=e.rsqrt(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),hU=Bj({sigmoid_:function(e){var t=Nj(e,"x","sigmoid");return gP.runKernelFunc(function(e,n){var r=e.sigmoid(t);return n([r]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(qj(1).sub(n)))}}},"Sigmoid")}}),dU=Bj({sign_:function(e){var t=Nj(e,"x","sign");return gP.runKernelFunc(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return tL(e)}}})}}),fU=Bj({isNaN_:function(e){var t=Nj(e,"x","isNaN");return gP.runKernelFunc(function(e){return e.isNaN(t)},{$x:t},function(e){return{$x:function(){return tL(e)}}})}}),pU=Bj({isInf_:function(e){var t=Nj(e,"x","isInf");return gP.runKernelFunc(function(e){return e.isInf(t)},{$x:t},function(e){return{$x:function(){return tL(e)}}})}}),mU=Bj({isFinite_:function(e){var t=Nj(e,"x","isFinite");return gP.runKernelFunc(function(e){return e.isFinite(t)},{$x:t},function(e){return{$x:function(){return tL(e)}}})}}),gU=Bj({sin_:function(e){var t=Nj(e,"x","sin"),n=[t];return gP.runKernelFunc(function(e,n){var r=e.sin(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}},"Sin",{},n)}}),vU=Bj({sinh_:function(e){var t=Nj(e,"x","sinh");return gP.runKernelFunc(function(e,n){var r=e.sinh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}})}}),yU=Bj({softplus_:function(e){var t=Nj(e,"x","softplus");return gP.runKernelFunc(function(e,n){var r=e.softplus(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}})}}),bU=Bj({sqrt_:function(e){var t=Nj(e,"x","sqrt");return gP.runKernelFunc(function(e,n){var r=e.sqrt(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}})}}),xU=Bj({step_:function(e,t){void 0===t&&(t=0);var n=Nj(e,"x","step");return gP.runKernelFunc(function(e){return e.step(n,t)},{$x:n},function(e){return{$x:function(){return tL(e)}}})}}),wU=Bj({tan_:function(e){var t=Nj(e,"x","tan");return gP.runKernelFunc(function(e,n){var r=e.tan(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}})}}),SU=Bj({tanh_:function(e){var t=Nj(e,"x","tanh");return gP.runKernelFunc(function(e,n){var r=e.tanh(t);return n([r]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return qj(1).sub(n.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function _U(e,t,n,r,i,a){var o,s,l=Nj(e,"x","batchNorm"),c=Nj(t,"mean","batchNorm"),u=Nj(n,"variance","batchNorm");return null!=i&&(o=Nj(i,"scale","batchNorm")),null!=r&&(s=Nj(r,"offset","batchNorm")),oR(2===l.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),oR(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),oR(2===u.rank||1===u.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."}),null!=o&&oR(2===o.rank||1===o.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),null!=s&&oR(2===s.rank||1===s.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),kU(l,c,u,s,o,a)}function EU(e,t,n,r,i,a){var o,s,l=Nj(e,"x","batchNorm"),c=Nj(t,"mean","batchNorm"),u=Nj(n,"variance","batchNorm");return null!=i&&(o=Nj(i,"scale","batchNorm")),null!=r&&(s=Nj(r,"offset","batchNorm")),oR(3===l.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),oR(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),oR(3===u.rank||1===u.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."}),null!=o&&oR(3===o.rank||1===o.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),null!=s&&oR(3===s.rank||1===s.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),kU(l,c,u,s,o,a)}function CU(e,t,n,r,i,a){var o,s,l=Nj(e,"x","batchNorm"),c=Nj(t,"mean","batchNorm"),u=Nj(n,"variance","batchNorm");return null!=i&&(o=Nj(i,"scale","batchNorm")),null!=r&&(s=Nj(r,"offset","batchNorm")),oR(4===l.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),oR(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),oR(4===u.rank||1===u.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."}),null!=o&&oR(4===o.rank||1===o.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),null!=s&&oR(4===s.rank||1===s.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),kU(l,c,u,s,o,a)}function kU(e,t,n,r,i,a){null==a&&(a=.001);var o,s,l,c=Nj(e,"x","batchNorm"),u=Nj(t,"mean","batchNorm"),h=Nj(n,"variance","batchNorm");null!=i&&(o=Nj(i,"scale","batchNorm")),null!=r&&(s=Nj(r,"offset","batchNorm")),oR(u.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),oR(null==s||u.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),oR(null==o||u.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var d=[c,u,h,o];return gP.runKernelFunc(function(e,t){var n=e.batchNormalization(l,NU(u),NU(h),a,NU(o),NU(s));return t([c,u,h,o]),n},{x:c,mean:u,variance:h,scale:o,offset:s},function(e,t){var n=t,r=n[0],i=n[1],o=n[2],s=n[3],c=null==s?qj(1):s,u=vO(i.shape,l.shape),h=[];if(1===i.rank){for(var d=0;d<l.shape.length-1;++d)h.push(l.shape[d]);h.push(1)}var f=r.sub(i),p=e.mul(c),m=uU(o.add(qj(a))),g=m.mul(m).mul(m).mul(qj(-.5));return{x:function(){return 1===i.rank?e.mul(HL(m.as4D(1,1,1,i.shape[0]),h)).mul(c).reshape(r.shape):e.mul(m).mul(c).reshape(r.shape)},mean:function(){var e=m.mul(qj(-1)).mul(p);return 1===i.rank&&(e=e.sum(u)),e.reshape(i.shape)},variance:function(){var e=g.mul(f).mul(p);return 1===i.rank&&(e=e.sum(u)),e.reshape(i.shape)},scale:function(){var t=f.mul(m),n=e.mul(t);return 1===i.rank&&(n=n.sum(u)),n.reshape(i.shape)},offset:function(){var t=e;return 1===i.rank&&(t=t.sum(u)),t.reshape(i.shape)}}},"BatchNormalization",{varianceEpsilon:a},d).reshape(c.shape)}function NU(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function AU(){wj("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var TU=Bj({batchNormalization2d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),AU(),_U(e,t,n,a,i,r)}}),IU=Bj({batchNormalization3d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),AU(),EU(e,t,n,a,i,r)}}),DU=Bj({batchNormalization4d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),AU(),CU(e,t,n,a,i,r)}}),RU=Bj({batchNormalization_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),AU(),kU(e,t,n,a,i,r)}}),PU=Bj({batchNorm_:kU}),jU=Bj({batchNorm2d_:_U}),LU=Bj({batchNorm3d_:EU}),OU=Bj({batchNorm4d_:CU}),MU=Bj({logicalAnd_:function(e,t){var n=Nj(e,"a","logicalAnd","bool"),r=Nj(t,"b","logicalAnd","bool");return yO(n.shape,r.shape),gP.runKernelFunc(function(e){return e.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),FU=Bj({logicalNot_:function(e){var t=Nj(e,"x","logicalNot","bool");return gP.runKernelFunc(function(e){return e.logicalNot(t)},{$x:t})}}),BU=Bj({logicalOr_:function(e,t){var n=Nj(e,"a","logicalOr","bool"),r=Nj(t,"b","logicalOr","bool");return yO(n.shape,r.shape),gP.runKernelFunc(function(e){return e.logicalOr(n,r)},{$a:n,$b:r})}}),UU=Bj({logicalXor_:function(e,t){var n=Nj(e,"a","logicalXor","bool"),r=Nj(t,"b","logicalXor","bool");return yO(n.shape,r.shape),BU(e,t).logicalAnd(MU(e,t).logicalNot())}}),zU=Bj({where_:function(e,t,n){var r=Nj(t,"a","where"),i=Nj(n,"b","where"),a=Nj(e,"condition","where","bool");return sR(r.shape,i.shape,"Error in where: "),1===a.rank?oR(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):sR(a.shape,i.shape,"Error in where: "),gP.runKernelFunc(function(e,t){var n=e.select(a,r,i);return t([a]),n},{$condition:a,$a:r,$b:i},function(e,t){var n=t[0];return{$condition:function(){return tL(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}})}}),WU=function(e){return HD(this,void 0,void 0,function(){var t,n,r;return qD(this,function(i){switch(i.label){case 0:return[4,(t=Nj(e,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=XO(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},VU=Bj({add_:function(e,t){var n,r=Nj(e,"a","add"),i=Nj(t,"b","add");n=uP(r,i),r=n[0],i=n[1];var a=yO(r.shape,i.shape);return gP.runKernelFunc(function(e){return e.add(r,i)},{a:r,b:i},function(e){return{a:function(){var t=e,n=vO(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=vO(i.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(i.shape)}}},"Add")}}),HU=Bj({addN_:function(e){oR(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),oR(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(e,t){return Nj(e,"tensors"+t,"addN")}),n=t[0];t.forEach(function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(e){if(!hR(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return gP.runKernelFunc(function(e){return e.addN(t)},r,function(e){var n={};return t.forEach(function(t,r){n[r]=function(){return e.clone()}}),n},"AddN")}}),qU=Bj({addStrict_:function(e,t){var n=Nj(e,"a","addStrict"),r=Nj(t,"b","addStrict");return sR(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),GU=Bj({atan2_:function(e,t){var n,r=Nj(e,"a","atan2"),i=Nj(t,"b","atan2");n=uP(r,i),r=n[0],i=n[1];var a=yO(r.shape,i.shape);return gP.runKernelFunc(function(e,t){var n=e.atan2(r,i);return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=VU(n.square(),r.square()),i=e.mul(r.div(t)),o=vO(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},$b:function(){var t=VU(n.square(),r.square()),i=sU(e.mul(n.div(t))),o=vO(r.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(r.shape)}}})}}),KU=Bj({div_:function(e,t){var n,r=Nj(e,"a","div"),i=Nj(t,"b","div");if(n=uP(r,i),r=n[0],i=n[1],"int32"===r.dtype&&"int32"===i.dtype)return QU(r,i);var a=yO(r.shape,i.shape);return gP.runKernelFunc(function(e,t){var n=e.realDivide(r,i);return t([r,i]),n},{a:r,b:i},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),i=vO(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=vO(r.shape,a);i.length>0&&(t=t.sum(i).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}},"Div")}}),YU=Bj({divNoNan_:function(e,t){var n,r=Nj(e,"a","div"),i=Nj(t,"b","div");r=(n=uP(r,i))[0],i=n[1];var a=KU(r,i),o=tL(a),s=i.equal(o);return zU(s,o,a)}}),XU=Bj({divStrict_:function(e,t){var n=Nj(e,"a","div"),r=Nj(t,"b","div");return sR(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),QU=Bj({floorDiv_:function(e,t){var n,r=Nj(e,"a","floorDiv"),i=Nj(t,"b","floorDiv");n=uP(r,i),r=n[0],i=n[1];var a=yO(r.shape,i.shape);return gP.runKernelFunc(function(e,t){var n=e.floorDiv(r,i);return t([r,i]),n},{a:r,b:i},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),i=vO(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=vO(r.shape,a);i.length>0&&(t=t.sum(i).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}},"FloorDiv")}}),$U=Bj({maximum_:function(e,t){var n,r=Nj(e,"a","maximum"),i=Nj(t,"b","maximum");return n=uP(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),yO(r.shape,i.shape),gP.runKernelFunc(function(e,t){var n=e.maximum(r,i);return t([r,i]),n},{a:r,b:i},function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}},"Maximum")}}),JU=Bj({maximumStrict_:function(e,t){var n=Nj(e,"a","maximumStrict"),r=Nj(t,"b","maximumStrict");return sR(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),ZU=Bj({minimum_:function(e,t){var n,r=Nj(e,"a","minimum"),i=Nj(t,"b","minimum");return n=uP(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),yO(r.shape,i.shape),gP.runKernelFunc(function(e,t){var n=e.minimum(r,i);return t([r,i]),n},{a:r,b:i},function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}},"Minimum")}}),ez=Bj({minimumStrict_:function(e,t){var n=Nj(e,"a","minimumStrict"),r=Nj(t,"b","minimumStrict");return sR(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),tz=Bj({mod_:function(e,t){var n,r=Nj(e,"a","mod"),i=Nj(t,"b","mod");n=uP(r,i),r=n[0],i=n[1];var a=yO(r.shape,i.shape);return gP.runKernelFunc(function(e,t){var n=e.mod(r,i);return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=vO(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=vO(r.shape,a);return i.length>0?t.sum(i).reshape(r.shape):t}}})}}),nz=Bj({modStrict_:function(e,t){var n=Nj(e,"a","modStrict"),r=Nj(t,"b","modStrict");return sR(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),rz=Bj({mul_:function(e,t){var n,r=Nj(e,"a","mul"),i=Nj(t,"b","mul");n=uP(r,i),r=n[0],i=n[1];var a=yO(r.shape,i.shape);return gP.runKernelFunc(function(e,t){var n=e.multiply(r,i);return t([r,i]),n},{a:r,b:i},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),i=vO(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=vO(r.shape,a);return i.length>0?t.sum(i).reshape(r.shape):t}}},"Mul")}}),iz=Bj({mulStrict_:function(e,t){var n=Nj(e,"a","mul"),r=Nj(t,"b","mul");return sR(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),az=Bj({pow_:function(e,t){var n,r=Nj(e,"base","pow"),i=Nj(t,"exp","pow");n=uP(r,i),r=n[0],i=n[1];var a=yO(r.shape,i.shape),o=[r,i];return gP.runKernelFunc(function(e,t){var n=e.pow(r,i);return t([r,i,n]),n},{a:r,b:i},function(e,t){var n=t[0],r=t[1],i=t[2];return{a:function(){var t=r.toFloat(),i=e.mul(t.mul(n.pow(t.sub(qj(1))))),o=vO(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},b:function(){var t=n.greater(0),o=n.log().where(t,tL(n)),s=e.mul(i.mul(o)),l=vO(r.shape,a);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)}}},"Pow",{},o,[!0])}}),oz=Bj({powStrict_:function(e,t){return sR(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),sz=Bj({squaredDifferenceStrict_:function(e,t){var n=Nj(e,"a","squaredDifferenceStrict"),r=Nj(t,"b","squaredDifferenceStrict");return sR(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),lz=Bj({sub_:function(e,t){var n,r=Nj(e,"a","sub"),i=Nj(t,"b","sub");n=uP(r,i),r=n[0],i=n[1];var a=yO(r.shape,i.shape);return gP.runKernelFunc(function(e){return e.subtract(r,i)},{a:r,b:i},function(e){return{a:function(){var t=e,n=vO(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=vO(i.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(i.shape)}}},"Sub")}}),cz=Bj({subStrict_:function(e,t){var n=Nj(e,"a","subStrict"),r=Nj(t,"b","subStrict");return sR(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),uz=Bj({equal_:function(e,t){var n,r=Nj(e,"a","equal"),i=Nj(t,"b","equal");return n=uP(r,i),r=n[0],i=n[1],yO(r.shape,i.shape),gP.runKernelFunc(function(e){return e.equal(r,i)},{$a:r,$b:i})}}),hz=Bj({equalStrict_:function(e,t){var n=Nj(e,"a","equalStrict"),r=Nj(t,"b","equalStrict");return sR(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),dz=Bj({greater_:function(e,t){var n,r=Nj(e,"a","greater"),i=Nj(t,"b","greater");return n=uP(r,i),r=n[0],i=n[1],yO(r.shape,i.shape),gP.runKernelFunc(function(e){return e.greater(r,i)},{a:r,b:i},null,"Greater")}}),fz=Bj({greaterEqual_:function(e,t){var n,r=Nj(e,"a","greaterEqual"),i=Nj(t,"b","greaterEqual");return n=uP(r,i),r=n[0],i=n[1],yO(r.shape,i.shape),gP.runKernelFunc(function(e,t){var n=e.greaterEqual(r,i);return t([r,i]),n},{a:r,b:i},function(e,t){var n=t[0],r=t[1];return{a:function(){return tL(n)},b:function(){return tL(r)}}},"GreaterEqual")}}),pz=Bj({greaterEqualStrict_:function(e,t){var n=Nj(e,"a","greaterEqualStrict"),r=Nj(t,"b","greaterEqualStrict");return sR(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),mz=Bj({greaterStrict_:function(e,t){var n=Nj(e,"a","greaterStrict"),r=Nj(t,"b","greaterStrict");return sR(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),gz=Bj({less_:function(e,t){var n,r=Nj(e,"a","less"),i=Nj(t,"b","less");return n=uP(r,i),r=n[0],i=n[1],yO(r.shape,i.shape),gP.runKernelFunc(function(e){return e.less(r,i)},{a:r,b:i},null,"Less")}}),vz=Bj({lessEqual_:function(e,t){var n,r=Nj(e,"a","lessEqual"),i=Nj(t,"b","lessEqual");return n=uP(r,i),r=n[0],i=n[1],yO(r.shape,i.shape),gP.runKernelFunc(function(e,t){var n=e.lessEqual(r,i);return t([r,i]),n},{a:r,b:i},null,"LessEqual")}}),yz=Bj({lessEqualStrict_:function(e,t){var n=Nj(e,"a","lessEqualStrict"),r=Nj(t,"b","lessEqualStrict");return sR(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),bz=Bj({lessStrict_:function(e,t){var n=Nj(e,"a","lessStrict"),r=Nj(t,"b","lessStrict");return sR(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),xz=Bj({notEqual_:function(e,t){var n,r=Nj(e,"a","notEqual"),i=Nj(t,"b","notEqual");return n=uP(r,i),r=n[0],i=n[1],yO(r.shape,i.shape),gP.runKernelFunc(function(e){return e.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),wz=Bj({notEqualStrict_:function(e,t){var n=Nj(e,"a","notEqualStrict"),r=Nj(t,"b","notEqualStrict");return sR(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Sz(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function _z(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Ez=Bj({gather_:function(e,t,n){void 0===n&&(n=0);var r=Nj(e,"x","gather"),i=Nj(t,"indices","gather","int32");n=yR(n,r.shape)[0];var a=function(e,t,n){for(var r=e.shape[n],i=[],a=1,o=1,s=0;s<n;s++)i.push(e.shape[s]),a*=e.shape[s];for(s=0;s<t.rank;s++)i.push(t.shape[s]);for(s=n+1;s<e.rank;s++)i.push(e.shape[s]),o*=e.shape[s];return{batchSize:a,sliceSize:o,dimSize:r,outputShape:i}}(r,i,n);return gP.runKernelFunc(function(e,t){var a=e.gather(r,i.flatten(),n);return t([i]),a},{x:r,indices:i},function(e,t){var i=t[0];return{x:function(){var t=r.shape,a=i.size,o=t.slice(0,n),s=o.length,l=t.slice(n,t.length).slice(1),c=l.length,u=Sz(0,s),h=Sz(s+1,s+1+c),d=_z([o,[a],l]),f=e.reshape(d),p=i.reshape([a]),m=_z([[s],u,h]),g=f.transpose(m),v=Cz(g,p,r.shape[n]),y=Lj(m);return v.transpose(y)},indices:function(){return i}}},"Gather",{axis:n}).reshape(a.outputShape)}}),Cz=Bj({unsortedSegmentSum_:function(e,t,n){var r=Nj(e,"x","unsortedSegmentSum"),i=Nj(t,"segmentIds","unsortedSegmentSum","int32");return oR(dR(n),function(){return"numSegments must be of dtype int"}),gP.runKernelFunc(function(e,t){var a=e.unsortedSegmentSum(r,i,n);return t([i]),a},{$x:r},function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=$U(t,tL(t)),r=Ez(e,n),i=fz(t,qj(0,"int32")),a=r.rank-i.rank,o=0;o<a;++o)i=NL(i,o+1);i=MU(i,Qj(r.shape,"bool"));var s=tL(r);return zU(i,r,s)}(e,n)}}})}});function kz(e,t,n,r,i,a,o){void 0===a&&(a="NHWC"),oR(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var s=e,l=t,c=!1;3===t.rank&&(c=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),oR(4===s.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),oR(4===l.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),oR(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var u="NHWC"===a?s[3]:s[1],h="NHWC"===a?l.shape[3]:l.shape[1];oR(u===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[2]+"."}),oR(h===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+n.shape[3]+"."}),null!=o&&oR(dR(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var d=IO(a),f=wO(s,n.shape,r,1,i,o,!1,d),p=gP.runKernelFunc(function(e,t){var r=e.conv2dDerInput(l,n,f);return t([n,l]),r},{dy4D:l,filter:n},function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return Iz(e,n,r,i,a,1,o)},filter:function(){return Rz(e,s,n.shape,r,i,a,o)}}});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Nz(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function Az(e,t,n,r,i){oR(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var a=e,o=t,s=!1;4===t.rank&&(s=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var l=a[4],c=o.shape[4];oR(5===a.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),oR(5===o.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),oR(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),oR(l===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."}),oR(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var u=SO(a,n.shape,r,1,i),h=gP.runKernelFunc(function(e){return e.conv3dDerInput(o,n,u)},{dy5D:o});return s?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var Tz=Bj({conv1d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NWC"),void 0===a&&(a=1);var s=Nj(e,"x","conv1d"),l=Nj(t,"filter","conv1d"),c=s,u=!1;2===s.rank&&(u=!0,c=s.as3D(1,s.shape[0],s.shape[1])),oR(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),oR(3===l.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),null!=o&&oR(dR(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),oR(c.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),oR(TO(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),oR("NWC"===i,function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),d=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),f=Iz(d,h,[1,n],r,"NHWC",[1,a],o);return u?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),Iz=Bj({conv2d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var s=Nj(e,"x","conv2d"),l=Nj(t,"filter","conv2d"),c=s,u=!1;3===s.rank&&(u=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),oR(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),oR(4===l.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),null!=o&&oR(dR(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var h="NHWC"===i?c.shape[3]:c.shape[1];oR(h===l.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+l.shape[2]+"."}),oR(TO(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"});var d=IO(i),f=wO(c.shape,l.shape,n,a,r,o,!1,d),p=[l,c],m=gP.runKernelFunc(function(e,t){var n=e.conv2d(c,l,f);return t([l,c]),n},{x:c,filter:l},function(e,t){var o=t,s=o[0],l=o[1];return oR(AO(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return Pz(l.shape,e,s,n,r,i)},filter:function(){return Rz(l,e,s.shape,n,r,i)}}},"Conv2D",f,p);return u?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Dz=Bj({conv3d_:function(e,t,n,r,i,a){void 0===i&&(i="NDHWC"),void 0===a&&(a=[1,1,1]);var o=Nj(e,"x","conv3d"),s=Nj(t,"filter","conv3d"),l=o,c=!1;4===o.rank&&(c=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),oR(5===l.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),oR(5===s.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),oR(l.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),oR(function(e,t){return Nz(e)||Nz(t)}(n,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),oR("NDHWC"===i,function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var u=SO(l.shape,s.shape,n,a,r),h=gP.runKernelFunc(function(e,t){var n=e.conv3d(l,s,u);return t([l,s]),n},{x:l,$filter:s},function(e,t){oR(Nz(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var i=t[0],o=t[1];return{x:function(){return Az(i.shape,e,o,n,r)},$filter:function(){return function(e,t,n,r,i){var a=e;4===e.rank&&(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var o=t;4===o.rank&&(o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),oR(5===a.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."}),oR(5===o.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."}),oR(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),oR(a.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."}),oR(o.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."});var s=SO(a.shape,n,r,1,i);return gP.runKernelFunc(function(e){return e.conv3dDerFilter(a,o,s)},{x5D:a,dy5D:o})}(i,e,o.shape,n,r)}}});return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),Rz=Bj({conv2dDerFilter_:function(e,t,n,r,i,a,o){void 0===a&&(a="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;3===l.rank&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),oR(4===s.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),oR(4===l.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),oR(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c="NHWC"===a?s.shape[3]:s.shape[1],u="NHWC"===a?l.shape[3]:l.shape[1];oR(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),oR(u===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+n[3]+")."}),null!=o&&oR(dR(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var h=IO(a),d=wO(s.shape,n,r,1,i,o,!1,h);return gP.runKernelFunc(function(e){return e.conv2dDerFilter(s,l,d)},{x4D:s,dy4D:l})}}),Pz=Bj({conv2dDerInput_:kz}),jz=Bj({depthwiseConv2d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var s=Nj(e,"x","depthwiseConv2d"),l=Nj(t,"filter","depthwiseConv2d"),c=s,u=!1;3===s.rank&&(u=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),oR(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),oR(4===l.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),oR(c.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),null==a&&(a=[1,1]),oR(TO(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),null!=o&&oR(dR(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var h=wO(c.shape,l.shape,n,a,r,o,!0),d=[c,l],f=gP.runKernelFunc(function(e,t){var n=e.depthwiseConv2D(c,l,h);return t([c,l]),n},{x:c,filter:l},function(e,t){oR(AO(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var n=t[0],r=t[1];return{x:function(){return Lz(n.shape,e,r,h)},filter:function(){return Oz(n,e,r.shape,h)}}},"DepthwiseConv2dNative",h,d);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),Lz=Bj({depthwiseConv2dDerInput_:function(e,t,n,r){var i=t,a=!1;3===t.rank&&(a=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=gP.runKernelFunc(function(e){return e.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Oz=Bj({depthwiseConv2dDerFilter_:function(e,t,n,r){var i=e;3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=t;return 3===a.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),gP.runKernelFunc(function(e){return e.depthwiseConv2DDerFilter(i,a,r)},{x4D:i,dy4D:a})}}),Mz=Bj({separableConv2d_:function(e,t,n,r,i,a,o){void 0===a&&(a=[1,1]),void 0===o&&(o="NHWC");var s=Nj(e,"x","separableConv2d"),l=Nj(t,"depthwiseFilter","separableConv2d"),c=Nj(n,"pointwiseFilter","separableConv2d"),u=s,h=!1;if(3===s.rank&&(h=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");oR(4===u.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."}),oR(4===l.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),oR(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),oR(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),oR(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var d=l.shape[2],f=l.shape[3];oR(c.shape[2]===d*f,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*f+", but got "+c.shape[2]+"."});var p=jz(u,l,r,i,o,a),m=Iz(p,c,1,"valid",o);return h?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Fz=Bj({conv2dTranspose_:function(e,t,n,r,i,a){return kz(n,Nj(e,"x","conv2dTranspose"),Nj(t,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),Bz=Bj({conv3dTranspose_:function(e,t,n,r,i){return Az(n,Nj(e,"x","conv3dTranspose"),Nj(t,"filter","conv3dTranspose"),r,i)}}),Uz=Bj({matMul_:function(e,t,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=Nj(e,"a","matMul"),o=Nj(t,"b","matMul");i=uP(a,o),a=i[0],o=i[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],l=r?o.shape[o.rank-1]:o.shape[o.rank-2],c=n?a.shape[a.rank-1]:a.shape[a.rank-2],u=r?o.shape[o.rank-2]:o.shape[o.rank-1],h=a.shape.slice(0,-2),d=o.shape.slice(0,-2),f=uR(h),p=uR(d);oR(a.rank>=2&&o.rank>=2&&a.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."}),oR(hR(h,d),function(){return"Error in matMul: outer dimensions ("+h+") and ("+d+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."}),oR(s===l,function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=a.shape.slice(0,-2).concat([c,u]),g=n?a.as3D(f,s,c):a.as3D(f,c,s),v=r?o.as3D(p,u,l):o.as3D(p,l,u),y={transposeA:n,transposeB:r};return gP.runKernelFunc(function(e,t){var i=e.batchMatMul(g,v,n,r);return t([g,v]),i},{a:g,b:v},function(e,t){var i=t,a=i[0],o=i[1];return n||r?!n&&r?{a:function(){return e.matMul(o,!1,!1)},b:function(){return e.matMul(a,!0,!1)}}:n&&!r?{a:function(){return o.matMul(e,!1,!0)},b:function(){return a.matMul(e,!1,!1)}}:{a:function(){return o.matMul(e,!0,!0)},b:function(){return e.matMul(a,!0,!0)}}:{a:function(){return e.matMul(o,!1,!0)},b:function(){return a.matMul(e,!0,!1)}}},"BatchMatMul",y).reshape(m)}}),zz=Bj({dot_:function(e,t){var n=Nj(e,"t1","dot"),r=Nj(t,"t2","dot");oR(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return oR(i===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Wz=Bj({outerProduct_:function(e,t){var n=Nj(e,"v1","outerProduct"),r=Nj(t,"v2","outerProduct");return oR(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Vz=Bj({reverse_:function(e,t){var n=Nj(e,"x","reverse");if(0===n.rank)return n.clone();var r=yR(t,n.shape);return gP.runKernelFunc(function(e){return e.reverse(n,r)},{$x:n},function(e){return{$x:function(){return e.reverse(r)}}}).reshapeAs(n)}}),Hz=Bj({reverse1d_:function(e){var t=Nj(e,"x","reverse");return oR(1===t.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),Vz(t,0)}}),qz=Bj({reverse2d_:function(e,t){var n=Nj(e,"x","reverse");return oR(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Vz(n,t)}}),Gz=Bj({reverse3d_:function(e,t){var n=Nj(e,"x","reverse");return oR(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Vz(n,t)}}),Kz=Bj({reverse4d_:function(e,t){var n=Nj(e,"x","reverse");return oR(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Vz(n,t)}});function Yz(e,t,n,r,i,a){var o=Nj(e,"x","maxPool"),s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),oR(4===s.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),oR(TO(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=a&&oR(dR(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var c=bO(s.shape,t,n,r,i,a);if(1===c.filterWidth&&1===c.filterHeight&&hR(c.inShape,c.outShape))return o.clone();var u=[s],h=gP.runKernelFunc(function(e,t){var n=e.maxPool(s,c);return t([s,n]),n},{x:s},function(e,a){var o=a[0],s=a[1];return{x:function(){return function(e,t,n,r,i,a,o,s){var l=Nj(e,"dy","maxPoolBackprop"),c=Nj(t,"input","maxPoolBackprop"),u=Nj(n,"output","maxPoolBackprop");oR(c.rank===l.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+l.rank+")"}),null==a&&(a=[1,1]),oR(TO(i,a),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"}),oR(4===l.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."}),oR(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."});var h=bO(c.shape,r,i,a,o,s);return gP.runKernelFunc(function(e){return e.maxPoolBackprop(l,c,u,h)},{$dy:l,$input:c})}(e,o,s,t,n,r,i)}}},"MaxPool",c,u);return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function Xz(e,t,n,r,i,a){var o=Nj(e,"x","avgPool","float32");null==r&&(r=[1,1]),oR(TO(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),oR(4===s.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),null!=a&&oR(dR(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var c=bO(s.shape,t,n,r,i,a);if(1===c.filterWidth&&1===c.filterHeight&&hR(c.inShape,c.outShape))return o.clone();var u=gP.runKernelFunc(function(e){return e.avgPool(s,c)},{x:s},function(e){return{x:function(){return function(e,t,n,r,i,a){var o=Nj(e,"dy","avgPoolBackprop"),s=Nj(t,"input","avgPoolBackprop");oR(s.rank===o.rank,function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+o.rank+")"}),null==i&&(i=[1,1]),oR(TO(r,i),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var l=s,c=o,u=!1;3===s.rank&&(u=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),oR(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),oR(4===l.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+l.rank+"."});var h=bO(l.shape,n,r,i,a),d=gP.runKernelFunc(function(e){return e.avgPoolBackprop(c,l,h)},{dy4D:c,input4D:l});return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}(e,s,t,n,r,i)}}},"AvgPool",c);return u=u.cast(o.dtype),l?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var Qz=Bj({maxPool_:function(e,t,n,r,i){return Yz(e,t,n,1,r,i)}}),$z=Bj({avgPool_:function(e,t,n,r,i){return Xz(e,t,n,1,r,i)}}),Jz=Bj({pool_:function(e,t,n,r,i,a){null==i&&(i=[1,1]),null==a&&(a=1),0===r&&(r="valid");var o=Nj(e,"x","maxPool"),s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),oR(TO(a,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"});var c,u=bO(s.shape,t,a,i,r),h=[u.dilationHeight,u.dilationWidth];c="same"===r?function(e,t){var n=e.map(function(e,n){return e+(e-1)*(t[n]-1)}).map(function(e){return e-1}),r=n.map(function(e){return Math.floor(e/2)}),i=n.map(function(e,t){return e-r[t]});return n.map(function(e,t){return[r[t],i[t]]})}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];var d=1===h[0]&&1===h[1],f=function(e,t,n){var r=n.map(function(e){return e[0]}),i=n.map(function(e){return e[1]}),a=e.concat(r,i),o=t.map(function(e,t){return(e-a[t]%e)%e}),s=i.map(function(e,t){return e+o[t]});return[t.map(function(e,t){return[r[t],s[t]]}),t.map(function(e,t){return[0,o[t]]})]}([u.inHeight,u.inWidth],h,c),p=f[0],m=f[1],g=d?r:"valid",v=d?s:zL(s,h,p),y=("avg"===n?function(){return Xz(v,t,a,1,g)}:function(){return Yz(v,t,a,1,g)})(),b=d?y:wL(y,h,m);return l?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Zz=Bj({maxPool3d_:function(e,t,n,r,i,a,o){void 0===a&&(a="NDHWC");var s=Nj(e,"x","maxPool3d"),l=s,c=!1;4===s.rank&&(c=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),oR(5===l.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),oR("NDHWC"===a,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),oR(TO(n,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),null!=i&&oR(dR(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var u=xO(l.shape,t,n,o,r,i,a),h=gP.runKernelFunc(function(e,t){var n=e.maxPool3d(l,u);return t([l,n]),n},{x:l},function(e,a){var s=a[0],l=a[1];return{x:function(){return function(e,t,n,r,i,a,o,s){var l=Nj(e,"dy","maxPool3dBackprop"),c=Nj(t,"input","maxPool3dBackprop"),u=Nj(n,"output","maxPool3dBackprop"),h=l,d=c,f=u,p=!1;4===c.rank&&(p=!0,h=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),d=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),f=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),oR(5===h.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+h.rank+"."}),oR(5===d.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."}),oR(5===f.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+f.rank+"."}),null==a&&(a=[1,1,1]),oR(TO(i,a),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"}),null!=s&&oR(dR(o),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."});var m=xO(d.shape,r,i,a,o,s),g=gP.runKernelFunc(function(e){return e.maxPool3dBackprop(h,d,f,m)},{dy5D:h,input5D:d});return p?g.as4D(g.shape[1],g.shape[2],g.shape[3],g.shape[4]):g}(e,s,l,t,n,o,r,i)}}});return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),eW=Bj({avgPool3d_:function(e,t,n,r,i,a,o){void 0===a&&(a="NDHWC");var s=Nj(e,"x","avgPool3d","float32"),l=s,c=!1;4===s.rank&&(c=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),oR(5===l.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),oR("NDHWC"===a,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),oR(TO(n,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),null!=i&&oR(dR(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var u=xO(l.shape,t,n,o,r,i,a),h=gP.runKernelFunc(function(e){return e.avgPool3d(l,u)},{x:l},function(e){return{x:function(){return function(e,t,n,r,i,a,o){var s=Nj(e,"dy","avgPool3dBackprop"),l=Nj(t,"input","avgPool3dBackprop"),c=s,u=l,h=!1;4===l.rank&&(h=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),u=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),oR(5===c.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."}),oR(5===u.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+u.rank+"."}),null==i&&(i=[1,1,1]),oR(TO(r,i),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),null!=o&&oR(dR(a),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var d=xO(u.shape,n,r,i,a,o),f=gP.runKernelFunc(function(e){return e.avgPool3dBackprop(c,u,d)},{dy5D:c,input5D:u});return h?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}(e,l,t,n,o,r,i)}}});return h=h.cast(l.dtype),c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),tW=Bj({slice_:function(e,t,n){var r,i,a=Nj(e,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(a.rank-1).fill(0)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(0)):t.slice()).forEach(function(e){oR(-1!==e,function(){return"slice() does not support negative begin indexing."})}),i=(i=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(e,t){return e>=0?e:(oR(-1===e,function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."}),a.shape[t]-r[t])}),rO(a,r,i);var o=a.shape,s={begin:r,size:i};return gP.runKernelFunc(function(e){return e.slice(a,r,i)},{x:a},function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],o[n]-r[n]-i[n]]);return{x:function(){return e.pad(t)}}},"Slice",s)}}),nW=Bj({slice1d_:function(e,t,n){var r=Nj(e,"x","slice1d");return oR(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),tW(r,[t],[n])}}),rW=Bj({slice2d_:function(e,t,n){var r=Nj(e,"x","slice2d");return oR(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),tW(r,t,n)}}),iW=Bj({slice3d_:function(e,t,n){var r=Nj(e,"x","slice3d");return oR(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),tW(r,t,n)}}),aW=Bj({slice4d_:function(e,t,n){var r=Nj(e,"x","slice4d");return oR(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),tW(r,t,n)}});function oW(e,t,n,r,i){return t.rank<n.rank&&(t=t.reshape(Rj(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Rj(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==i?r:r.transpose(i)}}}var sW=Bj({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nj(e,"x","all","bool"),i=yR(t,r.shape),a=i,o=jj(a,r.rank);null!=o&&(r=r.transpose(o),a=Oj(a.length,r.rank));var s=gP.runKernelFunc(function(e){return e.all(r,a)},{$x:r});if(n){var l=Rj(s.shape,i);return s.reshape(l)}return s}}),lW=Bj({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nj(e,"x","any","bool"),i=yR(t,r.shape),a=i,o=jj(a,r.rank);null!=o&&(r=r.transpose(o),a=Oj(a.length,r.rank));var s=gP.runKernelFunc(function(e){return e.any(r,a)},{$x:r});if(n){var l=Rj(s.shape,i);return s.reshape(l)}return s}}),cW=Bj({argMax_:function(e,t){void 0===t&&(t=0);var n=Nj(e,"x","argMax");null==t&&(t=0);var r=yR(t,n.shape),i=jj(r,n.rank);null!=i&&(n=n.transpose(i),r=Oj(r.length,n.rank));var a={axis:r[0]},o=[n];return gP.runKernelFunc(function(e,t){var i=e.argMax(n,r[0]);return t([n]),i},{x:n},function(e,t){var n=t[0];return{x:function(){return tL(n)}}},"ArgMax",a,o)}}),uW=Bj({argMin_:function(e,t){void 0===t&&(t=0);var n=Nj(e,"x","argMin");null==t&&(t=0);var r=yR(t,n.shape),i=jj(r,n.rank);return null!=i&&(n=n.transpose(i),r=Oj(r.length,n.rank)),gP.runKernelFunc(function(e,t){var i=e.argMin(n,r[0]);return t([n]),i},{$x:n},function(e,t){var n=t[0];return{$x:function(){return tL(n)}}})}}),hW=Bj({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nj(e,"x","logSumExp"),i=yR(t,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(n){var l=Rj(s.shape,i);return s.reshape(l)}return s}}),dW=Bj({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nj(e,"x","max"),i=r,a=yR(t,r.shape),o=a,s=jj(o,r.rank);null!=s&&(r=r.transpose(s),o=Oj(o.length,r.rank));var l=[r],c=gP.runKernelFunc(function(e,t){var n=e.max(r,o);return t([i,n]),n},{x:r},function(e,t){return oW(e,t[1],t[0],a,s)},"Max",{axes:o},l,[!0]);if(n){var u=Rj(c.shape,a);c=c.reshape(u)}return c}}),fW=Bj({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nj(e,"x","mean"),i=yR(t,r.shape),a=uR(Dj(r.shape,i)[1]);return uO(function(e){var r=qj(a);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return i.forEach(function(e){n[e]=1}),t.reshape(n).mul(Qj(e.shape,"float32")).div(a)}}})(r)}}),pW=Bj({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nj(e,"x","min"),i=r,a=yR(t,r.shape),o=a,s=jj(o,r.rank);null!=s&&(r=r.transpose(s),o=Oj(o.length,r.rank));var l=[r],c=gP.runKernelFunc(function(e,t){var n=e.min(r,o);return t([i,n]),n},{x:r},function(e,t){return oW(e,t[1],t[0],a,s)},"Min",{axes:o},l,[!0]);if(n){var u=Rj(c.shape,a);c=c.reshape(u)}return c}}),mW=Bj({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=yR(t,(e=Nj(e,"x","moments")).shape),i=e.mean(r,n),a=i.shape;n||(a=Rj(i.shape,r));var o=e.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,n)}}}),gW=Bj({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nj(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=yR(t,r.shape);return uO(function(e){var t=jj(i,e.rank),r=i,a=e;null!=t&&(a=e.transpose(t),r=Oj(r.length,e.rank));var o=function(t){var n=e.shape.slice();return i.forEach(function(e){n[e]=1}),t.reshape(n).mul(Qj(e.shape,"float32"))},s={axes:r},l=gP.runKernelFunc(function(e){return e.sum(a,r)},{x:a},function(e){return{x:function(){return o(e)}}},"Sum",s);if(n){var c=Rj(l.shape,i);l=l.reshape(c)}return{value:l,gradFunc:o}})(r)}}),vW=Bj({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nj(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=yR(t,r.shape),a=jj(i,r.rank),o=i,s=r;null!=a&&(s=r.transpose(a),o=Oj(o.length,r.rank));var l=gP.runKernelFunc(function(e){return e.prod(s,o)},{permutedX:s});if(n){var c=Rj(l.shape,i);l=l.reshape(c)}return l}}),yW=Bj({elu_:function(e){var t=Nj(e,"x","elu");return gP.runKernelFunc(function(e,n){var r=e.elu(t);return n([r]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return gP.runKernelFunc(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}})}}),bW=Bj({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=Nj(e,"x","leakyRelu");return $U(qj(t).mul(n),n)}}),xW=Bj({prelu_:function(e,t){var n=Nj(e,"x","prelu"),r=Nj(t,"alpha","prelu");return gP.runKernelFunc(function(e,t){var i=e.prelu(n,r);return t([n,r]),i},{x:n,alpha:r},function(e,t){var n=t[0],r=t[1],i=n.greater(0);return{x:function(){return zU(i,e,e.mul(r))},alpha:function(){var t=zU(i,tL(e),e.mul(n)),a=vO(r.shape,e.shape);return a.length>0&&(t=t.sum(a)),t.reshape(r.shape)}}},"Prelu")}}),wW=Bj({relu_:function(e){var t=Nj(e,"x","relu");return"bool"===t.dtype?t.toInt():gP.runKernelFunc(function(e,n){var r=e.relu(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}},"Relu")}}),SW=Bj({relu6_:function(e){var t=Nj(e,"x","relu6");return"bool"===t.dtype?t.toInt():gP.runKernelFunc(function(e,n){var r=e.relu6(t);return n([t]),r},{x:t},function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}},"Relu6")}}),_W=Bj({selu_:function(e){var t=Nj(e,"x","selu");return gP.runKernelFunc(function(e,n){var r=e.selu(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){var t=n.greater(qj(0)),r=qj(cB),i=qj(uB),a=e.mul(i),o=e.mul(r).mul(n.toFloat().exp());return zU(t,a,o)}}})}}),EW=Bj({transpose_:function(e,t){var n=Nj(e,"x","transpose");if(null==t&&(t=n.shape.map(function(e,t){return t}).reverse()),oR(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(e){oR(e>=0&&e<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return gP.runKernelFunc(function(e){return e.transpose(n,t)},{x:n},function(e){var n=Lj(t);return{x:function(){return e.transpose(n)}}},"Transpose",r)}}),CW=Bj({localResponseNormalization_:function(e,t,n,r,i){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var a=Nj(e,"x","localResponseNormalization");oR(4===a.rank||3===a.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."}),oR(dR(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var o=a,s=!1;3===a.rank&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var l=gP.runKernelFunc(function(e,a){var s=e.localResponseNormalization4D(o,t,n,r,i);return a([o,s]),s},{x4D:o},function(e,a){var o=a[0],s=a[1];return{x4D:function(){return gP.runKernelFunc(function(a){return a.LRNGrad(e,o,s,t,n,r,i)},{})}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),kW=Bj({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(qj(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Nj(e,"x","norm"),t,n),a=i.shape;if(r){var o=yR(n,e.shape);a=Rj(i.shape,o)}return i.reshape(a)}}),NW=Bj({basicLSTMCell_:function(e,t,n,r,i,a){var o=Nj(e,"forgetBias","basicLSTMCell"),s=Nj(t,"lstmKernel","basicLSTMCell"),l=Nj(n,"lstmBias","basicLSTMCell"),c=Nj(r,"data","basicLSTMCell"),u=Nj(i,"c","basicLSTMCell"),h=Nj(a,"h","basicLSTMCell"),d=c.concat(h,1).matMul(s).add(l),f=d.shape[0],p=d.shape[1]/4,m=[f,p],g=d.slice([0,0],m),v=d.slice([0,p],m),y=d.slice([0,2*p],m),b=d.slice([0,3*p],m),x=g.sigmoid().mulStrict(v.tanh()).addStrict(u.mulStrict(o.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),AW=Bj({multiRNNCell_:function(e,t,n,r){for(var i=Nj(t,"data","multiRNNCell"),a=Aj(n,"c","multiRNNCell"),o=Aj(r,"h","multiRNNCell"),s=i,l=[],c=0;c<e.length;c++){var u=e[c](s,a[c],o[c]);l.push(u[0]),l.push(u[1]),s=u[1]}var h=[],d=[];for(c=0;c<l.length;c+=2)h.push(l[c]),d.push(l[c+1]);return[h,d]}}),TW=Bj({movingAverage_:function(e,t,n,r,i){void 0===i&&(i=!0);var a=Nj(e,"v","movingAverage"),o=Nj(t,"x","movingAverage"),s=Nj(n,"decay","movingAverage");hP(a,o),oR(hR(a.shape,o.shape),function(){return"Shape mismatch in v and x"});var l=qj(1),c=l.sub(s),u=o.sub(a).mul(c);if(i){oR(null!=r,function(){return"When using zeroDebias: true, step is required."});var h=Nj(r,"step","movingAverage");u=u.div(l.sub(az(s,h)))}return a.add(u)}}),IW=Bj({stridedSlice_:function(e,t,n,r,i,a,o,s,l){if(void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===l&&(l=0),null==r&&(r=new Array(t.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var c=Nj(e,"x","stridedSlice"),u=iO(s),h=c.shape.slice();u.forEach(function(e){t[e]=0,n[e]=1,h.splice(e,0,1)}),c=c.reshape(h);for(var d=0;d<c.rank;d++)t[d]=oO(i,t,r,c.shape,d),n[d]=sO(a,n,r,c.shape,d),r[d]=r[d]||1;var f=iO(l);f.forEach(function(e){n[e]=t[e]+1,r[e]=1});var p=aO(t,n,r),m=p.filter(function(e,t){return-1===f.indexOf(t)});return r.every(function(e){return 1===e})?tW(c,t,p).reshape(m):gP.runKernelFunc(function(e){return e.stridedSlice(c,t,n,r)},{$x:c}).reshape(m)}}),DW=Bj({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=Nj(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var a=gP.runKernelFunc(function(e){return e.topk(r,t,n)},{$x:r});return{values:a[0],indices:a[1]}}}),RW=Bj({scatterND_:function(e,t,n){var r=Nj(e,"indices","scatterND","int32"),i=Nj(t,"updates","scatterND");return tO(i,r,n),gP.runKernelFunc(function(e){return e.scatterND(r,i,n)},{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),PW=Bj({fft_:function(e){oR("complex64"===e.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return gP.runKernelFunc(function(e){return e.fft(r)},{input:e}).reshape(e.shape)}}),jW=Bj({ifft_:function(e){oR("complex64"===e.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return gP.runKernelFunc(function(e){return e.ifft(r)},{input:e}).reshape(e.shape)}}),LW=Bj({rfft_:function(e,t){oR("float32"===e.dtype,function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],i=e.size/r;if(null!=t&&t<r){var a=e.shape.map(function(e){return 0}),o=e.shape.map(function(e){return e});o[e.shape.length-1]=t,n=e.slice(a,o),r=t}else if(null!=t&&t>r){var s=e.shape.map(function(e){return e});s[e.shape.length-1]=t-r,n=e.concat($j(s),e.shape.length-1),r=t}else n=e;var l=n.zerosLike(),c=Uj(n,l).as2D(i,r),u=PW(c),h=Math.floor(r/2)+1,d=zj(u),f=Wj(u),p=d.split([h,r-h],d.shape.length-1),m=f.split([h,r-h],f.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=h,Uj(p[0],m[0]).reshape(g)}}),OW=Bj({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),i=jW(r);return zj(i)}var a=[n,2*(t-1)],o=zj(e).as2D(n,t),s=Wj(e).as2D(n,t),l=o.slice([0,1],[n,t-2]).reverse(1),c=s.slice([0,1],[n,t-2]).reverse(1).mul(qj(-1)),u=o.concat(l,1),h=s.concat(c,1);return r=Uj(u,h).as2D(a[0],a[1]),i=jW(r),zj(i)}}),MW=Object.freeze({fft:PW,ifft:jW,rfft:LW,irfft:OW}),FW=Bj({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var i=Nj(e,"sparseIndices","sparseToDense","int32"),a=Nj(t,"sparseValues","sparseToDense"),o=Nj(r,"defaultValue","sparseToDense",a.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var i=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==i))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+i+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,n,o),gP.runKernelFunc(function(e){return e.sparseToDense(i,a,n,o)},{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),BW=Bj({gatherND_:function(e,t){var n=Nj(t,"indices","gatherND","int32"),r=Nj(e,"x","gatherND");return gP.runKernelFunc(function(e){return e.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),UW=Bj({diag_:function(e){var t=Nj(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return gP.runKernelFunc(function(e){return e.diag(t)},{$x:t}).reshape(n)}}),zW=Bj({dropout_:function(e,t,n,r){var i=Nj(e,"x","dropout");if(oR("float32"===i.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),oR(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),0===t)return e instanceof eP?i.clone():i;var a=function(e,t){if(null==t)return e.shape.slice();if(hR(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),o=1-t,s=BL(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(s)}});function WW(e,t,n){for(var r=1-e%2,i=new Float32Array(e),a=0;a<e;++a){var o=2*Math.PI*a/(e+r-1);i[a]=t-n*Math.cos(o)}return Gj(i,"float32")}var VW,HW=Bj({hannWindow_:function(e){return WW(e,.5,.5)}}),qW=Bj({hammingWindow_:function(e){return WW(e,.54,.46)}}),GW=Bj({frame_:function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var a=0,o=[];a+t<=e.size;)o.push(tW(e,a,t)),a+=n;if(r)for(;a<e.size;){var s=a+t-e.size,l=nL([tW(e,a,t-s),Jj([s],i)]);o.push(l),a+=n}return 0===o.length?Kj([],[0,t]):nL(o).as2D(o.length,t)}}),KW=Bj({stft_:function(e,t,n,r,i){var a;void 0===i&&(i=HW),null==r&&(a=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var o=GW(e,t,n),s=rz(o,i(t)),l=[],c=0;c<o.shape[0];c++)l.push(LW(s.slice([c,0],[1,t]),r));return nL(l)}}),YW=Object.freeze({hannWindow:HW,hammingWindow:qW,frame:GW,stft:KW});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(VW||(VW={}));var XW=Bj({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=VW.SUM_BY_NONZERO_WEIGHTS);var i=Nj(e,"labels","absoluteDifference"),a=Nj(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Nj(n,"weights","absoluteDifference")),sR(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return QW(s,o,r)}}),QW=Bj({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=VW.SUM_BY_NONZERO_WEIGHTS);var r=Nj(e,"losses","computeWeightedLoss"),i=null;null!=t&&(i=Nj(t,"weights","computeWeightedLoss"));var a=null==i?r:r.mul(i);if(n===VW.NONE)return a;if(n===VW.SUM)return a.sum();if(n===VW.MEAN){if(null==i)return a.mean();var o=r.size/i.size,s=a.sum().div(i.sum());return o>1?s.div(qj(o)):s}if(n===VW.SUM_BY_NONZERO_WEIGHTS){if(null==i)return a.sum().div(qj(r.size));var l=i.mul(Qj(r.shape)).notEqual(qj(0)).sum().toFloat();return a.sum().div(l)}throw Error("Unknown reduction: "+n)}}),$W=Bj({cosineDistance_:function(e,t,n,r,i){void 0===i&&(i=VW.SUM_BY_NONZERO_WEIGHTS);var a=Nj(e,"labels","cosineDistance"),o=Nj(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Nj(r,"weights","cosineDistance")),sR(a.shape,o.shape,"Error in cosineDistance: ");var l=qj(1).sub(a.mul(o).sum(n,!0));return QW(l,s,i)}}),JW=Bj({hingeLoss_:function(e,t,n,r){void 0===r&&(r=VW.SUM_BY_NONZERO_WEIGHTS);var i=Nj(e,"labels","hingeLoss"),a=Nj(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Nj(n,"weights","hingeLoss")),sR(i.shape,a.shape,"Error in hingeLoss: ");var s=qj(1);i=qj(2).mul(i).sub(s);var l=s.sub(i.mul(a)).relu();return QW(l,o,r)}}),ZW=Bj({huberLoss_:function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=VW.SUM_BY_NONZERO_WEIGHTS);var a=Nj(e,"labels","huberLoss"),o=Nj(t,"predictions","huberLoss"),s=null;null!=n&&(s=Nj(n,"weights","huberLoss")),sR(a.shape,o.shape,"Error in huberLoss: ");var l=qj(r),c=o.sub(a).abs(),u=ZU(c,l),h=c.sub(u),d=qj(.5).mul(u.square()).add(l.mul(h));return QW(d,s,i)}}),eV=Bj({logLoss_:function(e,t,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=VW.SUM_BY_NONZERO_WEIGHTS);var a=Nj(e,"labels","logLoss"),o=Nj(t,"predictions","logLoss"),s=null;null!=n&&(s=Nj(n,"weights","logLoss")),sR(a.shape,o.shape,"Error in logLoss: ");var l=qj(1),c=qj(r),u=a.mul(o.add(c).log()).neg().sub(l.sub(a).mul(l.sub(o).add(c).log()));return QW(u,s,i)}}),tV=Bj({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=VW.SUM_BY_NONZERO_WEIGHTS);var i=Nj(e,"labels","meanSquaredError"),a=Nj(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Nj(n,"weights","meanSquaredError")),sR(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return QW(s,o,r)}}),nV=Bj({sigmoidCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=VW.SUM_BY_NONZERO_WEIGHTS);var a=Nj(e,"multiClassLabels","sigmoidCrossEntropy"),o=Nj(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Nj(n,"weights","sigmoidCrossEntropy")),sR(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=qj(r),c=qj(1),u=qj(.5);a=a.mul(c.sub(l)).add(u.mul(l))}var h=function(e,t){var n=Nj(e,"labels","sigmoidCrossEntropyWithLogits"),r=Nj(t,"logits","sigmoidCrossEntropyWithLogits");sR(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),a=r.mul(n),o=r.abs().neg().exp().log1p();return i.sub(a).add(o)}(a,o);return QW(h,s,i)}}),rV=Bj({softmaxCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=VW.SUM_BY_NONZERO_WEIGHTS);var a=Nj(e,"onehotLabels","softmaxCrossEntropy"),o=Nj(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Nj(n,"weights","softmaxCrossEntropy")),sR(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var l=qj(r),c=qj(1),u=qj(a.shape[1]);a=a.mul(c.sub(l)).add(l.div(u))}var h=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return uO(function(e,t,r){var i=t.logSumExp([n],!0),a=t.toFloat().sub(i);return r([e,a]),{value:a.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],i=t[1],a=Rj(e.shape,[n]);return[e.reshape(a).mul(r.toFloat().sub(i.exp())),e.reshape(a).mul(i.exp().sub(r.toFloat()))]}}})(e,t)}(a,o);return QW(h,s,i)}}),iV=Object.freeze({get Reduction(){return VW},absoluteDifference:XW,computeWeightedLoss:QW,cosineDistance:$W,hingeLoss:JW,huberLoss:ZW,logLoss:eV,meanSquaredError:tV,sigmoidCrossEntropy:nV,softmaxCrossEntropy:rV});function aV(e,t){return void 0===t&&(t=!1),gP.tidy(function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],i=AL(n),a=e.clone(),o=Kj([[1]],[1,1]),s=o.clone(),l=n>=r?r:n,c=function(e){var t,l=a,c=s,u=i;t=gP.tidy(function(){var t=a.slice([e,e],[n-e,1]),l=t.norm(),c=a.slice([e,e],[1,1]),u=Kj([[-1]]).where(c.greater(0),Kj([[1]])),h=c.sub(u.mul(l)),d=t.div(h);s=1===d.shape[0]?o.clone():o.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);var f=u.matMul(h).div(l).neg(),p=a.slice([e,0],[n-e,r]),m=f.mul(s);if(0===e)a=p.sub(m.matMul(s.transpose().matMul(p)));else{var g=p.sub(m.matMul(s.transpose().matMul(p)));a=a.slice([0,0],[e,r]).concat(g,0)}var v=i.slice([0,e],[n,i.shape[1]-e]);if(0===e)i=v.sub(v.matMul(s).matMul(m.transpose()));else{var y=v.sub(v.matMul(s).matMul(m.transpose()));i=i.slice([0,0],[n,e]).concat(y,1)}return[s,a,i]}),s=t[0],a=t[1],i=t[2],_j([l,c,u])},u=0;u<l;++u)c(u);return!t&&n>r&&(i=i.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[i,a]})}var oV=Bj({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=Nj(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],s=a[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var l=Zj(0,o,1,"int32").reshape([-1,1]),c=Zj(0,s,1,"int32"),u=lz(l,c),h=MU(u.lessEqual(qj(+t,"int32")),u.greaterEqual(qj(-n,"int32"))),d=$j([o,s],r.dtype);return VL(GL(r.reshape([-1,o,s])).map(function(e){return zU(h,e,d)})).reshape(i)}}),sV=Bj({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,oR(null!=e&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(t){oR(e[t].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"})},i=1;i<e.length;++i)r(i)}else t=!0,e=sL(e,e.shape[0],0).map(function(e){return WL(e,[0])});oR(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var a=[],o=e,s=function(e){a.push(gP.tidy(function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=gW(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(kW(t,"euclidean"))}))};for(i=0;i<e.length;++i)s(i);return t?VL(a,0):a}}),lV=Bj({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return aV(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(e,t){return e*t}),r=GL(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];return r.forEach(function(e){var n=aV(e,t),r=n[0],o=n[1];i.push(r),a.push(o)}),[VL(i,0).reshape(e.shape),VL(a,0).reshape(e.shape)]}}),cV=Object.freeze({bandPart:oV,gramSchmidt:sV,qr:lV});function uV(e,t,n,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);var o=e.shape[0];return n=Math.min(n,o),oR(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),oR(2===e.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),oR(4===e.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),oR(1===t.rank,function(){return"scores must be a 1D tensor"}),oR(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),oR(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var hV=Bj({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=Nj(e,"images","resizeBilinear");oR(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),oR(2===t.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],l=gP.runKernelFunc(function(e,t){return t([i]),e.resizeBilinear(i,o,s,n)},{x:i},function(e,t){return{x:function(){return gP.runKernelFunc(function(r){return r.resizeBilinearBackprop(e,t[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),dV=Bj({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=Nj(e,"images","resizeNearestNeighbor");oR(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),oR(2===t.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),oR("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],l=gP.runKernelFunc(function(e,t){return t([i]),e.resizeNearestNeighbor(i,o,s,n)},{batchImages:i},function(e,t){return{batchImages:function(){return gP.runKernelFunc(function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)},{})}}});return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),fV=Bj({nonMaxSuppression_:function(e,t,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var a=Nj(e,"boxes","nonMaxSuppression"),o=Nj(t,"scores","nonMaxSuppression"),s=uV(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return gP.runKernelFunc(function(e){return e.nonMaxSuppression(a,o,n,r,i)},{boxes:a,scores:o},null,"NonMaxSuppressionV3",l)}}),pV=Bj({nonMaxSuppressionWithScore_:function(e,t,n,r,i,a){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var o=Nj(e,"boxes","nonMaxSuppression"),s=Nj(t,"scores","nonMaxSuppression"),l=uV(o,s,n,r,i,a),c={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold,softNmsSigma:a=l.softNmsSigma},u=gP.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},c);return{selectedIndices:u[0],selectedScores:u[1]}}}),mV=Bj({cropAndResize_:function(e,t,n,r,i,a){var o=Nj(e,"image","cropAndResize"),s=Nj(t,"boxes","cropAndResize","float32"),l=Nj(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var c=s.shape[0];return oR(4===o.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),oR(2===s.rank&&4===s.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."}),oR(1===l.rank&&l.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."}),oR(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),oR(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),oR("bilinear"===i||"nearest"===i,function(){return"method must be bilinear or nearest, but was "+i}),gP.runKernelFunc(function(e,t){return e.cropAndResize(o,s,l,r,i,a)},{images:o,boxes:s,boxInd:l},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),gV=Object.freeze({resizeBilinear:hV,resizeNearestNeighbor:dV,nonMaxSuppression:fV,nonMaxSuppressionAsync:function(e,t,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),HD(this,void 0,void 0,function(){var a,o,s,l,c,u,h;return qD(this,function(d){switch(d.label){case 0:return a=Nj(e,"boxes","nonMaxSuppressionAsync"),o=Nj(t,"scores","nonMaxSuppressionAsync"),s=uV(a,o,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return l=d.sent(),c=l[0],u=l[1],h=UO(c,u,n,r,i),a!==e&&a.dispose(),o!==t&&o.dispose(),[2,h]}})})},nonMaxSuppressionWithScore:pV,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,i,a){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===a&&(a=0),HD(this,void 0,void 0,function(){var o,s,l,c,u,h,d;return qD(this,function(f){switch(f.label){case 0:return o=Nj(e,"boxes","nonMaxSuppressionAsync"),s=Nj(t,"scores","nonMaxSuppressionAsync"),l=uV(o,s,n,r,i,a),n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return c=f.sent(),u=c[0],h=c[1],d=zO(u,h,n,r,i,a),o!==e&&o.dispose(),s!==t&&s.dispose(),[2,d]}})})},cropAndResize:mV}),vV=function(e,t){return!(e>0)||"linear"===t},yV=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},bV=function(e,t){var n=t,r=vO(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},xV=function(e,t,n){if("linear"===t)return e;if("relu"===t)return wW(e);if("elu"===t)return yW(e);if("relu6"===t)return SW(e);if("prelu"===t)return xW(e,n);throw new Error("Unknown fused activation "+t+".")},wV=Bj({fusedMatMul_:function(e){var t,n=e.a,r=e.b,i=e.transposeA,a=void 0!==i&&i,o=e.transposeB,s=void 0!==o&&o,l=e.bias,c=e.activation,u=void 0===c?"linear":c,h=e.preluActivationWeights;if(!1===vV(gP.state.gradientDepth,u)){var d=Uz(n,r,a,s);return null!=l&&(d=VU(d,l)),xV(d,u,h)}var f=Nj(n,"a","fused matMul"),p=Nj(r,"b","fused matMul");t=uP(f,p),f=t[0],p=t[1];var m=a?f.shape[f.rank-2]:f.shape[f.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=a?f.shape[f.rank-1]:f.shape[f.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=f.shape.slice(0,-2),x=p.shape.slice(0,-2),w=uR(b),S=uR(x);oR(f.rank>=2&&p.rank>=2&&f.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+p.rank+"."}),oR(hR(b,x),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+x+") of Tensors with shapes "+f.shape+" and "+p.shape+" must match."}),oR(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+f.shape+" and "+p.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var _,E,C=f.shape.slice(0,-2).concat([v,y]),k=a?f.as3D(w,m,v):f.as3D(w,v,m),N=s?p.as3D(S,y,g):p.as3D(S,g,y);null!=l&&yO(C,(_=uP(_=Nj(l,"bias","fused matMul"),f)[0]).shape),null!=h&&(E=Nj(h,"prelu weights","fused matMul"));var A={a:k,b:N};null!=l&&(A.bias=_),null!=h&&(A.preluActivationWeights=E);var T=[k,N];return gP.runKernelFunc(function(e,t){var n=e.fusedBatchMatMul({a:k,b:N,transposeA:a,transposeB:s,bias:_,activation:u,preluActivationWeights:E});return t([k,N,n]),n},A,function(e,t){var n=t[0],r=t[1],i=t[2],o=yV(e,i,u),c={};return null!=l&&(c={bias:function(){return bV(_,o)}}),a||s?!a&&s?Object.assign({a:function(){return o.matMul(r,!1,!1)},b:function(){return o.matMul(n,!0,!1)}},c):a&&!s?Object.assign({a:function(){return r.matMul(o,!1,!0)},b:function(){return n.matMul(o,!1,!1)}},c):Object.assign({a:function(){return r.matMul(o,!0,!0)},b:function(){return o.matMul(n,!0,!0)}},c):Object.assign({a:function(){return o.matMul(r,!1,!0)},b:function(){return n.matMul(o,!0,!1)}},c)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:u},T,[!0]).reshape(C)}}),SV=Bj({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,a=e.dataFormat,o=void 0===a?"NHWC":a,s=e.dilations,l=void 0===s?[1,1]:s,c=e.dimRoundingMode,u=e.bias,h=e.activation,d=void 0===h?"linear":h,f=e.preluActivationWeights;if(d=d||"linear",!1===vV(gP.state.gradientDepth,d)){var p=Iz(t,n,r,i,o,l,c);return null!=u&&(p=VU(p,u)),xV(p,d,f)}var m=Nj(t,"x","conv2d"),g=Nj(n,"filter","conv2d"),v=m,y=!1;3===m.rank&&(y=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),oR(4===v.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."}),oR(4===g.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),null!=c&&oR(dR(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+i+"."}),oR(v.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),oR(TO(r,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),oR("NHWC"===o,function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var b,x,w=wO(v.shape,g.shape,r,l,i,c);null!=u&&(b=uP(b=Nj(u,"bias","fused conv2d"),m)[0],yO(w.outShape,b.shape)),null!=f&&(x=Nj(f,"prelu weights","fused conv2d"));var S={x:v,filter:g};null!=u&&(S.bias=b),null!=f&&(S.preluActivationWeights=x);var _=[g,v],E=gP.runKernelFunc(function(e,t){var n=e.fusedConv2d({input:v,filter:g,convInfo:w,bias:b,activation:d,preluActivationWeights:x});return t([g,v,n]),n},S,function(e,t){var n=t,a=n[0],o=n[1],s=n[2],c=yV(e,s,d);oR(AO(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var h={};return null!=u&&(h={bias:function(){return bV(b,c)}}),Object.assign({x:function(){return Pz(o.shape,c,a,r,i)},filter:function(){return Rz(o,c,a.shape,r,i)}},h)},"FusedConv2D",{convInfo:w,activation:d},_,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),_V=Bj({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,a=e.dataFormat,o=void 0===a?"NHWC":a,s=e.dilations,l=void 0===s?[1,1]:s,c=e.dimRoundingMode,u=e.bias,h=e.activation,d=void 0===h?"linear":h,f=e.preluActivationWeights;if(!1===vV(gP.state.gradientDepth,d)){var p=jz(t,n,r,i,o,l,c);return null!=u&&(p=VU(p,u)),xV(p,d,f)}var m=Nj(t,"x","depthwiseConv2d"),g=Nj(n,"filter","depthwiseConv2d"),v=m,y=!1;3===m.rank&&(y=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),oR(4===v.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."}),oR(4===g.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),oR(v.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),null==l&&(l=[1,1]),oR(TO(r,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),null!=c&&oR(dR(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+i+"."});var b,x,w=wO(v.shape,g.shape,r,l,i,c,!0);null!=u&&(b=uP(b=Nj(u,"bias","fused conv2d"),m)[0],yO(w.outShape,b.shape)),null!=f&&(x=Nj(f,"prelu weights","fused depthwiseConv2d"));var S={x:v,filter:g};null!=u&&(S.bias=b),null!=f&&(S.preluActivationWeights=x);var _=[g,v],E=gP.runKernelFunc(function(e,t){var n=e.fusedDepthwiseConv2D({input:v,filter:g,convInfo:w,bias:b,activation:d,preluActivationWeights:x});return t([g,v,n]),n},S,function(e,t){oR(AO(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var n=t[0],r=t[1],i=t[2],a=yV(e,i,d),o={};return null!=u&&(o={bias:function(){return bV(b,a)}}),Object.assign({x:function(){return Lz(r.shape,a,n,w)},filter:function(){return Oz(r,a,n.shape,w)}},o)},"FusedDepthwiseConv2D",{convInfo:w,activation:d},_,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),EV=Object.freeze({matMul:wV,conv2d:SV,depthwiseConv2d:_V}),CV=Object.freeze({image:gV,linalg:cV,losses:iV,spectral:MW,fused:EV,signal:YW,square:UB,squaredDifference:WB,conv1d:Tz,conv2d:Iz,conv3d:Dz,depthwiseConv2d:jz,separableConv2d:Mz,conv2dTranspose:Fz,conv3dTranspose:Bz,op:Bj,batchNormalization2d:TU,batchNormalization3d:IU,batchNormalization4d:DU,batchNormalization:RU,batchNorm:PU,batchNorm2d:jU,batchNorm3d:LU,batchNorm4d:OU,booleanMaskAsync:function(e,t,n){return HD(this,void 0,void 0,function(){var r,i,a,o,s,l,c,u,h,d,f,p,m;return qD(this,function(g){switch(g.label){case 0:for(r=Nj(e,"tensor","boolMask"),i=Nj(t,"mask","boolMask","bool"),a=null==n?0:n,o=i.rank,s=r.shape,oR(o>0,function(){return"mask cannot be scalar"}),sR(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=a;c<a+o;c++)l*=s[c];return u=s.slice(0,a).concat([l],s.slice(a+o)),h=r.reshape(u),d=i.reshape([-1]),[4,WU(d)];case 1:return f=g.sent(),p=f.squeeze([1]),m=Ez(h,p,a),e!==r&&r.dispose(),t!==i&&i.dispose(),p.dispose(),h.dispose(),d.dispose(),f.dispose(),[2,m]}})})},complex:Uj,real:zj,imag:Wj,concat:nL,concat1d:rL,concat2d:iL,concat3d:aL,concat4d:oL,split:sL,matMul:Uz,dot:zz,outerProduct:Wz,reverse:Vz,reverse1d:Hz,reverse2d:qz,reverse3d:Gz,reverse4d:Kz,maxPool:Qz,avgPool:$z,pool:Jz,maxPool3d:Zz,avgPool3d:eW,slice:tW,slice1d:nW,slice2d:rW,slice3d:iW,slice4d:aW,abs:VB,acos:HB,acosh:qB,asin:GB,asinh:KB,atan:YB,atanh:XB,ceil:QB,clipByValue:$B,cos:JB,cosh:ZB,erf:eU,exp:tU,expm1:nU,floor:rU,log:iU,log1p:aU,logSigmoid:oU,neg:sU,reciprocal:lU,round:cU,rsqrt:uU,sigmoid:hU,sign:dU,isNaN:fU,isInf:pU,isFinite:mU,sin:gU,sinh:vU,softplus:yU,sqrt:bU,step:xU,tan:wU,tanh:SU,all:sW,any:lW,argMax:cW,argMin:uW,logSumExp:hW,max:dW,mean:fW,min:pW,moments:mW,sum:gW,prod:vW,equal:uz,equalStrict:hz,greater:dz,greaterEqual:fz,greaterEqualStrict:pz,greaterStrict:mz,less:gz,lessEqual:vz,lessEqualStrict:yz,lessStrict:bz,notEqual:xz,notEqualStrict:wz,add:VU,addN:HU,addStrict:qU,atan2:GU,div:KU,divNoNan:YU,divStrict:XU,floorDiv:QU,maximum:$U,maximumStrict:JU,minimum:ZU,minimumStrict:ez,mod:tz,modStrict:nz,mul:rz,mulStrict:iz,pow:az,powStrict:oz,squaredDifferenceStrict:sz,sub:lz,subStrict:cz,elu:yW,leakyRelu:bW,prelu:xW,relu:wW,relu6:SW,selu:_W,logicalAnd:MU,logicalNot:FU,logicalOr:BU,logicalXor:UU,where:zU,whereAsync:WU,buffer:xL,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:wL,broadcastTo:SL,cast:_L,clone:EL,cumsum:CL,depthToSpace:kL,expandDims:NL,eye:AL,multinomial:TL,oneHot:IL,pad:DL,pad1d:RL,pad2d:PL,pad3d:jL,pad4d:LL,rand:OL,randomNormal:ML,randomGamma:FL,randomUniform:BL,reshape:UL,spaceToBatchND:zL,squeeze:WL,stack:VL,tile:HL,truncatedNormal:qL,unstack:GL,setdiff1dAsync:function(e,t){return HD(this,void 0,void 0,function(){var n,r,i,a,o,s,l,c,u,h;return qD(this,function(d){switch(d.label){case 0:return n=Nj(e,"x","setdiff1d"),r=Nj(t,"y","setdiff1d"),oR(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),oR(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),oR(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=d.sent(),[4,r.data()];case 2:for(a=d.sent(),o=new Set(a),s=0,u=0;u<i.length;u++)o.has(i[u])||s++;for(l=new QR([s],n.dtype),c=new QR([s],"int32"),u=0,h=0;u<i.length;u++)o.has(i[u])||(l.values[h]=i[u],c.values[h]=u,h++);return[2,[l.toTensor(),c.toTensor()]]}})})},fill:Jj,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return gP.runKernelFunc(function(r){return r.linspace(e,t,n)},{})},ones:Qj,range:Zj,scalar:qj,tensor:Vj,tensor1d:Gj,tensor2d:Kj,tensor3d:Yj,tensor4d:Xj,tensor5d:function(e,t,n){if(lR(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Cj(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Hj(e,t,r,n)},tensor6d:function(e,t,n){if(lR(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Cj(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Hj(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),gP.makeVariable(e,t,n,r)},zeros:$j,onesLike:eL,zerosLike:tL,transpose:EW,softmax:hO,logSoftmax:dO,localResponseNormalization:CW,norm:kW,gather:Ez,unsortedSegmentSum:Cz,basicLSTMCell:NW,multiRNNCell:AW,movingAverage:TW,stridedSlice:IW,topk:DW,scatterND:RW,fft:PW,ifft:jW,rfft:LW,irfft:OW,sparseToDense:FW,gatherND:BW,diag:UW,dropout:zW,hannWindow:HW,hammingWindow:qW,frame:GW,stft:KW,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),HD(this,void 0,void 0,function(){var r,i,a,o,s,l,c,u,h,d,f,p,m,g;return qD(this,function(v){switch(v.label){case 0:return r=Nj(e,"predictions","inTopK"),i=Nj(t,"targets","inTopK"),oR(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),oR(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),sR(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],oR(n>0&&n<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n}),[4,r.data()];case 1:return o=v.sent(),[4,i.data()];case 2:for(s=v.sent(),l=[o.length/a,a],u=l[1],h=xR("bool",c=l[0]),d=0;d<c;d++){for(f=d*u,p=o.subarray(f,f+u),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort(function(e,t){return t.value-e.value}),h[d]=0,g=0;g<n;g++)if(m[g].index===s[d]){h[d]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),[2,Vj(h,i.shape,"bool")]}})})}});function kV(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){null!=e&&oR("complex64"!==e.dtype,function(){return t+" does not support complex64 tensors."})})}function NV(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var AV=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new fO(t,gP),t}return VD(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,KD().get("IS_NODE")&&Ej("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return HD(this,void 0,void 0,function(){return qD(this,function(t){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?jO(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map(function(e){return WR(e)})}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return xL(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return gP.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return HD(this,void 0,void 0,function(){var t;return qD(this,function(n){return t=BR(),e(),[2,{kernelMs:BR()-t}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:gP.keep(e.clone()),imag:gP.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(kV(e,"slice"),lO(e.shape,t,n)){var r=cO(t,e.strides),i=uR(n);return Vj(this.readSync(e.dataId).subarray(r,r+i),n,e.dtype)}for(var a=xL(n,e.dtype),o=this.bufferSync(e),s=0;s<a.size;++s){var l=a.indexToLoc(s).map(function(e,n){return e+t[n]});a.values[s]=o.get.apply(o,l)}return a.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){kV(e,"stridedSlice");var i=aO(t,n,r);if(i.some(function(e){return 0===e}))return Vj([],i);for(var a=xL(i,e.dtype),o=this.bufferSync(e),s=0;s<a.size;s++){for(var l=a.indexToLoc(s),c=new Array(l.length),u=0;u<c.length;u++)c[u]=l[u]*r[u]+t[u];a.set.apply(a,[o.get.apply(o,c)].concat(l))}return a.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=xL([e.size,e.size],e.dtype),r=n.values,i=0;i<t.length;i++)r[i*e.size+i]=t[i];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,a=0;a<e.rank;a++)a!==t&&(r[i++]=e.shape[a]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var l=new Array(n);for(a=0;a<l.length;a++)o[t]=a,l[a]=this.slice(e,o,s).reshape(r);return l},t.prototype.reverse=function(e,t){kV(e,"reverse");for(var n=xL(e.shape,e.dtype),r=this.bufferSync(e),i=function(i){var a=n.indexToLoc(i),o=a.slice();t.forEach(function(t){return o[t]=e.shape[t]-1-o[t]}),n.set.apply(n,[r.get.apply(r,o)].concat(a))},a=0;a<n.size;a++)i(a);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map(function(e){return zj(e)}),i=e.map(function(e){return Wj(e)});return Uj(this.concat(r,t),this.concat(i,t))}var a=e.map(function(e){var n=uR(e.shape.slice(t));return e.as2D(-1,n)}),o=Fj(a.map(function(e){return e.shape}),1),s=xL(o,e[0].dtype).values;if(1===a[0].shape[0]){var l=0;a.forEach(function(e){s.set(n.readSync(e.dataId),l),l+=e.size})}else{var c=0;a.forEach(function(e){for(var t=n.readSync(e.dataId),r=0,i=0;i<e.shape[0];++i)for(var a=i*o[1]+c,l=0;l<e.shape[1];++l)s[a+l]=t[r++];c+=e.shape[1]})}var u=Fj(e.map(function(e){return e.shape}),t);return Vj(s,u,e[0].dtype)},t.prototype.neg=function(e){return kV(e,"neg"),this.multiply(qj(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e+n,imag:t+r}}):this.broadcastedBinaryOp(e,t,lP(e.dtype,t.dtype),function(e,t){return e+t})},t.prototype.addN=function(e){var t=this;kV(e,"addN");for(var n=e.map(function(e){return t.readSync(e.dataId)}),r=xL(e[0].shape,e[0].dtype),i=r.values,a=0;a<e.length;a++)for(var o=n[a],s=0;s<i.length;s++)i[s]+=o[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=yR([t],e.shape),r=this.max(e,n),i=Rj(r.shape,n),a=this.subtract(e,r.reshape(i)),o=this.exp(a),s=this.sum(o,n).reshape(i);return this.realDivide(o,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e-n,imag:t-r}}):this.broadcastedBinaryOp(e,t,lP(e.dtype,t.dtype),function(e,t){return e-t})},t.prototype.pow=function(e,t){return kV([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},t.prototype.batchMatMul=function(e,t,n,r){kV([e,t],"matMul");for(var i=n?e.shape[1]:e.shape[2],a=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],s=e.shape[0],l=this.readSync(e.dataId),c=this.readSync(t.dataId),u=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],h=u[0],d=u[1],f=u[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=p[0],g=p[1],v=p[2],y=a*o,b=xL([s,a,o],e.dtype),x=b.values,w=this.blockSize,S=0;S<s;S++)for(var _=0;_<a;_+=w)for(var E=0;E<o;E+=w)for(var C=0;C<i;C+=w)for(var k=Math.min(_+w,a),N=Math.min(E+w,o),A=Math.min(C+w,i),T=_;T<k;T++)for(var I=E;I<N;I++){for(var D=0,R=C;R<A;R++)D+=l[S*h+T*d+R*f]*c[R*m+I*g+S*v];x[S*y+(T*o+I)]+=D}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,a=e.bias,o=e.activation,s=e.preluActivationWeights,l=this.batchMatMul(t,n,r,i);return a&&(l=this.add(l,a)),o&&(l=NV(this,l,o,s)),l},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}):this.broadcastedBinaryOp(e,t,lP(e.dtype,t.dtype),function(e,t){return e*t})},t.prototype.realDivide=function(e,t){return kV([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",function(e,t){return e/t})},t.prototype.floorDiv=function(e,t){return kV([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",function(e,t){return Math.floor(e/t)})},t.prototype.sum=function(e,t){kV(e,"sum"),Pj("sum",t,e.rank);for(var n=Dj(e.shape,t),r=n[0],i=n[1],a=$j(r,lP(e.dtype,"int32")),o=uR(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<s.length;++c){for(var u=c*o,h=0,d=0;d<o;++d)h+=l[u+d];s[c]=h}return a},t.prototype.prod=function(e,t){kV(e,"sum");for(var n=Dj(e.shape,t),r=n[0],i=n[1],a=$j(r,lP(e.dtype,"int32")),o=uR(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<s.length;++c){for(var u=c*o,h=1,d=0;d<o;++d)h*=l[u+d];s[c]=h}return a},t.prototype.unsortedSegmentSum=function(e,t,n){kV(e,"unsortedSegmentSum");for(var r=[],i=e.rank-t.rank,a=0;a<i;++a)t=t.expandDims(a+1);for(a=0;a<n;++a){var o=qj(a,"int32"),s=uz(o,t).asType("float32").mul(e).sum(0);r.push(s)}return VL(r)},t.prototype.argMin=function(e,t){kV(e,"argMin");var n=[t];Pj("argMin",n,e.rank);for(var r=Dj(e.shape,n),i=r[0],a=r[1],o=$j(i,"int32"),s=uR(a),l=this.readSync(o.dataId),c=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*s,d=c[h],f=0,p=0;p<s;++p){var m=c[h+p];m<d&&(d=m,f=p)}l[u]=f}return o},t.prototype.argMax=function(e,t){kV(e,"argMax");var n=[t];Pj("argMax",n,e.rank);for(var r=Dj(e.shape,n),i=r[0],a=r[1],o=$j(i,"int32"),s=uR(a),l=this.readSync(o.dataId),c=this.readSync(e.dataId),u=0;u<l.length;++u){for(var h=u*s,d=c[h],f=0,p=0;p<s;++p){var m=c[h+p];m>d&&(d=m,f=p)}l[u]=f}return o},t.prototype.cumsum=function(e,t,n,r){if(kV(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var i=lP(e.dtype,"int32"),a=$j(e.shape,i),o=this.readSync(a.dataId),s=this.readSync(e.dataId),l=e.shape[e.rank-1],c=r?function(e,t){return e+l-t-1}:function(e,t){return e+t},u=0;u<s.length;u+=l)for(var h=0;h<l;h++){var d=c(u,h);if(0===h)o[d]=n?0:s[d];else{var f=c(u,h-1);o[d]=n?s[f]+o[f]:s[d]+o[f]}}return a},t.prototype.equal=function(e,t){return kV([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e===t?1:0})},t.prototype.notEqual=function(e,t){return kV([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e!==t?1:0})},t.prototype.less=function(e,t){return kV([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<t?1:0})},t.prototype.lessEqual=function(e,t){return kV([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<=t?1:0})},t.prototype.greater=function(e,t){return kV([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>t?1:0})},t.prototype.greaterEqual=function(e,t){return kV([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>=t?1:0})},t.prototype.logicalNot=function(e){kV(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return kV([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e&&t})},t.prototype.logicalOr=function(e,t){return kV([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e||t})},t.prototype.select=function(e,t,n){kV([e,t,n],"select");for(var r=this.readSync(e.dataId),i=this.readSync(t.dataId),a=this.readSync(n.dataId),o=$j(t.shape,lP(t.dtype,n.dtype)),s=this.readSync(o.dataId),l=0,c=0===e.rank||e.rank>1||1===t.rank?1:uR(t.shape.slice(1)),u=0;u<r.length;u++)for(var h=0;h<c;h++)1===r[u]?s[l++]=i[u]:s[l++]=a[u];return o},t.prototype.where=function(e){kV([e],"where");var t=this.readSync(e.dataId);return XO(e.shape,t)},t.prototype.topk=function(e,t,n){return kV(e,"topk"),YO(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){kV(e,"min"),Pj("min",t,e.rank);for(var n=Dj(e.shape,t),r=n[0],i=n[1],a=$j(r,e.dtype),o=uR(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<s.length;++c){for(var u=c*o,h=l[u],d=0;d<o;++d){var f=l[u+d];f<h&&(h=f)}s[c]=h}return a},t.prototype.minimum=function(e,t){return kV([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},t.prototype.mod=function(e,t){return kV([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})},t.prototype.max=function(e,t){kV(e,"max"),Pj("max",t,e.rank);for(var n=Dj(e.shape,t),r=n[0],i=n[1],a=$j(r,e.dtype),o=uR(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<s.length;++c){for(var u=c*o,h=l[u],d=0;d<o;++d){var f=l[u+d];f>h&&(h=f)}s[c]=h}return a},t.prototype.maximum=function(e,t){return kV([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},t.prototype.all=function(e,t){kV(e,"all"),Pj("all",t,e.rank);for(var n=Dj(e.shape,t),r=n[0],i=n[1],a=$j(r,e.dtype),o=uR(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<s.length;++c){for(var u=c*o,h=l[u],d=0;d<o;++d){var f=l[u+d];h=h&&f}s[c]=h}return a},t.prototype.any=function(e,t){kV(e,"any"),Pj("any",t,e.rank);for(var n=Dj(e.shape,t),r=n[0],i=n[1],a=$j(r,e.dtype),o=uR(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<s.length;++c){for(var u=c*o,h=l[u],d=0;d<o;++d){var f=l[u+d];h=h||f}s[c]=h}return a},t.prototype.squaredDifference=function(e,t){return kV([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e-t;return n*n})},t.prototype.ceil=function(e){kV(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){kV(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){kV(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){kV(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){kV(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){kV(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){kV(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=Math.floor(t[r]);t[r]-i<.5?n[r]=Math.floor(t[r]):t[r]-i>.5?n[r]=Math.ceil(t[r]):n[r]=i%2==0?i:i+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){kV(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){kV(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){kV(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){kV(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log1p(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){kV(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.sqrt(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){kV(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=1/Math.sqrt(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){kV(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){kV(e,"relu");for(var t=$j(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return t},t.prototype.relu6=function(e){kV(e,"relu");for(var t=$j(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return t},t.prototype.prelu=function(e,t){return kV([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return e<0?t*e:e})},t.prototype.elu=function(e){kV(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?i:Math.exp(i)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){kV([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=this.readSync(e.dataId),a=0;a<r.length;++a){var o=r[a];n[a]=o>=1?i[a]:i[a]*(o+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){kV(e,"selu");for(var t=cB,n=uB,r=new Float32Array(e.size),i=this.readSync(e.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>=0?n*o:t*(Math.exp(o)-1)}return this.makeOutput(r,e.shape,"float32")},t.prototype.clip=function(e,t,n){kV(e,"clip");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>n?n:o<t?t:o}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var i=n[2*r],a=n[2*r+1];t[r]=Math.hypot(i,a)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){kV(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){kV(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){kV(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var a,o=r[i]>-t,s=r[i]<t,l=Math.exp(r[i]);a=s?l:o?r[i]:Math.log(1+l),n[i]=a}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){kV(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){kV(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){kV(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){kV(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){kV(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){kV(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return kV([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.atan2(e,t)})},t.prototype.sinh=function(e){kV(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){kV(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){kV(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=fR(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){kV(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){kV(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){kV(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){kV(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=Math.sign(n[r]),a=Math.abs(n[r]),o=1/(1+.3275911*a);t[r]=i*(1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-a*a))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),kV(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var a=r[i];isNaN(a)?n[i]=NaN:n[i]=a>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights,s=this.conv2d(t,n,r);return i&&(s=this.add(s,i)),a&&(s=NV(this,s,a,o)),s},t.prototype.conv2d=function(e,t,n){kV([e,t],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,l=n.padInfo.top,c="channelsLast"===n.dataFormat,u=xL(n.outShape,e.dtype),h=e.strides[0],d=c?e.strides[1]:e.strides[2],f=c?e.strides[2]:1,p=c?1:e.strides[1],m=u.strides[0],g=c?u.strides[1]:u.strides[2],v=c?u.strides[2]:1,y=c?1:u.strides[1],b=this.readSync(e.dataId),x=this.readSync(t.dataId),w=u.values,S=0;S<n.batchSize;++S)for(var _=S*h,E=S*m,C=0;C<n.outHeight;++C)for(var k=E+C*g,N=C*n.strideHeight-l,A=0;A<r;A++){var T=N+A*a;if(!(T<0||T>=n.inHeight))for(var I=A*t.strides[0],D=_+T*d,R=0;R<n.outWidth;++R)for(var P=k+R*v,j=R*n.strideWidth-s,L=0;L<i;L++){var O=j+L*o;if(!(O<0||O>=n.inWidth))for(var M=D+O*f,F=I+L*t.strides[1],B=0;B<n.inChannels;++B){for(var U=b[M+B*p],z=0;z<n.outChannels;++z)w[P+z*y]+=U*x[F+z];F+=n.outChannels}}}return u.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,i=n.filterHeight,a=n.filterWidth,o=n.dilationDepth,s=n.dilationHeight,l=n.dilationWidth,c=n.padInfo.front,u=n.padInfo.left,h=n.padInfo.top,d=xL(n.outShape,e.dtype),f=this.readSync(e.dataId),p=this.readSync(t.dataId),m=d.values,g=0;g<n.batchSize;++g)for(var v=g*e.strides[0],y=g*d.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*d.strides[1],w=b*n.strideDepth-c,S=0;S<r;S++){var _=w+S*o;if(!(_<0||_>=n.inDepth))for(var E=S*t.strides[0],C=v+_*e.strides[1],k=0;k<n.outHeight;++k)for(var N=x+k*d.strides[2],A=k*n.strideHeight-h,T=0;T<i;T++){var I=A+T*s;if(!(I<0||I>=n.inHeight))for(var D=E+T*t.strides[1],R=C+I*e.strides[2],P=0;P<n.outWidth;++P)for(var j=N+P*n.outChannels,L=P*n.strideWidth-u,O=0;O<a;O++){var M=L+O*l;if(!(M<0||M>=n.inWidth))for(var F=D+O*t.strides[2],B=R+M*n.inChannels,U=F,z=0;z<n.inChannels;++z){for(var W=f[B+z],V=0;V<n.outChannels;++V)m[j+V]+=W*p[U+V];U+=n.outChannels}}}}return d.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){kV([e,t],"conv2dDerInput");for(var r=xL(n.inShape,"float32"),i=r.values,a=this.readSync(e.dataId),o=this.readSync(t.dataId),s=t.strides,l=s[0],c=s[1],u=s[2],h=n.batchSize,d=n.filterHeight,f=n.filterWidth,p=n.inChannels,m=n.inHeight,g=n.inWidth,v=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,S=n.dataFormat,_=d-1-n.padInfo.top,E=f-1-n.padInfo.left,C="channelsLast"===S,k=r.strides[0],N=C?r.strides[1]:r.strides[2],A=C?r.strides[2]:1,T=C?1:r.strides[1],I=e.strides[0],D=C?e.strides[1]:e.strides[2],R=C?e.strides[2]:1,P=C?1:e.strides[1],j=0;j<h;++j)for(var L=0;L<p;++L)for(var O=0;O<m;++O)for(var M=O-_,F=Math.max(0,Math.ceil(M/x)),B=Math.min(y,(d+M)/x),U=0;U<g;++U){for(var z=U-E,W=Math.max(0,Math.ceil(z/w)),V=Math.min(b,(f+z)/w),H=0,q=F;q<B;++q)for(var G=q*x-M,K=W;K<V;++K)for(var Y=I*j+D*q+R*K,X=l*(d-1-G)+c*(f-1-(K*w-z))+u*L,Q=0;Q<v;++Q)H+=a[Y+P*Q]*o[X+Q];i[k*j+N*O+A*U+T*L]=H}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=xL(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],s=a[1],l=a[2],c=a[3],u=this.readSync(e.dataId),h=e.strides,d=h[0],f=h[1],p=h[2],m=h[3],g=this.readSync(t.dataId),v=t.strides,y=v[0],b=v[1],x=v[2],w=v[3],S=n.batchSize,_=n.filterDepth,E=n.filterHeight,C=n.filterWidth,k=n.inChannels,N=n.inDepth,A=n.inHeight,T=n.inWidth,I=n.outChannels,D=n.outDepth,R=n.outHeight,P=n.outWidth,j=n.strideDepth,L=n.strideHeight,O=n.strideWidth,M=_-1-n.padInfo.front,F=E-1-n.padInfo.top,B=C-1-n.padInfo.left,U=0;U<S;++U)for(var z=0;z<k;++z)for(var W=0;W<N;++W)for(var V=W-M,H=Math.max(0,Math.ceil(V/j)),q=Math.min(D,(_+V)/j),G=0;G<A;++G)for(var K=G-F,Y=Math.max(0,Math.ceil(K/L)),X=Math.min(R,(E+K)/L),Q=0;Q<T;++Q){for(var $=Q-B,J=Math.max(0,Math.ceil($/O)),Z=Math.min(P,(C+$)/O),ee=0,te=H;te<q;++te)for(var ne=te*j-V,re=Y;re<X;++re)for(var ie=re*L-K,ae=J;ae<Z;++ae)for(var oe=d*U+f*te+p*re+m*ae,se=y*(_-1-ne)+b*(E-1-ie)+x*(C-1-(ae*O-$))+w*z,le=0;le<I;++le)ee+=u[oe+le]*g[se+le];i[o*U+s*W+l*G+c*Q+z]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){kV([e,t],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s="channelsLast"===n.dataFormat,l=xL(n.filterShape,"float32"),c=n.padInfo.left,u=n.padInfo.top,h=this.bufferSync(e),d=this.bufferSync(t),f=0;f<a;++f)for(var p=Math.max(0,Math.ceil((u-f)/r)),m=Math.min(n.outHeight,(n.inHeight+u-f)/r),g=0;g<o;++g)for(var v=Math.max(0,Math.ceil((c-g)/i)),y=Math.min(n.outWidth,(n.inWidth+c-g)/i),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,S=0;S<n.batchSize;++S)for(var _=p;_<m;++_)for(var E=f+_*r-u,C=v;C<y;++C){var k=g+C*i-c;w+=s?h.get(S,E,k,b)*d.get(S,_,C,x):h.get(S,b,E,k)*d.get(S,x,_,C)}l.set(w,f,g,b,x)}return l.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,s=n.filterHeight,l=n.filterWidth,c=xL(n.filterShape,"float32"),u=c.values,h=c.strides,d=h[0],f=h[1],p=h[2],m=h[3],g=this.readSync(t.dataId),v=t.strides,y=v[0],b=v[1],x=v[2],w=v[3],S=this.readSync(e.dataId),_=e.strides,E=_[0],C=_[1],k=_[2],N=_[3],A=n.padInfo.front,T=n.padInfo.left,I=n.padInfo.top,D=0;D<o;++D)for(var R=Math.max(0,Math.ceil((A-D)/r)),P=Math.min(n.outDepth,(n.inDepth+A-D)/r),j=D*d,L=0;L<s;++L)for(var O=Math.max(0,Math.ceil((I-L)/i)),M=Math.min(n.outHeight,(n.inHeight+I-L)/i),F=L*f+j,B=0;B<l;++B)for(var U=Math.max(0,Math.ceil((T-B)/a)),z=Math.min(n.outWidth,(n.inWidth+T-B)/a),W=B*p+F,V=0;V<n.inChannels;++V)for(var H=V*m+W,q=0;q<n.outChannels;++q){for(var G=0,K=0;K<n.batchSize;++K)for(var Y=K*E,X=K*y,Q=R;Q<P;++Q)for(var $=(D+Q*r-A)*C+Y,J=Q*b+X,Z=O;Z<M;++Z)for(var ee=(L+Z*i-I)*k+$,te=Z*x+J,ne=U;ne<z;++ne){var re=ne*w+te;G+=S[(B+ne*a-T)*N+ee+V]*g[re+q]}u[H+q]=G}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return i&&(s=this.add(s,i)),a&&(s=NV(this,s,a,o)),s},t.prototype.depthwiseConv2D=function(e,t,n){kV([e,t],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,u=xL(n.outShape,e.dtype),h=this.readSync(e.dataId),d=this.readSync(t.dataId),f=u.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],g=p*u.strides[0],v=0;v<n.outHeight;++v)for(var y=g+v*u.strides[1],b=v*n.strideHeight-s,x=0;x<r;++x){var w=b+x*a;if(!(w<0||w>=n.inHeight))for(var S=x*t.strides[0],_=m+w*e.strides[1],E=0;E<n.outWidth;++E)for(var C=y+E*u.strides[2],k=E*n.strideWidth-l,N=0;N<i;++N){var A=k+N*o;if(!(A<0||A>=n.inWidth))for(var T=S+N*t.strides[1],I=_+A*n.inChannels,D=C,R=T,P=0;P<n.inChannels;++P){for(var j=h[I+P],L=0;L<c;++L)f[D+L]+=j*d[R+L];D+=c,R+=c}}}return u.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){kV([e,t],"depthwiseConv2DDerInput");for(var r=xL(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],s=a[1],l=a[2],c=this.readSync(e.dataId),u=e.strides,h=u[0],d=u[1],f=u[2],p=this.readSync(t.dataId),m=t.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,S=n.inChannels,_=n.inHeight,E=n.inWidth,C=n.outChannels,k=n.outHeight,N=n.outWidth,A=n.strideHeight,T=n.strideWidth,I=x-1-n.padInfo.top,D=w-1-n.padInfo.left,R=C/S,P=0;P<b;++P)for(var j=0;j<S;++j)for(var L=0;L<_;++L)for(var O=L-I,M=Math.max(0,Math.ceil(O/A)),F=Math.min(k,(x+O)/A),B=0;B<E;++B){for(var U=B-D,z=Math.max(0,Math.ceil(U/T)),W=Math.min(N,(w+U)/T),V=0,H=M;H<F;++H)for(var q=H*A-O,G=z;G<W;++G)for(var K=h*P+d*H+f*G,Y=g*(x-1-q)+v*(w-1-(G*T-U))+y*j,X=0;X<R;++X)V+=c[K+(j*R+X)]*p[Y+X];i[o*P+s*L+l*B+j]=V}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){kV([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=xL(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,u=n.outChannels/n.inChannels,h=this.bufferSync(e),d=this.bufferSync(t),f=0;f<a;++f)for(var p=Math.max(0,Math.ceil((c-f)/r)),m=Math.min(n.outHeight,(n.inHeight+c-f)/r),g=0;g<o;++g)for(var v=Math.max(0,Math.ceil((l-g)/i)),y=Math.min(n.outWidth,(n.inWidth+l-g)/i),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/u),w=b%u,S=0,_=0;_<n.batchSize;++_)for(var E=p;E<m;++E)for(var C=f+E*r-c,k=v;k<y;++k){var N=g+k*i-l;S+=h.get(_,C,N,x)*d.get(_,E,k,b)}s.set(S,f,g,x,w)}return s.toTensor()},t.prototype.tile=function(e,t){return kV(e,"tile"),KO(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){kV(e,"pad");var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),i=t.map(function(e){return e[0]}),a=this.bufferSync(e),o=xL(r,e.dtype);0!==n&&o.values.fill(n);for(var s=0;s<e.size;s++){var l=a.indexToLoc(s),c=l.map(function(e,t){return e+i[t]});o.set.apply(o,[a.get.apply(a,l)].concat(c))}return o.toTensor()},t.prototype.transpose=function(e,t){kV(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var i=this.readSync(e.dataId),a=xL(n,e.dtype),o=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=o.indexToLoc(r),l=new Array(s.length),c=0;c<l.length;c++)l[c]=s[t[c]];var u=a.locToIndex(l);a.values[u]=i[r]}return a.toTensor()},t.prototype.gather=function(e,t,n){kV([e,t],"gather");var r=e.shape.slice(),i=this.readSync(t.dataId);r[n]=i.length;for(var a=xL(r,e.dtype),o=this.bufferSync(e),s=0;s<a.size;++s){var l=a.indexToLoc(s),c=l.slice();c[n]=i[l[n]];var u=o.locToIndex(c);a.values[s]=o.values[u]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){kV([e],"batchToSpaceND");var r=t.reduce(function(e,t){return e*t}),i=KL(e.shape,t,r),a=YL(i.length,t.length),o=XL(e.shape,t,r),s=QL(n,t.length),l=$L(o,n,t.length);return e.reshape(i).transpose(a).reshape(o).slice(s,l)},t.prototype.spaceToBatchND=function(e,t,n){kV([e],"spaceToBatchND");var r=t.reduce(function(e,t){return e*t}),i=[[0,0]];i.push.apply(i,n);for(var a=1+t.length;a<e.shape.length;++a)i.push([0,0]);var o=e.pad(i),s=KL(o.shape,t,r,!1),l=YL(s.length,t.length,!1),c=XL(o.shape,t,r,!1);return o.reshape(s).transpose(l).reshape(c)},t.prototype.pool=function(e,t,n){kV(e,"pool");for(var r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,u=t.padInfo.left,h="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,d=this.readSync(e.dataId),f=xL(t.outShape,e.dtype),p=f.values,m=t.outShape[1]*t.outShape[2]*t.outShape[3],g=t.outShape[2]*t.outShape[3],v=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*m,x=y*e.strides[0],w=0;w<t.inChannels;++w)for(var S=0;S<t.outHeight;++S)for(var _=S*r-c,E=Math.max(0,_),C=Math.min(t.inHeight,s+_),k=b+S*g,N=0;N<t.outWidth;++N){for(var A=N*i-u,T=Math.max(0,A),I=Math.min(t.inWidth,l+A),D=h,R=0,P=0,j=E;j<C;j+=a){for(var L=x+j*e.strides[1],O=T;O<I;O+=o){var M=d[L+O*e.strides[2]+w];"max"===n&&M>D?D=M:"avg"===n&&(R+=M,P++)}if(isNaN(D))break}p[k+N*v+w]="avg"===n?R/P:D}return f.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=xL(t.outShape,"int32"),r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,u=t.padInfo.left,h=this.bufferSync(e),d=0;d<t.batchSize;++d)for(var f=0;f<t.inChannels;++f)for(var p=0;p<t.outHeight;++p){for(var m=p*r-c,g=m;g<0;)g+=a;for(var v=Math.min(t.inHeight,s+m),y=0;y<t.outWidth;++y){for(var b=y*i-u,x=b;x<0;)x+=o;for(var w=Math.min(t.inWidth,l+b),S=Number.NEGATIVE_INFINITY,_=-1,E=g;E<v;E+=a)for(var C=E-m,k=x;k<w;k+=o){var N=k-b,A=h.get(d,E,k,f);A>S&&(S=A,_=C*l+N)}n.set(_,d,p,y,f)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){kV([t,n],"maxPoolBackprop");for(var i=this.maxPoolPositions(t,r),a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,u=r.effectiveFilterWidth,h=u-1-r.padInfo.left,d=c-1-r.padInfo.top,f=xL(t.shape,"float32"),p=this.bufferSync(i),m=this.bufferSync(e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-d,w=b-h,S=0,_=0;_<c;_+=s){var E=(x+_)/a;if(!(E<0||E>=r.outHeight||Math.floor(E)!==E))for(var C=0;C<u;C+=l){var k=(w+C)/o;if(!(k<0||k>=r.outWidth||Math.floor(k)!==k)){var N=c*u-1-p.get(g,E,k,v)===_*u+C?1:0;0!==N&&(S+=m.get(g,E,k,v)*N)}}}f.set(S,g,y,b,v)}return f.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){kV([e,t],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,h=u-1-n.padInfo.left,d=c-1-n.padInfo.top,f=xL(t.shape,"float32"),p=1/(a*o),m=this.bufferSync(e),g=0;g<n.batchSize;++g)for(var v=0;v<n.inChannels;++v)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-d,w=b-h,S=0,_=0;_<c;_+=s){var E=(x+_)/r;if(!(E<0||E>=n.outHeight||Math.floor(E)!==E))for(var C=0;C<u;C+=l){var k=(w+C)/i;k<0||k>=n.outWidth||Math.floor(k)!==k||(S+=m.get(g,E,k,v))}}f.set(S*p,g,y,b,v)}return f.toTensor()},t.prototype.pool3d=function(e,t,n){kV(e,"pool3d");for(var r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(e.dataId),v=xL(t.outShape,e.dtype),y=v.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],S=t.outShape[4],_=0;_<t.batchSize;++_)for(var E=_*b,C=_*e.strides[0],k=0;k<t.inChannels;++k)for(var N=0;N<t.outDepth;++N){for(var A=N*r-d,T=A;T<0;)T+=o;for(var I=Math.min(t.inDepth,c+A),D=E+N*x,R=0;R<t.outHeight;++R){for(var P=R*i-f,j=P;j<0;)j+=s;for(var L=Math.min(t.inHeight,u+P),O=D+R*w,M=0;M<t.outWidth;++M){for(var F=M*a-p,B=F;B<0;)B+=l;for(var U=Math.min(t.inWidth,h+F),z=O+M*S,W=m,V=0,H=0,q=T;q<I;q+=o){for(var G=C+q*e.strides[1],K=j;K<L;K+=s){for(var Y=G+K*e.strides[2],X=B;X<U;X+=l){var Q=g[Y+X*e.strides[3]+k];if("max"===n&&Q>W?W=Q:"avg"===n&&(V+=Q,H++),isNaN(W))break}if(isNaN(W))break}if(isNaN(W))break}y[z+k]="avg"===n?V/H:W}}}return v.toTensor()},t.prototype.avgPool3d=function(e,t){return kV(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){kV([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,s=n.filterHeight,l=n.filterWidth,c=n.dilationDepth,u=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,f=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=d-1-n.padInfo.front,g=p-1-n.padInfo.left,v=f-1-n.padInfo.top,y=xL(t.shape,"float32"),b=1/(o*s*l),x=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var S=0;S<n.inChannels;++S)for(var _=0;_<n.inDepth;++_)for(var E=0;E<n.inHeight;++E)for(var C=0;C<n.inWidth;++C){for(var k=_-m,N=E-v,A=C-g,T=0,I=0;I<d;I+=c){var D=(k+I)/r;if(!(D<0||D>=n.outDepth||Math.floor(D)!==D))for(var R=0;R<f;R+=u){var P=(N+R)/i;if(!(P<0||P>=n.outHeight||Math.floor(P)!==P))for(var j=0;j<p;j+=h){var L=(A+j)/a;L<0||L>=n.outWidth||Math.floor(L)!==L||(T+=x.get(w,D,P,L,S))}}}y.set(T*b,w,_,E,C,S)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return kV(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=xL(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m=this.bufferSync(e),g=0;g<t.batchSize;++g)for(var v=0;v<t.inChannels;++v)for(var y=0;y<t.outDepth;++y){for(var b=y*r-d,x=b;x<0;)x+=o;for(var w=Math.min(t.inDepth,c+b),S=0;S<t.outHeight;++S){for(var _=S*i-f,E=_;E<0;)E+=s;for(var C=Math.min(t.inHeight,u+_),k=0;k<t.outWidth;++k){for(var N=k*a-p,A=N;A<0;)A+=l;for(var T=Math.min(t.inWidth,h+N),I=Number.NEGATIVE_INFINITY,D=-1,R=x;R<w;R+=o)for(var P=R-b,j=E;j<C;j+=s)for(var L=j-_,O=A;O<T;O+=l){var M=O-N,F=m.get(g,R,j,O,v);F>=I&&(I=F,D=P*u*h+L*u+M)}n.set(D,g,y,S,k,v)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){kV([t,n],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(t,r),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,c=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterDepth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=h-1-r.padInfo.front,m=f-1-r.padInfo.left,g=d-1-r.padInfo.top,v=xL(t.shape,"float32"),y=this.bufferSync(i),b=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var S=0;S<r.inDepth;++S)for(var _=0;_<r.inHeight;++_)for(var E=0;E<r.inWidth;++E){for(var C=S-p,k=_-g,N=E-m,A=0,T=0;T<h;T+=l){var I=(C+T)/a;if(!(I<0||I>=r.outDepth||Math.floor(I)!==I))for(var D=0;D<d;D+=c){var R=(k+D)/o;if(!(R<0||R>=r.outHeight||Math.floor(R)!==R))for(var P=0;P<f;P+=u){var j=(N+P)/s;if(!(j<0||j>=r.outWidth||Math.floor(j)!==j)){var L=h*d*f-1-y.get(x,I,R,j,w)===T*d*f+D*f+P?1:0;0!==L&&(A+=b.get(x,I,R,j,w)*L)}}}}v.set(A,x,S,_,E,w)}return v.toTensor()},t.prototype.cast=function(e,t){return DO(e,t,this)},t.prototype.reshape=function(e,t){return RO(e,t)},t.prototype.avgPool=function(e,t){return kV(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){kV(e,"resizeBilinear");for(var i=e.shape,a=i[0],o=i[1],s=i[2],l=i[3],c=this.readSync(e.dataId),u=new Float32Array(uR([a,t,n,l])),h=[r&&t>1?o-1:o,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=0,p=h[0]/d[0],m=h[1]/d[1],g=0;g<a;g++)for(var v=0;v<t;v++)for(var y=p*v,b=Math.floor(y),x=y-b,w=Math.min(o-1,Math.ceil(y)),S=g*e.strides[0]+b*e.strides[1],_=g*e.strides[0]+w*e.strides[1],E=0;E<n;E++)for(var C=m*E,k=Math.floor(C),N=C-k,A=Math.min(s-1,Math.ceil(C)),T=S+k*e.strides[2],I=_+k*e.strides[2],D=S+A*e.strides[2],R=_+A*e.strides[2],P=0;P<l;P++){var j=c[T+P],L=c[I+P],O=j+(c[D+P]-j)*N,M=O+(L+(c[R+P]-L)*N-O)*x;u[f++]=M}return Vj(u,[a,t,n,l])},t.prototype.resizeBilinearBackprop=function(e,t,n){kV([e,t],"resizeBilinearBackprop");for(var r=t.shape,i=r[0],a=r[1],o=r[2],s=r[3],l=e.shape,c=l[1],u=l[2],h=new Float32Array(i*a*o*s),d=[n&&c>1?a-1:a,n&&u>1?o-1:o],f=[n&&c>1?c-1:c,n&&u>1?u-1:u],p=d[0]/f[0],m=d[1]/f[1],g=this.readSync(e.dataId),v=0,y=0;y<i;y++)for(var b=y*t.strides[0],x=0;x<c;x++)for(var w=x*p,S=Math.floor(w),_=Math.min(Math.ceil(w),a-1),E=b+S*t.strides[1],C=b+_*t.strides[1],k=w-S,N=1-k,A=0;A<u;A++)for(var T=A*m,I=Math.floor(T),D=Math.min(Math.ceil(T),o-1),R=T-I,P=1-R,j=E+I*t.strides[2],L=E+D*t.strides[2],O=C+I*t.strides[2],M=C+D*t.strides[2],F=N*P,B=N*R,U=k*P,z=k*R,W=0;W<s;W++){var V=g[v++];h[j+W]+=V*F,h[L+W]+=V*B,h[O+W]+=V*U,h[M+W]+=V*z}return Xj(h,[i,o,a,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){kV(e,"resizeNearestNeighbor");for(var i=e.shape,a=i[0],o=i[1],s=i[2],l=i[3],c=this.readSync(e.dataId),u=new Float32Array(a*t*n*l),h=[r&&t>1?o-1:o,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=h[0]/d[0],p=h[1]/d[1],m=0,g=0;g<a;g++)for(var v=g*e.strides[0],y=0;y<t;y++)for(var b=f*y,x=v+Math.min(o-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var S=p*w,_=x+Math.min(s-1,r?Math.round(S):Math.floor(S))*e.strides[2],E=0;E<l;E++){var C=c[_+E];u[m++]=C}return Vj(u,[a,t,n,l],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){kV([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,i=r[0],a=r[1],o=r[2],s=r[3],l=e.shape,c=l[1],u=l[2],h=new Float32Array(i*a*o*s),d=this.readSync(e.dataId),f=[n&&c>1?a-1:a,n&&u>1?o-1:o],p=[n&&c>1?c-1:c,n&&u>1?u-1:u],m=f[0]/p[0],g=f[1]/p[1],v=1/m,y=1/g,b=2*Math.ceil(v)+2,x=2*Math.ceil(y)+2,w=0;w<i;w++)for(var S=w*t.strides[0],_=0;_<a;_++)for(var E=S+_*t.strides[1],C=Math.floor(_*v),k=Math.floor(C-b/2),N=0;N<o;N++)for(var A=E+N*t.strides[2],T=Math.floor(N*y),I=Math.floor(T-x/2),D=0;D<s;D++){for(var R=0,P=0;P<b;P++){var j=P+k;if(!(j<0||j>=c)){var L=S+j*e.strides[1],O=j*m;if(_===Math.min(a-1,n?Math.round(O):Math.floor(O)))for(var M=0;M<x;M++){var F=M+I;if(!(F<0||F>=u)){var B=L+F*e.strides[2],U=F*g;N===Math.min(o-1,n?Math.round(U):Math.floor(U))&&(R+=d[B+D])}}}}h[A+D]=R}return Xj(h,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,i,a){kV([e,t,n,i,a],"batchNorm");for(var o=this.readSync(e.dataId),s=this.readSync(t.dataId),l=this.readSync(n.dataId),c=i?this.readSync(i.dataId):new Float32Array([1]),u=a?this.readSync(a.dataId):new Float32Array([0]),h=new Float32Array(o.length),d=u.length,f=c.length,p=l.length,m=s.length,g=0,v=0,y=0,b=0,x=0;x<o.length;++x)h[x]=u[g++]+(o[x]-s[v++])*c[y++]/Math.sqrt(l[b++]+r),g>=d&&(g=0),v>=m&&(v=0),y>=f&&(y=0),b>=p&&(b=0);return Xj(h,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,i){kV(e,"localResponseNormalization4D");var a=e.shape[3],o=a-1,s=this.readSync(e.dataId),l=e.size,c=new Float32Array(l);function u(e){for(var n=e%a,r=e-n+Math.max(0,n-t),i=e-n+Math.min(n+t,o),l=0;r<=i;r++){var c=s[r];l+=c*c}return l}for(var h=0;h<l;h++){var d=u(h),f=s[h]*Math.pow(n+r*d,-i);c[h]=f}return Xj(c,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,i,a,o){kV(e,"LRNGrad");for(var s=e.shape[3],l=this.readSync(e.dataId),c=this.readSync(t.dataId),u=this.readSync(n.dataId),h=new Float32Array(e.size),d=e.size,f=0;f<d;f++){for(var p=f%s,m=f-p+Math.max(0,p-r),g=f-p+Math.min(s,p+r+1),v=0,y=m;y<g;y++)v+=Math.pow(c[y],2);for(v=a*v+i,y=m;y<g;y++){var b=-2*a*o*c[y]*u[f]/v;f===y&&(b+=Math.pow(v,-o)),b*=l[f],h[y]+=b}}return Xj(h,e.shape)},t.prototype.multinomial=function(e,t,n,r){kV(e,"multinomial");for(var i=t?e:hO(e),a=i.shape[0],o=i.shape[1],s=$j([a,n],"int32"),l=this.readSync(s.dataId),c=this.readSync(i.dataId),u=0;u<a;++u){var h=u*o,d=new Float32Array(o-1);d[0]=c[h];for(var f=1;f<d.length;++f)d[f]=d[f-1]+c[h+f];for(var p=gL(r.toString()),m=u*n,g=0;g<n;++g){var v=p();l[m+g]=d.length;for(var y=0;y<d.length;y++)if(v<d[y]){l[m+g]=y;break}}}return s},t.prototype.oneHot=function(e,t,n,r){kV(e,"oneHot");var i=new Float32Array(e.size*t);i.fill(r);for(var a=this.readSync(e.dataId),o=0;o<e.size;++o)a[o]>=0&&a[o]<t&&(i[o*t+a[o]]=n);return Kj(i,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,i){return kV(e,"nonMaxSuppression"),UO(this.readSync(e.dataId),this.readSync(t.dataId),n,r,i)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],i=xL(e.shape,"float32"),a=xL(e.shape,"float32"),o=zj(e).as2D(n,r),s=Wj(e).as2D(n,r),l=0;l<n;l++)for(var c=o.slice([l,0],[1,r]),u=s.slice([l,0],[1,r]),h=Uj(c,u),d=this.readSync(this.fftImpl(h,t).dataId),f=0;f<r;f++){var p=LO(d,f);i.values[l*r+f]=p.real,a.values[l*r+f]=p.imag}return Uj(i.toTensor(),a.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(i=Uj(zj(i).div(qj(r)),Wj(i).div(qj(r)))),i}var a=this.readSync(e.dataId),o=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(a,r,t));return Uj(o.real,o.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),i=t/2,a=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),o=Uj(a.real,a.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),l=Uj(s.real,s.imag).as1D();o=this.fftRadix2(o,i,n),l=this.fftRadix2(l,i,n);var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),i=0;i<Math.ceil(e/2);i++){var a=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}(t,n),u=Uj(c.real,c.imag).mul(l),h=o.add(u),d=o.sub(u),f=zj(h).concat(zj(d)),p=Wj(h).concat(Wj(d));return Uj(f,p).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var a=0,o=0,s=0;s<t;s++){var l=MO(i*s,t,n),c=LO(e,s);a+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(a/=t,o/=t),OO(r,a,o,i)}return r},t.prototype.depthToSpace=function(e,t,n){oR("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),oR(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});for(var r=e.shape[0],i=e.shape[1],a=e.shape[2],o=e.shape[3],s=i*t,l=a*t,c=o/(t*t),u=this.readSync(e.dataId),h=new Float32Array(r*s*l*c),d=0,f=0;f<r;++f)for(var p=0;p<s;++p)for(var m=Math.floor(p/t),g=p%t,v=0;v<l;++v)for(var y=Math.floor(v/t),b=(g*t+v%t)*c,x=0;x<c;++x){var w=x+b+o*(y+a*(m+i*f));h[d++]=u[w]}return Xj(h,[r,s,l,c])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var i=yO(e.shape,t.shape),a=xL(i,n),o=this.readSync(e.dataId),s=this.readSync(t.dataId),l=gO(e.shape,i),c=gO(t.shape,i),u=a.values;if(l.length+c.length===0)for(var h=0;h<u.length;++h)u[h]=r(o[h%o.length],s[h%s.length]);else{var d=this.bufferSync(e),f=this.bufferSync(t),p=function(n){var i=a.indexToLoc(n),h=i.slice(-e.rank);l.forEach(function(e){return h[e]=0});var p=d.locToIndex(h),m=i.slice(-t.rank);c.forEach(function(e){return m[e]=0});var g=f.locToIndex(m);u[n]=r(o[p],s[g])};for(h=0;h<u.length;++h)p(h)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=yO(e.shape,t.shape),i=xL(r,"float32"),a=xL(r,"float32"),o=this.readSync(e.dataId),s=this.readSync(t.dataId),l=gO(e.shape,r),c=gO(t.shape,r),u=i.values,h=a.values;if(l.length+c.length===0)for(var d=0;d<u.length;d++){var f=d%o.length,p=d%s.length,m=n(o[2*f],o[2*f+1],s[2*p],s[2*p+1]);u[d]=m.real,h[d]=m.imag}else{var g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),v=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var a=i.indexToLoc(r),d=a.slice(-e.rank);l.forEach(function(e){return d[e]=0});var f=g.locToIndex(d),p=a.slice(-t.rank);c.forEach(function(e){return p[e]=0});var m=v.locToIndex(p),y=n(o[2*f],o[2*f+1],s[2*m],s[2*m+1]);u[r]=y.real,h[r]=y.imag};for(d=0;d<u.length;d++)y(d)}return this.complex(i.toTensor(),a.toTensor())},t.prototype.split=function(e,t,n){return GO(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,i,a){for(var o=e.shape,s=o[0],l=o[1],c=o[2],u=o[3],h=t.shape[0],d=r[0],f=r[1],p=xL([h,d,f,u],"float32"),m=this.readSync(t.dataId),g=this.readSync(n.dataId),v=this.readSync(e.dataId),y=e.strides,b=p.strides,x=0;x<h;x++){var w=4*x,S=m[w],_=m[w+1],E=m[w+2],C=m[w+3],k=g[x];if(!(k>=s))for(var N=d>1?(E-S)*(l-1)/(d-1):0,A=f>1?(C-_)*(c-1)/(f-1):0,T=0;T<d;T++){var I=d>1?S*(l-1)+T*N:.5*(S+E)*(l-1);if(I<0||I>l-1)for(var D=0;D<f;D++)for(var R=0;R<u;R++){var P=R+D*b[2]+T*b[1]+x*b[0];p.values[P]=a}else if("bilinear"===i){var j=Math.floor(I),L=Math.ceil(I),O=I-j;for(D=0;D<f;D++)if((q=f>1?_*(c-1)+D*A:.5*(_+C)*(c-1))<0||q>c-1)for(R=0;R<u;R++)P=R+D*b[2]+T*b[1]+x*b[0],p.values[P]=a;else{var M=Math.floor(q),F=Math.ceil(q),B=q-M;for(R=0;R<u;R++){var U=v[P=R+M*y[2]+j*y[1]+k*y[0]],z=v[P=R+F*y[2]+j*y[1]+k*y[0]],W=v[P=R+M*y[2]+L*y[1]+k*y[0]],V=U+(z-U)*B,H=W+(v[P=R+F*y[2]+L*y[1]+k*y[0]]-W)*B;P=R+D*b[2]+T*b[1]+x*b[0],p.values[P]=V+(H-V)*O}}}else for(D=0;D<f;++D){var q;if((q=f>1?_*(c-1)+D*A:.5*(_+C)*(c-1))<0||q>c-1)for(R=0;R<u;R++)P=R+D*b[2]+T*b[1]+x*b[0],p.values[P]=a;else{var G=Math.round(q),K=Math.round(I);for(R=0;R<u;R++){var Y=R+G*y[2]+K*y[1]+k*y[0],X=R+D*b[2]+T*b[1]+x*b[0];p.values[X]=v[Y]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var i=nO(0,e,n),a=i.sliceRank,o=i.numUpdates,s=i.sliceSize,l=i.strides,c=i.outputSize;return this.scatter(e,t,n,c,s,o,a,l,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=JL(e,t),a=i[0],o=i[1],s=i[2],l=i[3];if(0===o)return Vj([],a,e.dtype);for(var c=new QR([o,s],e.dtype),u=this.readSync(t.dataId),h=this.readSync(e.dataId),d=0;d<o;d++){for(var f=[],p=0,m=0;m<r;m++){var g=u[d*r+m];p+=g*l[m],f.push(g)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+f+" does not index into "+e.shape);for(var v=0;v<s;v++)c.values[d*s+v]=h[p*s+v]}return c.toTensor().reshape(a)},t.prototype.scatterND=function(e,t,n){var r=nO(0,e,n),i=r.sliceRank,a=r.numUpdates,o=r.sliceSize,s=r.strides,l=r.outputSize,c=qj(0);return this.scatter(e,t,n,l,o,a,i,s,c,!0)},t.prototype.fill=function(e,t,n){var r=wR(n=n||DR(t),uR(e));return r.fill(t),gP.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=wR(e.dtype,uR(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return PO(e,t,n)},t.prototype.scatter=function(e,t,n,r,i,a,o,s,l,c){var u=[r/i,i],h=this.readSync(e.dataId),d=this.readSync(t.dataId);if(0===r)return Vj([],n,t.dtype);var f=new QR(u,t.dtype);f.values.fill(this.readSync(l.dataId)[0]);for(var p=0;p<a;p++){for(var m=[],g=0,v=0;v<o;v++){var y=h[p*o+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/i)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<i;b++)c?f.values[g*i+b]+=d[p*i+b]:f.values[g*i+b]=0===t.rank?d[0]:d[p*i+b]}return f.toTensor().reshape(n)},t}(pO);gP.registerBackend("cpu",function(){return new AV},1);for(var TV=0,IV=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t,a=i.boxes,o=i.scores,s=r,l=s.maxOutputSize,c=s.iouThreshold,u=s.scoreThreshold,h=s.softNmsSigma,d=n;kV(a,"NonMaxSuppressionWithScore");var f=zO(d.data.get(a.dataId).values,d.data.get(o.dataId).values,l,c,u,h);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=n;kV(r,"square");for(var a=i.data.get(r.dataId).values,o=new Float32Array(a.length),s=0;s<a.length;++s){var l=a[s];o[s]=l*l}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:zB,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,i=r.a,a=r.b,o=n;kV([i,a],zB);var s=o.data.get(i.dataId).values,l=o.data.get(a.dataId).values,c=function(e,t,n,r,i,a){var o=yO(e,t),s=o.length,l=jR(o),c=xR(i,uR(o)),u=e.length,h=t.length,d=jR(e),f=jR(t),p=gO(e,o),m=gO(t,o);if(p.length+m.length===0)for(var g=0;g<c.length;++g)c[g]=a(n[g%n.length],r[g%r.length]);else{var v=function(e){var t=HR(e,s,l),i=t.slice(-u);p.forEach(function(e){return i[e]=0});var o=VR(i,u,d),g=t.slice(-h);m.forEach(function(e){return g[e]=0});var v=VR(g,h,f);c[e]=a(n[o],r[v])};for(g=0;g<c.length;++g)v(g)}return[c,o]}(i.shape,a.shape,s,l,i.dtype,function(e,t){var n=e-t;return n*n}),u=c[0],h=c[1];return{dataId:o.write(u,h,i.dtype),shape:h,dtype:i.dtype}}}];TV<IV.length;TV++)ZD(IV[TV]);for(var DV,RV=function(e){this.variableNames=["A"];var t=tM(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},PV=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=tM(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},jV=0,LV=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.pixels,a=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,l=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=l[0],u=l[1],h=[u,c],d=[u,c,a];(s||o)&&(null==DV&&(DV=document.createElement("canvas").getContext("2d")),DV.canvas.width=c,DV.canvas.height=u,DV.drawImage(i,0,0,c,u),i=DV.canvas);var f=n.makeTensorInfo(h,"int32");n.texData.get(f.dataId).usage=xP.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);var p=KD().getBool("WEBGL_PACK")?new PV(d):new RV(d),m=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;Ej("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=t,a=i.boxes,o=i.scores,s=r,l=s.maxOutputSize,c=s.iouThreshold,u=s.scoreThreshold,h=s.softNmsSigma,d=n,f=zO(d.readSync(a.dataId),d.readSync(o.dataId),l,c,u,h);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=n,a=new hB(r.shape,"return x * x;");return i.runWebGLProgram(a,[r],r.dtype)}},{kernelName:zB,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,i=r.a,a=r.b,o=n,s=KD().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TM("return (a - b) * (a - b);",i.shape,a.shape):new NM("return (a - b) * (a - b);",i.shape,a.shape);return o.compileAndRun(s,[i,a])}}];jV<LV.length;jV++)ZD(LV[jV]);for(var OV=0,MV=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:zB,gradFunc:function(e,t){var n=t[0],r=t[1],i=qj(2);return{a:function(){return rz(e,rz(i,lz(n,r)))},b:function(){return rz(e,rz(i,lz(r,n)))}}}}];OV<MV.length;OV++)eR(MV[OV]);var FV=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();KD().get("IS_BROWSER")&&KD().setPlatform("browser",new FV);var BV,UV=function(){function e(){this.util=n(745),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=KD().global.fetch?KD().global.fetch(e,t):(null==BV&&(BV=n(7318)),BV(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();KD().get("IS_NODE")&&KD().setPlatform("node",new UV);var zV={float32:4,int32:4,uint16:2,uint8:1,bool:1};function WV(e,t){for(var n={},r=0,i=function(t){var i=t.name,a=t.dtype,o=t.shape,s=uR(o),l=void 0;if("quantization"in t){var c=t.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var u=zV[c.dtype],h=e.slice(r,r+s*u),d="uint8"===c.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===a)l=Float32Array.from(d,function(e){return e*c.scale+c.min});else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);l=Int32Array.from(d,function(e){return Math.round(e*c.scale+c.min)})}r+=s*u}else if("string"===a){var f=uR(t.shape);l=[];for(var p=0;p<f;p++){var m=new Uint32Array(e.slice(r,r+4))[0];r+=4;var g=new Uint8Array(e.slice(r,r+m));l.push(g),r+=m}}else{var v=zV[a];if(h=e.slice(r,r+s*v),"float32"===a)l=new Float32Array(h);else if("int32"===a)l=new Int32Array(h);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);l=new Uint8Array(h)}r+=s*v}n[i]=Vj(l,o,a)},a=0,o=t;a<o.length;a++)i(o[a]);return n}function VV(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});var r=new Uint8Array(t),i=0;return n.forEach(function(e){r.set(new Uint8Array(e.buffer),i),i+=e.byteLength}),r.buffer}var HV="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function qV(e){return HV?Buffer.byteLength(e):new Blob([e]).size}function GV(e){var t=0;e.forEach(function(e){t+=e.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function KV(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function YV(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:qV(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:qV(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var XV=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var i=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(e){var n=e(t,r);null!==n&&i.push(n)}),i},e}(),QV="://",$V=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){oR(null!=t,function(){return"scheme must not be undefined or null."}),t.endsWith(QV)&&(t=t.slice(0,t.indexOf(QV))),oR(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();oR(null==r.managers[t],function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function JV(e){if(-1===e.indexOf(QV))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+$V.getSchemes().join(","));return{scheme:e.split(QV)[0],path:e.split(QV)[1]}}function ZV(e,t,n){return void 0===n&&(n=!1),HD(this,void 0,void 0,function(){var r,i,a,o,s,l,c,u,h;return qD(this,function(d){switch(d.label){case 0:return oR(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),oR((r=XV.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),oR(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),i=r[0],oR((a=XV.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),oR(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),o=a[0],s=JV(e).scheme,l=JV(e).path,c=s===JV(e).scheme,[4,i.load()];case 1:return u=d.sent(),n&&c?[4,$V.getManager(s).removeModel(l)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,o.save(u)];case 4:return h=d.sent(),!n||c?[3,6]:[4,$V.getManager(s).removeModel(l)];case 5:d.sent(),d.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var eH="models_store",tH="model_info_store";function nH(){if(!KD().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function rH(e){var t=e.result;t.createObjectStore(eH,{keyPath:"modelPath"}),t.createObjectStore(tH,{keyPath:"modelPath"})}var iH=function(){function e(e){if(this.indexedDB=nH(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return HD(this,void 0,void 0,function(){return qD(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},e.prototype.load=function(){return HD(this,void 0,void 0,function(){return qD(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(e,t){var n=this;return new Promise(function(e,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return rH(i)},i.onsuccess=function(){var a=i.result;if(null==t){var o=a.transaction(eH,"readonly"),s=o.objectStore(eH).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return a.close(),r(s.error)},o.oncomplete=function(){return a.close()}}else{var l,c=YV(t),u=a.transaction(tH,"readwrite"),h=u.objectStore(tH),d=h.put({modelPath:n.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var i=(l=a.transaction(eH,"readwrite")).objectStore(eH).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});i.onsuccess=function(){return e({modelArtifactsInfo:c})},i.onerror=function(e){var t=(h=u.objectStore(tH)).delete(n.modelPath);t.onsuccess=function(){return a.close(),r(i.error)},t.onerror=function(e){return a.close(),r(i.error)}}},d.onerror=function(e){return a.close(),r(d.error)},u.oncomplete=function(){null==l?a.close():l.oncomplete=function(){return a.close()}}}},i.onerror=function(e){return r(i.error)}})},e.URL_SCHEME="indexeddb://",e}(),aH=function(e){return KD().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(iH.URL_SCHEME)?(t=e.slice(iH.URL_SCHEME.length),new iH(t)):null;var t};XV.registerSaveRouter(aH),XV.registerLoadRouter(aH);var oH=function(){function e(){this.indexedDB=nH()}return e.prototype.listModels=function(){return HD(this,void 0,void 0,function(){var e=this;return qD(this,function(t){return[2,new Promise(function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return rH(r)},r.onsuccess=function(){var e=r.result,i=e.transaction(tH,"readonly"),a=i.objectStore(tH).getAll();a.onsuccess=function(){for(var e={},n=0,r=a.result;n<r.length;n++){var i=r[n];e[i.modelPath]=i.modelArtifactsInfo}t(e)},a.onerror=function(t){return e.close(),n(a.error)},i.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}})]})})},e.prototype.removeModel=function(e){return HD(this,void 0,void 0,function(){var t=this;return qD(this,function(n){var r;return e=(r=e).startsWith(iH.URL_SCHEME)?r.slice(iH.URL_SCHEME.length):r,[2,new Promise(function(n,r){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return rH(i)},i.onsuccess=function(){var t,a=i.result,o=a.transaction(tH,"readwrite"),s=o.objectStore(tH),l=s.get(e);l.onsuccess=function(){if(null==l.result)return a.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var i=s.delete(e),o=function(){var i=(t=a.transaction(eH,"readwrite")).objectStore(eH).delete(e);i.onsuccess=function(){return n(l.result.modelArtifactsInfo)},i.onerror=function(e){return r(l.error)}};i.onsuccess=o,i.onerror=function(e){return o(),a.close(),r(l.error)}},l.onerror=function(e){return a.close(),r(l.error)},o.oncomplete=function(){null==t?a.close():t.oncomplete=function(){return a.close()}}},i.onerror=function(e){return r(i.error)}})]})})},e}();if(KD().getBool("IS_BROWSER"))try{$V.registerManager(iH.URL_SCHEME,new oH)}catch(WD){}var sH="/",lH="tensorflowjs_models",cH="info",uH="model_topology",hH="weight_specs",dH="weight_data",fH="model_metadata";function pH(e){return{info:[lH,e,cH].join(sH),topology:[lH,e,uH].join(sH),weightSpecs:[lH,e,hH].join(sH),weightData:[lH,e,dH].join(sH),modelMetadata:[lH,e,fH].join(sH)}}function mH(e){var t=e.split(sH);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(sH)}var gH=function(){function e(e){if(!KD().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=pH(this.modelPath)}return e.prototype.save=function(e){return HD(this,void 0,void 0,function(){var t,n,r;return qD(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=YV(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(HV)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}})})},e.prototype.load=function(){return HD(this,void 0,void 0,function(){var e,t,n,r,i,a,o;return qD(this,function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(a=JSON.parse(i),t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy,t.userDefinedMetadata=a.userDefinedMetadata),null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(HV){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i);return r.buffer}(o),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),vH=function(e){return KD().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(gH.URL_SCHEME)?(t=e.slice(gH.URL_SCHEME.length),new gH(t)):null;var t};XV.registerSaveRouter(vH),XV.registerLoadRouter(vH);var yH=function(){function e(){oR(KD().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),oR("undefined"==typeof window||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return HD(this,void 0,void 0,function(){var e,t,n,r,i,a;return qD(this,function(o){for(e={},t=lH+sH,n=sH+cH,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(t)&&i.endsWith(n)&&(a=mH(i),e[a]=JSON.parse(this.LS.getItem(i)));return[2,e]})})},e.prototype.removeModel=function(e){return HD(this,void 0,void 0,function(){var t,n;return qD(this,function(r){var i;if(e=(i=e).startsWith(gH.URL_SCHEME)?i.slice(gH.URL_SCHEME.length):i,t=pH(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},e}();if(KD().getBool("IS_BROWSER"))try{$V.registerManager(gH.URL_SCHEME,new yH)}catch(WD){}function bH(e){return new Promise(function(e){return setTimeout(e)}).then(e)}var xH=function(){function e(t){if(!KD().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return HD(this,void 0,void 0,function(){var t,n,r,i,a,o;return qD(this,function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=i,[4,bH(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return s.sent(),null==e.weightData?[3,4]:((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,[4,bH(function(){return o.dispatchEvent(new MouseEvent("click"))})]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:YV(e)}]}})})},e.URL_SCHEME="downloads://",e}(),wH=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return HD(this,void 0,void 0,function(){var e,t,n=this;return qD(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(r,i){var a=new FileReader;a.onload=function(a){var o=JSON.parse(a.target.result),s=o.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var l=o.weightsManifest;if(null!=l){var c;try{c=n.checkManifestAndWeightFiles(l,t)}catch(e){return void i(e)}var u=[],h=[],d=[];l.forEach(function(e){e.paths.forEach(function(e){h.push(e),d.push(null)}),u.push.apply(u,e.weights)}),l.forEach(function(e){e.paths.forEach(function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,i=h.indexOf(e);d[i]=n,-1===d.indexOf(null)&&r({modelTopology:s,weightSpecs:u,weightData:GV(d),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},t.onerror=function(t){return i("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])})})}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(t){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)})]})})},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(e){return KV(e.name)}),i={},a=0,o=e;a<o.length;a++)o[a].paths.forEach(function(e){var a=KV(e);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");i[e]=t[r.indexOf(a)]});if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return i},e}();function SH(e,t,n,r){!function(e){oR(null!=e&&Array.isArray(e)&&e.length>0,function(){return"promises must be a none empty array"})}(e),function(e,t){oR(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e}),oR(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t}),oR(t>=e,function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t})}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(e.map(function(a){return a.then(function(a){var o=n+ ++i/e.length*(r-n);return t(o),a}),a}))}function _H(e,t){return HD(this,void 0,void 0,function(){var n,r,i,a,o,s,l,c,u;return qD(this,function(h){switch(h.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?KD().platform.fetch:t.fetchFunc,r=e.map(function(e){return n(e,t.requestInit,{isBinary:!0})}),i=0,a=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return o=h.sent(),[3,4];case 2:return[4,SH(r,t.onProgress,i,a)];case 3:o=h.sent(),h.label=4;case 4:return s=o.map(function(e){return e.arrayBuffer()}),l=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return u=h.sent(),[3,8];case 6:return[4,SH(s,t.onProgress,l,c)];case 7:u=h.sent(),h.label=8;case 8:return[2,u]}})})}function EH(e){var t=this;return function(n,r,i){return void 0===r&&(r=""),HD(t,void 0,void 0,function(){var t,a,o,s,l,c,u,h,d,f;return qD(this,function(p){switch(p.label){case 0:if(t=n.map(function(){return!1}),a={},o=null!=i?i.map(function(){return!1}):[],s=[],n.forEach(function(e,n){var r=0;e.weights.forEach(function(e){var l="quantization"in e?e.quantization.dtype:e.dtype,c=zV[l]*uR(e.shape),u=function(){t[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})};null!=i?i.forEach(function(t,n){t===e.name&&(u(),o[n]=!0)}):u(),s.push(e.name),r+=c})}),!o.every(function(e){return e}))throw l=i.filter(function(e,t){return!o[t]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return c=t.reduce(function(e,t,n){return t&&e.push(n),e},[]),u=[],c.forEach(function(e){n[e].paths.forEach(function(e){var t=r+(r.endsWith("/")?"":"/")+e;u.push(t)})}),[4,e(u)];case 1:return h=p.sent(),d={},f=0,c.forEach(function(e){for(var t=n[e].paths.length,r=0,i=0;i<t;i++)r+=h[f+i].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),l=0,c=0;c<t;c++){var u=new Uint8Array(h[f+c]);s.set(u,l),l+=u.byteLength}a[e].forEach(function(e){var t=WV(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]}),f+=t}),[2,d]}})})}}XV.registerSaveRouter(function(e){return KD().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(xH.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new xH(e)}(e.slice(xH.URL_SCHEME.length)):null});var CH=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(oR("function"==typeof t.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=KD().platform.fetch,oR(null!=e&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&oR(2===e.length,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return HD(this,void 0,void 0,function(){var t,n,r,i;return qD(this,function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=a.sent()).ok)return[2,{modelArtifactsInfo:YV(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return HD(this,void 0,void 0,function(){var e,t,n,r,i,a,o,s,l,c,u,h;return qD(this,function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return t=d.sent(),[3,5];case 4:throw d.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,i=t.weightsManifest,a=t.generatedBy,o=t.convertedBy,s=t.format,l=t.userDefinedMetadata,null==r&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==i?[3,7]:[4,this.loadWeights(i)];case 6:h=d.sent(),c=h[0],u=h[1],d.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:u,userDefinedMetadata:l,generatedBy:a,convertedBy:o,format:s}]}})})},e.prototype.loadWeights=function(e){return HD(this,void 0,void 0,function(){var t,n,r,i,a,o,s,l,c,u,h;return qD(this,function(d){switch(d.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],i=n[1],a=this.weightPathPrefix||r,o=[],s=0,l=e;s<l.length;s++)c=l[s],o.push.apply(o,c.weights);return u=[],e.forEach(function(e){e.paths.forEach(function(e){u.push(a+e+i)})}),[4,_H(u,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=d.sent(),[2,[o,GV(h)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function kH(e){return null!=e.match(CH.URL_SCHEME_REGEX)}var NH=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every(function(e){return kH(e)}):kH(e))?AH(e,{onProgress:t}):null};function AH(e,t){return new CH(e,t)}XV.registerSaveRouter(NH),XV.registerLoadRouter(NH);var TH,IH=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return HD(this,void 0,void 0,function(){return qD(this,function(e){return[2,this.modelArtifacts]})})},e}(),DH=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return HD(this,void 0,void 0,function(){return qD(this,function(t){return[2,this.saveHandler(e)]})})},e}(),RH=Object.freeze({browserFiles:function(e){return new wH(e)},browserHTTPRequest:function(e,t){return AH(e,t)},concatenateArrayBuffers:GV,decodeWeights:WV,encodeWeights:function(e,t){return HD(this,void 0,void 0,function(){var n,r,i,a,o,s=this;return qD(this,function(l){switch(l.label){case 0:for(n=[],r=[],i=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e),a=function(a){var o=i[a],l=Array.isArray(e)?e[a].tensor:e[o];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+o+"': "+l.dtype);var c={name:o,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var u=new Promise(function(e){return HD(s,void 0,void 0,function(){var t,n,r,i,a,o,s;return qD(this,function(c){switch(c.label){case 0:return[4,l.bytes()];case 1:for(t=c.sent(),n=t.reduce(function(e,t){return e+t.length},0)+4*t.length,r=new Uint8Array(n),i=0,a=0;a<t.length;a++)o=t[a],s=new Uint8Array(new Uint32Array([o.length]).buffer),r.set(s,i),i+=4,r.set(o,i),i+=o.length;return e(r),[2]}})})});r.push(u)}else r.push(l.data());null!=t&&(c.group=t),n.push(c)},o=0;o<i.length;++o)a(o);return[4,Promise.all(r)];case 1:return[2,{data:VV(l.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new IH(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new IH({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new IH({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return XV.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:YV,getSaveHandlers:function(e){return XV.getSaveHandlers(e)},http:AH,isHTTPScheme:kH,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),HD(this,void 0,void 0,function(){return qD(this,function(i){return[2,EH(function(e){return _H(e,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return XV.registerLoadRouter(e)},registerSaveRouter:function(e){return XV.registerSaveRouter(e)},weightsLoaderFactory:EH,withSaveHandler:function(e){return new DH(e)},copyModel:function(e,t){return HD(this,void 0,void 0,function(){return qD(this,function(n){return[2,ZV(e,t,!1)]})})},listModels:function(){return HD(this,void 0,void 0,function(){var e,t,n,r,i,a,o;return qD(this,function(s){switch(s.label){case 0:e=$V.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(i=r[n],[4,$V.getManager(i).listModels()]):[3,4];case 2:for(o in a=s.sent())t[i+QV+o]=a[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return HD(this,void 0,void 0,function(){return qD(this,function(n){return[2,ZV(e,t,!0)]})})},removeModel:function(e){return HD(this,void 0,void 0,function(){var t;return qD(this,function(n){return t=JV(e),[2,$V.getManager(t.scheme).removeModel(t.path)]})})}}),PH=Bj({confusionMatrix_:function(e,t,n){var r=Nj(e,"labels","confusionMatrix"),i=Nj(t,"predictions","confusionMatrix");oR(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),oR(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),oR(1===i.rank,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),oR(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),oR(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=IL(r.asType("int32"),n),o=IL(i.asType("int32"),n);return a.transpose().matMul(o).asType("int32")}}),jH=(Object.freeze({confusionMatrix:PH}),Bj({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,a=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(i&&i&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=$D("FromPixels",gP.backendName))return gP.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,l,c=i?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=c[0],h=c[1];if(o?s=e.getContext("2d").getImageData(0,0,u,h).data:r||n?s=e.data:(a||i)&&(null==TH&&(TH=document.createElement("canvas").getContext("2d")),TH.canvas.width=u,TH.canvas.height=h,TH.drawImage(e,0,0,u,h),s=TH.getImageData(0,0,u,h).data),4===t)l=new Int32Array(s);else{var d=u*h;l=new Int32Array(d*t);for(var f=0;f<d;f++)for(var p=0;p<t;++p)l[f*t+p]=s[4*f+p]}return Yj(l,[h,u,t],"int32")}})),LH=Object.freeze({toPixels:function(e,t){return HD(this,void 0,void 0,function(){var n,r,i,a,o,s,l,c,u,h,d,f,p,m,g,v,y,b,x,w,S,_,E;return qD(this,function(C){switch(C.label){case 0:if(n=Nj(e,"img","toPixels"),e instanceof eP||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],a=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=C.sent(),l=n.min(),c=n.max(),[4,Promise.all([l.data(),c.data()])];case 2:if(u=C.sent(),h=u[0],d=u[1],f=h[0],p=d[0],l.dispose(),c.dispose(),"float32"===n.dtype){if(f<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+p+"].")}for(m="float32"===n.dtype?255:1,g=new Uint8ClampedArray(a*i*4),v=0;v<i*a;++v)y=void 0,b=void 0,x=void 0,w=void 0,1===o?(y=s[v]*m,b=s[v]*m,x=s[v]*m,w=255):3===o?(y=s[3*v]*m,b=s[3*v+1]*m,x=s[3*v+2]*m,w=255):4===o&&(y=s[4*v]*m,b=s[4*v+1]*m,x=s[4*v+2]*m,w=s[4*v+3]*m),g[0+(S=4*v)]=Math.round(y),g[S+1]=Math.round(b),g[S+2]=Math.round(x),g[S+3]=Math.round(w);return null!=t&&(t.width=a,t.height=i,_=t.getContext("2d"),E=new ImageData(g,a,i),_.putImageData(E,0,0)),n!==e&&n.dispose(),[2,g]}})})},fromPixels:jH}),OH=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),MH=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function FH(e){oR(null!=e.className,function(){return"Class being registered does not have the static className property defined."}),oR("string"==typeof e.className,function(){return"className is required to be a string, but got type "+typeof e.className}),oR(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),MH.register(e)}Object.freeze({Serializable:OH,SerializationMap:MH,registerClass:FH});function BH(){return 32===gP.backend.floatPrecision()?.001:.1}function UH(e,t,n){var r=!0;if((CR(e)||CR(t))&&(r=!1),CR(e)&&CR(t)&&(r=!0),r){var i=e.constructor.name,a=t.constructor.name;if(i!==a)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+a)}if(Array.isArray(e)&&Array.isArray(t)){var o=Cj(e),s=Cj(t);if(!hR(o,s))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+s+"]")}var l=CR(e)?e:cR(e),c=CR(t)?t:cR(t);if(l.length!==c.length)throw new Error("Arrays have different lengths actual: "+l.length+" vs expected: "+c.length+".\nActual:   "+l+".\nExpected: "+c+".");for(var u=0;u<c.length;++u){var h=l[u],d=c[u];if(!n(h,d))throw new Error("Arrays differ: actual["+u+"] = "+h+", expected["+u+"] = "+d+".\nActual:   "+l+".\nExpected: "+c+".")}}function zH(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=BH()),UH(e,t,function(e,t){return zH(e,t,n)})},testEpsilon:BH,expectPromiseToFail:function(e,t){e().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return AR(e)||AR(e[0])||AR(t)||AR(t[0])?UH(e,n,function(e,t){return e==t}):UH(e,t,function(e,t){return zH(e,t,0)})},expectNumbersClose:function(e,t,n){if(null==n&&(n=BH()),!zH(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:EF,webgl_util:bj,forceHalfFloat:function(){KD().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:BB,setWebGLContext:EP,GPGPUContext:CF});var WH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return VD(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),i=r.value,a=r.grads;if(null!=n){var o=n.map(function(e){return{name:e.name,tensor:a[e.name]}});this.applyGradients(o)}else this.applyGradients(a);return _j(a),t?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){oR(RR(e),function(){return"The f passed in variableGrads(f) must be a function"}),oR(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof oP}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=null!=t;if(!n)for(var r in t=[],gP.registeredVariables)t.push(gP.registeredVariables[r]);var i=n?t.filter(function(e){return!e.trainable}):null,a=t.length;oR((t=t.filter(function(e){return e.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var o=gP.gradients(e,t,null,!0),s=o.value,l=o.grads;oR(l.some(function(e){return null!=e}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),oR(0===s.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var c={};return t.forEach(function(e,t){null!=l[t]&&(c[e.name]=l[t])}),null!=i&&i.forEach(function(e){return c[e.name]=null}),{value:s,grads:c}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&_j(this.iterations_)},t.prototype.saveIterations=function(){return HD(this,void 0,void 0,function(){return qD(this,function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:qj(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return HD(this,void 0,void 0,function(){return qD(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(e){return HD(this,void 0,void 0,function(){return qD(this,function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(e){return HD(this,void 0,void 0,function(){var t;return qD(this,function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}})})},t}(OH);Object.defineProperty(WH,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var VH=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this)||this;return i.learningRate=t,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=gP.backend.epsilon()),i}return VD(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=gP.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:Sj(function(){return tL(i).variable(!1)})}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:Sj(function(){return tL(i).variable(!1)})});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Sj(function(){var e=o.mul(t.rho).add(a.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(o.add(t.epsilon).sqrt()).mul(a),r=s.mul(t.rho).add(n.square().mul(1-t.rho));o.assign(e),s.assign(r);var l=n.mul(-t.learningRate).add(i);i.assign(l)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(_j(this.accumulatedGrads.map(function(e){return e.variable})),_j(this.accumulatedUpdates.map(function(e){return e.variable})))},t.prototype.getWeights=function(){return HD(this,void 0,void 0,function(){var e;return qD(this,function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return HD(this,void 0,void 0,function(){var t;return qD(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(WH);FH(VH);var HH=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return VD(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=gP.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:Sj(function(){return Jj(i.shape,t.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedGrads[r].variable;Sj(function(){var e=o.add(a.square());o.assign(e);var n=a.div(e.add(gP.backend.epsilon()).sqrt()).mul(-t.learningRate).add(i);i.assign(n)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&_j(this.accumulatedGrads.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return HD(this,void 0,void 0,function(){return qD(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return HD(this,void 0,void 0,function(){return qD(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(WH);FH(HH);var qH=function(e){function t(t,n,r,i){void 0===i&&(i=null);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=i,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],Sj(function(){a.accBeta1=qj(n).variable(),a.accBeta2=qj(r).variable()}),null==i&&(a.epsilon=gP.backend.epsilon()),a}return VD(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e);Sj(function(){var r=lz(1,t.accBeta1),i=lz(1,t.accBeta2);n.forEach(function(n,a){var o=gP.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Sj(function(){return tL(o).variable(!1)})}),null==t.accumulatedSecondMoment[a]&&(t.accumulatedSecondMoment[a]={originalName:n+"/v",variable:Sj(function(){return tL(o).variable(!1)})});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[a].variable,c=t.accumulatedSecondMoment[a].variable,u=l.mul(t.beta1).add(s.mul(1-t.beta1)),h=c.mul(t.beta2).add(s.square().mul(1-t.beta2)),d=u.div(r),f=h.div(i);l.assign(u),c.assign(h);var p=d.div(f.sqrt().add(t.epsilon)).mul(-t.learningRate).add(o);o.assign(p)}}),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&_j(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedSecondMoment&&_j(this.accumulatedSecondMoment.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return HD(this,void 0,void 0,function(){var e;return qD(this,function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return HD(this,void 0,void 0,function(){var t,n=this;return qD(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),Sj(function(){n.accBeta1.assign(az(n.beta1,n.iterations_+1)),n.accBeta2.assign(az(n.beta2,n.iterations_+1))}),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(WH);FH(qH);var GH=function(e){function t(t,n,r,i,a){void 0===i&&(i=null),void 0===a&&(a=0);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=i,o.decay=a,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],Sj(function(){o.iteration=qj(0).variable(),o.accBeta1=qj(n).variable()}),null==i&&(o.epsilon=gP.backend.epsilon()),o}return VD(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e);Sj(function(){var r=lz(1,t.accBeta1),i=KU(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach(function(n,a){var o=gP.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:tL(o).variable(!1)}),null==t.accumulatedWeightedInfNorm[a]&&(t.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:tL(o).variable(!1)});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[a].variable,c=t.accumulatedWeightedInfNorm[a].variable,u=l.mul(t.beta1).add(s.mul(1-t.beta1)),h=c.mul(t.beta2),d=s.abs(),f=h.maximum(d);l.assign(u),c.assign(f);var p=i.div(r).mul(u.div(f.add(t.epsilon))).add(o);o.assign(p)}}),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&_j(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedWeightedInfNorm&&_j(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return HD(this,void 0,void 0,function(){return qD(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(e){return HD(this,void 0,void 0,function(){return qD(this,function(e){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(WH);FH(GH);var KH=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return VD(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=gP.registeredVariables[n];Sj(function(){var e=t.c.mul(i).add(a);a.assign(e)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return gP.keep(e)}(qj(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return HD(this,void 0,void 0,function(){return qD(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},t.prototype.setWeights=function(e){return HD(this,void 0,void 0,function(){return qD(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(WH);FH(KH);var YH=function(e){function t(t,n,r){void 0===r&&(r=!1);var i=e.call(this,t)||this;return i.learningRate=t,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=qj(i.momentum),i}return VD(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=gP.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:Sj(function(){return tL(i).variable(!1)})});var a=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&Sj(function(){var e,n=t.m.mul(a).add(o);e=t.useNesterov?t.c.mul(o.add(n.mul(t.m))).add(i):t.c.mul(n).add(i),a.assign(n),i.assign(e)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&_j(this.accumulations.map(function(e){return e.variable}))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return HD(this,void 0,void 0,function(){return qD(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return HD(this,void 0,void 0,function(){return qD(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(KH);FH(YH);var XH=function(e){function t(t,n,r,i,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===a&&(a=!1);var o=e.call(this)||this;if(o.learningRate=t,o.decay=n,o.momentum=r,o.epsilon=i,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=a,null==i&&(o.epsilon=gP.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return VD(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=gP.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:Sj(function(){return tL(i).variable(!1)})}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:Sj(function(){return tL(i).variable(!1)})}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:Sj(function(){return tL(i).variable(!1)})});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;Sj(function(){var e=o.mul(t.decay).add(a.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,l=n.mul(t.decay).add(a.mul(1-t.decay)),c=s.mul(t.momentum).add(a.mul(t.learningRate).div(e.sub(l.square().add(t.epsilon)).sqrt()));o.assign(e),n.assign(l),s.assign(c);var u=i.sub(c);i.assign(u)}else{var h=o.mul(t.decay).add(a.square().mul(1-t.decay));c=s.mul(t.momentum).add(a.mul(t.learningRate).div(h.add(t.epsilon).sqrt())),o.assign(h),s.assign(c),u=i.sub(c),i.assign(u)}})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&_j(this.accumulatedMeanSquares.map(function(e){return e.variable})),null!=this.accumulatedMeanGrads&&this.centered&&_j(this.accumulatedMeanGrads.map(function(e){return e.variable})),null!=this.accumulatedMoments&&_j(this.accumulatedMoments.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return HD(this,void 0,void 0,function(){var e;return qD(this,function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return HD(this,void 0,void 0,function(){var t;return qD(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(WH);FH(XH);var QH=function(){function e(){}return e.sgd=function(e){return new KH(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new YH(e,t,n)},e.rmsprop=function(e,t,n,r,i){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new XH(e,t,n,r,i)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new qH(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new VH(e,t,n)},e.adamax=function(e,t,n,r,i){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new GH(e,t,n,r,i)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new HH(e,t)},e}();QH.sgd,QH.momentum,QH.adadelta,QH.adagrad,QH.rmsprop,QH.adamax,QH.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;eP.prototype.squaredDifference=function(e){return WB(this,e)},JR=CV;var $H=function(e,t){return $H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},$H(e,t)};function JH(e,t){function n(){this.constructor=e}$H(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ZH=function(){return ZH=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ZH.apply(this,arguments)};function eq(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(VD){a(VD)}}function s(e){try{l(r.throw(e))}catch(VD){a(VD)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function tq(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(VD){a=[6,VD],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function nq(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var rq=function(){function e(e,t){if(!hq(e)||!hq(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function iq(e,t){return e instanceof eP&&e.shape.length===t}function aq(e){return iq(e,3)}function oq(e){return iq(e,4)}function sq(e){return e%2===0}function lq(e){return e&&e.width&&e.height}function cq(e){return e.reduce(function(e,t){return e.add(t)},new fq(0,0)).div(new fq(e.length,e.length))}function uq(e,t,n){return Array(e).fill(0).map(function(e,r){return t+r*n})}function hq(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function dq(e){return hq(e)&&0<=e&&e<=1}var fq=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),pq=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},i=[r.left,r.top,r.right,r.bottom].every(hq),a=[r.x,r.y,r.width,r.height].every(hq);if(!a&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],l=o[1],c=o[2],u=o[3];e.assertIsValidBox({x:s,y:l,width:c,height:u},"Box.constructor",n),this._x=s,this._y=l,this._width=c,this._height=u}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(hq)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new fq(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new fq(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new fq(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new fq(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.round(e)});return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.floor(e)});return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,i=t.width,a=t.height,o=Math.abs(i-a);return i<a&&(n-=o/2,i+=o),a<i&&(r-=o/2,a+=o),new e({x:n,y:r,width:i,height:a})},e.prototype.rescale=function(t){var n=lq(t)?t.width:t,r=lq(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,i=r.x,a=r.y,o=r.right,s=r.bottom,l=Math.max(i,0),c=Math.max(a,0),u=o-l,h=s-c;return new e({x:l,y:c,width:Math.min(u,t-l),height:Math.min(h,n-c)}).floor()},e.prototype.shift=function(t,n){var r=this.width,i=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:i})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,i=n,a=r,o=this.left,s=this.top,l=this.right,c=this.bottom;return l>t&&(i=-l+t+n,l=t),c>e&&(a=-c+e+r,c=e),o<1&&(a=2-o,o=1),s<1&&(a=2-s,s=1),{dy:1,edy:a,dx:1,edx:i,y:s,ey:c,x:o,ex:l,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),mq=function(e){function t(t,n,r,i,a){return void 0===a&&(a=!1),e.call(this,{left:t,top:n,right:r,bottom:i},a)||this}return JH(t,e),t}(pq),gq=function(){function e(e,t,n,r,i){this._imageDims=new rq(i.width,i.height),this._score=e,this._classScore=t,this._className=n,this._box=new pq(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new pq(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),vq=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return JH(t,e),t.prototype.forSize=function(n,r){var i=e.prototype.forSize.call(this,n,r);return new t(i.score,i.relativeBox,i.imageDims)},t}(gq);function yq(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function bq(e,t,n,r){void 0===r&&(r=!0);for(var i=t.map(function(e,t){return{score:e,boxIndex:t}}).sort(function(e,t){return e.score-t.score}).map(function(e){return e.boxIndex}),a=[],o=function(){var t=i.pop();a.push(t);for(var o=i,s=[],l=0;l<o.length;l++){var c=o[l],u=e[t],h=e[c];s.push(yq(u,h,r))}i=i.filter(function(e,t){return s[t]<=n})};i.length>0;)o();return a}function xq(e,t){return Sj(function(){var n=t[0],r=t[1],i=t[2],a=Jj(nq(e.shape.slice(0,3),[1]),n),o=Jj(nq(e.shape.slice(0,3),[1]),r),s=Jj(nq(e.shape.slice(0,3),[1]),i),l=nL([a,o,s],3);return lz(e,l)})}function wq(e){return 1/(1+Math.exp(-e))}var Sq,_q=function(e){function t(t,n,r,i,a){return void 0===a&&(a=!1),e.call(this,{x:t,y:n,width:r,height:i},a)||this}return JH(t,e),t}(pq),Eq=function(){function e(e,t,n){void 0===n&&(n=new fq(0,0));var r=t.width,i=t.height;this._imgDims=new rq(r,i),this._shift=n,this._positions=e.map(function(e){return e.mul(new fq(r,i)).add(n)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new fq(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new fq(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new fq(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof vq?e.box.floor():new pq(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=r.useDlibAlignment,a=r.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(a)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],i=function(e){return r.sub(e).magnitude()},a=(i(t)+i(n))/2,o=Math.floor(a/.45),s=cq(e),l=Math.floor(Math.max(0,s.x-.5*o)),c=Math.floor(Math.max(0,s.y-.43*o));return new _q(l,c,Math.min(o,this.imageWidth+l),Math.min(o,this.imageHeight+c))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map(function(e){return e.x}),n=e.map(function(e){return e.y}),r=t.reduce(function(e,t){return t<e?t:e},1/0),i=n.reduce(function(e,t){return t<e?t:e},1/0),a=t.reduce(function(e,t){return e<t?t:e},0),o=n.reduce(function(e,t){return e<t?t:e},0);return new mq(r,i,a,o)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),Cq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],cq([e[3],e[4]])]},t}(Eq),kq=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(cq)},t}(Eq),Nq=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}(this.distance)+")":"")},e}(),Aq=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return JH(t,e),t.assertIsValidLabeledBox=function(e,t){if(pq.assertIsValidBox(e,t),!hq(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(pq),Tq=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(e){return!(e instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(e){return new Float32Array(e)});return new e(t.label,n)},e}();!function(e){function t(t,n,r,i){var a=e.call(this,t,n)||this;return a._score=r,a._classScore=i,a}JH(t,e),t.assertIsValidPredictedBox=function(e,t){if(Aq.assertIsValidLabeledBox(e,t),!dq(e.score)||!dq(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(Aq);function Iq(e,t){var n={detection:t};return Object.assign({},e,n)}function Dq(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function Rq(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(r){t=r.toString()}return{readFile:e?function(t){return new Promise(function(n,r){e.readFile(t,function(e,t){return e?r(e):n(t)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function Pq(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=Rq();return ZH({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},i)}function jq(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function Lq(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function Oq(e){Sq=e}function Mq(){jq()&&Oq(Dq()),Lq()&&Oq(Pq())}var Fq,Bq={getEnv:function(){if(!Sq)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Sq},setEnv:Oq,initialize:Mq,createBrowserEnv:Dq,createFileSystem:Rq,createNodejsEnv:Pq,monkeyPatch:function(e){if(Sq||Mq(),!Sq)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?Sq.Canvas:t,r=e.Image,i=void 0===r?Sq.Image:r;Sq.Canvas=n,Sq.Image=i,Sq.createCanvasElement=e.createCanvasElement||function(){return new n},Sq.createImageElement=e.createImageElement||function(){return new i},Sq.ImageData=e.ImageData||Sq.ImageData,Sq.Video=e.Video||Sq.Video,Sq.fetch=e.fetch||Sq.fetch,Sq.readFile=e.readFile||Sq.readFile},isBrowser:jq,isNodejs:Lq};function Uq(e){return Bq.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function zq(e){var t=Bq.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=Uq(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=r.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}Mq(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(Fq||(Fq={}));var Wq=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,i=e.fontSize,a=e.fontStyle,o=e.padding;this.anchorPosition=t||Fq.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=a||"Georgia",this.padding=o||4},Vq=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new Wq(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(t){return e.measureText(t).width}).reduce(function(e,t){return e<t?t:e},0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===Fq.BOTTOM_RIGHT||n===Fq.TOP_RIGHT,i=n===Fq.BOTTOM_LEFT||n===Fq.BOTTOM_RIGHT,a=this.measureWidth(e),o=this.measureHeight(),s=r?this.anchor.x-a:this.anchor.x,l=i?this.anchor.y-o:this.anchor.y;if(t){var c=t.width,u=t.height;return{x:Math.max(Math.min(s,c-a),0),y:Math.max(Math.min(l,u-o),0)}}return{x:s,y:l}},e.prototype.draw=function(e){var t=Uq(e),n=zq(t),r=this.options,i=r.backgroundColor,a=r.fontColor,o=r.fontSize,s=r.fontStyle,l=r.padding;n.font=o+"px "+s;var c=this.measureWidth(n),u=this.measureHeight();n.fillStyle=i;var h=this.getUpperLeft(n,t);n.fillRect(h.x,h.y,c,u),n.fillStyle=a,this.text.forEach(function(e,t){var r=l+h.x,i=l+h.y+(t+1)*o;n.fillText(e,r,i)})},e}(),Hq=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,i=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var a={anchorPosition:Fq.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Wq(Object.assign({},a,i))};!function(){function e(e,t){void 0===t&&(t={}),this.box=new pq(e),this.options=new Hq(t)}e.prototype.draw=function(e){var t=zq(e),n=this.options,r=n.boxColor,i=n.lineWidth,a=this.box,o=a.x,s=a.y,l=a.width,c=a.height;t.strokeStyle=r,t.lineWidth=i,t.strokeRect(o,s,l,c);var u=this.options.label;u&&new Vq([u],{x:o-i/2,y:s},this.options.drawLabelOptions).draw(e)}}();function qq(e){var t=Bq.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Gq(e){var t=Bq.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new rq(e.naturalWidth,e.naturalHeight):e instanceof r?new rq(e.videoWidth,e.videoHeight):new rq(e.width,e.height)}function Kq(e){var t=e.width,n=e.height,r=(0,Bq.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function Yq(e,t){var n=Bq.getEnv().ImageData;if(!(e instanceof n)&&!qq(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||Gq(e),i=r.width,a=r.height,o=Kq({width:i,height:a});return e instanceof n?zq(o).putImageData(e,0,0):zq(o).drawImage(e,0,0,i,a),o}function Xq(e,t){return eq(this,void 0,void 0,function(){var n,r,i,a,o,s;return tq(this,function(l){switch(l.label){case 0:return n=t||Bq.getEnv().createCanvasElement(),r=e.shape.slice(oq(e)?1:0),i=r[0],a=r[1],o=r[2],s=Sj(function(){return e.as3D(i,a,o).toInt()}),[4,LH.toPixels(s,n)];case 1:return l.sent(),s.dispose(),[2,n]}})})}function Qq(e){var t=Bq.getEnv(),n=t.Image,r=t.Canvas,i=t.Video;return e instanceof n||e instanceof r||e instanceof i}var $q=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(e,t){if(aq(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(oq(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var i=e instanceof Bq.getEnv().Canvas?e:Yq(e);n._canvases[t]=i,n._inputDimensions[t]=[i.height,i.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return uq(this.batchSize,0,1).map(function(t,n){return e.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,i=t/Math.max(r,n);return new rq(Math.round(n*i),Math.round(r*i))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,Sj(function(){var r=uq(n.batchSize,0,1).map(function(r){var i=n.getInput(r);if(i instanceof eP){var a=oq(i)?i:i.expandDims();return a=function(e,t){return void 0===t&&(t=!1),Sj(function(){var n=e.shape.slice(1),r=n[0],i=n[1];if(r===i)return e;var a=Math.abs(r-i),o=Math.round(a*(t?.5:1)),s=r>i?2:1,l=function(t){var n=e.shape.slice();return n[s]=t,Jj(n,0)},c=l(o),u=a-c.shape[s],h=[t&&u?l(u):null,e,c].filter(function(e){return!!e}).map(function(e){return e.toFloat()});return nL(h,s)})}(a,t),a.shape[1]===e&&a.shape[2]===e||(a=gV.resizeBilinear(a,[e,e])),a.as3D(e,e,3)}if(i instanceof Bq.getEnv().Canvas)return LH.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=Bq.getEnv(),i=r.Image,a=r.Canvas;if(!(e instanceof i||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=Gq(e),s=t/Math.max(o.height,o.width),l=s*o.width,c=s*o.height,u=Kq({width:t,height:t}),h=e instanceof a?e:Yq(e),d=Math.abs(l-c)/2,f=n&&l<c?d:0,p=n&&c<l?d:0;return zq(u).drawImage(h,f,p,l,c),u}(i,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+i)}),i=VL(r.map(function(e){return e.toFloat()})).as4D(n.batchSize,e,e,3);return i})},e}();function Jq(e){return eq(this,void 0,void 0,function(){var t,n,r;return tq(this,function(i){switch(i.label){case 0:if(e instanceof $q)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(Uq)).forEach(function(e,r){if(!Qq(e)&&!aq(e)&&!oq(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(oq(e)){var i=e.shape[0];if(1!==i)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+i+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(e){return Qq(e)&&(t=e,new Promise(function(e,n){if(t instanceof Bq.getEnv().Canvas||qq(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",i),e(t))}function i(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",i),n(e))}t.addEventListener("load",r),t.addEventListener("error",i)}));var t}))];case 1:return i.sent(),[2,new $q(r,Array.isArray(e))]}})})}function Zq(e,t){return eq(this,void 0,void 0,function(){var n,r,i,a,o,s;return tq(this,function(l){switch(l.label){case 0:return n=Bq.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Jq(e)];case 1:if((i=l.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(a=i.getInput(0))instanceof n?(o=a,[3,4]):[3,2];case 2:return[4,Xq(a)];case 3:o=l.sent(),l.label=4;case 4:r=o,l.label=5;case 5:return s=zq(r),[2,t.map(function(e){return e instanceof vq?e.forSize(r.width,r.height).box.floor():e}).map(function(e){return e.clipAtImageBorders(r.width,r.height)}).map(function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=Kq({width:r,height:i});return zq(a).putImageData(s.getImageData(t,n,r,i),0,0),a})]}})})}function eG(e,t){return eq(this,void 0,void 0,function(){return tq(this,function(n){if(!aq(e)&&!oq(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(oq(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Sj(function(){var n=e.shape.slice(oq(e)?1:0),r=n[0],i=n[1],a=n[2],o=t.map(function(e){return e instanceof vq?e.forSize(i,r).box:e}).map(function(e){return e.clipAtImageBorders(i,r)}).map(function(t){var n=t.x,o=t.y,s=t.width,l=t.height;return iW(e.as3D(r,i,a),[o,n,0],[l,s,a])});return o})]})})}function tG(e,t){return eq(this,void 0,void 0,function(){var n;return tq(this,function(r){switch(r.label){case 0:return[4,(0,Bq.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function nG(e){return eq(this,void 0,void 0,function(){return tq(this,function(t){switch(t.label){case 0:return[4,tG(e)];case 1:return[2,t.sent().json()]}})})}function rG(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",i=(e=e.replace(r,"")).split("/").filter(function(e){return e}),a=e.endsWith(".json")?i[i.length-1]:n,o=r+(e.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return{modelBaseUri:o=e.startsWith("/")?"/"+o:o,manifestUri:"/"===o?"/"+a:o+"/"+a}}function iG(e,t){return eq(this,void 0,void 0,function(){var n,r,i,a;return tq(this,function(o){switch(o.label){case 0:return n=rG(e,t),r=n.manifestUri,i=n.modelBaseUri,[4,nG(r)];case 1:return a=o.sent(),[2,RH.loadWeights(a,i)]}})})}var aG=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;r[i].dispose(),r[i]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof oP})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof oP)})},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())})},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var n=t.path,r=t.tensor,i=Vj(r.dataSync());r.dispose(),e.reassignParamFromPath(n,i)})},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},e.prototype.load=function(e){return eq(this,void 0,void 0,function(){return tq(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},e.prototype.loadFromUri=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,iG(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}})})},e.prototype.loadFromDisk=function(e){return eq(this,void 0,void 0,function(){var t,n,r,i,a,o,s,l,c,u;return tq(this,function(h){switch(h.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=Bq.getEnv().readFile,n=rG(e,this.getDefaultModelName()),r=n.manifestUri,i=n.modelBaseUri,a=function(e){return Promise.all(e.map(function(e){return t(e).then(function(e){return e.buffer})}))},o=RH.weightsLoaderFactory(a),c=(l=JSON).parse,[4,t(r)];case 1:return s=c.apply(l,[h.sent().toString()]),[4,o(s,i)];case 2:return u=h.sent(),this.loadFromWeightMap(u),[2]}})})},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof eP))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function oG(e,t,n){return Sj(function(){var r=Mz(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=VU(r,t.bias)})}function sG(e,t,n){return void 0===n&&(n=!1),Sj(function(){var r=wW(n?VU(Iz(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):oG(e,t.conv0,[2,2])),i=oG(r,t.conv1,[1,1]),a=oG(wW(VU(r,i)),t.conv2,[1,1]);return wW(VU(r,VU(i,a)))})}function lG(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),Sj(function(){var i=wW(n?VU(Iz(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):oG(e,t.conv0,r?[2,2]:[1,1])),a=oG(i,t.conv1,[1,1]),o=oG(wW(VU(i,a)),t.conv2,[1,1]),s=oG(wW(VU(i,VU(a,o))),t.conv3,[1,1]);return wW(VU(i,VU(a,VU(o,s))))})}function cG(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),Sj(function(){var i=VU(Iz(e,t.filters,[1,1],n),t.bias);return r?wW(i):i})}function uG(e,t){Object.keys(e).forEach(function(n){t.some(function(e){return e.originalPath===n})||e[n].dispose()})}function hG(e,t){return function(n,r,i,a){var o=Xj(e(n*r*i*i),[i,i,n,r]),s=Gj(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:s}}}function dG(e,t){return function(n,r,i){var a=Kj(e(n*r),[n,r]),o=Gj(e(r));return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:a,bias:o}}}var fG=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function pG(e,t){return function(n,r,i){var a=Xj(e(9*n),[3,3,n,1]),o=Xj(e(n*r),[1,1,n,r]),s=Gj(e(r));return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new fG(a,o,s)}}function mG(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),i=e(t+"/bias",1);return new fG(n,r,i)}}function gG(e,t){return function(n,r,i){var a=e[n];if(!iq(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return t.push({originalPath:n,paramPath:i||n}),a}}function vG(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function yG(e,t){var n=hG(e,t),r=pG(e,t);function i(e,t,i,a){return void 0===a&&(a=!1),{conv0:a?n(e,t,3,i+"/conv0"):r(e,t,i+"/conv0"),conv1:r(t,t,i+"/conv1"),conv2:r(t,t,i+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function(e,t,n,a){void 0===a&&(a=!1);var o=i(e,t,n,a);return{conv0:o.conv0,conv1:o.conv1,conv2:o.conv2,conv3:r(t,t,n+"/conv3")}}}}function bG(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function xG(e,t){var n=gG(e,t),r=bG(n),i=mG(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2"),conv3:i(e+"/conv3")}}}}var wG=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return JH(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return Sj(function(){var n=lG(xq(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(qj(255)),t.dense0,!0);return n=lG(n,t.dense1),n=lG(n,t.dense2),n=lG(n,t.dense3),n=$z(n,[7,7],[2,2],"valid")})},t.prototype.forward=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Jq(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=xG(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return uG(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=vG(e),r=n.extractWeights,i=n.getRemainingWeights,a=yG(r,t).extractDenseBlock4Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),l=a(64,128,"dense2"),c=a(128,256,"dense3");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:l,dense3:c}}}(e)},t}(aG);function SG(e,t){return Sj(function(){return VU(Uz(e,t.weights),t.bias)})}function _G(e){var t={},n={};return Object.keys(e).forEach(function(r){(r.startsWith("fc")?n:t)[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var EG=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return JH(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Sj(function(){var r=e instanceof $q?t.faceFeatureExtractor.forwardInput(e):e;return SG(r.as2D(r.shape[0],-1),n.fc)})},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],i=vG(e),a=i.extractWeights,o=i.getRemainingWeights,s=dG(a,r)(t,n,"fc");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=_G(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t,n=[],r=gG(e,n),i={fc:(t="fc",{weights:r(t+"/weights",2),bias:r(t+"/bias",1)})};return uG(e,n),{params:i,paramMappings:n}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,i=e.slice(0,e.length-r),a=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},t}(aG),CG=["neutral","happy","sad","angry","fearful","disgusted","surprised"],kG=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);CG.forEach(function(n,r){t[n]=e[r]})}return e.prototype.asSortedArray=function(){var e=this;return CG.map(function(t){return{expression:t,probability:e[t]}}).sort(function(e,t){return t.probability-e.probability})},e}(),NG=function(e){function t(t){return void 0===t&&(t=new wG),e.call(this,"FaceExpressionNet",t)||this}return JH(t,e),t.prototype.forwardInput=function(e){var t=this;return Sj(function(){return hO(t.runNet(e))})},t.prototype.forward=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Jq(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictExpressions=function(e){return eq(this,void 0,void 0,function(){var t,n,r,i,a=this;return tq(this,function(o){switch(o.label){case 0:return[4,Jq(e)];case 1:return t=o.sent(),[4,this.forwardInput(t)];case 2:return n=o.sent(),[4,Promise.all(GL(n).map(function(e){return eq(a,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}})})}))];case 3:return r=o.sent(),n.dispose(),i=r.map(function(e){return new kG(e)}),[2,t.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(EG);function AG(e,t){var n={expressions:t};return Object.assign({},e,n)}function TG(e){return function(e){return e.detection instanceof vq}(e)&&e.landmarks instanceof Eq&&e.unshiftedLandmarks instanceof Eq&&e.alignedRect instanceof vq}function IG(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),i=r.align(),a=e.detection.imageDims,o={landmarks:r,unshiftedLandmarks:t,alignedRect:new vq(e.detection.score,i.rescale(a.reverse()),a)};return Object.assign({},e,o)}function DG(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach(function(n,r){var i=n.x,a=n.y,o=t[r];e.moveTo(o.x,o.y),e.lineTo(i,a)}),n){var r=t[t.length-1],i=t[0];if(!r||!i)return;e.moveTo(r.x,r.y),e.lineTo(i.x,i.y)}e.stroke()}var RG=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,i=void 0===r||r,a=e.lineWidth,o=e.lineColor,s=e.pointSize,l=e.pointColor;this.drawLines=n,this.drawPoints=i,this.lineWidth=a||1,this.pointSize=s||2,this.lineColor=o||"rgba(0, 255, 255, 1)",this.pointColor=l||"rgba(255, 0, 255, 1)"};!function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new RG(t)}e.prototype.draw=function(e){var t=zq(e),n=this.options,r=n.drawLines,i=n.drawPoints,a=n.lineWidth,o=n.lineColor,s=n.pointSize,l=n.pointColor;if(r&&this.faceLandmarks instanceof kq&&(t.strokeStyle=o,t.lineWidth=a,DG(t,this.faceLandmarks.getJawOutline()),DG(t,this.faceLandmarks.getLeftEyeBrow()),DG(t,this.faceLandmarks.getRightEyeBrow()),DG(t,this.faceLandmarks.getNose()),DG(t,this.faceLandmarks.getLeftEye(),!0),DG(t,this.faceLandmarks.getRightEye(),!0),DG(t,this.faceLandmarks.getMouth(),!0)),i){t.strokeStyle=l,t.fillStyle=l;this.faceLandmarks.positions.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()})}}}();function PG(e,t){var n=[],r=vG(e),i=r.extractWeights,a=r.getRemainingWeights,o=function(e,t){var n=hG(e,t),r=pG(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,i){return{separable_conv0:r(e,t,i+"/separable_conv0"),separable_conv1:r(t,t,i+"/separable_conv1"),expansion_conv:n(e,t,1,i+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(i,n),s=o.extractConvParams,l=o.extractSeparableConvParams,c=o.extractReductionBlockParams,u=o.extractMainBlockParams,h={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},d={};uq(t,0,1).forEach(function(e){d["main_block_"+e]=u(128,"middle_flow/main_block_"+e)});var f={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:l(256,512,"exit_flow/separable_conv")};if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:h,middle_flow:d,exit_flow:f}}}function jG(e,t){var n=[],r=function(e,t){var n=gG(e,t),r=bG(n),i=mG(n);return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),separable_conv2:i(e+"/separable_conv2")}}}}(e,n),i=r.extractConvParams,a=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,l={conv_in:i("entry_flow/conv_in"),reduction_block_0:o("entry_flow/reduction_block_0"),reduction_block_1:o("entry_flow/reduction_block_1")},c={};uq(t,0,1).forEach(function(e){c["main_block_"+e]=s("middle_flow/main_block_"+e)});var u={reduction_block:o("exit_flow/reduction_block"),separable_conv:a("exit_flow/separable_conv")};return uG(e,n),{params:{entry_flow:l,middle_flow:c,exit_flow:u},paramMappings:n}}function LG(e,t,n){return VU(Iz(e,t.filters,n,"same"),t.bias)}function OG(e,t,n){void 0===n&&(n=!0);var r=n?wW(e):e;return r=oG(r,t.separable_conv0,[1,1]),r=oG(wW(r),t.separable_conv1,[1,1]),r=Qz(r,[3,3],[2,2],"same"),r=VU(r,LG(e,t.expansion_conv,[2,2]))}var MG,FG=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return JH(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return Sj(function(){var r=xq(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(qj(256)),i=wW(LG(r,n.entry_flow.conv_in,[2,2]));return i=OG(i,n.entry_flow.reduction_block_0,!1),i=OG(i,n.entry_flow.reduction_block_1),uq(t._numMainBlocks,0,1).forEach(function(e){i=function(e,t){var n=oG(wW(e),t.separable_conv0,[1,1]);return n=oG(wW(n),t.separable_conv1,[1,1]),n=oG(wW(n),t.separable_conv2,[1,1]),VU(n,e)}(i,n.middle_flow["main_block_"+e])}),i=OG(i,n.exit_flow.reduction_block),i=wW(oG(i,n.exit_flow.separable_conv,[1,1]))})},t.prototype.forward=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Jq(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return jG(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return PG(e,this._numMainBlocks)},t}(aG);!function(e){e.FEMALE="female",e.MALE="male"}(MG||(MG={}));var BG=function(e){function t(t){void 0===t&&(t=new FG(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return JH(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Sj(function(){var r=e instanceof $q?t.faceFeatureExtractor.forwardInput(e):e,i=$z(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:SG(i,n.fc.age).as1D(),gender:SG(i,n.fc.gender)}})},t.prototype.forwardInput=function(e){var t=this;return Sj(function(){var n=t.runNet(e),r=n.age,i=n.gender;return{age:r,gender:hO(i)}})},t.prototype.forward=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Jq(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictAgeAndGender=function(e){return eq(this,void 0,void 0,function(){var t,n,r,i,a,o,s=this;return tq(this,function(l){switch(l.label){case 0:return[4,Jq(e)];case 1:return t=l.sent(),[4,this.forwardInput(t)];case 2:return n=l.sent(),r=GL(n.age),i=GL(n.gender),a=r.map(function(e,t){return{ageTensor:e,genderTensor:i[t]}}),[4,Promise.all(a.map(function(e){var t=e.ageTensor,n=e.genderTensor;return eq(s,void 0,void 0,function(){var e,r,i,a,o;return tq(this,function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],a=(i=r>.5)?MG.MALE:MG.FEMALE,o=i?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:a,genderProbability:o}]}})})}))];case 3:return o=l.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=vG(e),r=n.extractWeights,i=n.getRemainingWeights,a=dG(r,t),o=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{fc:{age:o,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=_G(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=gG(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return uG(e,t),{params:i,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(aG),UG=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map(function(e){var n=e.width,r=e.height,i=t/Math.max(r,n);return{width:n*i,height:r*i}}),i=r.length;return Sj(function(){var n=function(e,t){return VL([Jj([68],e),Jj([68],t)],1).as2D(1,136).as1D()},a=function(e,t){var n=r[e],i=n.width,a=n.height;return t(i,a)?Math.abs(i-a)/2:0},o=e.mul(Jj([i,136],t)).sub(VL(Array.from(Array(i),function(e,t){return n(function(e){return a(e,function(e,t){return e<t})}(t),function(e){return a(e,function(e,t){return t<e})}(t))}))).div(VL(Array.from(Array(i),function(e,t){return n(r[t].width,r[t].height)})));return o})},t.prototype.forwardInput=function(e){var t=this;return Sj(function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map(function(e){return{height:e[0],width:e[1]}}))})},t.prototype.forward=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Jq(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.detectLandmarks=function(e){return eq(this,void 0,void 0,function(){var t,n,r,i=this;return tq(this,function(a){switch(a.label){case 0:return[4,Jq(e)];case 1:return t=a.sent(),n=Sj(function(){return GL(i.forwardInput(t))}),[4,Promise.all(n.map(function(e,n){return eq(i,void 0,void 0,function(){var r,i,a,o,s;return tq(this,function(l){switch(l.label){case 0:return a=(i=Array).from,[4,e.data()];case 1:return r=a.apply(i,[l.sent()]),o=r.filter(function(e,t){return sq(t)}),s=r.filter(function(e,t){return!sq(t)}),[2,new kq(Array(68).fill(0).map(function(e,t){return new fq(o[t],s[t])}),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}})})}))];case 2:return r=a.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?r:r[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(EG),zG=function(e){function t(t){return void 0===t&&(t=new wG),e.call(this,"FaceLandmark68Net",t)||this}return JH(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(UG);var WG=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return JH(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Sj(function(){var n=sG(xq(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(qj(255)),t.dense0,!0);return n=sG(n,t.dense1),n=sG(n,t.dense2),n=$z(n,[14,14],[2,2],"valid")})},t.prototype.forward=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Jq(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=xG(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return uG(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=vG(e),r=n.extractWeights,i=n.getRemainingWeights,a=yG(r,t).extractDenseBlock3Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),l=a(64,128,"dense2");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:l}}}(e)},t}(aG),VG=function(e){function t(t){return void 0===t&&(t=new WG),e.call(this,"FaceLandmark68TinyNet",t)||this}return JH(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(UG);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}JH(t,e)}(zG);function HG(e,t,n,r,i){void 0===i&&(i="same");var a=t.conv,o=a.filters,s=a.bias,l=Iz(e,o,n,i);return l=function(e,t){return VU(rz(e,t.weights),t.biases)}(l=VU(l,s),t.scale),r?wW(l):l}function qG(e,t){return HG(e,t,[1,1],!1)}function GG(e,t){return HG(e,t,[2,2],!0,"valid")}function KG(e,t){function n(n,r,i,a){var o=function(t,n,r){var i=e(t),a=i.length/(n*r*r);if(a%1!==0)throw new Error("depth has to be an integer: "+a+", weights.length: "+i.length+", numFilters: "+n+", filterSize: "+r);return Sj(function(){return EW(Xj(i,[n,a,r,r]),[2,3,1,0])})}(n,r,i),s=Gj(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:s}}function r(r,i,a,o){var s=n(r,i,a,o+"/conv"),l=function(n,r){var i=Gj(e(n)),a=Gj(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:i,biases:a}}(i,o+"/scale");return{conv:s,scale:l}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,i,a){return void 0===a&&(a=!1),{conv1:r((a?.5:1)*e,t,n,i+"/conv1"),conv2:r(e,t,n,i+"/conv2")}}}}function YG(e,t){var n=gG(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),i=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:i}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function XG(e){var t=[],n=YG(e,t),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,a=r("conv32_down"),o=i("conv32_1"),s=i("conv32_2"),l=i("conv32_3"),c=i("conv64_down"),u=i("conv64_1"),h=i("conv64_2"),d=i("conv64_3"),f=i("conv128_down"),p=i("conv128_1"),m=i("conv128_2"),g=i("conv256_down"),v=i("conv256_1"),y=i("conv256_2"),b=i("conv256_down_out"),x=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!iq(x,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+x);var w={conv32_down:a,conv32_1:o,conv32_2:s,conv32_3:l,conv64_down:c,conv64_1:u,conv64_2:h,conv64_3:d,conv128_down:f,conv128_1:p,conv128_2:m,conv256_down:g,conv256_1:v,conv256_2:y,conv256_down_out:b,fc:x};return uG(e,t),{params:w,paramMappings:t}}function QG(e,t){var n=function(e,t){return HG(e,t,[1,1],!0)}(e,t.conv1);return n=qG(n,t.conv2),n=VU(n,e),n=wW(n)}function $G(e,t){var n=GG(e,t.conv1);n=qG(n,t.conv2);var r=$z(e,2,2,"valid"),i=$j(r.shape),a=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var o=nq(n.shape);o[1]=1;var s=$j(o),l=nq((n=nL([n,s],1)).shape);l[2]=1;var c=$j(l);n=nL([n,c],2)}return r=a?nL([r,i],3):r,n=VU(r,n),n=wW(n)}var JG=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return JH(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return Sj(function(){var n=GG(xq(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(qj(256)),t.conv32_down);n=QG(n=Qz(n,3,2,"valid"),t.conv32_1),n=QG(n,t.conv32_2),n=QG(n,t.conv32_3),n=QG(n=$G(n,t.conv64_down),t.conv64_1),n=QG(n,t.conv64_2),n=QG(n,t.conv64_3),n=QG(n=$G(n,t.conv128_down),t.conv128_1),n=QG(n,t.conv128_2),n=QG(n=$G(n,t.conv256_down),t.conv256_1);var r=(n=$G(n=QG(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return Uz(r,t.fc)})},t.prototype.forward=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Jq(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.computeFaceDescriptor=function(e){return eq(this,void 0,void 0,function(){var t,n,r,i=this;return tq(this,function(a){switch(a.label){case 0:return[4,Jq(e)];case 1:return t=a.sent(),n=Sj(function(){return GL(i.forwardInput(t))}),[4,Promise.all(n.map(function(e){return e.data()}))];case 2:return r=a.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?r:r[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return XG(e)},t.prototype.extractParams=function(e){return function(e){var t=vG(e),n=t.extractWeights,r=t.getRemainingWeights,i=[],a=KG(n,i),o=a.extractConvLayerParams,s=a.extractResidualLayerParams,l=o(4704,32,7,"conv32_down"),c=s(9216,32,3,"conv32_1"),u=s(9216,32,3,"conv32_2"),h=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),x=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),S=s(589824,256,3,"conv256_down_out"),_=Sj(function(){return EW(Kj(n(32768),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:l,conv32_1:c,conv32_2:u,conv32_3:h,conv64_down:d,conv64_1:f,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:y,conv256_down:b,conv256_1:x,conv256_2:w,conv256_down_out:S,fc:_},paramMappings:i}}(e)},t}(aG);function ZG(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var eK=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,i=t.maxNumScales,a=t.scoreThresholds,o=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=i||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=o,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(e){return"number"!==typeof e}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function tK(e,t){function n(n,r,i,a,o){var s=Xj(e(n*r*i*i),[i,i,n,r]),l=Gj(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/"+(o?"batch_norm_offset":"bias")}),{filters:s,bias:l}}function r(e,t,r,i){var a=n(e,t,r,i,!0);return{filters:a.filters,batch_norm_offset:a.bias}}function i(n,i,a){var o=function(n,r){var i=Xj(e(9*n),[3,3,n,1]),a=Gj(e(n)),o=Gj(e(n)),s=Gj(e(n)),l=Gj(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:i,batch_norm_scale:a,batch_norm_offset:o,batch_norm_mean:s,batch_norm_variance:l}}(n,a+"/depthwise_conv");return{depthwise_conv:o,pointwise_conv:r(n,i,1,a+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:i(32,64,"mobilenetv1/conv_1"),conv_2:i(64,128,"mobilenetv1/conv_2"),conv_3:i(128,128,"mobilenetv1/conv_3"),conv_4:i(128,256,"mobilenetv1/conv_4"),conv_5:i(256,256,"mobilenetv1/conv_5"),conv_6:i(256,512,"mobilenetv1/conv_6"),conv_7:i(512,512,"mobilenetv1/conv_7"),conv_8:i(512,512,"mobilenetv1/conv_8"),conv_9:i(512,512,"mobilenetv1/conv_9"),conv_10:i(512,512,"mobilenetv1/conv_10"),conv_11:i(512,512,"mobilenetv1/conv_11"),conv_12:i(512,1024,"mobilenetv1/conv_12"),conv_13:i(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function nK(e){var t=[],n=function(e,t){var n=gG(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function i(e){var t="mobilenetv1/conv_"+e,i="MobilenetV1/Conv2d_"+e+"_depthwise",a=t+"/depthwise_conv",o=t+"/pointwise_conv";return{depthwise_conv:{filters:n(i+"/depthwise_weights",4,a+"/filters"),batch_norm_scale:n(i+"/BatchNorm/gamma",1,a+"/batch_norm_scale"),batch_norm_offset:n(i+"/BatchNorm/beta",1,a+"/batch_norm_offset"),batch_norm_mean:n(i+"/BatchNorm/moving_mean",1,a+"/batch_norm_mean"),batch_norm_variance:n(i+"/BatchNorm/moving_variance",1,a+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,o)}}function a(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function o(e){return{box_encoding_predictor:a("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:a("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(e,t),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!aq(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var o={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:a}};return uG(e,t),{params:o,paramMappings:t}}function rK(e,t,n){return Sj(function(){var r=Iz(e,t.filters,n,"same");return r=VU(r,t.batch_norm_offset),$B(r,0,6)})}function iK(e,t){return Sj(function(){var n=null,r=rK(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach(function(e,t){var i=t+1,a=function(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}(i);r=function(e,t,n){return Sj(function(){var r=jz(e,t.filters,n,"same");return r=PU(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),$B(r,0,6)})}(r,e.depthwise_conv,a),r=rK(r,e.pointwise_conv,[1,1]),11===i&&(n=r)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function aK(e,t,n){var r=e.arraySync(),i=Math.min(r[t][0],r[t][2]),a=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),h=Math.max(r[n][1],r[n][3]),d=(o-i)*(s-a),f=(u-l)*(h-c);if(d<=0||f<=0)return 0;var p=Math.max(i,l),m=Math.max(a,c),g=Math.min(o,u),v=Math.min(s,h),y=Math.max(g-p,0)*Math.max(v-m,0);return y/(d+f-y)}function oK(e,t){var n=function(e){var t=GL(EW(e,[1,0])),n=[lz(t[2],t[0]),lz(t[3],t[1])];return{sizes:n,centers:[VU(t[0],KU(n[0],qj(2))),VU(t[1],KU(n[1],qj(2)))]}}(e),r=n.sizes,i=n.centers,a=GL(EW(t,[1,0])),o=KU(rz(tU(KU(a[2],qj(5))),r[0]),qj(2)),s=VU(rz(KU(a[0],qj(10)),r[0]),i[0]),l=KU(rz(tU(KU(a[3],qj(5))),r[1]),qj(2)),c=VU(rz(KU(a[1],qj(10)),r[1]),i[1]);return EW(VL([lz(s,o),lz(c,l),VU(s,o),VU(c,l)]),[1,0])}function sK(e,t){return Sj(function(){var n=e.shape[0];return{boxPredictionEncoding:UL(cG(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:UL(cG(e,t.class_predictor),[n,-1,3])}})}var lK=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),cK=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return JH(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return Sj(function(){var n=e.toBatchTensor(512,!1).toFloat(),r=iK(lz(rz(n,qj(.007843137718737125)),qj(1)),t.mobilenetv1),i=function(e,t,n){return Sj(function(){var r=rK(e,n.conv_0,[1,1]),i=rK(r,n.conv_1,[2,2]),a=rK(i,n.conv_2,[1,1]),o=rK(a,n.conv_3,[2,2]),s=rK(o,n.conv_4,[1,1]),l=rK(s,n.conv_5,[2,2]),c=rK(l,n.conv_6,[1,1]),u=rK(c,n.conv_7,[2,2]),h=sK(t,n.box_predictor_0),d=sK(e,n.box_predictor_1),f=sK(i,n.box_predictor_2),p=sK(o,n.box_predictor_3),m=sK(l,n.box_predictor_4),g=sK(u,n.box_predictor_5);return{boxPredictions:nL([h.boxPredictionEncoding,d.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:nL([h.classPrediction,d.classPrediction,f.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction],1)}})}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return Sj(function(){var r=e.shape[0],i=oK(UL(HL(n.extra_dim,[r,1,1]),[-1,4]),UL(e,[-1,4]));i=UL(i,[r,i.shape[0]/r,4]);var a=hU(tW(t,[0,0,1],[-1,-1,-1])),o=tW(a,[0,0,0],[-1,-1,1]);return o=UL(o,[r,o.shape[1]]),{boxes:GL(i),scores:GL(o)}})}(i.boxPredictions,i.classPredictions,t.output_layer)})},t.prototype.forward=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Jq(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),eq(this,void 0,void 0,function(){var n,r,i,a,o,s,l,c,u,h,d,f,p,m,g,v,y,b,x,w;return tq(this,function(S){switch(S.label){case 0:return n=new lK(t),r=n.maxResults,i=n.minConfidence,[4,Jq(e)];case 1:for(a=S.sent(),o=this.forwardInput(a),s=o.boxes,l=o.scores,c=s[0],u=l[0],h=1;h<s.length;h++)s[h].dispose(),l[h].dispose();return p=(f=Array).from,[4,u.data()];case 2:return d=p.apply(f,[S.sent()]),m=function(e,t,n,r,i){var a=e.shape[0],o=Math.min(n,a),s=t.map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>i}).sort(function(e,t){return t.score-e.score}),l=function(e){return e<=r?1:0},c=[];return s.forEach(function(t){if(!(c.length>=o)){for(var n=t.score,r=c.length-1;r>=0;--r){var a=aK(e,t.boxIndex,c[r]);if(0!==a&&(t.score*=l(a),t.score<=i))break}n===t.score&&c.push(t.boxIndex)}}),c}(c,d,r,.5,i),g=a.getReshapedInputDimensions(0),v=a.inputSize,y=v/g.width,b=v/g.height,x=c.arraySync(),w=m.map(function(e){var t=[Math.max(0,x[e][0]),Math.min(1,x[e][2])].map(function(e){return e*b}),n=t[0],r=t[1],i=[Math.max(0,x[e][1]),Math.min(1,x[e][3])].map(function(e){return e*y}),o=i[0],s=i[1];return new vq(d[e],new _q(o,n,s-o,r-n),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),c.dispose(),u.dispose(),[2,w]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return nK(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=vG(e),r=n.extractWeights,i=n.getRemainingWeights,a=tK(r,t),o=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,l=o(),c=s(),u={extra_dim:Yj(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:l,prediction_layer:c,output_layer:u},paramMappings:t}}(e)},t}(aG);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}JH(t,e)}(cK);var uK,hK=[new fq(.738768,.874946),new fq(2.42204,2.65704),new fq(4.30971,7.04493),new fq(10.246,4.59428),new fq(12.6868,11.8741)],dK=[new fq(1.603231,2.094468),new fq(6.041143,7.080126),new fq(2.882459,3.518061),new fq(4.266906,5.178857),new fq(9.041765,10.66308)],fK=[117.001,114.697,97.404],pK=function(e){return"number"===typeof e};function mK(e){return Sj(function(){var t=rz(e,qj(.10000000149011612));return VU(wW(lz(e,t)),t)})}function gK(e,t){return Sj(function(){var n=DL(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Iz(n,t.conv.filters,[1,1],"valid"),n=lz(n,t.bn.sub),n=rz(n,t.bn.truediv),mK(n=VU(n,t.conv.bias))})}function vK(e,t){return Sj(function(){var n=DL(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Mz(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),mK(n=VU(n,t.bias))})}function yK(e,t){var n=hG(e,t);var r=pG(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,i,a){var o=n(r,i,3,a+"/conv"),s=function(n,r){var i=Gj(e(n)),a=Gj(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:i,truediv:a}}(i,a+"/bn");return{conv:o,bn:s}},extractSeparableConvParams:r}}function bK(e,t){var n=gG(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),i=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:i}},extractSeparableConvParams:mG(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(uK||(uK={}));var xK=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),wK=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!pK(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(e){return"string"===typeof e}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(e){return e||{}}).every(function(e){return pK(e.x)&&pK(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(pK)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return JH(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=gK(e,t.conv0);return n=gK(n=Qz(n,[2,2],[2,2],"same"),t.conv1),n=gK(n=Qz(n,[2,2],[2,2],"same"),t.conv2),n=gK(n=Qz(n,[2,2],[2,2],"same"),t.conv3),n=gK(n=Qz(n,[2,2],[2,2],"same"),t.conv4),n=gK(n=Qz(n,[2,2],[2,2],"same"),t.conv5),n=gK(n=Qz(n,[2,2],[1,1],"same"),t.conv6),cG(n=gK(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?mK(cG(e,t.conv0,"valid",!1)):vK(e,t.conv0);return n=vK(n=Qz(n,[2,2],[2,2],"same"),t.conv1),n=vK(n=Qz(n,[2,2],[2,2],"same"),t.conv2),n=vK(n=Qz(n,[2,2],[2,2],"same"),t.conv3),n=vK(n=Qz(n,[2,2],[2,2],"same"),t.conv4),n=vK(n=Qz(n,[2,2],[2,2],"same"),t.conv5),n=Qz(n,[2,2],[1,1],"same"),n=t.conv6?vK(n,t.conv6):n,cG(n=t.conv7?vK(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return Sj(function(){var i=e.toBatchTensor(t,!1).toFloat();return i=(i=n.config.meanRgb?xq(i,n.config.meanRgb):i).div(qj(256)),n.config.withSeparableConvs?n.runMobilenet(i,r):n.runTinyYolov2(i,r)})},t.prototype.forward=function(e,t){return eq(this,void 0,void 0,function(){var n;return tq(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Jq(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}})})},t.prototype.detect=function(e,t){return void 0===t&&(t={}),eq(this,void 0,void 0,function(){var n,r,i,a,o,s,l,c,u,h,d,f,p,m=this;return tq(this,function(g){switch(g.label){case 0:return n=new xK(t),r=n.inputSize,i=n.scoreThreshold,[4,Jq(e)];case 1:return a=g.sent(),[4,this.forwardInput(a,r)];case 2:return o=g.sent(),s=Sj(function(){return GL(o)[0].expandDims()}),l={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(s,a.getReshapedInputDimensions(0),i)];case 3:return c=g.sent(),o.dispose(),s.dispose(),u=c.map(function(e){return e.box}),h=c.map(function(e){return e.score}),d=c.map(function(e){return e.classScore}),f=c.map(function(e){return m.config.classes[e.label]}),p=bq(u.map(function(e){return e.rescale(r)}),h,this.config.iouThreshold,!0),[2,p.map(function(e){return new gq(h[e],d[e],f[e],u[e],l)})]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],i=bK(e,r),a=i.extractConvParams,o=i.extractConvWithBatchNormParams,s=i.extractSeparableConvParams;if(t.withSeparableConvs){var l=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?a("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:l>7?s("conv6"):void 0,conv7:l>8?s("conv7"):void 0,conv8:a("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:a("conv8")};return uG(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var i,a=vG(e),o=a.extractWeights,s=a.getRemainingWeights,l=[],c=yK(o,l),u=c.extractConvParams,h=c.extractConvWithBatchNormParams,d=c.extractSeparableConvParams;if(t.withSeparableConvs){var f=r[0],p=r[1],m=r[2],g=r[3],v=r[4],y=r[5],b=r[6],x=r[7],w=r[8];i={conv0:t.isFirstLayerConv2d?u(f,p,3,"conv0"):d(f,p,"conv0"),conv1:d(p,m,"conv1"),conv2:d(m,g,"conv2"),conv3:d(g,v,"conv3"),conv4:d(v,y,"conv4"),conv5:d(y,b,"conv5"),conv6:x?d(b,x,"conv6"):void 0,conv7:w?d(x,w,"conv7"):void 0,conv8:u(w||x||b,5*n,1,"conv8")}}else f=r[0],p=r[1],m=r[2],g=r[3],v=r[4],y=r[5],b=r[6],x=r[7],w=r[8],i={conv0:h(f,p,"conv0"),conv1:h(p,m,"conv1"),conv2:h(m,g,"conv2"),conv3:h(g,v,"conv3"),conv4:h(v,y,"conv4"),conv5:h(y,b,"conv5"),conv6:h(b,x,"conv6"),conv7:h(x,w,"conv7"),conv8:u(w,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:i,paramMappings:l}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return eq(this,void 0,void 0,function(){var r,i,a,o,s,l,c,u,h,d,f,p,m,g,v,y,b,x,w,S,_,E,C,k,N,A,T,I,D,R=this;return tq(this,function(P){switch(P.label){case 0:return r=t.width,i=t.height,a=Math.max(r,i),o=a/r,s=a/i,l=e.shape[1],c=this.config.anchors.length,u=Sj(function(){var t=e.reshape([l,l,c,R.boxEncodingSize]);return[t.slice([0,0,0,0],[l,l,c,4]),t.slice([0,0,0,4],[l,l,c,1]),R.withClassScores?hO(t.slice([0,0,0,5],[l,l,c,R.config.classes.length]),3):qj(0)]}),h=u[0],d=u[1],f=u[2],p=[],[4,d.array()];case 1:return m=P.sent(),[4,h.array()];case 2:g=P.sent(),v=0,P.label=3;case 3:if(!(v<l))return[3,12];y=0,P.label=4;case 4:if(!(y<l))return[3,11];b=0,P.label=5;case 5:return b<c?(x=wq(m[v][y][b][0]),!n||x>n?(w=(y+wq(g[v][y][b][0]))/l*o,S=(v+wq(g[v][y][b][1]))/l*s,_=Math.exp(g[v][y][b][2])*this.config.anchors[b].x/l*o,E=Math.exp(g[v][y][b][3])*this.config.anchors[b].y/l*s,C=w-_/2,k=S-E/2,N={row:v,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(f,N)]:[3,7]):[3,9]):[3,10];case 6:return D=P.sent(),[3,8];case 7:D={classScore:1,label:0},P.label=8;case 8:T=(A=D).classScore,I=A.label,p.push(ZH({box:new mq(C,k,C+_,k+E),score:x,classScore:x*T,label:I},N)),P.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return v++,[3,3];case 12:return h.dispose(),d.dispose(),f.dispose(),[2,p]}})})},t.prototype.extractPredictedClass=function(e,t){return eq(this,void 0,void 0,function(){var n,r,i,a;return tq(this,function(o){switch(o.label){case 0:return n=t.row,r=t.col,i=t.anchor,[4,e.array()];case 1:return a=o.sent(),[2,Array(this.config.classes.length).fill(0).map(function(e,t){return a[n][r][i][t]}).map(function(e,t){return{classScore:e,label:t}}).reduce(function(e,t){return e.classScore>t.classScore?e:t})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(aG),SK=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:dK,meanRgb:fK}:{anchors:hK,withClassScores:!0});return e.call(this,n)||this}return JH(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return eq(this,void 0,void 0,function(){return tq(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new vq(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(wK);var _K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return JH(t,e),t}(xK),EK=function(){function e(){}return e.prototype.then=function(e){return eq(this,void 0,void 0,function(){var t;return tq(this,function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}})})},e.prototype.run=function(){return eq(this,void 0,void 0,function(){return tq(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},e}();function CK(e,t){var n={descriptor:t};return Object.assign({},e,n)}function kK(e,t,n,r,i){return void 0===i&&(i=function(e){return e.alignedRect}),eq(this,void 0,void 0,function(){var a,o,s,l,c;return tq(this,function(u){switch(u.label){case 0:return a=e.map(function(e){return TG(e)?i(e):e.detection}),(s=r)?[3,5]:t instanceof eP?[4,eG(t,a)]:[3,2];case 1:return l=u.sent(),[3,4];case 2:return[4,Zq(t,a)];case 3:l=u.sent(),u.label=4;case 4:s=l,u.label=5;case 5:return[4,n(o=s)];case 6:return c=u.sent(),o.forEach(function(e){return e instanceof eP&&e.dispose()}),[2,c]}})})}function NK(e,t,n,r,i){return eq(this,void 0,void 0,function(){var a=this;return tq(this,function(o){return[2,kK([e],t,function(e){return eq(a,void 0,void 0,function(){return tq(this,function(t){return[2,n(e[0])]})})},r,i)]})})}function AK(e){var t=vG(e),n=t.extractWeights,r=t.getRemainingWeights,i=[],a=function(e,t){var n=hG(e,t),r=dG(e,t);function i(n,r){var i=Gj(e(n));return t.push({paramPath:r}),i}function a(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:i(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:i(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:i(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=a([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return ZH(ZH({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=a([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=i(128,"rnet/prelu4_alpha"),o=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return ZH(ZH({},e),{fc1:t,prelu4_alpha:n,fc2_1:o,fc2_2:s})},extractONetParams:function(){var e=a([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),o=i(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),l=i(256,"onet/prelu5_alpha"),c=r(256,2,"onet/fc2_1"),u=r(256,4,"onet/fc2_2"),h=r(256,10,"onet/fc2_3");return ZH(ZH({},e),{conv4:t,prelu4_alpha:o,fc1:s,prelu5_alpha:l,fc2_1:c,fc2_2:u,fc2_3:h})}}}(n,i),o=a.extractPNetParams,s=a.extractRNetParams,l=a.extractONetParams,c=o(),u=s(),h=l();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:u,onet:h},paramMappings:i}}function TK(e){var t=[],n=function(e,t){var n=gG(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function i(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function a(e){return n(e,1)}function o(e){return{conv1:r(e+"/conv1"),prelu1_alpha:a(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:a(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:a(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=o("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return ZH(ZH({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=o("rnet"),t=i("rnet/fc1"),n=a("rnet/prelu4_alpha"),r=i("rnet/fc2_1"),s=i("rnet/fc2_2");return ZH(ZH({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=o("onet"),t=r("onet/conv4"),n=a("onet/prelu4_alpha"),s=i("onet/fc1"),l=a("onet/prelu5_alpha"),c=i("onet/fc2_1"),u=i("onet/fc2_2"),h=i("onet/fc2_3");return ZH(ZH({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:l,fc2_1:c,fc2_2:u,fc2_3:h})}}}(e,t),r=n.extractPNetParams,i=n.extractRNetParams,a=n.extractONetParams,o=r(),s=i(),l=a();return uG(e,t),{params:{pnet:o,rnet:s,onet:l},paramMappings:t}}function IK(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var DK=function(e){function t(t,n,r,i){return e.call(this,{left:t,top:n,right:r,bottom:i},!0)||this}return JH(t,e),t}(pq);function RK(e){return Sj(function(){return rz(lz(e,qj(127.5)),qj(.0078125))})}function PK(e,t){return Sj(function(){return VU(wW(e),rz(t,sU(wW(sU(e)))))})}function jK(e,t,n){return void 0===n&&(n=!1),Sj(function(){var r=cG(e,t.conv1,"valid");return r=PK(r,t.prelu1_alpha),r=PK(r=cG(r=Qz(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=PK(r=cG(r=n?r:Qz(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)})}function LK(e,t,n,r,i){i.stage1=[];var a=t.map(function(t){return Sj(function(){var n={scale:t},i=function(e,t){return Sj(function(){var n=IK(t,e.shape.slice(1)),r=n.height,i=n.width,a=RK(gV.resizeBilinear(e,[r,i]));return EW(a,[0,2,1,3])})}(e,t),a=Date.now(),o=function(e,t){return Sj(function(){var n=jK(e,t,!0),r=cG(n,t.conv4_1,"valid"),i=NL(dW(r,3),3);return{prob:hO(lz(r,i),3),regions:cG(n,t.conv4_2,"valid")}})}(i,r),s=o.prob,l=o.regions;return n.pnet=Date.now()-a,{scoresTensor:GL(GL(s,3)[1])[0],regionsTensor:GL(l)[0],scale:t,statsForScale:n}})}),o=a.map(function(e){var t=e.scoresTensor,r=e.regionsTensor,a=e.scale,o=e.statsForScale,s=function(e,t,n,r){for(var i=[],a=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)a[o][s]>=r&&i.push(new fq(s,o));return i.map(function(e){var r=new mq(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),i=a[e.y][e.x],o=t.arraySync();return{cell:r,score:i,region:new DK(o[e.y][e.x][0],o[e.y][e.x][1],o[e.y][e.x][2],o[e.y][e.x][3])}})}(t,r,a,n);if(t.dispose(),r.dispose(),!s.length)return i.stage1.push(o),[];var l=Date.now(),c=bq(s.map(function(e){return e.cell}),s.map(function(e){return e.score}),.5);return o.nms=Date.now()-l,o.numBoxes=c.length,i.stage1.push(o),c.map(function(e){return s[e]})}),s=o.reduce(function(e,t){return e.concat(t)},[]),l=[],c=[];if(s.length>0){var u=Date.now(),h=bq(s.map(function(e){return e.cell}),s.map(function(e){return e.score}),.7);i.stage1_nms=Date.now()-u,c=h.map(function(e){return s[e].score}),l=h.map(function(e){return s[e]}).map(function(e){var t=e.cell,n=e.region;return new mq(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()})}return{boxes:l,scores:c}}function OK(e,t,n){var r=n.width,i=n.height;return eq(this,void 0,void 0,function(){var n,a,o,s=this;return tq(this,function(l){switch(l.label){case 0:return n=zq(e),[4,Promise.all(t.map(function(t){return eq(s,void 0,void 0,function(){var r,i,a,o,s,l,c,u;return tq(this,function(h){return r=t.padAtBorders(e.height,e.width),i=r.y,a=r.ey,o=r.x,s=r.ex,l=o-1,c=i-1,u=n.getImageData(l,c,s-l,a-c),[2,Bq.isNodejs()?Yq(u):createImageBitmap(u)]})})}))];case 1:return a=l.sent(),o=[],a.forEach(function(e){var t=zq(Kq({width:r,height:i}));t.drawImage(e,0,0,r,i);for(var n=t.getImageData(0,0,r,i).data,a=[],s=0;s<n.length;s+=4)a.push(n[s+2]),a.push(n[s+1]),a.push(n[s]);o.push(a)}),[2,o.map(function(e){return Sj(function(){return RK(EW(Xj(e,[1,r,i,3]),[0,2,1,3]).toFloat())})})]}})})}function MK(e,t,n,r,i){return eq(this,void 0,void 0,function(){var a,o,s,l,c,u,h,d,f,p,m,g,v,y;return tq(this,function(b){switch(b.label){case 0:return a=Date.now(),[4,OK(e,t,{width:24,height:24})];case 1:return o=b.sent(),i.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(e){var t=function(e,t){return Sj(function(){var n=jK(e,t),r=PK(SG(UL(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),i=SG(r,t.fc2_1),a=NL(dW(i,1),1),o=hO(lz(i,a),1),s=SG(r,t.fc2_2);return{scores:GL(o,1)[1],regions:s}})}(e,r);return e.dispose(),t}),i.stage2_rnet=Date.now()-a,l=s.length>1?nL(s.map(function(e){return e.scores})):s[0].scores,h=(u=Array).from,[4,l.data()];case 2:return c=h.apply(u,[b.sent()]),l.dispose(),d=c.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),f=d.map(function(e){return t[e]}),p=d.map(function(e){return c[e]}),m=[],g=[],f.length>0&&(a=Date.now(),v=bq(f,p,.7),i.stage2_nms=Date.now()-a,y=v.map(function(e){var t=s[d[e]].regions.arraySync();return new DK(t[0][0],t[0][1],t[0][2],t[0][3])}),g=v.map(function(e){return p[e]}),m=v.map(function(e,t){return f[e].calibrate(y[t])})),s.forEach(function(e){e.regions.dispose(),e.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function FK(e,t,n,r,i){return eq(this,void 0,void 0,function(){var a,o,s,l,c,u,h,d,f,p,m,g,v,y,b;return tq(this,function(x){switch(x.label){case 0:return a=Date.now(),[4,OK(e,t,{width:48,height:48})];case 1:return o=x.sent(),i.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(e){var t=function(e,t){return Sj(function(){var n=jK(e,t);n=PK(n=cG(n=Qz(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=PK(SG(UL(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),i=SG(r,t.fc2_1),a=NL(dW(i,1),1),o=hO(lz(i,a),1),s=SG(r,t.fc2_2),l=SG(r,t.fc2_3);return{scores:GL(o,1)[1],regions:s,points:l}})}(e,r);return e.dispose(),t}),i.stage3_onet=Date.now()-a,l=s.length>1?nL(s.map(function(e){return e.scores})):s[0].scores,h=(u=Array).from,[4,l.data()];case 2:return c=h.apply(u,[x.sent()]),l.dispose(),d=c.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),f=d.map(function(e){var t=s[e].regions.arraySync();return new DK(t[0][0],t[0][1],t[0][2],t[0][3])}),p=d.map(function(e,n){return t[e].calibrate(f[n])}),m=d.map(function(e){return c[e]}),g=[],v=[],y=[],p.length>0&&(a=Date.now(),b=bq(p,m,.7,!1),i.stage3_nms=Date.now()-a,g=b.map(function(e){return p[e]}),v=b.map(function(e){return m[e]}),y=b.map(function(e,t){return Array(5).fill(0).map(function(n,r){var i=s[e].points.arraySync();return new fq(i[0][r]*(g[t].width+1)+g[t].left,i[0][r+5]*(g[t].height+1)+g[t].top)})})),s.forEach(function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()}),[2,{boxes:g,scores:v,points:y}]}})})}var BK=function(e){function t(){return e.call(this,"Mtcnn")||this}return JH(t,e),t.prototype.load=function(t){return eq(this,void 0,void 0,function(){return tq(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]})})},t.prototype.loadFromDisk=function(t){return eq(this,void 0,void 0,function(){return tq(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]})})},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),eq(this,void 0,void 0,function(){var n,r,i,a,o,s,l,c,u,h,d,f,p,m,g,v,y,b,x,w,S;return tq(this,function(_){switch(_.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},a=Date.now(),o=Sj(function(){return e=NL(LH.fromPixels(r)).toFloat(),Sj(function(){return VL(GL(e,3).reverse(),3)});var e}),s=function(e){return o.dispose(),i.total=Date.now()-a,e},l=o.shape.slice(1),c=l[0],u=l[1],h=new eK(t),d=h.minFaceSize,f=h.scaleFactor,p=h.maxNumScales,m=h.scoreThresholds,g=h.scaleSteps,v=(g||function(e,t,n){for(var r=n[0],i=n[1],a=12/e,o=[],s=Math.min(r,i)*a,l=0;s>=12;)o.push(a*Math.pow(t,l)),s*=t,l+=1;return o}(d,f,[c,u])).filter(function(e){var t=IK(e,[c,u]);return Math.min(t.width,t.height)>12}).slice(0,p),i.scales=v,i.pyramid=v.map(function(e){return IK(e,[c,u])}),y=Date.now(),[4,LK(o,v,m[0],n.pnet,i)];case 1:return b=_.sent(),i.total_stage1=Date.now()-y,b.boxes.length?(i.stage2_numInputBoxes=b.boxes.length,y=Date.now(),[4,MK(r,b.boxes,m[1],n.rnet,i)]):[2,s({results:[],stats:i})];case 2:return x=_.sent(),i.total_stage2=Date.now()-y,x.boxes.length?(i.stage3_numInputBoxes=x.boxes.length,y=Date.now(),[4,FK(r,x.boxes,m[2],n.onet,i)]):[2,s({results:[],stats:i})];case 3:return w=_.sent(),i.total_stage3=Date.now()-y,S=w.boxes.map(function(e,t){return IG(Iq({},new vq(w.scores[t],new _q(e.left/u,e.top/c,e.width/u,e.height/c),{height:c,width:u})),new Cq(w.points[t].map(function(t){return t.sub(new fq(e.left,e.top)).div(new fq(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,s({results:S,stats:i})]}})})},t.prototype.forward=function(e,t){return void 0===t&&(t={}),eq(this,void 0,void 0,function(){var n;return tq(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Jq(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}})})},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),eq(this,void 0,void 0,function(){var n;return tq(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Jq(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return TK(e)},t.prototype.extractParams=function(e){return AK(e)},t}(aG),UK=[new fq(1.603231,2.094468),new fq(6.041143,7.080126),new fq(2.882459,3.518061),new fq(4.266906,5.178857),new fq(9.041765,10.66308)],zK=[117.001,114.697,97.404],WK=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:UK,meanRgb:zK,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return JH(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return eq(this,void 0,void 0,function(){return tq(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new vq(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(wK),VK={ssdMobilenetv1:new cK,tinyFaceDetector:new WK,tinyYolov2:new SK,mtcnn:new BK,faceLandmark68Net:new zG,faceLandmark68TinyNet:new VG,faceRecognitionNet:new JG,faceExpressionNet:new NG,ageGenderNet:new BG};function HK(e,t){var n={age:t};return Object.assign({},e,n)}var qK=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return JH(t,e),t}(EK),GK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t,n=this;return tq(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,kK(e=r.sent(),this.input,function(e){return eq(n,void 0,void 0,function(){return tq(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return VK.faceExpressionNet.predictExpressions(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=r.sent(),[2,e.map(function(e,n){return AG(e,t[n])})]}})})},t.prototype.withAgeAndGender=function(){return new $K(this,this.input)},t}(qK),KK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t;return tq(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,NK(e,this.input,function(e){return VK.faceExpressionNet.predictExpressions(e)},this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,AG(e,t)]}})})},t.prototype.withAgeAndGender=function(){return new JK(this,this.input)},t}(qK),YK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.withAgeAndGender=function(){return new ZK(this,this.input)},t.prototype.withFaceDescriptors=function(){return new nY(this,this.input)},t}(GK),XK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.withAgeAndGender=function(){return new eY(this,this.input)},t.prototype.withFaceDescriptor=function(){return new rY(this,this.input)},t}(KK),QK=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return JH(t,e),t}(EK),$K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t,n=this;return tq(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,kK(e=r.sent(),this.input,function(e){return eq(n,void 0,void 0,function(){return tq(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return VK.ageGenderNet.predictAgeAndGender(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=r.sent(),[2,e.map(function(e,n){var r=t[n],i=r.age;return HK(ZG(e,r.gender,r.genderProbability),i)})]}})})},t.prototype.withFaceExpressions=function(){return new GK(this,this.input)},t}(QK),JK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t,n,r,i;return tq(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?[4,NK(e,this.input,function(e){return VK.ageGenderNet.predictAgeAndGender(e)},this.extractedFaces)]:[2];case 2:return t=a.sent(),n=t.age,r=t.gender,i=t.genderProbability,[2,HK(ZG(e,r,i),n)]}})})},t.prototype.withFaceExpressions=function(){return new KK(this,this.input)},t}(QK),ZK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.withFaceExpressions=function(){return new YK(this,this.input)},t.prototype.withFaceDescriptors=function(){return new nY(this,this.input)},t}($K),eY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.withFaceExpressions=function(){return new XK(this,this.input)},t.prototype.withFaceDescriptor=function(){return new rY(this,this.input)},t}(JK),tY=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return JH(t,e),t}(EK),nY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e;return tq(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,kK(e=t.sent(),this.input,function(e){return Promise.all(e.map(function(e){return VK.faceRecognitionNet.computeFaceDescriptor(e)}))},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,t.sent().map(function(t,n){return CK(e[n],t)})]}})})},t.prototype.withFaceExpressions=function(){return new YK(this,this.input)},t.prototype.withAgeAndGender=function(){return new ZK(this,this.input)},t}(tY),rY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t;return tq(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,NK(e,this.input,function(e){return VK.faceRecognitionNet.computeFaceDescriptor(e)},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return t=n.sent(),[2,CK(e,t)]}})})},t.prototype.withFaceExpressions=function(){return new XK(this,this.input)},t.prototype.withAgeAndGender=function(){return new eY(this,this.input)},t}(tY),iY=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.useTinyLandmarkNet=r,i}return JH(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?VK.faceLandmark68TinyNet:VK.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(EK),aY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t,n,r,i,a=this;return tq(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),t=e.map(function(e){return e.detection}),this.input instanceof eP?[4,eG(this.input,t)]:[3,3];case 2:return r=o.sent(),[3,5];case 3:return[4,Zq(this.input,t)];case 4:r=o.sent(),o.label=5;case 5:return n=r,[4,Promise.all(n.map(function(e){return a.landmarkNet.detectLandmarks(e)}))];case 6:return i=o.sent(),n.forEach(function(e){return e instanceof eP&&e.dispose()}),[2,e.map(function(e,t){return IG(e,i[t])})]}})})},t.prototype.withFaceExpressions=function(){return new YK(this,this.input)},t.prototype.withAgeAndGender=function(){return new ZK(this,this.input)},t.prototype.withFaceDescriptors=function(){return new nY(this,this.input)},t}(iY),oY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t,n,r,i;return tq(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?(t=e.detection,this.input instanceof eP?[4,eG(this.input,[t])]:[3,3]):[2];case 2:return r=a.sent(),[3,5];case 3:return[4,Zq(this.input,[t])];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return i=a.sent(),n.forEach(function(e){return e instanceof eP&&e.dispose()}),[2,IG(e,i)]}})})},t.prototype.withFaceExpressions=function(){return new XK(this,this.input)},t.prototype.withAgeAndGender=function(){return new eY(this,this.input)},t.prototype.withFaceDescriptor=function(){return new rY(this,this.input)},t}(iY),sY=function(e){function t(t,n){void 0===n&&(n=new lK);var r=e.call(this)||this;return r.input=t,r.options=n,r}return JH(t,e),t}(EK),lY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t,n,r;return tq(this,function(i){switch(i.label){case 0:return t=(e=this).input,(n=e.options)instanceof eK?[4,VK.mtcnn.forward(t,n)]:[3,2];case 1:return[2,i.sent().map(function(e){return e.detection})];case 2:if(r=n instanceof _K?function(e){return VK.tinyFaceDetector.locateFaces(e,n)}:n instanceof lK?function(e){return VK.ssdMobilenetv1.locateFaces(e,n)}:n instanceof xK?function(e){return VK.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(t){return eq(e,void 0,void 0,function(){var e;return tq(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map(function(e){return Iq({},e)}))]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new aY(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new GK(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new $K(this.runAndExtendWithFaceDetections(),this.input)},t}(sY);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}JH(t,e),t.prototype.run=function(){return eq(this,void 0,void 0,function(){var e,t;return tq(this,function(n){switch(n.label){case 0:return[4,new lY(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach(function(e){e.score>t.score&&(t=e)}),[2,t]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(t){return eq(e,void 0,void 0,function(){var e;return tq(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?Iq({},e):void 0)]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new oY(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new KK(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new JK(this.runAndExtendWithFaceDetection(),this.input)}}(sY);!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,i=function(){return"person "+r++};this._labeledDescriptors=n.map(function(e){if(e instanceof Tq)return e;if(e instanceof Float32Array)return new Tq(i(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new Tq(i(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map(function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(e,t){return e-r[t]}).reduce(function(e,t){return e+Math.pow(t,2)},0))}(t,e)}).reduce(function(e,t){return e+t},0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(n){var r=n.descriptors,i=n.label;return new Nq(i,t.computeMeanDistance(e,r))}).reduce(function(e,t){return e.distance<t.distance?e:t})},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new Nq("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(e){return Tq.fromJSON(e)});return new e(n,t.distanceThreshold)}}();const cY=!1,uY="Z2l0aHViX3Bh",hY="dF8xMUJDT1FG",dY="Q0EwYU1RcHVi",fY="SmZ0dk9xX3Nv",pY="S0lDWlVyNVY4",mY="ZHN5ckZsTDVa",gY="SW5IZWNXYjYw",vY="d1ZEdEpsR1dY",yY="dG56bWZDUUZK",bY="UU9KTjJBZDhocEZO",xY=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&e.toString().trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"mcq-test"},wY="/student/mcq",SY="mcqAutoSubmitNotice",_Y={timer:"Timer expired before submission",navigation:"User navigated away from the MCQ page","network-timeout":"Network reconnect timeout exceeded","grace-expired":"Reload grace period expired","offline-pending":"Pending attempt auto-submitted while offline",default:"Automatic submission completed"},EY=e=>e&&_Y[e]||_Y.default,CY=()=>{const e=ne(),{testSlug:n}=function(){let{matches:e}=t.useContext(Q),n=e[e.length-1];return n?n.params:{}}(),r=ee(),[i,a]=(0,t.useState)(null),[o,s]=(0,t.useState)(null),[l,c]=(0,t.useState)([]),[u,h]=(0,t.useState)([]),[d,f]=(0,t.useState)(null),[p,m]=(0,t.useState)(0),[g,v]=(0,t.useState)({}),[y,b]=(0,t.useState)(!1),[x,w]=(0,t.useState)(null),[S,_]=(0,t.useState)(null),[E,C]=(0,t.useState)(""),[k,N]=(0,t.useState)(null),[A,T]=(0,t.useState)([]),[I,D]=(0,t.useState)(!1),[R,P]=(0,t.useState)(!1),[j,L]=(0,t.useState)({}),[O,M]=(0,t.useState)(0),[F,B]=(0,t.useState)(0),[U,z]=(0,t.useState)(0),[W,V]=(0,t.useState)(""),[H,q]=(0,t.useState)(!1),[G,K]=(0,t.useState)(!1),[Y,X]=(0,t.useState)(!1),[$,J]=(0,t.useState)(!1),[Z,te]=(0,t.useState)(""),re=(0,t.useRef)(null),[ie,ae]=(0,t.useState)({violationCount:0,violations:[]}),[oe,se]=(0,t.useState)(!1),[le,ce]=(0,t.useState)(null),[ue,he]=(0,t.useState)(null),[de,fe]=(0,t.useState)(!1),[pe,me]=(0,t.useState)(!1),[ge,ve]=(0,t.useState)(""),[ye,be]=(0,t.useState)(!1),[xe,we]=(0,t.useState)(null),[Se,_e]=(0,t.useState)(!1),[Ee,Ce]=(0,t.useState)(30),[ke,Ne]=(0,t.useState)(navigator.onLine),[Ae,Te]=(0,t.useState)(sessionStorage.getItem("mcqActiveTestSlug")||null),Ie=(0,t.useRef)(Ae),De=(0,t.useRef)(r.pathname),Re=(0,t.useRef)(!1),[Pe,je]=(0,t.useState)(null),[Le,Oe]=(0,t.useState)(sessionStorage.getItem("mcqLastProgressSync")||null),Me=(0,t.useRef)(!1),Ue=(0,t.useRef)(null),ze=(0,t.useCallback)(e=>{sessionStorage.setItem(SY,e),je(e)},[]),We=(0,t.useCallback)(()=>{try{window.cameraStream&&window.cameraStream.active&&(window.cameraStream.getTracks().forEach(e=>e.stop()),window.cameraStream=null)}catch(vR){}},[]),Ve=(0,t.useCallback)(()=>{if(sessionStorage.removeItem("mcqTestStartTime"),sessionStorage.removeItem("mcqTestStartTimeISO"),sessionStorage.removeItem("mcqTestDuration"),sessionStorage.removeItem("mcqTestData"),sessionStorage.removeItem("mcqTestAnswers"),sessionStorage.removeItem("mcqActiveTestSlug"),sessionStorage.removeItem("mcqLastProgressSync"),sessionStorage.removeItem("mcqPendingSubmission"),sessionStorage.removeItem("mcqReloadGraceDeadline"),Oe(null),Re.current=!1,i&&d){var e;const t=(null===(e=d.testInfo)||void 0===e?void 0:e.id)||d.id||"unknown",n="proctor_violations_".concat(i.Email,"_").concat(t);localStorage.removeItem(n)}ae({violationCount:0,violations:[]})},[Oe,i,d]),He=(0,t.useCallback)(()=>{const e=Date.now()+9e4;sessionStorage.setItem("mcqReloadGraceDeadline",e.toString())},[]);(0,t.useEffect)(()=>{Ie.current=Ae},[Ae]),(0,t.useEffect)(()=>{const e=sessionStorage.getItem(SY);e&&(je(e),sessionStorage.removeItem(SY))},[]),(0,t.useEffect)(()=>{const e=()=>Ne(!0),t=()=>Ne(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,t.useEffect)(()=>{(async()=>{try{const n=JSON.parse(localStorage.getItem("auth_data")||"{}");if(!n.Email)return void e("/login");a(n);const r=await Qd.getAccessControl();s(r),await qe(r,n);try{const e=await OD.syncUnsyncedResults();e.synced>0&&console.log("[MCQPage] Synced ".concat(e.synced," unsynced results"))}catch(t){console.error("[MCQPage] Error syncing unsynced results:",t)}}catch(x){console.error("Error loading data:",x),w("Failed to load MCQ data. Please try again.")}})()},[e]),(0,t.useEffect)(()=>{if(d&&!d.submitted){var t,r;const i=d.slug||(null===(t=d.testInfo)||void 0===t?void 0:t.slug)||xY((null===(r=d.testInfo)||void 0===r?void 0:r.id)||d.id||d.name);i&&n!==i&&e("".concat(wY,"/").concat(i),{replace:!0})}else if(!d){!sessionStorage.getItem("mcqActiveTestSlug")&&n&&e(wY,{replace:!0})}},[d,n,e]);const qe=async(e,t)=>{try{var n,r,i,a,o;if(null===e||void 0===e||null===(n=e.courses)||void 0===n||!n.mcqs)return console.log("No mcqs section found in access control"),c([]),void h([]);const s=null===e||void 0===e||null===(r=e.access_control)||void 0===r||null===(i=r.colleges)||void 0===i||null===(a=i[t.College])||void 0===a||null===(o=a[t.Year])||void 0===o?void 0:o[t.Department];if(!s)return console.log("No department access found for:",{college:t.College,year:t.Year,department:t.Department}),c([]),void h([]);const l=e.courses.mcqs.modules||{},u=s.allowed_modules||[],d=Object.entries(l).filter(e=>{let[t,n]=e;const r=n.id;return u.includes(r)}).map(e=>{let[t,n]=e;return{key:t,id:n.id,name:n.name,url:n.url,passkey:n.passkey,schedule:n.schedule,difficulty:n.difficulty||"Medium",questions:n.questions||0,duration:n.duration_minutes||60,slug:n.slug||xY(n.id||n.name||t)}});console.log("Loaded accessible MCQ tests:",d),c(d),h(d)}catch(x){console.error("Error loading available tests:",x),w("Failed to load available tests."),c([]),h([])}};(0,t.useEffect)(()=>{if(!E.trim())return void h(l);const e=l.filter(e=>e.name.toLowerCase().includes(E.toLowerCase())||e.difficulty.toLowerCase().includes(E.toLowerCase()));h(e)},[E,l]);const Ge=(0,t.useCallback)(async function(){let{reason:t="grace-expired",noticeMessage:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var r,a;if(!i)return!1;const o=sessionStorage.getItem("mcqTestData"),s=sessionStorage.getItem("mcqTestStartTime");if(!o||!s)return sessionStorage.removeItem("mcqActiveTestSlug"),!1;const{test:l,testData:c}=JSON.parse(o),u=(null===c||void 0===c?void 0:c.questions)||[];if(0===u.length)return Ve(),sessionStorage.removeItem("mcqActiveTestSlug"),!1;const h=sessionStorage.getItem("mcqTestAnswers"),d=h?JSON.parse(h):{};let f=0;u.forEach((e,t)=>{const n=d[t];void 0!==n&&e.options[n]===e.correctAnswer&&f++});const p=u.length,g=p>0?Math.round(f/p*100):0,y=parseInt(s,10),b=parseInt(sessionStorage.getItem("mcqTestDuration")||"0",10),x=Math.round((Date.now()-y)/1e3),w=b>0?Math.min(b,x):x,S=sessionStorage.getItem("mcqTestStartTimeISO")||new Date(y).toISOString(),E=(null===l||void 0===l?void 0:l.id)||(null===c||void 0===c?void 0:c.id)||"unknown",C=(null===c||void 0===c?void 0:c.name)||(null===l||void 0===l?void 0:l.name)||"Unknown Test",k={email:i.Email,college:i.College,year:i.Year,department:i.Department,rollNumber:i["Roll Number"]||"",name:i.Name||"",testID:E,testName:C,score:f,totalQuestions:p,correctAnswers:f,incorrectAnswers:p-f,percentage:g,timeTaken:w,timeStarted:S,timeStartedISO:S,timeEnded:(new Date).toISOString(),timeEndedISO:(new Date).toISOString(),submittedAtISO:(new Date).toISOString(),answers:d,autoSubmitted:!0,autoSubmitReason:EY(t),violationCount:ie.violationCount||0,totalNoFace:(null===(r=ie.violations)||void 0===r?void 0:r.filter(e=>"no_face"===e.type).length)||0,totalMultipleFaces:(null===(a=ie.violations)||void 0===a?void 0:a.filter(e=>"multiple_faces"===e.type).length)||0,violations:ie.violations||[]};await OD.submitMCQResult(k),Ve(),Te(null),sessionStorage.removeItem("mcqActiveTestSlug"),sessionStorage.removeItem("mcqReloadGraceDeadline");const A=n||EY(t);return ze(A),m(0),v({}),T([]),_(null),M(0),B(0),z(0),N(null),q(!1),L({}),e(wY,{replace:!0}),!0}catch(x){return console.error("[MCQPage] autoSubmitStoredAttempt error:",x),!1}},[i,Ve,e,ze]),Ke=e=>{if(null===e||void 0===e||!e.schedule)return{allowed:!0,reason:"No schedule restrictions"};const t=e.schedule,n=new Date,r=new Date(t.startDate+"T"+t.startTime),i=new Date(t.endDate+"T"+t.endTime);return n<r?{allowed:!1,reason:"Test starts on ".concat(r.toLocaleDateString()," at ").concat(r.toLocaleTimeString())}:n>i?{allowed:!1,reason:"Test ended on ".concat(i.toLocaleDateString()," at ").concat(i.toLocaleTimeString())}:{allowed:!0,reason:"Test is currently available"}},Ye=async()=>{if(W.trim())if(k){K(!0),te(""),w(null);try{const e=k.passkey;if(!e)return te("No passkey required for this test"),void K(!1);W.trim()===e?(q(!0),te(""),w(null),console.log("Passkey validated successfully"),X(!1),k&&await Ze(k)):(te("Incorrect passkey"),q(!1),V(""),setTimeout(()=>{re.current&&re.current.focus()},100))}catch(x){console.error("Error validating passkey:",x),te("Error validating passkey. Please try again."),q(!1)}finally{K(!1)}}else te("Please select a test first");else te("Please enter a passkey")},$e=async e=>{N(e),w(null),q(!1),V("");const t=Ke(e);if(t.allowed)return e.passkey?(X(!0),void setTimeout(()=>{re.current&&re.current.focus()},100)):void await Ze(e);w("Schedule restriction: ".concat(t.reason))},Ze=async t=>{fe(!0),w(null),ce(null),be(!1);try{var n;if(!navigator.onLine)return fe(!1),_e(!0),Ce(30),void w("No internet connection. Please connect to the internet to start the test.");const s=t.id||"unknown";let l;try{l=await OD.checkExistingAttempt(i.Email,s,i.College,i.Year,i.Department)}catch(a){var r;if("unavailable"===a.code||null!==(r=a.message)&&void 0!==r&&r.includes("offline")||!navigator.onLine)return fe(!1),_e(!0),Ce(30),void w("Network connection required. Please check your internet connection.");console.warn("[MCQPage] Error checking existing attempt, continuing:",a),l={exists:!1,data:null,completed:!1}}if(l.exists&&l.completed)return fe(!1),be(!0),void we({test:t,existingAttempt:l.data});const c=await et(t.url),u=t.slug||xY(t.id||t.name||t.key||"mcq-test"),h=Fe(Fe({},t),{},{slug:u}),d=Fe(Fe({},c),{},{name:c.name||t.name,difficulty:c.difficulty||t.difficulty,duration:c.duration||t.duration_minutes,totalQuestions:c.totalQuestions||(null===(n=c.questions)||void 0===n?void 0:n.length)||t.questions,questions:c.questions||[],testInfo:h,slug:u});f(d),m(0),v({});const p=Date.now(),g=(new Date).toISOString();_(p),he(g),M(0);const y=60*(c.duration||t.duration_minutes||60);z(y),B(y);try{await OD.createInitialAttempt(i,d),console.log("[MCQPage] Initial attempt created in Firestore")}catch(o){if(console.error("[MCQPage] Error creating initial attempt:",o),o.message.includes("already been completed"))return w("This test has already been completed. You cannot retake this test."),void b(!1)}sessionStorage.setItem("mcqTestStartTime",p.toString()),sessionStorage.setItem("mcqTestStartTimeISO",g),sessionStorage.setItem("mcqTestDuration",y.toString()),sessionStorage.setItem("mcqTestData",JSON.stringify({test:h,testData:c})),Te(u),sessionStorage.setItem("mcqActiveTestSlug",u),e("".concat(wY,"/").concat(u),{replace:!0}),X(!1),fe(!1)}catch(x){console.error("Error loading test:",x),fe(!1),w(x.message||"Error loading test. Please check your connection and try again.")}},et=async e=>{try{let n=e;if(e.includes("http")){const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch test data");return await t.json()}const r="".concat("/seed-contents").concat(n.startsWith("/")?"":"/").concat(n);try{const e=await fetch(r);if(e.ok)return await e.json()}catch(t){console.log("Local fetch failed, trying GitHub")}const i=[uY,hY,dY,fY,pY,mY,gY,vY,yY,bY].join(""),a=atob(i),o="".concat("https://api.github.com/repos/seeditDev/seed-contents/contents").concat(n.startsWith("/")?"":"/").concat(n),s=await fetch(o,{headers:{Accept:"application/vnd.github.v3+json",Authorization:"token ".concat(a)}});if(s.ok){const e=await s.json(),t=atob(e.content);return JSON.parse(t)}const l="".concat("https://raw.githubusercontent.com/seeditDev/seed-contents/main").concat(n.startsWith("/")?"":"/").concat(n),c=await fetch(l);if(!c.ok)throw new Error("Failed to fetch test data: ".concat(c.status));return await c.json()}catch(x){throw console.error("All fetch attempts failed:",x),x}},nt=e=>{var t;"prev"===e&&p>0?m(p-1):"next"===e&&p<(null===d||void 0===d||null===(t=d.questions)||void 0===t?void 0:t.length)-1&&m(p+1)};(0,t.useEffect)(()=>{d&&void 0!==p&&L(e=>Fe(Fe({},e),{},{[p]:e[p]||Date.now()}))},[p,d]);const rt=e=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},at=e=>{const t=j[e];return t?Math.round((Date.now()-t)/1e3):0},st=(0,t.useCallback)(()=>{if(null===d||void 0===d||!d.questions)return 0;let e=0;return d.questions.forEach((t,n)=>{void 0!==g[n]&&t.options[g[n]]===t.correctAnswer&&e++}),e},[d,g]),lt=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"interval";if(d&&!d.submitted&&i)if(navigator.onLine){if(!Me.current){Me.current=!0;try{var t,n;const r=st(),a=d.questions.length,o=a>0?Math.round(r/a*100):0,s=S?Math.round((Date.now()-S)/1e3):0,l={email:i.Email,college:i.College,year:i.Year,department:i.Department,rollNumber:i["Roll Number"]||"",name:i.Name||"",testID:(null===(t=d.testInfo)||void 0===t?void 0:t.id)||d.id||"unknown",testName:d.name||(null===(n=d.testInfo)||void 0===n?void 0:n.name)||"Unknown Test",score:r,totalQuestions:a,correctAnswers:r,incorrectAnswers:a-r,percentage:o,timeTaken:s,timeTakenFormatted:OD.formatTime?OD.formatTime(s):"".concat(s,"s"),timeStarted:ue||(new Date).toISOString(),timeStartedISO:ue||(new Date).toISOString(),timeEnded:"",timeEndedISO:"",submittedAt:"",answers:g,autoSubmitted:!1,timestamp:(new Date).toISOString(),reason:e};await OD.syncProgress(l);const c=(new Date).toISOString();Oe(c),sessionStorage.setItem("mcqLastProgressSync",c)}catch(x){var r;console.error("[MCQPage] Progress sync failed:",x),null!==(r=x.message)&&void 0!==r&&r.toLowerCase().includes("network")&&(Ne(!1),_e(!0),Ce(30))}finally{Me.current=!1}}}else console.warn("[MCQPage] Skipping progress sync (".concat(e,") - offline"))},[d,st,i,S,ue,g]),ct=(0,t.useCallback)(()=>{try{var e;const t=sessionStorage.getItem("mcqTestStartTime"),n=sessionStorage.getItem("mcqTestDuration"),r=sessionStorage.getItem("mcqTestData");if(!t||!n||!r)return!1;const i=parseInt(t,10),a=parseInt(n,10),{test:o,testData:s}=JSON.parse(r),l=Date.now(),c=Math.floor((l-i)/1e3),u=Math.max(0,a-c);if(u<=0)return Ge({reason:"timer",noticeMessage:"Your MCQ attempt was auto-submitted because the allotted time elapsed."}),!1;const h=sessionStorage.getItem("mcqTestAnswers"),d=h?JSON.parse(h):{},p=(null===o||void 0===o?void 0:o.slug)||xY((null===o||void 0===o?void 0:o.id)||(null===o||void 0===o?void 0:o.name)||"mcq-test"),g=Fe(Fe({},s),{},{name:s.name||(null===o||void 0===o?void 0:o.name),difficulty:s.difficulty||(null===o||void 0===o?void 0:o.difficulty),duration:s.duration||(null===o||void 0===o?void 0:o.duration_minutes),totalQuestions:s.totalQuestions||(null===(e=s.questions)||void 0===e?void 0:e.length)||(null===o||void 0===o?void 0:o.questions),questions:s.questions||[],testInfo:o,slug:p});f(g),m(0),v(d),_(i),M(c),B(u),z(a),N(o);const y=sessionStorage.getItem("mcqTestStartTimeISO");return y&&he(y),Te(p),sessionStorage.setItem("mcqActiveTestSlug",p),sessionStorage.removeItem("mcqReloadGraceDeadline"),Re.current=!1,_e(!1),Ce(30),lt("restore"),!0}catch(x){return console.error("Error restoring test state:",x),!1}},[Ge,lt]);(0,t.useEffect)(()=>{const e=sessionStorage.getItem("mcqTestData");if(!d&&i&&e){const e=sessionStorage.getItem("mcqReloadGraceDeadline"),t=e?parseInt(e,10):0,n=Date.now();t&&n<=t?ct():Ge(t&&n>t?{reason:"grace-expired",noticeMessage:"Your MCQ attempt was auto-submitted because the reload grace period expired."}:{reason:"offline-pending",noticeMessage:"Your MCQ attempt was auto-submitted after reconnecting late."})}},[i,d,Ge,ct]);const ut=()=>{if(R||I)return I?(P(!0),void D(!1)):void(R&&dt());D(!0)},dt=async()=>{if(d&&i){We(),se(!0),me(!0),w(null),ce(null),ve("validating");try{var e,t;await new Promise(e=>setTimeout(e,1e3)),ve("generating");const n=st(),r=Math.round((Date.now()-S)/1e3),a=d.questions.length,o=a-n,s=a>0?Math.round(n/a*100):0;await new Promise(e=>setTimeout(e,800));const l=(ie.violations||[]).reduce((e,t)=>("no_face"===t.type?e.totalNoFace++:"multiple_faces"===t.type&&e.totalMultipleFaces++,e),{totalNoFace:0,totalMultipleFaces:0}),c={email:i.Email,college:i.College,year:i.Year,department:i.Department,rollNumber:i["Roll Number"]||"",name:i.Name||"",testID:(null===(e=d.testInfo)||void 0===e?void 0:e.id)||d.id||"unknown",testName:d.name||(null===(t=d.testInfo)||void 0===t?void 0:t.name)||"Unknown Test",score:n,totalQuestions:a,correctAnswers:n,incorrectAnswers:o,percentage:s,timeTaken:r,timeStarted:ue||(new Date).toISOString(),timeStartedISO:ue||(new Date).toISOString(),timeEnded:(new Date).toISOString(),timeEndedISO:(new Date).toISOString(),submittedAtISO:(new Date).toISOString(),answers:g,autoSubmitted:d.autoSubmitted||!1,autoSubmitReason:"",violationCount:ie.violationCount||0,totalNoFace:l.totalNoFace||0,totalMultipleFaces:l.totalMultipleFaces||0,violations:ie.violations||[]};console.log("[MCQPage] Submitting result:",c);if(!(await OD.submitMCQResult(c)).success)throw new Error("Submission failed. Please try again.");ve("submitted"),f(e=>Fe(Fe({},e),{},{score:s,timeTaken:r,submitted:!0})),D(!1),P(!1),ce("success"),Ve(),Te(null),We();try{window.location.href=wY}catch(vR){}}catch(x){console.error("[MCQPage] Submission error:",x),me(!1),x.message.includes("DUPLICATE_SUBMISSION")||x.message.includes("already been completed")?(ce("duplicate"),w("This test has already been submitted. Multiple submissions are not allowed."),alert("\u274c This test has already been submitted. You cannot submit again.")):(ce("error"),w("Submission failed: ".concat(x.message,". Please try again or contact support.")),alert("\u274c Submission failed: ".concat(x.message,". Your answers have been saved locally and will be retried automatically."))),se(!1)}}else w("Missing test or user data. Cannot submit.")},ft=(0,t.useCallback)(async function(){let{reason:t="timer",skipResultView:n=!1,noticeMessage:r,misbehaviorCount:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(d&&!d.submitted&&i){var o,s;const a=st(),l=S?Math.round((Date.now()-S)/1e3):0,c=d.questions.length,u=c-a,h=c>0?Math.round(a/c*100):0,p=EY(t),y=(ie.violations||[]).reduce((e,t)=>("no_face"===t.type?e.totalNoFace++:"multiple_faces"===t.type&&e.totalMultipleFaces++,e),{totalNoFace:0,totalMultipleFaces:0});We();const b={email:i.Email,college:i.College,year:i.Year,department:i.Department,rollNumber:i["Roll Number"]||"",name:i.Name||"",testID:(null===(o=d.testInfo)||void 0===o?void 0:o.id)||d.id||"unknown",testName:d.name||(null===(s=d.testInfo)||void 0===s?void 0:s.name)||"Unknown Test",score:a,totalQuestions:c,correctAnswers:a,incorrectAnswers:u,percentage:h,timeTaken:l,timeStarted:ue||(new Date).toISOString(),timeStartedISO:ue||(new Date).toISOString(),timeEnded:(new Date).toISOString(),timeEndedISO:(new Date).toISOString(),submittedAtISO:(new Date).toISOString(),answers:g,autoSubmitted:!0,autoSubmitReason:p,violationCount:ie.violationCount||0,totalNoFace:y.totalNoFace||0,totalMultipleFaces:y.totalMultipleFaces||0,violations:ie.violations||[]};try{if(await OD.submitMCQResult(b),"timer"!==t||n){f(null),D(!1),P(!1),m(0),v({}),T([]),_(null),M(0),B(0),z(0),N(null),q(!1),L({});ze(r||p),e(wY,{replace:!0})}else f(e=>Fe(Fe({},e),{},{score:h,timeTaken:l,submitted:!0,autoSubmitted:!0})),D(!1),P(!1),alert("\u23f0 Time is up! Your test has been automatically submitted.");Ve(),Te(null),We()}catch(x){console.error("[MCQPage] Auto-submit error:",x),f(t=>Fe(Fe({},t),{},{score:h,timeTaken:l,submitted:!0,autoSubmitted:!0,submissionError:x.message}))}}},[d,st,S,i,g,ue,Ve,e,ze]);(0,t.useEffect)(()=>{let e;return d&&!d.submitted&&U>0&&(e=setInterval(()=>{M(e=>{const t=e+1,n=U-t;return B(Math.max(0,n)),n<=0&&ft({reason:"timer"}),t})},1e3)),()=>{e&&clearInterval(e)}},[d,U,ft]),(0,t.useEffect)(()=>{if(d&&!d.submitted){const e=setInterval(()=>{lt("interval"),navigator.onLine||(Ne(!1),_e(!0),Ce(30))},12e4);return()=>clearInterval(e)}},[d,lt]),(0,t.useEffect)(()=>{if(d&&!d.submitted){var e;const t=(null===(e=d.testInfo)||void 0===e?void 0:e.id)||d.id;Ue.current!==t&&(Ue.current=t,lt("initial"))}else Ue.current=null},[d,lt]),(0,t.useEffect)(()=>{ke&&d&&!d.submitted?(Re.current=!1,_e(!1),Ce(30),sessionStorage.removeItem("mcqReloadGraceDeadline"),lt("network-reconnect")):ke||!d||d.submitted?ke&&!d&&(_e(!1),Ce(30),Re.current=!1,sessionStorage.removeItem("mcqReloadGraceDeadline")):(Re.current=!1,_e(!0))},[ke,d,lt]),(0,t.useEffect)(()=>{if(!Se||!d||d.submitted||Re.current)return;const e=setInterval(()=>{Ce(t=>t<=1?(clearInterval(e),Re.current||(Re.current=!0,ft({reason:"network-timeout",skipResultView:!0,noticeMessage:"Your MCQ attempt was auto-submitted because the connection was not restored in time."})),0):t-1)},1e3);return()=>clearInterval(e)},[Se,d,ft]),(0,t.useEffect)(()=>{Se||(Re.current=!1,Ce(30))},[Se]),(0,t.useEffect)(()=>{const e=De.current,t=Ie.current;if(t&&d&&!d.submitted){const n="".concat(wY,"/").concat(t),i=e.includes(n),a=r.pathname.includes(n);i&&!a&&ft({reason:"navigation",skipResultView:!0,noticeMessage:"Your MCQ attempt was auto-submitted because you navigated away from the test page."})}De.current=r.pathname},[r.pathname,d,ft]),(0,t.useEffect)(()=>{d&&!d.submitted&&sessionStorage.setItem("mcqTestAnswers",JSON.stringify(g))},[g,d]);const pt=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))};return(0,Be.jsxs)("div",{className:"mcq-page",children:[false,de?(0,Be.jsx)("div",{className:"mcq-popup-overlay",children:(0,Be.jsxs)("div",{className:"mcq-popup-content mcq-verifying-popup",children:[(0,Be.jsx)("div",{className:"mcq-popup-loader",children:(0,Be.jsxs)("div",{className:"mcq-dot-loader",children:[(0,Be.jsx)("span",{}),(0,Be.jsx)("span",{}),(0,Be.jsx)("span",{})]})}),(0,Be.jsx)("h3",{children:"Verifying..."}),(0,Be.jsx)("p",{children:"Please wait while we verify your test access"})]})}):null,(()=>{if(!pe)return null;return(0,Be.jsx)("div",{className:"mcq-popup-overlay",children:(0,Be.jsxs)("div",{className:"mcq-popup-content mcq-submitting-popup",children:[(0,Be.jsx)("div",{className:"mcq-popup-loader",children:"submitted"===ge?(0,Be.jsx)(it,{className:"mcq-success-icon"}):(0,Be.jsxs)("div",{className:"mcq-dot-loader",children:[(0,Be.jsx)("span",{}),(0,Be.jsx)("span",{}),(0,Be.jsx)("span",{})]})}),(0,Be.jsx)("h3",{children:(()=>{switch(ge){case"validating":return"Validating the Answers";case"generating":return"Generating Marks";case"submitted":return"Test Submitted Successfully!";default:return"Submitting..."}})()}),"submitted"===ge&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)("p",{children:"Your test has been successfully submitted and recorded."}),(0,Be.jsx)("button",{className:"mcq-popup-button mcq-primary-button",onClick:()=>{me(!1),f(null),m(0),v({}),_(null),M(0),B(0),z(0),N(null),q(!1),ve(""),se(!1)},children:"Back to MCQ Page"})]})]})})})(),Se?(0,Be.jsx)("div",{className:"mcq-popup-overlay",children:(0,Be.jsxs)("div",{className:"mcq-popup-content mcq-network-popup",children:[(0,Be.jsx)("div",{className:"mcq-network-icon",children:(0,Be.jsx)(ht,{})}),(0,Be.jsx)("h3",{children:"Network Connection Lost"}),(0,Be.jsxs)("p",{children:["Your internet connection has been lost. Please reconnect within ",Ee," seconds."]}),(0,Be.jsx)("div",{className:"mcq-network-timer",children:(0,Be.jsx)("div",{className:"mcq-timer-circle",children:(0,Be.jsxs)("span",{children:[Ee,"s"]})})}),(0,Be.jsx)("p",{className:"mcq-network-warning",children:"You can reload this page safely. If connection is not restored within 30 seconds, your test will be automatically submitted."}),(0,Be.jsxs)("div",{className:"mcq-network-actions",children:[ke?(0,Be.jsx)("button",{className:"mcq-popup-button mcq-primary-button",onClick:()=>{_e(!1),Ce(30),w(null),k&&!d&&$e(k)},children:"Connection Restored - Continue"}):(0,Be.jsx)("div",{className:"mcq-network-status",children:(0,Be.jsx)("p",{children:"Waiting for connection..."})}),(0,Be.jsx)("button",{className:"mcq-popup-button mcq-secondary-button",onClick:()=>{He(),window.location.reload()},children:"Reload Page"})]})]})}):null,(()=>{if(!ye||!xe)return null;const{test:e,existingAttempt:t}=xe,n=(null===t||void 0===t?void 0:t.percentage)||0,r=(null===t||void 0===t||t.correctAnswers,(null===t||void 0===t?void 0:t.totalQuestions)||0);return(0,Be.jsx)("div",{className:"mcq-popup-overlay",children:(0,Be.jsxs)("div",{className:"mcq-popup-content mcq-completed-popup",children:[(0,Be.jsx)("div",{className:"mcq-completed-icon",children:(0,Be.jsx)(it,{})}),(0,Be.jsx)("h3",{children:"Test Already Completed"}),(0,Be.jsx)("p",{children:"You have already completed this test."}),(0,Be.jsxs)("div",{className:"mcq-completed-score",children:[(0,Be.jsxs)("div",{className:"mcq-score-display",children:[(0,Be.jsxs)("span",{className:"mcq-score-value",children:[n,"%"]}),(0,Be.jsx)("span",{className:"mcq-score-label",children:"Score"})]}),(0,Be.jsx)("div",{className:"mcq-score-details",children:(0,Be.jsxs)("span",{children:["Total Questions: ",r]})})]}),(0,Be.jsx)("button",{className:"mcq-popup-button mcq-primary-button",onClick:()=>{be(!1),we(null),w(null),f(null),m(0),v({}),N(null)},children:"Back to All Tests"})]})})})(),y?(0,Be.jsx)("div",{className:"mcq-loading",children:"Loading..."}):!x||d||ye?null!==d&&void 0!==d&&d.submitted?(()=>{if(null===d||void 0===d||!d.submitted)return null;const t=d.score,n=d.timeTaken,r=d.questions.length;Math.floor(t*r/100);return(0,Be.jsxs)("div",{className:"mcq-results-container",children:[(0,Be.jsxs)("div",{className:"mcq-results-header",children:[(0,Be.jsxs)("div",{children:[(0,Be.jsx)("h2",{children:"Test Results"}),d.autoSubmitted&&(0,Be.jsx)("p",{className:"mcq-auto-submit-notice",children:"\u26a0\ufe0f This test was automatically submitted due to time expiration."})]}),(0,Be.jsxs)("div",{className:"mcq-results-actions",children:[(0,Be.jsxs)("button",{className:"mcq-back-button",onClick:()=>{f(null),m(0),v({}),_(null),M(0),B(0),z(0),N(null),q(!1),T([]),L({}),Te(null),e(wY,{replace:!0})},children:[(0,Be.jsx)(Xe,{})," Back to Tests"]}),(0,Be.jsxs)("button",{className:"mcq-home-button mcq-home-button-results",onClick:()=>e("/student/dashboard"),title:"Go to Dashboard",children:[(0,Be.jsx)(yt,{}),(0,Be.jsx)("span",{children:"Dashboard"})]})]})]}),(0,Be.jsx)("div",{className:"mcq-results-summary",children:(0,Be.jsxs)("div",{className:"mcq-score-card",children:[(0,Be.jsx)("div",{className:"mcq-score-circle",children:(0,Be.jsxs)("div",{className:"mcq-score-value",children:[t,"%"]})}),(0,Be.jsx)("div",{className:"mcq-score-details",children:(0,Be.jsxs)("div",{className:"mcq-score-item",children:[(0,Be.jsx)(ot,{className:"mcq-icon"}),(0,Be.jsxs)("span",{children:["Time: ",pt(n)]})]})})]})})]})})():d?(()=>{var e,t;return d?(0,Be.jsxs)("div",{className:"mcq-test-content",children:[(0,Be.jsx)("div",{className:"mcq-test-header-bar",children:(0,Be.jsxs)("div",{className:"mcq-test-info",children:[(0,Be.jsx)("h1",{children:d.name||(null===(e=d.testInfo)||void 0===e?void 0:e.name)}),(0,Be.jsxs)("div",{className:"mcq-status-summary",children:[(0,Be.jsxs)("div",{className:"mcq-timer ".concat(F<=300?"mcq-timer-warning":""," ").concat(F<=60?"mcq-timer-danger":""),children:[(0,Be.jsx)(ot,{})," ",(t=F,pt(t)),F<=60&&(0,Be.jsx)("span",{className:"mcq-timer-alert",children:" - Time Running Out!"})]}),(0,Be.jsxs)("div",{className:"mcq-counts",children:[(0,Be.jsxs)("span",{children:["Attempted: ",Object.keys(g).length,"/",d.questions.length]}),(0,Be.jsxs)("span",{children:["Bookmarked: ",A.length]})]})]})]})}),(0,Be.jsx)("div",{className:"mcq-question-nav",children:(0,Be.jsx)("div",{className:"mcq-question-nav-grid",children:d.questions.map((e,t)=>(0,Be.jsx)("button",{className:"mcq-question-nav-item ".concat(void 0!==g[t]?"attempted":"not-attempted"," ").concat(p===t?"current":""," ").concat(A.includes(t)?"bookmarked":""),onClick:()=>m(t),children:t+1},t))})}),I&&(0,Be.jsx)("div",{className:"mcq-confirm-dialog",children:(0,Be.jsxs)("div",{className:"mcq-confirm-content",children:[(0,Be.jsx)("h3",{children:"Submit Test?"}),(0,Be.jsx)("p",{children:"Are you sure you want to submit your test? You can review your answers before final submission."}),(0,Be.jsxs)("div",{className:"mcq-confirm-buttons",children:[(0,Be.jsx)("button",{onClick:()=>D(!1),children:"Cancel"}),(0,Be.jsx)("button",{onClick:()=>{P(!0),D(!1)},children:"Review Answers"})]})]})}),R&&(0,Be.jsxs)("div",{className:"mcq-review-container",children:[(0,Be.jsx)("h3",{children:"Review Your Answers"}),(0,Be.jsx)("div",{className:"mcq-review-list",children:d.questions.map((e,t)=>(0,Be.jsxs)("div",{className:"mcq-review-item",children:[(0,Be.jsxs)("div",{className:"mcq-review-header",children:[(0,Be.jsxs)("span",{children:["Question ",t+1]}),(0,Be.jsxs)("span",{children:[at(t),"s"]})]}),(0,Be.jsx)("p",{children:e.question}),(0,Be.jsxs)("div",{className:"mcq-review-answer",children:["Your answer: ",void 0!==g[t]?e.options[g[t]]:"Not answered"]}),(0,Be.jsxs)("div",{className:"mcq-review-actions",children:[(0,Be.jsx)("button",{onClick:()=>{m(t),P(!1)},children:"Go to Question"}),(0,Be.jsxs)("button",{className:A.includes(t)?"bookmarked":"",onClick:()=>rt(t),children:[(0,Be.jsx)(Je,{})," ",A.includes(t)?"Bookmarked":"Bookmark"]})]})]},t))}),(0,Be.jsxs)("div",{className:"mcq-review-actions",children:[(0,Be.jsx)("button",{onClick:()=>{P(!1)},children:"Back to Test"}),(0,Be.jsx)("button",{onClick:ut,children:"Submit Test"})]})]}),!R&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsxs)("div",{className:"mcq-question-container",children:[(0,Be.jsxs)("div",{className:"mcq-question-header",children:[(0,Be.jsxs)("span",{className:"mcq-question-number",children:["Question ",p+1]}),(0,Be.jsx)("button",{className:"mcq-bookmark-button ".concat(A.includes(p)?"bookmarked":""),onClick:()=>rt(p),children:(0,Be.jsx)(Je,{})})]}),(0,Be.jsx)("p",{className:"mcq-question-text",children:d.questions[p].question}),(0,Be.jsx)("div",{className:"mcq-options",children:d.questions[p].options.map((e,t)=>(0,Be.jsx)("button",{className:"mcq-option ".concat(g[p]===t?"selected":""),onClick:()=>(e=>{v(Fe(Fe({},g),{},{[p]:e}))})(t),children:e},t))})]}),(0,Be.jsxs)("div",{className:"mcq-navigation",children:[(0,Be.jsxs)("button",{className:"mcq-nav-button",onClick:()=>nt("prev"),disabled:0===p||oe,children:[(0,Be.jsx)(Xe,{})," Previous"]}),(0,Be.jsx)("div",{className:"mcq-nav-center",children:(0,Be.jsx)("button",{className:"mcq-submit-button",onClick:ut,disabled:oe,children:oe?"Submitting...":"Final Submit"})}),(0,Be.jsxs)("button",{className:"mcq-nav-button",onClick:()=>nt("next"),disabled:p===d.questions.length-1||oe,children:["Next ",(0,Be.jsx)(Qe,{})]})]})]})]}):null})():(0,Be.jsxs)("div",{className:"mcq-container",children:[(0,Be.jsxs)("div",{className:"mcq-header",children:[(0,Be.jsx)("div",{className:"mcq-header-top",children:(0,Be.jsxs)("button",{className:"mcq-home-button",onClick:()=>e("/student/dashboard"),title:"Go to Dashboard",children:[(0,Be.jsx)(yt,{}),(0,Be.jsx)("span",{children:"Dashboard"})]})}),(0,Be.jsx)("h1",{children:"MCQ Assessments"}),(0,Be.jsx)("p",{className:"mcq-description",children:"Select an MCQ test from the list below. Each test includes multiple choice questions to assess your knowledge and understanding."})]}),Pe&&(0,Be.jsxs)("div",{className:"mcq-info-banner",children:[(0,Be.jsx)("span",{children:Pe}),(0,Be.jsx)("button",{onClick:()=>{sessionStorage.removeItem(SY),je(null)},children:(0,Be.jsx)(At,{})})]}),(0,Be.jsxs)("div",{className:"mcq-search-container",children:[(0,Be.jsx)(kt,{className:"search-icon"}),(0,Be.jsx)("input",{type:"text",placeholder:"Search tests by name or difficulty...",value:E,onChange:e=>C(e.target.value),className:"mcq-search-input",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})]}),x&&(0,Be.jsx)("div",{className:"mcq-error",children:x}),(0,Be.jsx)("div",{className:"mcq-tests-grid",children:0===u.length?(0,Be.jsx)("div",{className:"mcq-no-tests",children:(0,Be.jsx)("p",{children:"No MCQ tests available at the moment."})}):u.map(e=>{const t=Ke(e);return(0,Be.jsxs)("div",{className:"mcq-test-card",children:[(0,Be.jsxs)("div",{className:"mcq-test-header",children:[(0,Be.jsx)("h3",{children:e.name}),(0,Be.jsx)("span",{className:"mcq-difficulty mcq-difficulty-".concat((e.difficulty||"medium").toLowerCase()),children:e.difficulty||"Medium"})]}),(0,Be.jsxs)("div",{className:"mcq-test-details",children:[(0,Be.jsxs)("div",{className:"mcq-test-detail-item",children:[(0,Be.jsx)(tt,{}),(0,Be.jsxs)("span",{children:[e.questions||0," Questions"]})]}),(0,Be.jsxs)("div",{className:"mcq-test-detail-item",children:[(0,Be.jsx)(ot,{}),(0,Be.jsxs)("span",{children:[e.duration_minutes||e.duration||60," Minutes"]})]})]}),!t.allowed&&(0,Be.jsx)("div",{className:"mcq-schedule-warning",children:t.reason}),(0,Be.jsxs)("button",{className:"mcq-start-btn",onClick:async()=>{if(!navigator.onLine)return _e(!0),Ce(30),void w("No internet connection. Please connect to the internet to start the test.");try{const t=await OD.checkExistingAttempt(i.Email,e.id,i.College,i.Year,i.Department);if(t.exists&&t.completed)return be(!0),void we({test:e,existingAttempt:t.data});$e(e)}catch(n){var t;if("unavailable"===n.code||null!==(t=n.message)&&void 0!==t&&t.includes("offline")||!navigator.onLine)return _e(!0),Ce(30),void w("Network connection required. Please check your internet connection.");console.error("Error checking existing attempt:",n),$e(e)}},disabled:!t.allowed||!i,children:[e.passkey?(0,Be.jsx)(bt,{}):null,"Start Test"]})]},e.id)})}),Y&&k&&(0,Be.jsx)("div",{className:"mcq-modal-overlay",children:(0,Be.jsxs)("div",{className:"mcq-modal",children:[(0,Be.jsxs)("div",{className:"mcq-modal-header",children:[(0,Be.jsx)("h3",{children:"Enter Passkey"}),(0,Be.jsx)("button",{onClick:()=>{X(!1),V(""),w(null)},children:(0,Be.jsx)(At,{})})]}),(0,Be.jsxs)("div",{className:"mcq-modal-body",children:[(0,Be.jsx)("p",{children:"Please enter the passkey to access this test:"}),(0,Be.jsx)("input",{ref:re,type:"password",placeholder:"Enter passkey",value:W,onChange:e=>{V(e.target.value),Z&&te("")},onKeyPress:e=>{"Enter"===e.key&&Ye()},className:"mcq-passkey-input ".concat(Z?"mcq-passkey-input-error":""),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),Z&&(0,Be.jsx)("div",{className:"mcq-error-small",style:{color:"#f44336",marginTop:"8px"},children:Z})]}),(0,Be.jsxs)("div",{className:"mcq-modal-footer",children:[(0,Be.jsx)("button",{onClick:()=>{X(!1),V(""),te(""),w(null)},children:"Cancel"}),(0,Be.jsx)("button",{onClick:Ye,disabled:G||!W.trim(),className:"mcq-validate-btn",children:G?"Validating...":"Validate"})]})]})}),cY]}):(0,Be.jsx)("div",{className:"mcq-error",children:x})]})},kY="1.0.1";window.cacheManager=Xd;const NY="app_version",AY=(e,t)=>{const n=e.split(".").map(Number),r=t.split(".").map(Number);for(let i=0;i<3;i++){if(n[i]>r[i])return 1;if(n[i]<r[i])return-1}return 0};class TY extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("Error:",e),console.error("Error Info:",t)}render(){return this.state.hasError?(0,Be.jsxs)("div",{style:{padding:"20px",textAlign:"center",maxWidth:"600px",margin:"0 auto",fontFamily:"Arial, sans-serif"},children:[(0,Be.jsx)("h1",{children:"Something went wrong"}),(0,Be.jsx)("p",{children:"Please try refreshing the page. If the problem persists, please contact support."}),(0,Be.jsx)("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",fontSize:"16px",cursor:"pointer",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px"},children:"Refresh Page"})]}):this.props.children}}const IY=e=>{let{children:t}=e;try{const e=localStorage.getItem("auth_data");if(!e)return(0,Be.jsx)(ve,{to:"/login",replace:!0});const n=JSON.parse(e);return"SEED-IT"===String((null===n||void 0===n?void 0:n.College)||"").trim().toUpperCase()?t:(0,Be.jsx)(ve,{to:"/student/dashboard",replace:!0})}catch(vR){return(0,Be.jsx)(ve,{to:"/login",replace:!0})}},DY=()=>{const[e,n]=(0,t.useState)(!0),[r,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{let e=!0,t=null;const r=(t,n)=>{if(e)try{t(n)}catch(VD){console.warn("State update failed:",VD)}};return(async()=>{try{await Xd.initCacheSystem();const e=!(!Le.get("user_session")&&!Le.get("user_token"));r(i,e);const t=Le.get(NY);if(t!==kY)if(Le.set(NY,kY,{expires:365}),t){0!==AY(kY,t)&&await Xd.clearCacheOnVersionChange(t,kY)}else await Xd.clearCacheOnVersionChange(null,kY)}catch(e){console.error("Initialization error:",e),r(o,e.message)}finally{t=setTimeout(()=>{r(n,!1)},100)}})(),()=>{e=!1,t&&clearTimeout(t);try{Xd.clearMemoryCache()}catch(VD){console.warn("Cleanup error:",VD)}}},[]),a?(0,Be.jsxs)("div",{style:{padding:"20px",textAlign:"center",maxWidth:"600px",margin:"0 auto",fontFamily:"Arial, sans-serif"},children:[(0,Be.jsx)("h1",{children:"Something went wrong"}),(0,Be.jsx)("p",{children:a}),(0,Be.jsx)("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",fontSize:"16px",cursor:"pointer",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px"},children:"Retry"})]}):e?(0,Be.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",backgroundColor:"#f4f6f9"},children:[(0,Be.jsx)("div",{style:{marginBottom:"20px"},children:(0,Be.jsx)("img",{src:"https://i.ibb.co/xq80RrBW/SEED-Logo.webp",alt:"SEED-IT Logo",style:{width:"150px",height:"auto"}})}),(0,Be.jsx)("p",{style:{color:"#666",fontSize:"16px",fontFamily:"Arial, sans-serif"},children:"Loading... Please wait"})]}):(0,Be.jsx)(TY,{children:(0,Be.jsx)(Ae,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,Be.jsxs)(xe,{children:[(0,Be.jsx)(ye,{path:"/",element:(0,Be.jsx)(Ue,{})}),(0,Be.jsx)(ye,{path:"/home",element:(0,Be.jsx)(Ue,{})}),(0,Be.jsx)(ye,{path:"/login",element:(0,Be.jsx)(Jd,{})}),(0,Be.jsx)(ye,{path:"/register",element:(0,Be.jsx)(BD,{})}),(0,Be.jsx)(ye,{path:"/trainer",element:(0,Be.jsx)(IY,{children:(0,Be.jsx)(zD,{})})}),(0,Be.jsx)(ye,{path:"/student/dashboard",element:(0,Be.jsx)(Dm,{})}),(0,Be.jsx)(ye,{path:"/student/mcq",element:(0,Be.jsx)(CY,{})}),(0,Be.jsx)(ye,{path:"/student/mcq/:testSlug",element:(0,Be.jsx)(CY,{})}),(0,Be.jsx)(ye,{path:"/staff/dashboard",element:(0,Be.jsx)(MD,{})})]})})})},RY=()=>{const e=document.getElementById("root");if(e)try{i.createRoot(e).render(((()=>{const e=navigator.userAgent.includes("QtWebEngine")||navigator.userAgent.includes("QtWebKit"),t=!0===window.pyqtFlag,n="function"===typeof window.pyqtAppReady,r=!navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("Firefox")&&!navigator.userAgent.includes("Safari"),i=!1;console.log("PyQt detection results:",{userAgentCheck:e,flagCheck:t,functionCheck:n,notBrowserCheck:r,devOverride:i})})(),(0,Be.jsx)(DY,{})))}catch(t){console.error("Error mounting app:",t)}else console.error("Root element not found")};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",RY):RY()})()})();
//# sourceMappingURL=main.dd073182.js.map